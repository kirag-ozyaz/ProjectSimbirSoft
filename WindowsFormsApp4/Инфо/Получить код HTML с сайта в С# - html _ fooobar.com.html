<!DOCTYPE html>
<!-- saved from url=(0068)https://fooobar.com/questions/112569/get-html-code-from-website-in-c -->
<html lang="ru-RU"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Получить код HTML с сайта в С# - html | fooobar.com</title>
<link rel="preload" as="script" href="./Получить код HTML с сайта в С# - html _ fooobar.com_files/tag.js.загрузка">
<link rel="preload" as="font" type="font/woff2" href="https://fooobar.com/fonts/glyphicons-halflings-regular.woff2" crossorigin="">

<meta name="viewport" content="initial-scale=1.0, width=device-width">
<meta name="theme-color" content="#ffffff">
<meta name="format-detection" content="telephone=no">
<meta name="description" content="Как получить код HTML с веб-сайта, сохранить его и найти какой-то текст с помощью выражения LINQ?

Я использую следующий код, чтобы получить источник веб-страницы:

public static String code(string Url)
{
    HttpWebRequest myRequest = (HttpWebReques">
<link href="https://fooobar.com/questions/112569/get-html-code-from-website-in-c" rel="canonical">
<link href="./Получить код HTML с сайта в С# - html _ fooobar.com_files/bootstrap.min.css" rel="stylesheet">
<link href="./Получить код HTML с сайта в С# - html _ fooobar.com_files/github-gist.css" rel="stylesheet">
<link href="./Получить код HTML с сайта в С# - html _ fooobar.com_files/site.css" rel="stylesheet"> <link rel="stylesheet" href="./Получить код HTML с сайта в С# - html _ fooobar.com_files/vad.css">
<script type="text/javascript" src="./Получить код HTML с сайта в С# - html _ fooobar.com_files/context.js.загрузка" async=""></script><script type="text/javascript" src="./Получить код HTML с сайта в С# - html _ fooobar.com_files/context.js.загрузка" async=""></script><script type="text/javascript" src="./Получить код HTML с сайта в С# - html _ fooobar.com_files/context.js.загрузка" async=""></script><script type="text/javascript" src="./Получить код HTML с сайта в С# - html _ fooobar.com_files/context.js.загрузка" async=""></script><script type="text/javascript" src="./Получить код HTML с сайта в С# - html _ fooobar.com_files/context.js.загрузка" async=""></script><script async="" src="./Получить код HTML с сайта в С# - html _ fooobar.com_files/tag.js.загрузка"></script><script src="./Получить код HTML с сайта в С# - html _ fooobar.com_files/mvpt.min.js.загрузка" id="ms" async=""></script><script charset="utf-8" src="./Получить код HTML с сайта в С# - html _ fooobar.com_files/3def39055e9db7d887e2.js.загрузка" crossorigin="anonymous" importance="high"></script><script async="" crossorigin="anonymous" src="./Получить код HTML с сайта в С# - html _ fooobar.com_files/host.js.загрузка"></script><link rel="preconnect" href="https://yastatic.net/"><link rel="preconnect" href="https://avatars.mds.yandex.net/"><link rel="preconnect" href="https://mc.yandex.ru/"><meta id="https://yastatic.net/partner-code-bundles/42626/context_static.js"><link rel="preconnect" href="https://ads.adfox.ru/"><script charset="utf-8" src="./Получить код HTML с сайта в С# - html _ fooobar.com_files/e719f8a701e90618b0e7.js.загрузка" crossorigin="anonymous" importance="high"></script><script charset="utf-8" src="./Получить код HTML с сайта в С# - html _ fooobar.com_files/1a27454f1f0efa343ff4.js.загрузка" crossorigin="anonymous" importance="high"></script><script charset="utf-8" src="./Получить код HTML с сайта в С# - html _ fooobar.com_files/396a1167d70821abf186.js.загрузка" crossorigin="anonymous" importance="high"></script><script charset="utf-8" src="./Получить код HTML с сайта в С# - html _ fooobar.com_files/2710944224f5f6585ce7.js.загрузка" crossorigin="anonymous" importance="high"></script></head><body><div id="wa" style="display:block; overflow:hidden; position: fixed; right: 1px; bottom: 1px;z-index: 9999; width: 420px;"><div id="adv" style="display: none;"><div id="mv-content-roll-3020" class="mv-content-roll-3020-wrap" style="padding: 0px; margin: 0px; display: none; overflow: hidden; text-align: center; float: none; clear: both; width: 100%; height: 1px; transition: none 0s ease 0s; opacity: 0;"><div class="mv-content-roll-3020-inner-wrap" style="position: relative; display: inline-block; width: 420px; height: 240px;"><div class="mv-content-roll-3020-t-node" style="padding: 0px; margin: 0px; display: inline-block; background-color: transparent; transition: none 0s ease 0s; opacity: 0.001; pointer-events: none; transform: translateZ(0px); width: 100%; height: 100%; position: static; inset: auto; z-index: 0; box-shadow: none;"><div class="mv-content-roll-3020-t-div" style="margin: 0px; position: relative; overflow: hidden; width: 100%; height: 100%;"></div><div title="Close" class="mv-content-roll-3020-float-close" style="position: absolute; color: white; background-color: black; border-radius: 50%; z-index: 9999; font-size: 14px; width: 20px; height: 20px; line-height: 20px; text-align: center; cursor: pointer; right: 3px; top: -22px; display: none;">×</div></div></div></div></div></div>
<script type="text/javascript">    
        var adv = document.getElementById('adv');
var ms = document.getElementById('ms');

if (adv !== null && adv !== undefined) {adv.remove();}
if (ms !== null && ms !== undefined) {ms.remove();}

delete moevideo;
delete moevideoQueue;

var moevideoQueue = moevideoQueue || [];
var d=document.createElement('div');
d.id = 'adv';
document.getElementById('wa').appendChild(d);
var m=document.createElement("script");
m.src="https://moevideo.biz/embed/js/mvpt.min.js";
m.id = 'ms';
m.async=true;
document.head.appendChild(m);
moevideoQueue.push(function () {
    moevideo.ContentRoll({
        mode:"manual",
        el:"#adv",
        floatWidth:"419",
        floatPosition:"bottom right",
        floatCloseTimeout:10,
        ignorePlayers:true,
        floatMode:"full",
        maxRefresh: 4,
        callback: function(event) {
            console.warn("event1", event);
            if (event === "finish" || event === "error") {
    (function(d,f){
        var ai=d.createElement("script");
        ai.src=f;
        ai.async=true;
        ai.onload=function(){
            document.getElementById('wa').style.display = 'none';
            vinit([
                "https://bazr.ru:443/vast?cmid=101&playlistId=50315",
                "https://moevideo.biz:443/vast?ref=fooobar.com&impressionAfterPaid=1&vl=1&es=1&maxAds=5",
            ],
            function() {
                console.warn('twice');
                var adv = document.getElementById('adv');
                var ms = document.getElementById('ms');
                
                if (adv !== null && adv !== undefined) {adv.remove();}
                if (ms !== null && ms !== undefined) {ms.remove();}
                
                delete moevideo;
                delete moevideoQueue;
                
                window.moevideoQueue = moevideoQueue || [];
                var d=document.createElement('div');
                d.id = 'adv';
                document.getElementById('wa').appendChild(d);
                document.getElementById('wa').style.display = 'block';
                var m=document.createElement("script");
                m.src="https://moevideo.biz/embed/js/mvpt.min.js";
                m.id = 'ms';
                m.async=true;
                document.head.appendChild(m);
                moevideoQueue.push(function () {
                    moevideo.ContentRoll({
                        mode:"manual",
                        el:"#adv",
                        floatWidth:"419",
                        floatPosition:"bottom right",
                        floatCloseTimeout:10,
                        ignorePlayers:true,
                        floatMode:"full",
                        maxRefresh: 4,
                        callback: function(event) {
                            console.warn("event2", event);
                            if (event === "finish" || event === "error") {
                                (function(d,f){
                                    var ai=d.createElement("script");
                                    ai.src=f;
                                    ai.async=true;
                                    ai.onload=function(){
                                        document.getElementById('wa').style.display = 'none';
                                        vinit([
                                            "https://bazr.ru:443/vast?cmid=101&playlistId=50315",
                                            "https://moevideo.biz:443/vast?ref=fooobar.com&impressionAfterPaid=1&vl=1&es=1&maxAds=5",
                                        ],
                                        function() {
                                            console.warn('three');
                                            var adv = document.getElementById('adv');
                                            var ms = document.getElementById('ms');
                                            
                                            if (adv !== null && adv !== undefined) {adv.remove();}
                                            if (ms !== null && ms !== undefined) {ms.remove();}
                                            
                                            delete moevideo;
                                            delete moevideoQueue;
                                            
                                            window.moevideoQueue = moevideoQueue || [];
                                            var d=document.createElement('div');
                                            d.id = 'adv';
                                            document.getElementById('wa').appendChild(d);
                                            document.getElementById('wa').style.display = 'block';
                                            var m=document.createElement("script");
                                            m.src="https://moevideo.biz/embed/js/mvpt.min.js";
                                            m.id = 'ms';
                                            m.async=true;
                                            document.head.appendChild(m);
                                            moevideoQueue.push(function () {
                                                moevideo.ContentRoll({
                                                    mode:"manual",
                                                    el:"#adv",
                                                    floatWidth:"419",
                                                    floatPosition:"bottom right",
                                                    floatCloseTimeout:10,
                                                    ignorePlayers:true,
                                                    floatMode:"full",
                                                    maxRefresh: 4,
                                                    callback: function(event) {
                                                        console.warn("event3", event);
                                                        if (event === "finish" || event === "error") {
                                                            (function(d,f){
                                                                var ai=d.createElement("script");
                                                                ai.src=f;
                                                                ai.async=true;
                                                                ai.onload=function(){
                                                                    document.getElementById('wa').style.display = 'none';
                                                                    vinit([
                                                                        "https://bazr.ru:443/vast?cmid=101&playlistId=50315",
                                                                        "https://moevideo.biz:443/vast?ref=fooobar.com&impressionAfterPaid=1&vl=1&es=1&maxAds=5",
                                                                    ])
                                                                };
                                                                d.head.appendChild(ai);
                                                            })(document, '/js/vad.js?v=1.27');
                                                        }
                                                    }
                                                });
                                            });
                                        })
                                    };
                                    d.head.appendChild(ai);
                                })(document, '/js/vad.js?v=1.27');
                            }
                        }
                    });
                });
            }
        )};
        d.head.appendChild(ai);
    })(document, '/js/vad.js?v=1.27');
}
        }
    });
});
    </script> <link rel="apple-touch-icon" sizes="180x180" href="https://fooobar.com/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://fooobar.com/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://fooobar.com/favicon-16x16.png">
<script src="./Получить код HTML с сайта в С# - html _ fooobar.com_files/jquery.min.js.загрузка" type="text/javascript"></script>
<script type="text/javascript">
        (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)}; m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)}) (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym"); ym(56591014, "init", { clickmap:true, trackLinks:true, accurateTrackBounce:true });
    </script>
<style>
        script {
            display: none!important;
        }
    </style>


<noscript><div><img src="https://mc.yandex.ru/watch/56591014" style="position:absolute; left:-9999px;" alt=""/></div></noscript>
<nav id="w0" class="navbar-default navbar-fixed-top navbar"><div class="container flex"><div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#w0-collapse"><span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span></button><a class="navbar-brand" href="https://fooobar.com/"><span class="name">fooobar<span>com</span></span></a></div><div id="w0-collapse" class="collapse navbar-collapse"><div class="search hidden-xs">
<form class="search-top" action="https://fooobar.com/search" method="get">
<input autocomplete="off" autocapitalize="none" aria-label="Найти" title="Поиск" type="text" name="query" placeholder="поиск...">
</form>
</div>
<div class="mbord">
<ul id="w1" class="navbar-nav navbar-right nav"><li class="active"><a href="https://fooobar.com/questions">Вопросы</a></li>
<li><a href="https://fooobar.com/tags">Теги</a></li>
<li class="blue hidden-xs hidden-sm"><a href="https://fooobar.com/want-register">Регистрация</a></li></ul> <div class="search hidden-lg hidden-md hidden-sm">
<form class="search-top" action="https://fooobar.com/search" method="get">
<input autocomplete="off" autocapitalize="none" aria-label="Найти" title="Поиск" type="text" name="query" placeholder="поиск...">
</form>
</div>
</div>
</div></div></nav><script type="text/javascript">
    document.addEventListener('DOMContentLoaded', function () {
        document.querySelector('.navbar-toggle').addEventListener('click', function () {
            var menu = document.getElementById(this.dataset.target.substr(1));
            if (menu.classList.contains('open')) {
                menu.classList.remove('open');
            } else {
                menu.classList.add('open');
            }
        });
    });
</script>
<div class="wrap ">
<div id="yandex_rtb_R-A-248011-28" style="margin-bottom: 20px; width: 100%; display: block; margin-top: -19px;"></div>
<script type="text/javascript">
        (function(w, d, n, s, t) {
            w[n] = w[n] || [];
            w[n].push(function() {
                Ya.Context.AdvManager.render({
                    blockId: "R-A-248011-28",
                    renderTo: "yandex_rtb_R-A-248011-28",
                    async: true
                });
            });
            t = d.getElementsByTagName("script")[0];
            s = d.createElement("script");
            s.type = "text/javascript";
            s.src = "//an.yandex.ru/system/context.js";
            s.async = true;
            t.parentNode.insertBefore(s, t);
        })(this, this.document, "yandexContextAsyncCallbacks");
    </script>
<div class="container">
<div itemscope="" itemtype="http://schema.org/QAPage">
<div class="right-col">
<div class="hidden-xs hidden-sm sidebar">
<div class="c73b6d2f5ea8b44dcc6cfa943c0e78679" style="width: 300px; position: fixed; top: 61px; bottom: initial;">
<div id="yandex_rtb_R-A-248011-22"></div>
</div>
<script type="text/javascript">
    (function(w, d, n, s, t) {
        w[n] = w[n] || [];
        w[n].push(function() {
            Ya.Context.AdvManager.render({
                blockId: "R-A-248011-22",
                renderTo: "yandex_rtb_R-A-248011-22",
                async: true
            });
        });
        t = d.getElementsByTagName("script")[0];
        s = d.createElement("script");
        s.type = "text/javascript";
        s.src = "//an.yandex.ru/system/context.js";
        s.async = true;
        t.parentNode.insertBefore(s, t);
    })(this, this.document, "yandexContextAsyncCallbacks");
</script>
<script type="text/javascript">
    document.addEventListener('DOMContentLoaded', function(){
        window.navHeight = $('#w0').outerHeight();
        window.wh = $(window).height();
        setInterval(function () {
            window.navHeight = $('#w0').outerHeight();
            window.wh = $(window).height();
        });

        var awrap = $('.c73b6d2f5ea8b44dcc6cfa943c0e78679'),
            lastScrollTop = 0;

        $(window).on('scroll', function () {
            var st = $(this).scrollTop(),
                ot = awrap.offset().top,
                h = awrap.height(),
                dh = $(document).height();

            console.log(st, 'right_coll');

            if (st <= 290) {
                awrap.css({position : 'initial'});
            } else {
                if (h > window.wh) {
                    if (st > lastScrollTop
                        && (st + window.wh) >= h + ot + 20
                    ) {
                        if ((st + window.wh) <= dh - 152) {
                            awrap.css({position: 'fixed'});
                            awrap.css({bottom: 0});
                            awrap.css({top: 'initial'});
                        } else {
                            awrap.css({position : 'absolute'});
                            awrap.css({top : dh - h - 152 - 20});
                            awrap.css({bottom: 'initial'});
                        }
                    } else if (st < lastScrollTop && st <= ot-20-window.navHeight) {
                        awrap.css({position: 'fixed'});
                        awrap.css({top: 20+window.navHeight});
                        awrap.css({bottom: 'initial'});
                    } else if (awrap.css('position') !== 'absolute' && awrap.css('position') !== 'initial' && awrap.css('position') !== 'static') {
                        awrap.css({position : 'absolute'});
                        awrap.css({top : ot});
                        awrap.css({bottom: 'initial'});
                    }
                } else {
                    awrap.css({position: 'fixed'});
                    awrap.css({top: 20+window.navHeight});
                    awrap.css({bottom: 'initial'});
                }
            }
            lastScrollTop = st;
        });
    });
</script> </div>
</div>
<div class="main-col" itemprop="mainEntity" itemscope="" itemtype="http://schema.org/Question">
<div class="question-header">
<h1 itemprop="name">Получить код HTML с сайта в С#</h1>
</div>
<div class="question">
<div class="question-row">
<div class="question-text">
<div class="description" itemprop="text">
<p>Как получить код HTML с веб-сайта, сохранить его и найти какой-то текст с помощью выражения LINQ?</p>
<p>Я использую следующий код, чтобы получить источник веб-страницы:</p>
<pre class="prettyprint-override"><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title">code</span><span class="hljs-params">(<span class="hljs-built_in">string</span> Url)</span>
</span>{
    HttpWebRequest myRequest = (HttpWebRequest)WebRequest.Create(Url);
    myRequest.Method = <span class="hljs-string">"GET"</span>;
    WebResponse myResponse = myRequest.GetResponse();
    StreamReader sr = <span class="hljs-keyword">new</span> StreamReader(myResponse.GetResponseStream(), System.Text.Encoding.UTF8);
    <span class="hljs-built_in">string</span> result = sr.ReadToEnd();
    sr.Close();
    myResponse.Close();

    <span class="hljs-keyword">return</span> result;
 }
</code></pre>
<p>Как найти текст в div в источнике веб-страницы?</p> </div>
<div class="favorite hidden"><i class="far fa-star"></i></div>
<div class="votes-question">
<i class="glyphicon glyphicon-arrow-ups"></i>
<div class="vote-count greenc" itemprop="upvoteCount">
+71 </div>
<i class="glyphicon glyphicon-arrow-down"></i>
</div>
<div class="tags">
<a href="https://fooobar.com/questions/tagged/html" class="tag" title="показать вопросы с меткой &#39;html&#39;" rel="tag">html</a>
<a href="https://fooobar.com/questions/tagged/c%23" class="tag" title="показать вопросы с меткой &#39;c#&#39;" rel="tag">c#</a>
<a href="https://fooobar.com/questions/tagged/linq" class="tag" title="показать вопросы с меткой &#39;linq&#39;" rel="tag">linq</a>
</div>
<div class="clearfix"></div>
<div class="action-time">
<span itemprop="author" itemscope="" itemtype="http://schema.org/Person"><span itemprop="name"><a href="https://stackoverflow.com/users/1911428/ggcodes" rel="noopener" target="_blank">ggcodes</a></span></span> <time title="2013-05-20 03:37" itemprop="dateCreated" datetime="2013-05-20T03:37:46+0000"> 20 мая '13 в 3:37</time>
</div>
<a class="aa-link" href="https://stackoverflow.com/questions/16642196/get-html-code-from-website-in-c" target="_blank" rel="noopener">источник</a>
<a class="s-link" href="https://fooobar.com/questions/112569/get-html-code-from-website-in-c" title="поделиться">поделиться</a>
<div class="clearfix"></div>
</div>
</div>
</div>
<div class="answers " id="answers_hash">
<div class="answers-header">
<span class="pull-left"><span itemprop="answerCount">6</span> ответов</span>
<div class="clearfix"></div>
</div>
<div class="answer-pager hidden">
</div>
<div class="answer accepted" id="699342_hash" itemscope="" itemtype="http://schema.org/Answer" itemprop="acceptedAnswer">
<div class="answer-row">
<div class="answer-text">
<div class="desc" itemprop="text">
<p>Получение HTML-кода с веб-сайта. Вы можете использовать такой код.</p>
<pre class="prettyprint-override"><code class="hljs cs"><span class="hljs-keyword">string</span> urlAddress = <span class="hljs-string">"http://google.com"</span>;

HttpWebRequest request = (HttpWebRequest)WebRequest.Create(urlAddress);
HttpWebResponse response = (HttpWebResponse)request.GetResponse();

<span class="hljs-keyword">if</span> (response.StatusCode == HttpStatusCode.OK)
{
  Stream receiveStream = response.GetResponseStream();
  StreamReader readStream = <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">if</span> (response.CharacterSet == <span class="hljs-literal">null</span>)
  {
     readStream = <span class="hljs-keyword">new</span> StreamReader(receiveStream);
  }
  <span class="hljs-keyword">else</span>
  {
     readStream = <span class="hljs-keyword">new</span> StreamReader(receiveStream, Encoding.GetEncoding(response.CharacterSet));
  }

  <span class="hljs-keyword">string</span> data = readStream.ReadToEnd();

  response.Close();
  readStream.Close();
}
</code></pre>
<div id="yandex_rtb_R-A-248011-3"></div>
<script type="text/javascript">
    (function(w, d, n, s, t) {
        w[n] = w[n] || [];
        w[n].push(function() {
            Ya.Context.AdvManager.render({
                blockId: "R-A-248011-3",
                renderTo: "yandex_rtb_R-A-248011-3",
                async: true
            });
        });
        t = d.getElementsByTagName("script")[0];
        s = d.createElement("script");
        s.type = "text/javascript";
        s.src = "//an.yandex.ru/system/context.js";
        s.async = true;
        t.parentNode.insertBefore(s, t);
    })(this, this.document, "yandexContextAsyncCallbacks");
</script>
<p>Это даст вам верный код <strong> HTML</strong> с веб-сайта. Но найти текст с помощью <strong> LINQ</strong> не так просто.
Возможно, лучше использовать регулярное выражение, но это плохо работает с кодом <strong> HTML</strong></p> </div>
<div class="votes-answer">
<i class="glyphicon glyphicon-arrow-ups"></i>
<div class="vote-count greenc" itemprop="upvoteCount">
+100 </div>
<i class="glyphicon glyphicon-arrow-down"></i>
</div>
<div class="clearfix"></div>
<div class="action-time">
<span itemprop="author" itemscope="" itemtype="http://schema.org/Person"><span itemprop="name"><a href="https://stackoverflow.com/users/1902667/syntaxerror" rel="noopener" target="_blank">SyntaxError</a></span></span> <time title="2013-05-20 03:47" itemprop="dateCreated" datetime="2013-05-20T03:47:13+0000"> 20 мая '13 в 3:47</time>
</div>
<a class="aa-link" href="https://stackoverflow.com/questions/16642196/get-html-code-from-website-in-c/16642279#16642279" target="_blank" rel="noopener">источник</a>
<a itemprop="url" class="s-link" href="https://fooobar.com/questions/112569/get-html-code-from-website-in-c/699342#699342" title="поделиться">поделиться</a>
<div class="clearfix"></div>
</div>
</div>
</div>
<div class="answer rltd" id="699346_hash" itemscope="" itemtype="http://schema.org/Answer" itemprop="suggestedAnswer">
<div class="answer-row">
<div class="answer-text">
<div class="desc" itemprop="text">
<p>Лучше вы можете использовать класс Webclient для упрощения своей задачи:</p>
<div id="yandex_rtb_R-A-248011-4"></div>
<script type="text/javascript">
    (function(w, d, n, s, t) {
        w[n] = w[n] || [];
        w[n].push(function() {
            Ya.Context.AdvManager.render({
                blockId: "R-A-248011-4",
                renderTo: "yandex_rtb_R-A-248011-4",
                async: true
            });
        });
        t = d.getElementsByTagName("script")[0];
        s = d.createElement("script");
        s.type = "text/javascript";
        s.src = "//an.yandex.ru/system/context.js";
        s.async = true;
        t.parentNode.insertBefore(s, t);
    })(this, this.document, "yandexContextAsyncCallbacks");
</script>
<pre class="prettyprint-override"><code class="hljs cpp"><span class="hljs-keyword">using</span> System.Net;

<span class="hljs-keyword">using</span> (WebClient client = <span class="hljs-keyword">new</span> WebClient())
{
    <span class="hljs-built_in">string</span> htmlCode = client.DownloadString(<span class="hljs-string">"http://somesite.com/default.html"</span>);
}
</code></pre> </div>
<div class="votes-answer">
<i class="glyphicon glyphicon-arrow-ups"></i>
<div class="vote-count greenc" itemprop="upvoteCount">
+151 </div>
<i class="glyphicon glyphicon-arrow-down"></i>
</div>
<div class="clearfix"></div>
<div class="action-time">
<span itemprop="author" itemscope="" itemtype="http://schema.org/Person"><span itemprop="name"><a href="https://stackoverflow.com/users/1412209/santosh-panda" rel="noopener" target="_blank">Santosh Panda</a></span></span> <time title="2013-05-20 04:38" itemprop="dateCreated" datetime="2013-05-20T04:38:30+0000"> 20 мая '13 в 4:38</time>
</div>
<a class="aa-link" href="https://stackoverflow.com/questions/16642196/get-html-code-from-website-in-c/16642695#16642695" target="_blank" rel="noopener">источник</a>
<a itemprop="url" class="s-link" href="https://fooobar.com/questions/112569/get-html-code-from-website-in-c/699346#699346" title="поделиться">поделиться</a>
<div class="clearfix"></div>
</div>
</div>
</div>
<div class="similar">
<a class="other-answers" onclick="if (!window.__cfRLUnblockHandlers) return false; scrollToOtherAns(&#39;699344_hash&#39;);" href="javascript:void(0);"><i class="glyphicon glyphicon-arrow-down" style="font-size: 9px;margin: 0 4px;"></i>другие ответы</a><p>Связанные вопросы</p><div><div class="votes-question accepted"><div class="vote-count">1323</div></div><a href="https://fooobar.com/questions/424/regex-match-open-tags-except-xhtml-self-contained-tags" target="_blank">RegEx соответствуют открытым тегам, за исключением тегов XHTML</a></div><div><div class="votes-question green"><div class="vote-count">5</div></div><a href="https://fooobar.com/questions/1274937/getting-the-value-of-javascripthtml-variables-in-c" target="_blank">Получение значения переменных JavaScript/HTML в С#</a></div><div><div class="votes-question green"><div class="vote-count">5</div></div><a href="https://fooobar.com/questions/1254521/webrequest-strange-notfound-error" target="_blank">WebRequest Странная ошибка NotFound</a></div><div><div class="votes-question accepted"><div class="vote-count">3</div></div><a href="https://fooobar.com/questions/2294576/how-to-get-media-item-details-in-sitecore" target="_blank">Как получить информацию о деталях мультимедиа в sitecore?</a></div><div><div class="votes-question accepted"><div class="vote-count">2</div></div><a href="https://fooobar.com/questions/5216517/get-html-via-url-in-xamarin-forms" target="_blank"> Получить HTML через URL-адрес в форматах Xamarin</a></div><div><div class="votes-question accepted"><div class="vote-count">0</div></div><a href="https://fooobar.com/questions/11208837/unwanted-img-transformation-when-downloading-html-source-code" target="_blank"> Нежелательное преобразование &lt;img&gt; при загрузке HTML-кода</a></div><div><div class="votes-question green"><div class="vote-count">0</div></div><a href="https://fooobar.com/questions/12928239/cant-get-innertext-html-c" target="_blank"> Не удается получить innertext html С#</a></div><div><div class="votes-question green"><div class="vote-count">0</div></div><a href="https://fooobar.com/questions/12749851/run-a-script-with-api-call-from-a-webpage-using-c" target="_blank"> Запустите сценарий с вызовом API с веб-страницы с помощью С#</a></div><div><div class="votes-question "><div class="vote-count">0</div></div><a href="https://fooobar.com/questions/12182361/get-some-specific-text-with-a-specfic-class-from-a-website-after-sign-in-c" target="_blank"> Получите определенный текст со специфицированным классом с веб-сайта после входа в С#</a></div><div><div class="votes-question accepted"><div class="vote-count">0</div></div><a href="https://fooobar.com/questions/11579818/read-api-result-in-aspnet" target="_blank"> Прочтите api в asp.net</a></div><br><p>Похожие вопросы</p><div><div class="votes-question accepted"><div class="vote-count">7205</div></div><a href="https://fooobar.com/questions/53/why-does-html-think-chucknorris-is-a-color" target="_blank"> Почему HTML считает "chucknorris" цветом?</a></div><div><div class="votes-question accepted"><div class="vote-count">6155</div></div><a href="https://fooobar.com/questions/80/what-is-the-difference-between-string-and-string-in-c" target="_blank">В чем разница между строкой и строкой в ​​С#?</a></div><div><div class="votes-question accepted"><div class="vote-count">3575</div></div><a href="https://fooobar.com/questions/238/how-do-i-enumerate-an-enum" target="_blank">Как перечислить перечисление?</a></div><div><div class="votes-question accepted"><div class="vote-count">2964</div></div><a href="https://fooobar.com/questions/345/cast-int-to-enum-in-c" target="_blank">Как привести int к enum?</a></div><div><div class="votes-question accepted"><div class="vote-count">2397</div></div><a href="https://fooobar.com/questions/508/what-are-the-correct-version-numbers-for-c" target="_blank">Каковы правильные номера версий для С#?</a></div><div><div class="votes-question accepted"><div class="vote-count">1929</div></div><a href="https://fooobar.com/questions/731/html-5-is-it-br-br-or-br" target="_blank">HTML 5: это сайт, &lt;br/ "&gt; или &lt;br/" &gt;?</a></div><div><div class="votes-question accepted"><div class="vote-count">1922</div></div><a href="https://fooobar.com/questions/693/what-are-valid-values-for-the-id-attribute-in-html" target="_blank">Каковы допустимые значения для атрибута id в HTML?</a></div><div><div class="votes-question accepted"><div class="vote-count">1786</div></div><a href="https://fooobar.com/questions/830/create-excel-xls-and-xlsx-file-from-c" target="_blank"> Как создать файл Excel (.XLS и .XLSX) в С# без установки Microsoft Office?</a></div><div><div class="votes-question accepted"><div class="vote-count">1658</div></div><a href="https://fooobar.com/questions/1103/get-int-value-from-enum" target="_blank">Получить значение int из enum в С#</a></div><div><div class="votes-question accepted"><div class="vote-count">1502</div></div><a href="https://fooobar.com/questions/1095/redirect-from-an-html-page" target="_blank">Перенаправление с HTML-страницы</a></div> </div>
<div class="answer bt" id="699344_hash" itemscope="" itemtype="http://schema.org/Answer" itemprop="suggestedAnswer">
<div class="answer-row">
<div class="answer-text">
<div class="desc" itemprop="text">
<p> Лучше всего использовать <a href="http://html-agility-pack.net/?z=codeplex" rel="nofollow noreferrer" src="">HTMLAgilityPack</a>. Вы также можете изучить использование <a href="https://code.google.com/p/fizzler" rel="nofollow noreferrer" src="">Fizzler</a> или <a href="https://github.com/jamietre/CsQuery" rel="nofollow noreferrer" src="">CSQuery в</a> зависимости от ваших потребностей при выборе элементов на найденной странице. Использование выражений LINQ или Regukar может привести к ошибкам, особенно когда HTML может быть искажен, отсутствует закрывающий тег, есть вложенные дочерние элементы и т.д.</p> <p> Вам нужно направить страницу в объект HtmlDocument, а затем выбрать нужный элемент.</p> <pre><code class="hljs cs"><span class="hljs-comment">// Call the page and get the generated HTML</span>
<span class="hljs-keyword">var</span> doc = <span class="hljs-keyword">new</span> HtmlAgilityPack.HtmlDocument();
HtmlAgilityPack.HtmlNode.ElementsFlags[<span class="hljs-string">"br"</span>] = HtmlAgilityPack.HtmlElementFlag.Empty;
doc.OptionWriteEmptyNodes = <span class="hljs-literal">true</span>;

<span class="hljs-keyword">try</span>
{
    <span class="hljs-keyword">var</span> webRequest = HttpWebRequest.Create(pageUrl);
    Stream stream = webRequest.GetResponse().GetResponseStream();
    doc.Load(stream);
    stream.Close();
}
<span class="hljs-keyword">catch</span> (System.UriFormatException uex)
{
    Log.Fatal(<span class="hljs-string">"There was an error in the format of the url: "</span> + itemUrl, uex);
    <span class="hljs-keyword">throw</span>;
}
<span class="hljs-keyword">catch</span> (System.Net.WebException wex)
{
    Log.Fatal(<span class="hljs-string">"There was an error connecting to the url: "</span> + itemUrl, wex);
    <span class="hljs-keyword">throw</span>;
}

<span class="hljs-comment">//get the div by id and then get the inner text </span>
<span class="hljs-keyword">string</span> testDivSelector = <span class="hljs-string">"//div[@id='test']"</span>;
<span class="hljs-keyword">var</span> divString = doc.DocumentNode.SelectSingleNode(testDivSelector).InnerHtml.ToString();
</code></pre> <p> [EDIT] На самом деле, это лом. Самый простой способ - использовать <a href="https://fizzlerex.codeplex.com/" rel="nofollow noreferrer" src="">FizzlerEx</a>, обновленную реализацию jQuery/CSS3-селекторов исходного проекта Fizzler.</p> <p> Пример кода прямо с их сайта:</p> <pre><code class="hljs cs"><span class="hljs-keyword">using</span> HtmlAgilityPack;
<span class="hljs-keyword">using</span> Fizzler.Systems.HtmlAgilityPack;

<span class="hljs-comment">//get the page</span>
<span class="hljs-keyword">var</span> web = <span class="hljs-keyword">new</span> HtmlWeb();
<span class="hljs-keyword">var</span> document = web.Load(<span class="hljs-string">"http://example.com/page.html"</span>);
<span class="hljs-keyword">var</span> page = document.DocumentNode;

<span class="hljs-comment">//loop through all div tags with item css class</span>
<span class="hljs-keyword">foreach</span>(<span class="hljs-keyword">var</span> item <span class="hljs-keyword">in</span> page.QuerySelectorAll(<span class="hljs-string">"div.item"</span>))
{
    <span class="hljs-keyword">var</span> title = item.QuerySelector(<span class="hljs-string">"h3:not(.share)"</span>).InnerText;
    <span class="hljs-keyword">var</span> date = DateTime.Parse(item.QuerySelector(<span class="hljs-string">"span:eq(2)"</span>).InnerText);
    <span class="hljs-keyword">var</span> description = item.QuerySelector(<span class="hljs-string">"span:has(b)"</span>).InnerHtml;
}
</code></pre> <p> Я не думаю, что это может быть проще, чем это.</p> </div>
<div class="votes-answer">
<i class="glyphicon glyphicon-arrow-ups"></i>
<div class="vote-count greenc" itemprop="upvoteCount">
+36 </div>
<i class="glyphicon glyphicon-arrow-down"></i>
</div>
<div class="clearfix"></div>
<div class="action-time">
<span itemprop="author" itemscope="" itemtype="http://schema.org/Person"><span itemprop="name"><a href="https://stackoverflow.com/users/661447/jammykam" rel="noopener" target="_blank">jammykam</a></span></span> <time title="2013-05-20 04:14" itemprop="dateCreated" datetime="2013-05-20T04:14:01+0000"> 20 мая '13 в 4:14</time>
</div>
<a class="aa-link" href="https://stackoverflow.com/questions/16642196/get-html-code-from-website-in-c/16642491#16642491" target="_blank" rel="noopener">источник</a>
<a itemprop="url" class="s-link" href="https://fooobar.com/questions/112569/get-html-code-from-website-in-c/699344#699344" title="поделиться">поделиться</a>
<div class="clearfix"></div>
</div>
</div>
</div>
<div class="answer" id="699347_hash" itemscope="" itemtype="http://schema.org/Answer" itemprop="suggestedAnswer">
<div class="answer-row">
<div class="answer-text">
<div class="desc" itemprop="text">
<p> Вот пример использования класса <code>HttpWebRequest</code> для получения URL</p> <pre><code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">buttonl_Click</span>(<span class="hljs-params"><span class="hljs-keyword">object</span> sender, EventArgs e</span>)</span> 
{ 
    String url = TextBox_url.Text;
    HttpWebRequest request = (HttpWebRequest) WebRequest.Create(url); 
    HttpWebResponse response = (HttpWebResponse) request.GetResponse(); 
    StreamReader sr = <span class="hljs-keyword">new</span> StreamReader(response.GetResponseStream()); 
    richTextBox1.Text = sr.ReadToEnd(); 
    sr.Close(); 
} 
</code></pre> </div>
<div class="votes-answer">
<i class="glyphicon glyphicon-arrow-ups"></i>
<div class="vote-count greenc" itemprop="upvoteCount">
+3 </div>
<i class="glyphicon glyphicon-arrow-down"></i>
</div>
<div class="clearfix"></div>
<div class="action-time">
<span itemprop="author" itemscope="" itemtype="http://schema.org/Person"><span itemprop="name"><a href="https://stackoverflow.com/users/4842297/mohamed-sayed" rel="noopener" target="_blank">Mohamed Sayed</a></span></span> <time title="2016-06-20 01:16" itemprop="dateCreated" datetime="2016-06-20T01:16:29+0000"> 20 июн. '16 в 1:16</time>
</div>
<a class="aa-link" href="https://stackoverflow.com/questions/16642196/get-html-code-from-website-in-c/37913478#37913478" target="_blank" rel="noopener">источник</a>
<a itemprop="url" class="s-link" href="https://fooobar.com/questions/112569/get-html-code-from-website-in-c/699347#699347" title="поделиться">поделиться</a>
<div class="clearfix"></div>
</div>
</div>
</div>
<div class="answer" id="699353_hash" itemscope="" itemtype="http://schema.org/Answer" itemprop="suggestedAnswer">
<div class="answer-row">
<div class="answer-text">
<div class="desc" itemprop="text">
<p>Я использую <a href="https://github.com/AngleSharp/AngleSharp" rel="nofollow noreferrer" src="">AngleSharp</a> и был очень доволен им.</p>
<p>Вот простой пример, как получить страницу:</p>
<pre class="prettyprint-override"><code class="hljs javascript"><span class="hljs-keyword">var</span> config = Configuration.Default.WithDefaultLoader();
<span class="hljs-keyword">var</span> <span class="hljs-built_in">document</span> = <span class="hljs-keyword">await</span> BrowsingContext.New(config).OpenAsync(<span class="hljs-string">"https://www.google.com"</span>);
</code></pre>
<p>И теперь у вас есть веб-страница в переменной документа. Затем вы можете легко получить к нему доступ с помощью LINQ или других методов. Например, если вы хотите получить строковое значение из таблицы HTML:</p>
<pre class="prettyprint-override"><code class="hljs javascript"><span class="hljs-keyword">var</span> someStringValue = <span class="hljs-built_in">document</span>.All.Where(<span class="hljs-function"><span class="hljs-params">m</span> =&gt;</span>
        m.LocalName == <span class="hljs-string">"td"</span> &amp;&amp;
        m.HasAttribute(<span class="hljs-string">"class"</span>) &amp;&amp;
        m.GetAttribute(<span class="hljs-string">"class"</span>).Contains(<span class="hljs-string">"pid-1-bid"</span>)
    ).ElementAt(<span class="hljs-number">0</span>).TextContent.ToString();
</code></pre>
<p>Чтобы использовать селектор CSS, см. <a href="https://github.com/AngleSharp/AngleSharp/wiki/Examples" rel="nofollow noreferrer" src="">Примеры AngleSharp</a>.</p> </div>
<div class="votes-answer">
<i class="glyphicon glyphicon-arrow-ups"></i>
<div class="vote-count greenc" itemprop="upvoteCount">
+3 </div>
<i class="glyphicon glyphicon-arrow-down"></i>
</div>
<div class="clearfix"></div>
<div class="action-time">
<span itemprop="author" itemscope="" itemtype="http://schema.org/Person"><span itemprop="name"><a href="https://stackoverflow.com/users/4500217/tickseeker" rel="noopener" target="_blank">Tickseeker</a></span></span> <time title="2017-07-19 11:23" itemprop="dateCreated" datetime="2017-07-19T11:23:35+0000"> 19 июл. '17 в 11:23</time>
</div>
<a class="aa-link" href="https://stackoverflow.com/questions/16642196/get-html-code-from-website-in-c/45189100#45189100" target="_blank" rel="noopener">источник</a>
<a itemprop="url" class="s-link" href="https://fooobar.com/questions/112569/get-html-code-from-website-in-c/699353#699353" title="поделиться">поделиться</a>
<div class="clearfix"></div>
</div>
</div>
</div>
<div class="answer last" id="699348_hash" itemscope="" itemtype="http://schema.org/Answer" itemprop="suggestedAnswer">
<div class="answer-row">
<div class="answer-text">
<div class="desc" itemprop="text">
<p>Попробуйте это решение. Он отлично работает.</p>
<pre class="prettyprint-override"><code class="hljs cs"> <span class="hljs-keyword">try</span>{
        String url = textBox1.Text;
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
        HttpWebResponse response = (HttpWebResponse)request.GetResponse();
        StreamReader sr = <span class="hljs-keyword">new</span> StreamReader(response.GetResponseStream());
        HtmlAgilityPack.HtmlDocument doc = <span class="hljs-keyword">new</span> HtmlAgilityPack.HtmlDocument();
        doc.Load(sr);
        <span class="hljs-keyword">var</span> aTags = doc.DocumentNode.SelectNodes(<span class="hljs-string">"//a"</span>);
        <span class="hljs-keyword">int</span> counter = <span class="hljs-number">1</span>;
        <span class="hljs-keyword">if</span> (aTags != <span class="hljs-literal">null</span>)
        {
            <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> aTag <span class="hljs-keyword">in</span> aTags)
            {
                richTextBox1.Text +=  aTag.InnerHtml +  <span class="hljs-string">"\n"</span> ;
                counter++;
            }
        }
        sr.Close();
        }
        <span class="hljs-keyword">catch</span> (Exception ex)
        {
            MessageBox.Show(<span class="hljs-string">"Failed to retrieve related keywords."</span> + ex);
        }
</code></pre> </div>
<div class="votes-answer">
<i class="glyphicon glyphicon-arrow-ups"></i>
<div class="vote-count greenc" itemprop="upvoteCount">
+1 </div>
<i class="glyphicon glyphicon-arrow-down"></i>
</div>
<div class="clearfix"></div>
<div class="action-time">
<span itemprop="author" itemscope="" itemtype="http://schema.org/Person"><span itemprop="name"><a href="https://stackoverflow.com/users/7277948/youssef" rel="noopener" target="_blank">youssef</a></span></span> <time title="2016-12-10 21:03" itemprop="dateCreated" datetime="2016-12-10T21:03:47+0000"> 10 дек. '16 в 21:03</time>
</div>
<a class="aa-link" href="https://stackoverflow.com/questions/16642196/get-html-code-from-website-in-c/41080311#41080311" target="_blank" rel="noopener">источник</a>
<a itemprop="url" class="s-link" href="https://fooobar.com/questions/112569/get-html-code-from-website-in-c/699348#699348" title="поделиться">поделиться</a>
<div class="clearfix"></div>
</div>
</div>
</div>
<div class="answer-pager hidden">
</div>

<div id="yandex_rtb_R-A-248011-7"></div>
<script type="text/javascript">
    (function(w, d, n, s, t) {
        w[n] = w[n] || [];
        w[n].push(function() {
            Ya.Context.AdvManager.render({
                blockId: "R-A-248011-7",
                renderTo: "yandex_rtb_R-A-248011-7",
                async: true
            });
        });
        t = d.getElementsByTagName("script")[0];
        s = d.createElement("script");
        s.type = "text/javascript";
        s.src = "//an.yandex.ru/system/context.js";
        s.async = true;
        t.parentNode.insertBefore(s, t);
    })(this, this.document, "yandexContextAsyncCallbacks");
</script>
</div>
<div class="bottom-notice m-b-50">
<p>Посмотрите другие вопросы по меткам <a href="https://fooobar.com/questions/tagged/html" class="tag" title="показать вопросы с меткой &#39;html&#39;" rel="tag">html</a>
<a href="https://fooobar.com/questions/tagged/c%23" class="tag" title="показать вопросы с меткой &#39;c#&#39;" rel="tag">c#</a>
<a href="https://fooobar.com/questions/tagged/linq" class="tag" title="показать вопросы с меткой &#39;linq&#39;" rel="tag">linq</a>
или
<a class="btn btn-sm btn-block btn-primary m-t-5" href="https://fooobar.com/want-register">Задайте вопрос</a> </p>
</div>
</div>
</div>
</div>
</div>
<footer class="footer">
<div class="container">
<div class="row relative">
<div class="col-sm-9">
<ul>
<li><a href="https://fooobar.com/policy/opt-out">Opt out policy</a></li>
</ul>
</div>
<div class="col-sm-3 ntf">
<div class="license">
content licensed under <a class="srl" href="https://creativecommons.org/licenses/by-sa/4.0/" rel="nofollow noopener noreferrer license" target="_blank">cc by-sa 4.0</a> with attribution required
</div>
</div>
</div>
</div>
</footer>
<script src="./Получить код HTML с сайта в С# - html _ fooobar.com_files/highlight.js.загрузка" type="text/javascript"></script>
<script src="./Получить код HTML с сайта в С# - html _ fooobar.com_files/site.js.загрузка" type="text/javascript"></script>

</body></html>