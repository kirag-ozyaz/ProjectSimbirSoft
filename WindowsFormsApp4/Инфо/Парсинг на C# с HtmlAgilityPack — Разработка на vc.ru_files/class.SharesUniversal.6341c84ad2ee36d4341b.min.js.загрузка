(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{1266:function(e,t,n){"use strict";n(933)},1267:function(e,t,n){(t=n(435)(!1)).push([e.i,'.v-shares-embed__preview {\n  --ratio: 56.25%;\n  background-color: #000;\n  position: relative;\n  margin-bottom: 16px;\n}\n.v-shares-embed__preview::before {\n  content: \'\';\n  display: block;\n  padding-top: var(--ratio);\n}\n.v-shares-embed__preview iframe {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n.v-shares-embed__title {\n  font-size: 22px;\n  line-height: 1.3em;\n  font-weight: 500;\n  margin-bottom: 16px;\n}\n.v-shares-embed__subtitle {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n  align-items: center;\n  font-size: 16px;\n  line-height: 1.5em;\n  font-weight: 500;\n  margin-bottom: 8px;\n}\n.v-shares-embed__copy {\n  cursor: pointer;\n  color: #595959;\n  margin-left: auto;\n}\n.v-shares-embed__copy:hover {\n  color: #4683d9;\n}\n.v-shares-embed__copy .icon {\n  display: block;\n}\n.v-shares-embed__code {\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  width: 100%;\n  resize: vertical;\n  font-family: Menlo, Consolas, "Lucida Console", Monaco, "Courier New", Courier, monospace;\n  font-size: 13px;\n  line-height: 1.4em;\n  padding: 12px 24px 12px 16px;\n  border-radius: 4px;\n  background: rgba(0,0,0,0.05);\n  border: 1px solid rgba(0,0,0,0.1);\n}\n.v-shares-embed__code:hover {\n  border-color: rgba(0,0,0,0.2);\n}\n.v-shares-embed__code:focus {\n  border-color: #4683d9;\n  outline: none;\n}\n',""]),e.exports=t},1268:function(e,t,n){"use strict";n(934)},1269:function(e,t,n){(t=n(435)(!1)).push([e.i,".v-shares--active {\n  position: relative;\n}\n.v-shares svg {\n  display: block;\n}\n.v-shares__button {\n  color: #595959;\n  cursor: pointer;\n  overflow: hidden;\n}\n@media (hover: hover) {\n.v-shares__button:hover {\n    color: #4683d9;\n}\n}\n.v-shares .popover {\n/**\n    * Increased from 2 to 10 (10 - reserve) to prevent this situation:\n    * https://cmtt-ru.atlassian.net/browse/UGC-223\n    */\n  z-index: 10;\n  margin-top: 8px;\n  left: 50%;\n  -webkit-transform: translateX(-50%);\n  transform: translateX(-50%);\n}\n",""]),e.exports=t},1578:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return O}));var i=n(438),o=n.n(i),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.onClickOutside,expression:"onClickOutside"}],ref:"container",class:["v-shares",{"v-shares--active":e.isPopoverActive}],attrs:{title:e.$gettext("Share")}},[n("div",{staticClass:"v-shares__button",on:{click:e.onToggleClick}},[n("icon",{attrs:{name:"v_share",width:"24",height:"24"}})],1),e._v(" "),e.isPopoverActive?n("popover",{model:{value:e.popoverItems,callback:function(t){e.popoverItems=t},expression:"popoverItems"}}):e._e()],1)};s._withStripped=!0;var r=n(523),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"v-shares-embed"},[n("div",{staticClass:"v-shares-embed__title"},[n("translate",{attrs:{"translate-context":"Share"}},[e._v("\n      Embed\n    ")])],1),e._v(" "),n("div",{staticClass:"v-shares-embed__preview",style:{"--ratio":100*e.previewRatio+"%"},domProps:{innerHTML:e._s(e.value)}}),e._v(" "),n("div",{staticClass:"v-shares-embed__subtitle"},[n("translate",[e._v("\n      Embed code\n    ")]),e._v(" "),n("div",{staticClass:"v-shares-embed__copy",on:{click:e.copyCode}},[n("icon",{attrs:{name:"v_copy",width:"24",height:"24"}})],1)],1),e._v(" "),n("textarea",{ref:"code",staticClass:"v-shares-embed__code",attrs:{readonly:""},domProps:{value:e.value},on:{focus:e.onCodeFocus}})])};a._withStripped=!0;var l=n(437),c=n(144),p=n(5),u={name:"LayoutShares",components:{Icon:l.a},props:{value:{type:String,required:!0}},computed:{previewRatio(){const e=parseInt(/width="(\d+)"/gi.exec(this.value)[1],10),t=parseInt(/height="(\d+)"/gi.exec(this.value)[1],10);return e&&t?parseFloat((t/e).toFixed(4)):56.25}},mounted(){const{code:e}=this.$refs;e.style.height="1px",e.style.height=e.scrollHeight+2+"px"},methods:{copyCode(){Object(c.a)(this.value,e=>{e&&Object(p.success)(this.$gettext("The embed code has been copied"))})},onCodeFocus(e){e.target.select()}}},d=(n(1266),n(434)),m=Object(d.a)(u,a,[],!1,null,null,null);m.options.__file="src/Components/Shares/vue/layout-shares-embed.vue";var h=m.exports,v=n(453),f=n(19),_=n(18),b={name:"LayoutShares",components:{Icon:l.a,Popover:v.default},data:()=>({isPopoverActive:!1,moduleShares:null,appCodename:window.__codename}),computed:{params(){return this.$root.params},copyButtonParams(){return{title:this.$gettext("Copy the link"),icon:"v_link",action:()=>{Object(c.a)(this.params.url,e=>{e&&(Object(p.success)(this.$gettext("The link has been copied")),this.isPopoverActive=!1,this.$popup.close())})}}},favoriteButtonParams(){return{title:this.params.isFavorited?this.$gettext("Remove from bookmarks"):this.$gettext("Add to bookmarks"),icon:this.params.isFavorited?"v_favorite_solid":"v_favorite",action:()=>{this.params.isFavorited=!this.params.isFavorited,this.$root.setFavoriteState(this.params.isFavorited),this.$popup.close()}}},embedButtonParams(){return{title:this.$pgettext("Share","Embed"),icon:"v_code",action:()=>{this.$popup.open(h,{maxWidth:680,props:{value:this.params.embed}}),this.isPopoverActive=!1}}},systemButtonParams(){return{title:this.$gettext("Share via..."),icon:"v_share",action:()=>{window.navigator.share({title:this.params.title,url:this.params.url}),this.$popup.close()}}},servicesPopoverItems(){const e={},t=Object.keys(this.params.services);return this.moduleShares.orderServicesByHistory(t).forEach(t=>{const{title:n,url:i}=this.params.services[t],o="v_"+t;e[t]={title:n,icon:o,action:()=>{this.openWindow(i),this.moduleShares.updateHistory(t)}}}),e},popoverItems(){const e=Object.values({copy:this.copyButtonParams,favorite:this.favoriteButtonParams,...this.servicesPopoverItems});return this.params.embed&&(e.embed=this.embedButtonParams),e.forEach(e=>{e.label=e.title}),e},mobilePopoverItems(){const e={copy:this.copyButtonParams,favorite:this.favoriteButtonParams},t=[e],n="function"==typeof window.navigator.share;return this.params.embed&&(e.embed=this.embedButtonParams),n&&t.push({system:this.systemButtonParams}),t}},created(){this.moduleShares=Air.import("module.shares")},mounted(){this.$root.$on("openShareDialog",this.onToggleClick)},beforeDestroy(){this.$root.$off()},methods:{onToggleClick(){f.e.is("mobile")?this.$popup.open(r.a,{align:"bottom",theme:"gray",props:{title:"Share",items:this.mobilePopoverItems}}):this.isPopoverActive=!this.isPopoverActive},onClickOutside(){this.isPopoverActive=!1},openWindow(e){const t=(Object(_.f)()-600)/2,n=(Object(_.e)()-450)/2;window.open(e,"_blank",`toolbar=yes,scrollbars=yes,resizable=yes,width=600,height=450,left=${t},top=${n}`)}}},g=(n(1268),Object(d.a)(b,s,[],!1,null,null,null));g.options.__file="src/Components/Shares/vue/layout-shares.vue";var x=g.exports,y=n(441),w=n(480),k=n(45),C=n.n(k),S=n(68),$=n(0);class O{constructor({element:e}){this.wrapper=e,this.container=null,this.moduleFavoriteModel=null,this.params=null,this.app=null,this.prepareParams(),this.prepareContainer(),this.init()}prepareParams(){const e=Object($.data)(this.wrapper,"data");try{const t=e?JSON.parse(e):{};this.params=t}catch(e){console.error("SharesUniversal params prepare:",e)}}prepareContainer(){this.container=document.createElement("div"),this.wrapper.appendChild(this.container)}init(){o.a.use(C.a,{translations:S,defaultLanguage:window.__i18nLocale}),o.a.directive("click-outside",y.a),o.a.use(w.a),this.app=new o.a({el:this.container,data:{params:this.params},methods:{setFavoriteState:e=>{this.moduleFavoriteModel.setState({id:this.params.id,type:1,state:e})}},render:e=>e(x)}),this.moduleFavoriteModel=Air.import("module.favorite_model"),this.moduleFavoriteModel.on("Updated "+this.params.id,e=>{this.params.isFavorited=e.state});const e=window.Air&&window.Air.get("module.hawk");e&&e.connectVue(o.a)}destroy(){this.moduleFavoriteModel&&(this.moduleFavoriteModel.off(),this.moduleFavoriteModel=null),this.app.$popup&&this.app.$popup.close(),this.app&&(this.app.$destroy(),this.app=null),this.params=null,this.wrapper=null,this.container=null}openShareDialog(){this.app.$emit("openShareDialog")}}},435:function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var o=(r=i,a=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(l," */")),s=i.sources.map((function(e){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(e," */")}));return[n].concat(s).concat([o]).join("\n")}var r,a,l;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,i){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(i)for(var s=0;s<this.length;s++){var r=this[s][0];null!=r&&(o[r]=!0)}for(var a=0;a<e.length;a++){var l=[].concat(e[a]);i&&o[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},436:function(e,t,n){"use strict";function i(e,t){for(var n=[],i={},o=0;o<t.length;o++){var s=t[o],r=s[0],a={id:e+":"+o,css:s[1],media:s[2],sourceMap:s[3]};i[r]?i[r].parts.push(a):n.push(i[r]={id:r,parts:[a]})}return n}n.r(t),n.d(t,"default",(function(){return m}));var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var s={},r=o&&(document.head||document.getElementsByTagName("head")[0]),a=null,l=0,c=!1,p=function(){},u=null,d="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function m(e,t,n,o){c=n,u=o||{};var r=i(e,t);return h(r),function(t){for(var n=[],o=0;o<r.length;o++){var a=r[o];(l=s[a.id]).refs--,n.push(l)}t?h(r=i(e,t)):r=[];for(o=0;o<n.length;o++){var l;if(0===(l=n[o]).refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete s[l.id]}}}}function h(e){for(var t=0;t<e.length;t++){var n=e[t],i=s[n.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](n.parts[o]);for(;o<n.parts.length;o++)i.parts.push(f(n.parts[o]));i.parts.length>n.parts.length&&(i.parts.length=n.parts.length)}else{var r=[];for(o=0;o<n.parts.length;o++)r.push(f(n.parts[o]));s[n.id]={id:n.id,refs:1,parts:r}}}}function v(){var e=document.createElement("style");return e.type="text/css",r.appendChild(e),e}function f(e){var t,n,i=document.querySelector('style[data-vue-ssr-id~="'+e.id+'"]');if(i){if(c)return p;i.parentNode.removeChild(i)}if(d){var o=l++;i=a||(a=v()),t=g.bind(null,i,o,!1),n=g.bind(null,i,o,!0)}else i=v(),t=x.bind(null,i),n=function(){i.parentNode.removeChild(i)};return t(e),function(i){if(i){if(i.css===e.css&&i.media===e.media&&i.sourceMap===e.sourceMap)return;t(e=i)}else n()}}var _,b=(_=[],function(e,t){return _[e]=t,_.filter(Boolean).join("\n")});function g(e,t,n,i){var o=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=b(t,o);else{var s=document.createTextNode(o),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(s,r[t]):e.appendChild(s)}}function x(e,t){var n=t.css,i=t.media,o=t.sourceMap;if(i&&e.setAttribute("media",i),u.ssrId&&e.setAttribute("data-vue-ssr-id",t.id),o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},441:function(e,t,n){"use strict";t.a={bind(e,t,n){if("function"!=typeof t.value){const e=n.context.name;let i=`[Vue-click-outside:] provided expression '${t.expression}' is not a function, but has to be`;e&&(i+=`Found in component '${e}'`),console.warn(i)}const i=t.modifiers.bubble,o={mousedown(t){e.__vueClickOutside__.initialTarget=t.target},click(n){const o=e.__vueClickOutside__.initialTarget||n.target;null!==o.closest(".v-popup-container")||(i||!e.contains(o)&&e!==o)&&t.value(n)}};e.__vueClickOutside__={handlers:o,initialTarget:null},Object.keys(e.__vueClickOutside__.handlers).forEach(t=>{document.addEventListener(t,e.__vueClickOutside__.handlers[t])})},unbind(e,t){e.__vueClickOutside__&&Object.keys(e.__vueClickOutside__.handlers).forEach(t=>{document.removeEventListener(t,e.__vueClickOutside__.handlers[t])}),e.__vueClickOutside__=null}}},523:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"v-mobile-menu"},[n("div",{staticClass:"v-mobile-menu__header"},[e.title?n("div",{staticClass:"v-mobile-menu__name"},[e._v("\n      "+e._s(e.title)+"\n    ")]):e._e(),e._v(" "),n("div",{staticClass:"v-mobile-menu__close",on:{click:function(t){return e.$emit("close")}}},[n("icon",{attrs:{name:"v_close",width:"16",height:"16"}})],1)]),e._v(" "),e._l(e.filteredItems,(function(t,i){return n("div",{key:i,staticClass:"v-mobile-menu__list"},e._l(t,(function(t,i){return n(t.url?"a":"div",{key:i,tag:"component",staticClass:"v-mobile-menu__item",attrs:{href:t.url||!1,target:!!t.url&&"_blank"},on:{click:function(e){"function"==typeof t.action&&t.action()}}},[n("div",{staticClass:"v-mobile-menu__icon"},[t.icon?n("icon",{attrs:{name:t.icon,width:"24",height:"24"}}):e._e()],1),e._v(" "),n("div",{staticClass:"v-mobile-menu__title"},[n("span",[e._v(e._s(t.title))])]),e._v(" "),t.more?n("div",{staticClass:"v-mobile-menu__more"},[n("icon",{attrs:{name:"v_arrow_right",width:"20",height:"20"}})],1):e._e()])})),1)})),e._v(" "),e._t("default")],2)};i._withStripped=!0;var o={name:"LayoutMobileMenu",components:{Icon:n(437).a},props:{title:{type:String,default:""},items:{type:Object,default:()=>[]}},computed:{filteredItems(){return this.items.filter(e=>Object.keys(e).length)}}},s=(n(648),n(434)),r=Object(s.a)(o,i,[],!1,null,null,null);r.options.__file="src/Components/Ui/vue/layout/layout-mobile-menu.vue";t.a=r.exports},555:function(e,t,n){var i=n(649);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,n(436).default)("3062bb32",i,!1,{})},648:function(e,t,n){"use strict";n(555)},649:function(e,t,n){(t=n(435)(!1)).push([e.i,".v-mobile-menu {\n  --offset-x: 20px;\n  --offset-y: 20px;\n  --height: 48px;\n  --font-size: 16px;\n  padding: 0 var(--offset-x) var(--offset-y);\n}\n.v-mobile-menu__header {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n  align-items: center;\n  line-height: 1.5em;\n  font-weight: 500;\n  padding: 0 var(--offset-x);\n  margin-left: calc(var(--offset-x) * -1);\n  margin-right: calc(var(--offset-x) * -1);\n  height: 50px;\n  -webkit-box-sizing: border-box;\n  box-sizing: border-box;\n  position: -webkit-sticky;\n  position: sticky;\n  top: 0;\n  z-index: 1;\n  background-color: #fff;\n  margin-bottom: 2px;\n}\n.v-mobile-menu__name {\n  margin-top: 5px;\n}\n.v-mobile-menu__close {\n  margin-left: auto;\n  -ms-flex-item-align: start;\n  align-self: flex-start;\n  padding: 10px;\n  margin-right: calc(var(--offset-x) * -1);\n  cursor: pointer;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n  align-items: center;\n}\n.v-mobile-menu__close .icon {\n  display: block;\n}\n.v-mobile-menu__list:not(:last-child):after {\n  content: '';\n  display: block;\n  height: 1px;\n  background-color: rgba(0,0,0,0.1);\n  margin: 8px 0;\n  margin-left: 36px;\n  margin-right: calc(var(--offset-x) * -1);\n}\n.v-mobile-menu__list:last-child {\n  margin-bottom: -12px;\n}\n.v-mobile-menu__item {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n  align-items: center;\n  font-size: var(--font-size);\n  line-height: var(--height);\n  cursor: pointer;\n  white-space: nowrap;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.v-mobile-menu__icon {\n  width: 24px;\n  height: 24px;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n  align-items: center;\n  -ms-flex-pack: center;\n  justify-content: center;\n  margin-right: 12px;\n  color: #000;\n}\n.v-mobile-menu__icon .icon--v_favorite_solid {\n  fill: #4683d9;\n}\n.v-mobile-menu__title {\n  min-width: 0;\n  -ms-flex: 1;\n  flex: 1;\n}\n.v-mobile-menu__title span {\n  display: block;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.v-mobile-menu__more .icon {\n  display: block;\n}\n",""]),e.exports=t},933:function(e,t,n){var i=n(1267);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,n(436).default)("48ff03ee",i,!1,{})},934:function(e,t,n){var i=n(1269);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,n(436).default)("5d12891e",i,!1,{})}}]);