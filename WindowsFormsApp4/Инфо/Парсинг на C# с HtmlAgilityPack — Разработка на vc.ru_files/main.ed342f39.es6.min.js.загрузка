!function(e){function t(t){for(var n,o,s=t[0],r=t[1],a=0,l=[];a<s.length;a++)o=s[a],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&l.push(i[o][0]),i[o]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);for(c&&c(t);l.length;)l.shift()()}var n={},i={66:0};function o(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.e=function(e){var t=[],n=i[e];if(0!==n)if(n)t.push(n[2]);else{var s=new Promise((function(t,o){n=i[e]=[t,o]}));t.push(n[2]=s);var r,a=document.createElement("script");a.charset="utf-8",a.timeout=120,o.nc&&a.setAttribute("nonce",o.nc),a.src=function(e){return o.p+""+({3:"class.AccountingAdmin~class.BoosterConstructor~class.EtcControl~class.FeedSorting~class.ServicesSide~e98eb3b6",4:"vendors~class.Live~class.ServicesSidebar~class.SubsiteDetails~class.SubsiteSidebar~dropdown~sidebar",5:"class.AuthForm~class.DonatesCabinet~class.PopupManager~class.SharesUniversal~class.SubsiteHeader",6:"vendors~class.Cabinet~class.ContentTabs~class.Showcase~class.SubsiteDetails~class.SubsiteSidebar",8:"vendors~booster~class.DonateAttacher~vacancyBooster",9:"booster~vacancyBooster",10:"messenger-layout~messenger-panel-component",11:"vendors~charts~class.BoosterPromo",12:"vendors~class.ServicesHeader~class.SubsiteHeader",13:"AudioPlayer",14:"audio",15:"booster",16:"calendar",17:"charts",18:"class.AccountingAdmin",19:"class.AlfaCapital",20:"class.AuthForm",21:"class.Banners",22:"class.BoosterConstructor",23:"class.BoosterPromo",24:"class.Cabinet",25:"class.CheckCoubReadiness",26:"class.CitymobilMarks",27:"class.Comments",28:"class.ContentTabs",29:"class.DenisInvader",30:"class.DonateAttacher",31:"class.DonatesCabinet",32:"class.EtcControl",33:"class.FeedSorting",34:"class.Form",35:"class.Form2",36:"class.Live",37:"class.LiveStream",38:"class.MiniThesis",39:"class.NativeAd",40:"class.NotificationsLoader",41:"class.PopupManager",42:"class.ServicesHeader",43:"class.ServicesSidebar",44:"class.SharesUniversal",45:"class.Showcase",46:"class.SiteHeader",47:"class.SpecialValorant",48:"class.SubsiteCard",49:"class.SubsiteDetails",50:"class.SubsiteHeader",51:"class.SubsiteSidebar",52:"class.Writing",53:"class.psbHell",54:"code",55:"commercialContacts",56:"commercialSidebar",57:"commercialTabs",58:"complainSelect",59:"delimiter",60:"dropdown",61:"emoji",62:"hawk",63:"hljs",64:"inputSuggestion",65:"listEditable",67:"media",68:"messenger",69:"messenger-layout",70:"messenger-panel-component",71:"payment_receipt",72:"person",73:"photoswipe",74:"popup.ban",75:"popup.unban",76:"quiz",77:"raw",78:"repost",79:"sidebar",81:"specialStories",82:"splitButton",83:"subsitesRating",85:"vacancyBooster",86:"vote"}[e]||e)+"."+{0:"929afa52402375247a0e",1:"641d43894ac31f5cc8eb",2:"6f595eb566e55ebd3eb2",3:"b8937563e5a0fd589751",4:"714231bf8ddaacb32366",5:"738c222c5e8a8342aa89",6:"fe1f12ef06e65aa6b5d9",7:"3882b0adbf113836e97a",8:"372fdb049894df6aafb0",9:"686043d61803af081ed1",10:"1bffca2e9d66f9e8ce49",11:"20f3be68ac6213c93793",12:"5300160331139f0b7968",13:"4ede0e878134a40d8947",14:"7cab95aa991d90b37c1c",15:"5e45ba1281f3a5ef5e1b",16:"d0fecc557309e94b254c",17:"3b55a54d1cf860a41f38",18:"a781ef9ffde4f4363d9d",19:"c37d10c471cc7238770e",20:"4fb84cd39bae9f2fc0b1",21:"72b0c629a7c14517c2ac",22:"36f8e8fb4e6c0ad3afb3",23:"a5967b83e228bd574c18",24:"8b5b3fb6eddc7768da3c",25:"25118da519fada421a28",26:"8b2b33fbaf692f02ec8c",27:"d7eecaa0b3cef3d47484",28:"02872e98fc65ea451107",29:"b15ca6c83eddcdd45a1e",30:"618510598729c13fe30d",31:"a44c36283ff0bde31997",32:"0f9ce9d3654e7823f42b",33:"2ff0a0d46c2f8af6ac7c",34:"2a1685f4861ae1ca4eb7",35:"f882401d0886c75fe9a2",36:"1c98b64098189cb76426",37:"e856802d50aff25c5eba",38:"772a7b064ffb19c0f0b8",39:"dca4f84339df6e8bc840",40:"da9c26057197581be897",41:"3506f200b88d1164531d",42:"e0bfe6bffcadcbcc91c3",43:"5e1a8fea227dc9f568c7",44:"6341c84ad2ee36d4341b",45:"ef4719c14ebf3d764bff",46:"30073abf10ab846030f6",47:"3943113c8730338d1a3b",48:"0012cd83d0549862fba0",49:"e424e6eb4f6fc27b85e7",50:"b8a09cf1c92d9d22cd28",51:"d3b582ee530ae62a65c8",52:"7847d95b45911500b58a",53:"f25d86efb3546227eff5",54:"045b861080748ec77598",55:"138ecd6ccc0e14bef0f2",56:"d06a8ce9f35767395603",57:"bec6b90d976e190624de",58:"e94b0cbc0b7b34b1bc83",59:"168b4696e1920780a1e8",60:"66f6b69503e5876c4020",61:"712bd3d80ecfe21721a9",62:"37b14da217423fb44252",63:"818b718240195083887f",64:"8f2e2c3caba326aa2705",65:"c2974dde1c140099f0ee",67:"44ea089dbcc4733997ad",68:"79e53cafb7941b03ee51",69:"38abb8004302ae258c57",70:"fb76fc9d4c45540bf707",71:"3008ee1cdca680070aa2",72:"361a68adae6e90d9c6a8",73:"d5811b811feccb2559dc",74:"c297544f340b7ae868a5",75:"693495ecc8c4bcf53029",76:"8dc96a4e37fa353a3abf",77:"af304017a34058d943b6",78:"7c2c5c37a6e2093797b4",79:"4af4e2749816fba8c805",81:"77cfb4366801e88c6b69",82:"a2432f41bd0569a9f5f2",83:"d34a94ffa514be3e1f6c",85:"b83e9f9870271a535c9a",86:"86fa8114081fbd2220ab",88:"d3179be3a02f920ef772",89:"b8f3fe8e9f610aee0e67",90:"1ac6ac8d7aead6780ef6",91:"e37a76630ff8c1ba4a6a",92:"6cf8f4fe43f62a4d6053",93:"ba1b97dd7d02d2c75984"}[e]+".min.js"}(e);var c=new Error;r=function(t){a.onerror=a.onload=null,clearTimeout(l);var n=i[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+o+": "+s+")",c.name="ChunkLoadError",c.type=o,c.request=s,n[1](c)}i[e]=void 0}};var l=setTimeout((function(){r({type:"timeout",target:a})}),12e4);a.onerror=a.onload=r,document.head.appendChild(a)}return Promise.all(t)},o.m=e,o.c=n,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="https://vcstaticbf19cf1-a.akamaihd.net/static/build/vc.ru/",o.oe=function(e){throw console.error(e),e};var s=window.webpackJsonp=window.webpackJsonp||[],r=s.push.bind(s);s.push=t,s=s.slice();for(var a=0;a<s.length;a++)t(s[a]);var c=r;o(o.s=420)}([function(e,t,n){"use strict";n.r(t),n.d(t,"isHTMLElement",(function(){return c})),n.d(t,"isNodeList",(function(){return l})),n.d(t,"isHTMLCollection",(function(){return u})),n.d(t,"isArray",(function(){return d})),n.d(t,"dealWithArbitraryData",(function(){return h})),n.d(t,"each",(function(){return f})),n.d(t,"matches",(function(){return m})),n.d(t,"hasClass",(function(){return p})),n.d(t,"toggleClass",(function(){return g})),n.d(t,"addClass",(function(){return b})),n.d(t,"removeClass",(function(){return v})),n.d(t,"getClasses",(function(){return y})),n.d(t,"attr",(function(){return w})),n.d(t,"href",(function(){return _})),n.d(t,"data",(function(){return k})),n.d(t,"attrs",(function(){return C})),n.d(t,"getAttrNames",(function(){return S})),n.d(t,"copyAllAttrsFromOneToAnother",(function(){return x})),n.d(t,"copyAttrs",(function(){return A})),n.d(t,"dataToAttrs",(function(){return O})),n.d(t,"append",(function(){return T})),n.d(t,"prepend",(function(){return j})),n.d(t,"before",(function(){return E})),n.d(t,"after",(function(){return P})),n.d(t,"replace",(function(){return I})),n.d(t,"remove",(function(){return M})),n.d(t,"removeChildren",(function(){return $})),n.d(t,"findAll",(function(){return L})),n.d(t,"find",(function(){return R})),n.d(t,"hasChildElement",(function(){return D})),n.d(t,"parseHTML",(function(){return B})),n.d(t,"unwrapunwrap",(function(){return U})),n.d(t,"create",(function(){return N})),n.d(t,"make",(function(){return H})),n.d(t,"fragment",(function(){return F})),n.d(t,"clone",(function(){return V})),n.d(t,"textNode",(function(){return q})),n.d(t,"html",(function(){return z})),n.d(t,"appendHTML",(function(){return W})),n.d(t,"outerHtml",(function(){return Y})),n.d(t,"text",(function(){return X})),n.d(t,"children",(function(){return J})),n.d(t,"firstChild",(function(){return K})),n.d(t,"lastChild",(function(){return G})),n.d(t,"parent",(function(){return Q})),n.d(t,"eachParent",(function(){return Z})),n.d(t,"walk",(function(){return ee})),n.d(t,"isSameTags",(function(){return te})),n.d(t,"isElementHidden",(function(){return ne})),n.d(t,"isHidden",(function(){return ie})),n.d(t,"unwrap",(function(){return oe})),n.d(t,"parents",(function(){return se})),n.d(t,"belong",(function(){return re})),n.d(t,"belongToElement",(function(){return ae})),n.d(t,"next",(function(){return ce})),n.d(t,"prev",(function(){return le})),n.d(t,"delegateEvent",(function(){return ue})),n.d(t,"on",(function(){return de})),n.d(t,"outclick",(function(){return he})),n.d(t,"multioutclick",(function(){return fe})),n.d(t,"click",(function(){return me})),n.d(t,"enter",(function(){return pe})),n.d(t,"escape",(function(){return ge})),n.d(t,"blur",(function(){return be})),n.d(t,"one",(function(){return ve})),n.d(t,"off",(function(){return ye})),n.d(t,"getEvents",(function(){return we})),n.d(t,"searchEvent",(function(){return _e})),n.d(t,"filterEventClass",(function(){return ke})),n.d(t,"getEventClass",(function(){return Ce})),n.d(t,"clientWidth",(function(){return Se})),n.d(t,"offsetWidth",(function(){return xe})),n.d(t,"scrollWidth",(function(){return Ae})),n.d(t,"styleWidth",(function(){return Oe})),n.d(t,"width",(function(){return Te})),n.d(t,"clientHeight",(function(){return je})),n.d(t,"offsetHeight",(function(){return Ee})),n.d(t,"scrollHeight",(function(){return Pe})),n.d(t,"styleHeight",(function(){return Ie})),n.d(t,"height",(function(){return Me})),n.d(t,"hasScrollbar",(function(){return $e})),n.d(t,"rect",(function(){return Le})),n.d(t,"offset",(function(){return Re})),n.d(t,"position",(function(){return De})),n.d(t,"windowLeft",(function(){return Be})),n.d(t,"windowTop",(function(){return Ue})),n.d(t,"windowWidth",(function(){return Ne})),n.d(t,"windowHeight",(function(){return He})),n.d(t,"supportCSS",(function(){return Fe})),n.d(t,"cssSingle",(function(){return Ve})),n.d(t,"css",(function(){return qe})),n.d(t,"animateY",(function(){return ze})),n.d(t,"getInputValue",(function(){return We})),n.d(t,"val",(function(){return Ye})),n.d(t,"isExists",(function(){return Xe})),n.d(t,"contains",(function(){return Je})),n.d(t,"index",(function(){return Ke})),n.d(t,"focus",(function(){return Ge})),n.d(t,"bindTextareaAutoResize",(function(){return Qe})),n.d(t,"detach",(function(){return Ze})),n.d(t,"bem",(function(){return et})),n.d(t,"cancelEvent",(function(){return tt})),n.d(t,"svg",(function(){return nt})),n.d(t,"svgHtml",(function(){return it})),n.d(t,"preloaderHtml",(function(){return ot})),n.d(t,"preloader",(function(){return st})),n.d(t,"nullDom",(function(){return rt}));var i,o=n(17),s=n(35),r=n(11);Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(document||window.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t.item(n)!==this;);return n>-1},(i=Element.prototype).closest=i.closest||function(e){for(var t=this;t;){if(t.matches(e))return t;t=t.parentElement}return null};const a=[];function c(e){return e instanceof HTMLElement}function l(e){return e instanceof NodeList}function u(e){return e instanceof HTMLCollection}function d(e){return e instanceof Array}function h(e,t){var n,i="string"==typeof e,o=i&&"<"===e.trim()[0];return n=i&&o?"html":i?"selector":c(e)?"element":l(e)||u(e)||d(e)?"elements":"other",t&&t(n),n}function f(e,t){var n,i,o,s="string"==typeof e,r=s&&"<"===e.trim()[0];if(s&&r?n=B(e.trim(),!0):s?n=L(e):c(e)?n=[e]:l(e)||u(e)||d(e)?n=e:console.warn("Subject has unknown type",e),void 0!==n){for(i=0,o=n.length;i<o;i++)t(n[i],i,o);n=null}}function m(e,t){return e.matches(t)}function p(e,t){return!!e&&e.classList.contains(t)}function g(e,t,n){e&&t.split(" ").forEach(t=>{void 0===n&&(n=!p(e,t)),n?e.classList.add(t):e.classList.remove(t)})}function b(e,t){g(e,t,!0)}function v(e,t){g(e,t,!1)}function y(e){return e.classList}function w(e,t,n){if(void 0===n)return e.getAttribute(t)||void 0;null===n?e.removeAttribute(t):e.setAttribute(t,n)}function _(e,t){return w(e,"href",t)}function k(e,t,n){return w(e,"data-"+t,n)}function C(e,t){var n,i=e.attributes,o=i.length,s={};for(n=0;n<o;n++)0===i[n].name.indexOf(t)&&(s[i[n].name.split(t)[1]]=i[n].value);return s}function S(e){return Object(o.a)(e.attributes).map(e=>e.nodeName)}function x(e,t){A(e,t,S(e))}function A(e,t,n){var i,o=n.length;for(i=0;i<o;i++)w(t,n[i],w(e,n[i]))}function O(e){const t=[];if(e)for(const n in e)t.push(`data-${n}="${e[n]}"`);return t.join(" ")}function T(e,t){G(e)!==t&&e.appendChild(t)}function j(e,t){K(e)!==t&&e.insertBefore(t,e.firstChild)}function E(e,t){ce(t)!==e&&e.parentElement.insertBefore(t,e)}function P(e,t){le(t)!==e&&e.parentElement.insertBefore(t,e.nextSibling)}function I(e,t){e.parentElement.replaceChild(t,e)}function M(e){e&&e.parentElement&&e.parentElement.removeChild(e)}function $(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function L(e,t){return e?(void 0===t&&(t=e,e=document),Object(o.a)(e.querySelectorAll(t))):[]}function R(e,t){return e?(void 0===t&&(t=e,e=document),e.querySelector(t)):null}function D(e){return null!==e.firstElementChild}function B(e,t=!1,n=!1){var i=document.implementation.createHTMLDocument("");return i.body.innerHTML=e,1!==(i=Object(o.a)(n?i.body.childNodes:i.body.children)).length||t||(i=i[0]),i}function U(e){const t=document.createDocumentFragment();for(;e.firstChild;){const n=e.removeChild(e.firstChild);t.appendChild(n)}e.parentNode.replaceChild(t,e)}function N(e){return document.createElement(e)}function H(e,t,n={}){var i=N(e);if(t&&(d(t)?i.classList.add(...t):i.classList.add(t)),n)for(const e in n)i[e]=n[e];return i}function F(){return document.createDocumentFragment()}function V(e,t){return void 0===t&&(t=!1),e.cloneNode(t)}function q(e){return document.createTextNode(e)}function z(e,t){if(void 0===t)return e.innerHTML;e.innerHTML=t}function W(e,t){e.insertAdjacentHTML("beforeend",t)}function Y(e,t){if(void 0===t)return e.outerHTML;e.outerHTML=t}function X(e,t){if(void 0===t)return e.textContent;e.textContent=t}function J(e,t){var n=Object(o.a)(e.children);return void 0!==t&&(n=n.filter((function(e){return m(e,t)}))),n}function K(e){return e.firstElementChild}function G(e){return e.lastElementChild}function Q(e){return e.parentElement}function Z(e,t,n){var i;if(e!==document.documentElement)for(i=e;null!==(i=i.parentElement)&&i!==n&&null!==t(i););else t(document.documentElement)}function ee(e,t,n,i){if(void 0===e)return null;var o,s=e.children.length;if(!0===i)for(o=0;o<s;o++)if(null===ee(e.children[o],t,n))return null;if((void 0===n||!0===m(e,n))&&null===t(e))return null;if(!0!==i)for(o=0;o<s;o++)if(null===ee(e.children[o],t,n))return null}function te(e,t){return e.tagName===t.tagName}function ne(e){return"none"===getComputedStyle(e).display&&!0===e.hidden}function ie(e){var t=!1;return ne(e)?t=!0:Z(e,(function(e){if(ne(e))return t=!0,null})),t}function oe(e){for(var t,n=document.createDocumentFragment(),i=[];e.firstChild;)t=e.removeChild(e.firstChild),n.appendChild(t),i.push(t);return null!==e.parentNode&&e.parentNode.replaceChild(n,e),i}function se(e,t){var n;return Z(e,(function(e){if(!0===m(e,t))return n=e,null})),n}function re(e,t){var n=!1;return(m(e,t)||se(e,t))&&(n=!0),n}function ae(e,t){var n=!1;return e===t?n=!0:Z(e,(function(e){if(e===t)return n=!0,null})),n}function ce(e){return e.nextElementSibling}function le(e){return e.previousElementSibling}function ue(e,t,n,i){de(e,n,(function(e){for(var n,o=e.target;o&&o.matches&&!n;)(n=o.matches(t))||(o=o.parentElement);n&&i.call(o,e,o)}))}function de(e,t,n){if(e){var i=ke(t);e.addEventListener(i,n),a.push({el:e,event_string:t,event_name:i,event_class:Ce(t),callback:n})}}function he(e,t,n){void 0===n&&(n="outclick_"+Object(r.a)()),ve(document,"click."+n,(function(n){Xe(e)&&!ae(n.target,e)&&t()}))}function fe(e,t,n){void 0===n&&(n="outclick_"+Object(r.a)()),de(document,"click."+n,(function(n){Xe(e)&&!ae(n.target,e)&&t()}))}function me(e,t){de(e,"click",t)}function pe(e,t){de(e,"keydown",(function(e){13===e.keyCode&&t()}))}function ge(e,t){de(e,"keydown",(function(e){e.keyCode===s.f.ESC&&t()}))}function be(e,t){de(e,"blur",t)}function ve(e,t,n){de(e,t,(function(){ye(e,t),n.apply(this,Array.prototype.slice.call(arguments))}))}function ye(e,t){e&&_e(e,t).forEach((function(t){e.removeEventListener(t.event_name,t.callback),a.splice(a.indexOf(t),1)}))}function we(){return a}function _e(e,t){var n=ke(t),i=Ce(t),o=""===n&&void 0!==i;return a.filter((function(s,r){return e===s.el&&(void 0===n||(!(!o||i!==s.event_class)||(void 0===i&&n===s.event_name||!(!i||t!==s.event_string))))}))}function ke(e){return e&&e.split(".")[0]}function Ce(e){return e&&e.split(".")[1]}function Se(e){return e.clientWidth}function xe(e){return e.offsetWidth}function Ae(e){return e.scrollWidth}function Oe(e){return e.style.width||"100%"}function Te(e,t,n){var i="px";if(void 0===t)return Se(e);t+="",!1!==n&&/px|%/.test(t)&&(i=""),e.style.width=t+i}function je(e){return e.clientHeight}function Ee(e){return e.offsetHeight}function Pe(e){return e.scrollHeight}function Ie(e){return e.style.height||"100%"}function Me(e,t,n){var i="px";if(void 0===t)return je(e);t+="",!1!==n&&/px|%/.test(t)&&(i=""),e.style.height=t+i}function $e(e){return{x:Ae(e)>Se(e),y:Pe(e)>je(e)}}function Le(e){return e.getBoundingClientRect()}function Re(e){var t=Le(document.documentElement),n=Le(e);return{top:n.top-t.top,left:n.left-t.left}}function De(e,t){var n,i,o;if(void 0===t)return Z(e,(function(e){if("static"!==getComputedStyle(e).position||e===document.documentElement)return i=e,null})),n=Le(e),o=Le(i),{top:n.top-o.top,left:n.left-o.left};void 0!==t.top&&Ve(e,"top",t.top),void 0!==t.left&&Ve(e,"left",t.left)}function Be(){return void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft}function Ue(){return void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}function Ne(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}function He(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}function Fe(e){var t,n=["webkit","moz","o","ms"],i=document.createElement("div"),o=!1;if(e in i.style)o="";else for(t=0;t<4;t++)if("-"+n[t]+"-"+e in i.style){o=n[t];break}return o}function Ve(e,t,n){var i,o;switch(t){case"transform":case"transition":case"animation":case"font-smoothing":i=Fe(t)}if(!1!==i){if(o=(i?"-"+i+"-":"")+t,void 0===n)return getComputedStyle(e).getPropertyValue(o);e.style[o]=n}}function qe(e,t,n){var i,o,s;if(t instanceof Array){for(i={},s=t.length,o=0;o<s;o++)i[t[o]]=Ve(e,t[o]);return i}if("object"!=typeof t)return Ve(e,t,n);for(o in t)Ve(e,o,t[o])}function ze(e,t,n,i,o){var s=Date.now();var r=function(){var a,c=Date.now()-s,l=0;l=c<i?(a=c/i)<.5?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1:1,Ve(e,"transform","translateY("+(t+(n-t)*l)+"px)"),c<i?requestAnimationFrame(r):o&&o()};r()}function We(e){if("select"===e.tagName.toLowerCase())return e.options[e.selectedIndex].value;if("checkbox"===e.type)return!!e.checked&&(e.getAttribute("value")||!0);if("image"===e.type)return e.getAttribute("value");if("radio"===e.type){const t=document.getElementsByName(e.name);let n;for(let e=t.length-1;e>=0;e--)t[e].checked&&(n=t[e].value);return n}return e.value}function Ye(e,t){var n=e.tagName.toLowerCase();if(void 0===t)return We(e);let i;switch(n){case"select":i=R(e,'option[value="'+t+'"]'),i&&(e.selectedIndex=i.index);break;case"input":case"textarea":if("checkbox"===e.getAttribute("type"))e.checked=t;else if("radio"===e.getAttribute("type")){for(let n=document.getElementsByName(e.name).length-1;n>=0;n--)e.checked=e.value==t}else{let n;e.value=t,"function"==typeof Event?n=new Event("input"):(n=document.createEvent("Event"),n.initEvent("input",!0,!0)),e.dispatchEvent(n)}}}function Xe(e){return document.body.contains(e)}function Je(e,t){return e.contains(t)}function Ke(e){var t=-1;if(Xe(e))for(t=0;e=e.previousElementSibling;)t++;return t}function Ge(e,t){return!!e&&(void 0===t?e===document.activeElement:void(!1!==t?e.focus():e.blur()))}function Qe(e,t){!1!==t?(e.scrollHeight>0&&qe(e,{height:e.scrollHeight+"px","overflow-y":"hidden"}),de(e,"input",(function(){e.style.height="1px",e.style.height=e.scrollHeight+"px"}))):ye(e,"input")}function Ze(e,t,n){var i=e.parentNode,o=e.nextSibling;function s(){i.insertBefore(e,o)}i&&(i.removeChild(e),"boolean"!=typeof t&&(n=t,t=!1),n&&t?n.call(e,s):n&&(n.call(e),s()))}const et={child_sep:"__",mod_sep:"--",getMainClass:function(e){return e?e.classList[0]:""},toggle:function(e,t,n){g(e,this.getMainClass(e)+this.mod_sep+t,n)},add:function(e,t){this.toggle(e,t,!0)},remove:function(e,t){this.toggle(e,t,!1)},find:function(e,t){return R(e,"."+this.getMainClass(e)+this.child_sep+t)},findAll:function(e,t){return L(e,"."+this.getMainClass(e)+this.child_sep+t)},hasMod:function(e,t){return p(e,this.getMainClass(e)+this.mod_sep+t)}};function tt(e){return e.preventDefault(),e.stopPropagation(),!1}function nt(e,t="100%",n="100%"){const i=document.createElementNS("http://www.w3.org/2000/svg","svg");return i.classList.add("icon","icon--"+e),i.setAttribute("width",t),i.setAttribute("height",n),i.innerHTML=`<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#${e}"></use>`,i}function it(e,t,n){return void 0===n&&(n=t),`<svg class="icon icon--${e}" width="${t}" height="${n}"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#${e}"></use></svg>`}function ot(e){return`<span class="ui_preloader ${e?"ui_preloader--"+e:""}">\n                            <span class="ui_preloader__dot"></span>\n                            <span class="ui_preloader__dot"></span>\n                            <span class="ui_preloader__dot"></span>\n                        </span>`}function st(e){return B(ot(e))}function rt(e,t=null){let n;for(n in e)e.hasOwnProperty(n)&&(e[n]=null);return t}},function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return h}));var i=n(45),o=n(68);const{gettext:s,ngettext:r,gettextInterpolate:a,pgettext:c}=i.translate;var l;function u(e,t){let n=s(e);return void 0!==t&&(console.assert("object"==typeof t,`i18n: interpolationData should be an object. \n\n ${e}: ${t}`),n=a(n,t)),n}function d(e,t,n,i){let o=r(e,t,n);return void 0!==i&&(console.assert("object"==typeof i,`i18n: interpolationData should be an object. \n\n ${e}: ${i}`),o=a(o,i)),o}function h(e,t,n){let i=c(e,t);return void 0!==n&&(console.assert("object"==typeof n,`i18n: interpolationData should be an object. \n\n ${t}: ${n}`),i=a(i,n)),i}l=window.__i18nLocale||"ru_RU",i.translate.initTranslations(o,{language:l,getTextPluginSilent:!1,getTextPluginMuteLanguages:[],silent:!1})},function(e,t,n){"use strict";n.r(t),n.d(t,"define",(function(){return a})),n.d(t,"msg",(function(){return c})),n.d(t,"log",(function(){return l})),n.d(t,"warn",(function(){return u})),n.d(t,"error",(function(){return d})),n.d(t,"timeEnd",(function(){return h})),n.d(t,"assert",(function(){return f})),n.d(t,"time",(function(){return m})),n.d(t,"enable",(function(){return p}));var i=n(17);const o={},s={};let r=!0;function a(e,t,n){void 0===o[e]?o[e]={label:t,color:void 0===n?"#000":n}:console.warn(`lib.console: "${e}" already defined:`,o[e])}function c(e,t){var n=Object(i.a)(t),s=n.shift(),r=o[s];void 0!==r?(n.unshift("color: #000;"),n.unshift(r.label),n.unshift(`color: ${r.color};`),n.unshift("%c%s%c"),console[e].apply(console,n)):console.warn(`lib.console: "${s}" is not defined`)}function l(){}function u(){r&&c("warn",arguments)}function d(){r&&c("error",arguments)}function h(e,t){var n=s[e+t],i=Date.now();if(r)if(void 0===n)console.warn(`lib.console: there's no timer for "${e}" with label "${t}"`);else{null==o[e]?console.warn(`lib.console: "${e}" is not defined`):c("log",[e,t+":",i-n+"ms"])}}function f(){r&&console.assert.apply(console,arguments)}function m(e,t){r&&(s[e+t]=Date.now())}function p(e){r=e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"c",(function(){return h})),n.d(t,"b",(function(){return f}));var i=n(2),o=n(14),s=n(5),r=n(1);const a={};function c(e,t){a[e]=t}function l(e,t,n,o){i.log("smartajax",`useResponseCodeHandler for code "${e}" ("${t}")...`),function(e){return a[e]||a.default}(e)((function(r){switch(i.log("smartajax",`...callback status "${r}" for "${o.url}"`),r){case"success":o.success&&o.success(n,t),o.complete&&o.complete(n,!1,t),o.afterSuccess&&o.afterSuccess();break;case"error":!0!==o.ignore_error_notify&&s.error(t),o.error&&o.error(t,e),o.complete&&o.complete({},!0,t);break;case"repeat":u(o)}}),o)}function u(e){return void 0===e.data&&(e.data={}),void 0===e.data.mode&&(e.data.mode="raw"),i.log("smartajax",`request to "${e.url}"...`),o.request({type:e.type,url:e.url,data:e.data,headers:e.headers,format:e.format,cache:e.cache,dataType:"json",complete:function(t,n){n===o.Status.Success?void 0===t.rc?(i.log("smartajax",`...invalid data for "${e.url}"`),l("default",Object(r.c)("Request ended with error (corrupted data)"),{},e)):(i.log("smartajax",`...complete with code "${t.rc}" for "${e.url}"`),l(t.rc,t.rm,t.data,e)):n===o.Status.Unsent?l(n,Object(r.c)("Something is wrong with the internet"),{},e):(i.log("smartajax",`...invalid code "${n}" for "${e.url}"`),l("default",Object(r.c)("Request ended with error (code %{ code })",{code:n}),{},e))}})}function d(e){return new Promise((t,n)=>{u(Object.assign(e,{success:function(e){t(e)},error:function(e){n(e)}}))})}function h(e){return e.type="post",u(e)}function f(e){return e.type="get",u(e)}i.define("smartajax","SmartAjax ಠ_ರೃ","#cd192e"),c("default",e=>{e("error")}),c(o.Status.Success,e=>{e("success")}),c(o.Status.Unsent,e=>{e("error")})},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(41),o=n(22),s=n(17);class r{constructor(e){this.selector=e.selector||`[air-module="${e.module_name||e.moduleName}"]`,this.scrollers=[],void 0!==e.scrollers&&e.scrollers.forEach(e=>{this.scrollers.push(new o.a((t,n)=>{this.callInstance(this.collection.getByElement(t),e.method,[n])},e))}),this.collection=new i.a({create:t=>(this.scrollers.forEach(e=>e.addElement(t)),new e.Constructor({element:t,controlling_module:e.controlling_module||e.controllingModule})),refresh:(e,t)=>{t&&t.refresh&&t.refresh()},destroy:(e,t)=>{this.scrollers.forEach(t=>t.removeElement(e)),t&&t.destroy&&t.destroy(),t=null}}),this.update()}update(){this.collection.update(this.selector)}destroy(){this.scrollers.forEach(e=>e.destroy()),this.collection.clear()}clear(){this.destroy()}add(e){this.collection.addElement(e)}each(e){this.collection.each(e)}getInstances(){return this.collection.getInstances()}callInstancesMethod(){const e=Object(s.a)(arguments),t=e.shift();return this.collection.map((n,i)=>this.callInstance(i,t,e))}callInstance(e,t,n){if(void 0!==e)if(void 0!==e[t])try{return e[t].apply(e,n)}catch(e){console.error(`Fabric: error during "${t}": ${e.message}`)}else console.error(`Fabric: the instance has no method "${t}"`);else console.error(`Fabric: there's no instance for method "${t}"`);return null}isDefined(e){return void 0!==e}callIfMe(){const e=Object(s.a)(arguments),t=e.shift(),n=e.shift();return this.collection.map((i,o)=>{if(void 0!==o[t]&&!0===o[t](n)){const t=e.shift();if("string"==typeof t)return this.callInstance(o,t,e);for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&this.callInstance(o,e,t[e]);return null}}).filter(this.isDefined)[0]}}},function(e,t,n){"use strict";n.r(t),n.d(t,"show",(function(){return a})),n.d(t,"setOffsetTop",(function(){return c})),n.d(t,"success",(function(){return l})),n.d(t,"warning",(function(){return u})),n.d(t,"info",(function(){return d})),n.d(t,"error",(function(){return h}));var i=n(0),o=n(30);const s=function(e){var t,n,s,r,a,c,l=this,u=e.hide_in||7e3;o.a({template:"notify",data:{type:e.type,button_text:e.button_text,message:e.message},onReady:function(o){t=o,i.prepend(e.container,t),a=i.height(i.find(t,"p")),c=a>74?a+14:74,i.on(t,"mousedown",(function(e){r=e.clientX,i.css(t,"cursor","-webkit-grab")})),i.on(t,"mousemove",(function(e){void 0!==r&&e.clientX-r>20&&(clearTimeout(s),l.show("swipe"),r=void 0)})),i.on(t,"mouseup",(function(e){r=void 0,i.css(t,"cursor","")})),e.onButtonClick&&(n=i.find(t,".notify__item__button"),i.on(n,"click",(function(){i.off(n,"click"),e.onButtonClick&&e.onButtonClick(),l.show(!1)}))),setTimeout((function(){l.show(!0),s=setTimeout((function(){l.show(!1)}),u)}),100)}}),l.show=function(e){!0===e?(i.toggleClass(t,"notify__item--shown",!0),i.css(t,"height",c+"px")):!1===e?(i.toggleClass(t,"notify__item--hidden",!0),i.css(t,"height","0px"),s=setTimeout((function(){l.destroy()}),600)):"swipe"===e&&(i.toggleClass(t,"notify__item--swiped",!0),i.css(t,"height","0px"),s=setTimeout((function(){l.destroy()}),600))},l.destroy=function(){clearTimeout(s),e.onButtonClick&&i.off(n),i.off(t),i.remove(t),t=n=e=null}},r=i.find("#notify");function a(e){e.container=r,new s(e)}function c(e){!1===e&&(e=30),isNaN(parseInt(e))||i.css(r,"top",e+"px")}function l(e,t){a({type:"success",message:e,hide_in:t})}function u(e,t){a({type:"warning",message:e,hide_in:t})}function d(e,t){a({type:"info",message:e,hide_in:t})}function h(e,t){a({type:"error",message:e,hide_in:t})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n(0),o=n(46),s=n(24),r=n(11);const a=new s.b;function c(e){return function(t){const{event_name:n,data:i}=function(e){let t={};e.indexOf("?")>=0&&(e=e.split("?"),t=Object(o.a)(e[1]),e=e[0]);return{event_name:e,data:t}}(this.getAttribute("air-"+e));a.trigger(n,{el:this,event:t,type:e,data:i}),a.trigger(`${n}:${e}`,{el:this,event:t,data:i})}}function l(e){const t=this.getAttribute("air-key");a.trigger(t,{el:this,event:e}),a.trigger(t+":key",{el:this,event:e,is_bkspc:8===e.keyCode,is_enter:13===e.keyCode,is_esc:27===e.keyCode,is_shift:e.shiftKey,is_ctrl:e.ctrlKey,is_alt:e.altKey,is_meta:e.metaKey})}window.triggerDomEvent=function(e,t={}){a.trigger(e,{el:this,event:null,type:"unknown",data:t})},i.delegateEvent(document,"[air-click]","click.module_DOM",c("click")),i.delegateEvent(document,"[air-hover]","mouseover.module_DOM",c("hover")),i.delegateEvent(document,"[air-leave]","mouseout.module_DOM",c("leave")),i.delegateEvent(document,"[air-change]","input.module_DOM",c("change")),i.delegateEvent(document,"[air-key]","keydown.module_DOM",l),i.delegateEvent(document,"[air-keyup]","keyup.module_DOM",c("keyup"));class u{constructor(){this.uid=Object(r.a)()}on(e,t){a.on(e,this.uid,t)}one(e,t){a.one(e,this.uid,t)}off(e){a.off(e,this.uid)}}},function(e,t,n){"use strict";n.d(t,"g",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return r})),n.d(t,"f",(function(){return d})),n.d(t,"i",(function(){return f})),n.d(t,"j",(function(){return p})),n.d(t,"h",(function(){return g})),n.d(t,"c",(function(){return b})),n.d(t,"b",(function(){return v})),n.d(t,"e",(function(){return y}));const i=(o=navigator.userAgent||navigator.vendor||window.opera,/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(o)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(o.substr(0,4)));var o;const s=!i,[r="Unknown",a="Unknown"]=(l=navigator.userAgent,u=l.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],/trident/i.test(u[1])?["IE",(c=/\brv[ :]+(\d+)/g.exec(l)||[])[1]||""]:"Chrome"===u[1]&&null!=(c=l.match(/\bOPR\/(\d+)/))?["Opera",c[1]]:/EdgA/i.test(l)?["IE",""]:(u=u[2]?[u[1],u[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(c=l.match(/version\/(\d+)/i))&&u.splice(1,1,c[1]),u));var c,l,u;const d=function(){var e=window.navigator.standalone,t=window.navigator.userAgent.toLowerCase(),n=/safari/.test(t);if(/iphone|ipod|ipad/.test(t))if(!e&&n);else if(e&&!n);else if(!e&&!n)return!0;return!1}(),h=window.navigator.userAgent.toLowerCase().indexOf("-android/")>-1,f=d||h,m=function(){const e=window.navigator.userAgent.toLowerCase();return/win/i.test(e)&&!/windows phone/i.test(e)?"Windows":/macintosh/i.test(e)?"Mac":/android/i.test(e)?"Android":/linux/i.test(e)?"Linux":/iphone/i.test(e)?"iPhone":/ipad/i.test(e)?"iPad":/pike/i.test(e)?"Pike":/symbian/i.test(e)?"Symbian":/windows phone/i.test(e)?"Windows Phone":"Unknown"}(),p=function(){const e=window.navigator.userAgent.toLowerCase();return/win/i.test(e)&&!/windows phone/i.test(e)?"Windows":/macintosh/i.test(e)?"Mac":/android/i.test(e)?"Android":/linux/i.test(e)?"Linux":/iphone/i.test(e)||/ipad/i.test(e)?"iOS":/pike/i.test(e)?"Pike":/symbian/i.test(e)?"Symbian":/windows phone/i.test(e)?"Windows Phone":"Unknown"}(),g=i||"iPad"===m,b=window.__is_app,v=window.navigator.userAgent.toLowerCase().indexOf("android")>-1,y=/iphone|ipod|ipad/.test(window.navigator.userAgent.toLowerCase())},function(e,t,n){"use strict";n.r(t),n.d(t,"NON_BREAKING_SPACE",(function(){return o})),n.d(t,"cut",(function(){return s})),n.d(t,"capFirstLetter",(function(){return r})),n.d(t,"removeSpaces",(function(){return a})),n.d(t,"removeLineBreaks",(function(){return c})),n.d(t,"replaceLineBreaks",(function(){return l})),n.d(t,"normalizeSpaces",(function(){return u})),n.d(t,"isNotEmpty",(function(){return d})),n.d(t,"listToArray",(function(){return h})),n.d(t,"arrToListWithAnd",(function(){return f})),n.d(t,"numberFormat",(function(){return m})),n.d(t,"numberFormatCompact",(function(){return p})),n.d(t,"removeUnbreakableSpaces",(function(){return g})),n.d(t,"escapeHTML",(function(){return b})),n.d(t,"unescapeHTML",(function(){return v})),n.d(t,"translitToEn",(function(){return y})),n.d(t,"translitToRus",(function(){return w})),n.d(t,"is",(function(){return _})),n.d(t,"isURL",(function(){return k})),n.d(t,"isNotLocalURL",(function(){return C})),n.d(t,"isImageOrVideoUrl",(function(){return S})),n.d(t,"isEmail",(function(){return x})),n.d(t,"isPhone",(function(){return A})),n.d(t,"isBase64",(function(){return O})),n.d(t,"stripPhone",(function(){return T})),n.d(t,"formatPhone",(function(){return j})),n.d(t,"formatURL",(function(){return E})),n.d(t,"formatEmail",(function(){return P})),n.d(t,"extractHostname",(function(){return I})),n.d(t,"getFileExtension",(function(){return M})),n.d(t,"urlGlue",(function(){return $})),n.d(t,"startsWith",(function(){return L})),n.d(t,"capitilize",(function(){return R})),n.d(t,"collapseIfSpacesOnly",(function(){return D})),n.d(t,"stripHtml",(function(){return B})),n.d(t,"replaceSpacesAfterPrepositions",(function(){return U}));const i={url:/^(http(s?):\/\/)\S{1,}\.\S{2,}$/,url_without_protocol:/\S{1,}\.\S{2,}$/,image_or_video_url:/^(http(s?):\/\/)?\S{1,}\.\S{2,}\.(jpeg|jpg|gif|png|mp4)$/,email:/\S+@\S+\.\S+/,phone:/^\+[\d]{11}$/,clear_phone:/[^\d\+]/g,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,onlySpaces:/^\s+$/},o=" ";function s(e,t,n="…"){var i,o,s=e.length,r=n.length;return s<=t?o=e:((i=e.substring(0,t-r).split(" ")).length>1?(i.pop(),o=i.join(" ")):o=i[0],o+=n),o}function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}function a(e){return e.replace(/\s/g,"")}function c(e){return l(e,"")}function l(e,t){return e.replace(/\r?\n|\r/g,t)}function u(e){return e.replace(/\s\s+/g," ").trim()}function d(e){return""!==e}function h(e){return a(e||"").split(",").filter(d)}function f(e){var t,n=e.pop();return void 0===n?"":(t=e.join(", "))+(""===t?"":" и ")+n}function m(e,t="&nbsp;"){return Math.abs(e)>=1e4?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,t):e.toString()}function p(e){if(Math.abs(e)<1e4)return m(e);return m(Math.floor(e/1e3))+"K"}function g(e){return e?e.replace("&nbsp;"," ").replace(/\s+/g," "):""}function b(e){const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return String(e).replace(new RegExp(`[${Object.keys(t).join("")}]`,"g"),e=>t[e])}function v(e){const t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"};for(const n in t)e=e.replace(new RegExp(n,"g"),t[n]);return e}function y(e){const t={"а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"e","ж":"zh","з":"z","и":"i","й":"y","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sch","ь":"","ы":"y","э":"e","ю":"yu","я":"ya"};return e.split("").map(e=>t[e]||e).join("")}function w(e){const t={a:"а",b:"б",c:"к",d:"д",e:"е",f:"ф",g:"г",h:"х",i:"и",j:"й",k:"к",l:"л",m:"м",n:"н",o:"о",p:"п",r:"р",s:"с",t:"т",u:"у",v:"в",w:"у",x:"кс",y:"и",z:"з"};return e.split("").map(e=>t[e]||e).join("")}function _(e,t){return i[e].test(t)}function k(e,t=!0){return _(t?"url":"url_without_protocol",e)}function C(e){return window.location.origin.indexOf(e)<0}function S(e){return _("image_or_video_url",e)}function x(e){return _("email",e)}function A(e){return _("phone",T(e))}function O(e){return _("base64",e)}function T(e){var t=e.replace(i.clear_phone,"").split("");return"8"===t[0]&&(t[0]="+7"),t.join("")}function j(e){var t=T(e);return`${t[0]}${t[1]} (${t[2]}${t[3]}${t[4]}) ${t[5]}${t[6]}${t[7]}-${t[8]}${t[9]}-${t[10]}${t[11]}`}function E(e){return 0!==e.indexOf("http")&&(e="http://"+e),e}function P(e){return e.trim()}function I(e){var t=document.createElement("a");return t.href=e,t.hostname}function M(e){return e.split(".").pop()}function $(e,t){return e=e.replace(/\/$/,""),"?"===(t=t.replace(/^\//,""))[0]&&e.indexOf("?")>=0?`${e}${t="&"+t.slice(1)}`:`${e}/${t}`}function L(e,t){return 0===e.indexOf(t)}function R(e){return e.charAt(0).toUpperCase()+e.slice(1)}function D(e){return _("onlySpaces",e)?"":e}function B(e){return(new DOMParser).parseFromString(e,"text/html").body.textContent||""}function U(e){const t=["без","в","для","за","из","к","на","над","о","об","от","по","под","пред","при","про","с","у","через"];return e.replace(/(\S+?)( )/g,(e,n)=>n+(t.includes(n.toLowerCase())?"&nbsp;":" "))}},function(e,t,n){"use strict";n.r(t),n.d(t,"replaceUuid",(function(){return f})),n.d(t,"parseUuid",(function(){return m})),n.d(t,"getServerHost",(function(){return p})),n.d(t,"getCdnHost",(function(){return g})),n.d(t,"getServerUrl",(function(){return b})),n.d(t,"getCdnUrl",(function(){return v})),n.d(t,"getFileSignature",(function(){return w})),n.d(t,"getLinkSignature",(function(){return _})),n.d(t,"getSignature",(function(){return k})),n.d(t,"splitByCache",(function(){return C})),n.d(t,"addToCache",(function(){return S})),n.d(t,"addSeveralToCache",(function(){return x})),n.d(t,"filterErrors",(function(){return A})),n.d(t,"callMethodUsingCache",(function(){return O})),n.d(t,"uploadFiles",(function(){return T})),n.d(t,"uploadFilesDirectly",(function(){return j})),n.d(t,"uploadImagesUrls",(function(){return E})),n.d(t,"uploadImagesUrlsDirectly",(function(){return P})),n.d(t,"extractUrls",(function(){return I})),n.d(t,"extractUrlsDirectly",(function(){return M})),n.d(t,"formImageFilterWidthOnly",(function(){return $})),n.d(t,"formImageFilter",(function(){return L})),n.d(t,"isUrlBelongsToLeonardo",(function(){return R})),n.d(t,"transformUrlToOriginal",(function(){return D})),n.d(t,"applyFilterToUuid",(function(){return B})),n.d(t,"formImageUrl",(function(){return U})),n.d(t,"formImageUrlWidthOnly",(function(){return N})),n.d(t,"tryToApplyWebpToUrl",(function(){return H})),n.d(t,"tryToApplyWebpToUrlIfNeeded",(function(){return F})),n.d(t,"addToTextCache",(function(){return q})),n.d(t,"getFromTextCache",(function(){return z})),n.d(t,"getLinksFromText",(function(){return W})),n.d(t,"textHasLinks",(function(){return Y})),n.d(t,"parseText",(function(){return X})),n.d(t,"setImgSrc",(function(){return J})),n.d(t,"setWebpState",(function(){return G})),n.d(t,"isWebpSupported",(function(){return Q})),n.d(t,"isWebpSupportedDirect",(function(){return Z})),n.d(t,"isWebpSupportedDirectAsync",(function(){return ee})),n.d(t,"isRetina",(function(){return ne})),n.d(t,"getRetinaMult",(function(){return ie})),n.d(t,"ceilSize",(function(){return oe})),n.d(t,"ceilWidth",(function(){return se})),n.d(t,"callFileUploader",(function(){return re})),n.d(t,"renderByData",(function(){return ae})),n.d(t,"getResizeFilter",(function(){return ce}));var i=n(17),o=n(43),s=n(8),r=n(2),a=n(0),c=n(14),l=n(79);var u=n(10),d=n(27);const h=/([0-9a-z]{8}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{12})/i;function f(e,t){return e.replace(h,t)}function m(e){const t=h.exec(e);return t&&t[1]?t[1]:null}function p(){return"leonardo.osnova.io"}function g(){return"leonardo.osnova.io"}function b(){return"https://leonardo.osnova.io"}function v(){return"https://leonardo.osnova.io"}const y={};function w(e){return Object(o.a)([e.lastModified,e.name,e.size,e.type,e.rand||0].join("."))}function _(e){return Object(o.a)(e)}function k(e){return e instanceof File?w(e):"string"==typeof e?_(e):(r.warn("andropov","lib.andropov: couldn't get signature",e),null)}function C(e){var t,n=[],i=[],o=[],s=[];for(let r=0,a=e.length;r<a;r++)null===(t=k(e[r]))||void 0===y[t]?(o.push(e[r]),s.push(t)):(n.push(y[t]),i.push(t));return{cached:n,cached_signatures:i,uncached:o,uncached_signatures:s}}function S(e,t){y[k(e)]=t}function x(e,t){for(let n=0,i=e.length;n<i;n++)S(e[n],t[n])}function A(e,t,n){for(let i=e.length-1;i>=0;i--)"error"===e[i].type&&(e.splice(i,1),t.splice(i,1),n.splice(i,1))}function O(e,t,n,i,o=!1,s=!1){var r=C(t);if(r.uncached.length>0){let t=null;switch(e){case"uploadFilesDirectly":t=j;break;case"uploadImagesUrlsDirectly":t=P;break;case"extractUrlsDirectly":t=M}null!==t?t(r.uncached,(function(e){var t;null!==e&&(s||A(e,r.uncached,r.uncached_signatures),x(r.uncached,e),e=r.cached.concat(e),t=r.cached_signatures.concat(r.uncached_signatures)),n(e,t)}),i,o):n([],[])}else n(r.cached,r.cached_signatures)}function T(e,t,n,i=!1){O("uploadFilesDirectly",e,t,n,!1,i)}function j(e,t,n=!1,i=!1){c.post({url:"/andropov/upload",dataType:"json",format:"MFD",data:{file:e,render:n},success(e){e&&e.result?t(e.result):t(null)},error(){t(null)}})}function E(e,t){O("uploadImagesUrlsDirectly",e,t)}function P(e,t){c.post({url:"/andropov/upload/urls",dataType:"json",data:{urls:e},success(e){e&&e.result?t(e.result):t(null)},error(){t(null)}})}function I(e,t,n,i=!1){O("extractUrlsDirectly",e,t,n,i)}function M(e,t,n,i=!1){c.get({url:"/andropov/extract"+(n?"/render":""),dataType:"json",data:{urls:e,forceLink:i},success(e){e&&e.result?t(e.result):t(null)},error(){t(null)}})}function $(e,t="scale_crop",n="center"){if(void 0===e)return"";(ne()||e<=80)&&(e*=2);return["-",t,se(e)].filter(e=>""!==e).join("/")+"/"}function L(e,t,n="scale_crop"){if(void 0===e)return"";void 0===t&&(t=e),(ne()||e<=80||t<=80)&&(e*=2,t*=2);const{width:i,height:o}=oe(e,t);return`-/${n}/${i}x${o}/`}function R(e){const t=e.indexOf("leonardo.osnova.io")>=0,n=e.indexOf("leonardo.osnova.io")>=0,i=e.indexOf("proxy")>=0,o=e.indexOf("leonardo2")>=0;return(t||n||o)&&!i}function D(e){return R(e)?`https://leonardo.osnova.io/${m(e)}/`:e}function B(e,t){return 0===e.indexOf("http")?R(e)?H(`${e}${t}`):""+e:"/"===e[0]?""+e:H(`https://leonardo.osnova.io/${e}/${t}`)}function U(e,t,n,i){return B(e,L(t,n,i))}function N(e,t,n,i){return B(e,$(t,n,i))}function H(e){return Q()&&(e.indexOf("format/jpg")>=0?e=e.replace("format/jpg","format/webp"):e+="-/format/webp/"),e}function F(e){return R(e)?H(e):e}const V={};function q(e,t){V[Object(o.a)(e)]=t}function z(e){return V[Object(o.a)(e)]}function W(e){var t=z(e);return void 0===t&&q(e,t=s.replaceLineBreaks(e," ").split(" ").filter(s.isURL.bind(s)).filter(s.isNotLocalURL.bind(s)).map(s.formatURL.bind(s))),t}function Y(e){return W(e).length>0}function X(e,t){I(W(e),t)}function J(e,t,n,i){void 0===n&&(n=a.width(e)),void 0===i&&(i=n),a.attr(e,"src",U(t,n,i))}let K=null;function G(e){K=e,u.c("is_webp_supported",e?"1":"0",7)}function Q(){if(null===K){const e=u.a("is_webp_supported");void 0===e?(G(Z()),!1===K&&ee(G)):K="1"===e}const e=function(e,t){const n=Math.round(Date.now()/1e3),i=Object(l.b)(n,e,t,0,1,!0);return Math.random()<i}(1605615618,1605615618+4*d.a);return K&&e}function Z(){const e=document.createElement("canvas");return!!!(!e.getContext||!e.getContext("2d"))&&0==e.toDataURL("image/webp").indexOf("data:image/webp")}function ee(e){let t=new Image;t.onload=function(){e(t.width>0&&t.height>0),t=null},t.onerror=function(){e(!1),t=null},t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA"}let te=null;function ne(){if(null===te)if(window.devicePixelRatio>1)te=!0;else{const e="(-webkit-min-device-pixel-ratio: 1.5),\n                        (min--moz-device-pixel-ratio: 1.5),\n                        (-o-min-device-pixel-ratio: 3/2),\n                        (min-resolution: 1.5dppx)";te=!(!window.matchMedia||!window.matchMedia(e).matches)}return te}function ie(){return ne()?2:1}function oe(e,t){const n=e/t;return{width:e=se(e),height:t=Math.ceil(e/n)}}function se(e){return e>=109?100*Math.ceil(e/100):e<=64?64:e<=108?108:e}function re({accept:e="image/*, video/mp4, video/x-m4v, video/*",limit:t=1},n){const o=a.parseHTML(`<input type="file" accept="${e}" ${t>1?"multiple":""} style="position: absolute; width: 1px; height: 1px; left: -100px; top: -100px;"/>`);return n?n.appendChild(o):document.body.appendChild(o),setTimeout(()=>{o.click(),a.remove(o)},0),new Promise(e=>{a.one(o,"change",n=>{e(Object(i.a)(n.target.files).slice(0,t))})})}function ae(e){}function ce(){return"preview"}},function(e,t,n){"use strict";function i(e,t,n){let i="";if(n){const e=new Date;e.setTime(e.getTime()+24*n*60*60*1e3),i="; expires="+e.toGMTString()}document.cookie=e+"="+(t||"")+i+"; path=/; domain=."+location.hostname}function o(e){var t,n,i,o=e+"=",s=document.cookie.split(";"),r=s.length;for(t=0;t<r;t++){for(i=(n=s[t]).length;" "===n.charAt(0);)n=n.substring(1,i);if(0===n.indexOf(o))return n.substring(o.length,i)}}function s(e){i(e,"",-1)}n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}))},function(e,t,n){"use strict";let i=0;t.a=function(e=null){return i+=1,(e?e+"_":"")+i}},function(e,t,n){"use strict";n.r(t),n.d(t,"pushToDataLayer",(function(){return s})),n.d(t,"sendDefaultEvent",(function(){return r})),n.d(t,"send",(function(){return a})),n.d(t,"sendToCustomURL",(function(){return c}));var i=n(3);function o(e){void 0!==window.dataLayer&&window.dataLayer.push(e)}function s(e){setTimeout(o,100,e)}function r(e){e&&s({event:"data_event",data_description:e})}function a(e){r(e.join(" — "))}function c(e,t,n={}){i.c({url:t,data:Object.assign({event:e},n),ignore_error_notify:!0})}},function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"g",(function(){return d})),n.d(t,"f",(function(){return h}));var i=n(8),o=n(46),s=n(42);function r(){return location.pathname.split("/").filter(i.isNotEmpty)}function a(){return"/"+r().join("/")}function c(){return a()+location.search}function l(){return Object(o.a)(location.search.substring(1))}function u(){return location.hostname}function d(e){return e.indexOf("#")>=0&&("#"===e[0]||function(e){let t=e.split(location.hostname);return t=1===t.length?t[0]:t[1],a()===t.split("#")[0]}(e))}function h(e,t){return void 0!==e&&void 0!==t&&(t.indexOf("?")>=0&&Object(s.a)(e).path===Object(s.a)(t).path)}},function(e,t,n){"use strict";n.r(t),n.d(t,"Status",(function(){return r})),n.d(t,"ErrorMessage",(function(){return a})),n.d(t,"request",(function(){return l})),n.d(t,"post",(function(){return u})),n.d(t,"get",(function(){return d})),n.d(t,"dlt",(function(){return h})),n.d(t,"cancel",(function(){return f})),n.d(t,"setCSRF",(function(){return m}));var i=n(74),o=n(1);const s={},r={Success:200,Unsent:0},a={Unsent:Object(o.c)("Something is wrong with the internet")};function c(e){return s[e]}function l(e){return i.a()?function(e){var t,n=new XMLHttpRequest;switch(e.type=(e.type||"").toLowerCase(),e.format=(e.format||"").toLowerCase(),e.dataType=(e.dataType||"").toLowerCase(),e.format){case"mfd":e.form_data=function(e){var t,n,i,o,s=new FormData;for(t in e)if(void 0!==(o=e[t]))if(o instanceof FileList||o instanceof Array)for(i=o.length,n=0;n<i;n++)s.append(t+"_"+n,o[n]);else s.append(t,o);return s}(e.data);break;default:e.get=function e(t,n,i){var o,s;for(o in n=n||[],i=i||[],t)i.push(o),s=i.map((function(e,t){return 0===t?e:"["+e+"]"})).join(""),"object"==typeof t[o]?t[o]instanceof Array&&0===t[o].length?n.push(encodeURIComponent(s)+"="+encodeURIComponent(t[o])):e(t[o],n,i):n.push(encodeURIComponent(s)+"="+encodeURIComponent(t[o])),i.pop();return n.join("&")}(e.data)}switch(e.type){case"post":case"delete":break;case"get":e.url.indexOf("?")<0?e.url+="?"+e.get:e.url+="&"+e.get}if(!0===e.cache&&void 0!==c(e.url))return e.success&&e.success(c(e.url),200),void(e.complete&&e.complete(c(e.url),200));for(var i in n.method=e.type,n.onreadystatechange=()=>{n.readyState===n.DONE&&n.status===r.Unsent&&(console.warn(a.Unsent,n),"function"==typeof e.error&&e.error(a.Unsent,n.status),"function"==typeof e.complete&&e.complete(a.Unsent,n.status,!0))},n.open(e.type,e.url,!0),n.onload=function(){var i,o,r=!1;if(t=n.responseText||"","json"===e.dataType)try{t=JSON.parse(t)}catch(e){r=!0,t={}}200!==n.status&&(r=!0),!1===r?(!0===e.cache&&(i=e.url,o=t,s[i]=o),e.success&&e.success(t,n.status)):e.error&&e.error(t,n.status),e.complete&&e.complete(t,n.status,r)},n.error=function(){t="","json"===e.dataType&&(t={}),e.error&&e.error(t,n.status),e.complete&&e.complete(t,n.status,!0)},e.headers)e.headers.hasOwnProperty(i)&&e.headers[i]&&n.setRequestHeader(i,e.headers[i]);switch(e.type){case"post":case"delete":!0!==e.do_not_use_csrf_header&&m(n),"mfd"===e.format?n.send(e.form_data):(n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),n.send(e.get));break;case"get":n.send();break;default:console.warn(`lib.ajax: unknown request type "${e.type}"`)}return n}(e):(e.error&&e.error(Object(o.c)("Something is wrong with the internet"),-1),e.complete&&e.complete(Object(o.c)("Something is wrong with the internet"),-1,!0),null)}function u(e){return e.type="post",e.dataType=e.dataType||"json",e.data=e.data||{},l(e)}function d(e){return e.type="get",l(e)}function h(e){return e.type="delete",e.dataType=e.dataType||"json",e.data=e.data||{},l(e)}function f(e){null!==e&&e.abort()}function m(e){e.setRequestHeader("X-This-Is-CSRF","THIS IS SPARTA!"),window.__static_version&&e.setRequestHeader("X-JS-Version",window.__static_version)}var p;p=XMLHttpRequest.prototype.send,XMLHttpRequest.prototype.send=function(){var e=arguments;XMLHttpRequest.before?XMLHttpRequest.before(()=>{p.apply(this,e)},this.method):p.apply(this,e)}},function(e,t,n){"use strict";function i(e,t,n){!0===n&&(t=JSON.stringify(t));try{localStorage.setItem(e,t)}catch(n){try{localStorage.clear(),localStorage.setItem(e,t)}catch(e){}}}function o(e,t){let n;try{n=localStorage.getItem(e),!0===t&&(n=JSON.parse(n))}catch(e){}return n}function s(e){try{localStorage.removeItem(e)}catch(e){}}function r(e){var t,n=localStorage.length;for(t=0;t<n&&null!==e(localStorage.key(t),t,n);t++);}n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return r}))},function(e,t,n){(function(i){function o(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==i&&"env"in i&&(e=i.env.DEBUG),e}(t=e.exports=n(83)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var i="color: "+this.color;e.splice(1,0,i,"color: inherit");var o=0,s=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(o++,"%c"===e&&(s=o))})),e.splice(s,0,i)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=o,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(o())}).call(this,n(50))},function(e,t,n){"use strict";t.a=function(e){return Array.prototype.slice.call(e)}},function(e,t,n){"use strict";n.d(t,"d",(function(){return p})),n.d(t,"f",(function(){return g})),n.d(t,"e",(function(){return b})),n.d(t,"a",(function(){return v})),n.d(t,"c",(function(){return y})),n.d(t,"b",(function(){return w}));var i=n(0);const o=document.body,s=document.documentElement;let r=0,a=0,c=0,l=0,u=0,d=0,h=0;function f(){u=i.windowTop(),d=i.windowLeft()}function m(){r=i.windowWidth(),a=i.windowHeight(),c=Math.max(o.scrollWidth,o.offsetWidth,s.clientWidth,s.scrollWidth,s.offsetWidth),l=Math.max(o.scrollHeight,o.offsetHeight,s.clientHeight,s.scrollHeight,s.offsetHeight)}function p(){f(),m(),function(){let e,t,n,i=document.createElement("div");i.style.visibility="hidden",i.style.width="100px",i.style.msOverflowStyle="scrollbar",document.body.appendChild(i),e=i.offsetWidth,i.style.overflow="scroll",t=document.createElement("div"),t.style.width="100%",i.appendChild(t),n=t.offsetWidth,i.parentNode.removeChild(i),h=e-n}()}function g(){return r}function b(){return a}function v(){return l}function y(){return u}function w(){const e=window.innerHeight-document.documentElement.clientHeight;return e<0?Math.abs(e):0}i.on(window,"scroll.libWindow",()=>{f()}),i.on(window,"resize.libWindow",()=>{f(),m()}),p(),window.requestAnimationFrame(p)},function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return c}));var i=n(0),o=n(18);const s="mobile",r="desktop",a={SmallMobile:374,IphoneLarge:413,Feed:639,Mobile:859,TwoColumns:959,TwoColumnsAdaptive:999},c={SmallMobile:375,IphoneLarge:414,Feed:640,Mobile:860,TwoColumns:960,TwoColumnsAdaptive:1e3},l={[s]:[0,a.Mobile],[r]:[c.Mobile,4096]};const u=new class{constructor({value:e=null,getter:t=null,bind:n=null}={}){this.value=e,this.getter=t,null!==t&&this.update(),null!==n&&n(this.update.bind(this)),this.handlers={}}update(){this.set(this.getter())}set(e){if(this.value!==e){this.value=e;for(const e in this.handlers)this.handlers[e]&&this.handlers[e](this.value)}}get(){return this.value}on(e){const t=Math.random();return e(this.value),this.handlers[t]=e,function(){this.handlers[t]=null}.bind(this)}is(e){return this.value===e}}({getter:()=>function(){let e=null;for(const t in l){let[n,i]=l[t];n<=Object(o.f)()&&Object(o.f)()<=i&&(e=t)}return e}(),bind:e=>{Object(i.on)(window,"resize",e)}});t.e=u},function(e,t,n){"use strict";function i(e){var t={};return e.reduce((function(e,n){return void 0===t[n]?(t[n]=!0,e.concat(n)):e}),[])}function o(e,t){return e.filter((function(e){return t.indexOf(e)<0}))}function s(e,t){return e.filter((function(e){return t.indexOf(e)>=0}))}function r(e,t){return e.concat(t)}function a(e,t){return e.reduce((e,n)=>(e.some(e=>t(n,e))||e.push(n),e),[])}function c(e,t){return t.reduce((t,n)=>Math.abs(n-e)<Math.abs(t-e)?n:t)}function l(e){return e[Math.floor(Math.random()*e.length)]}function u(e,t,n){const i=n.reduce((e,t,n)=>(e[t]=n,e),{});return[...e].sort((e,n)=>void 0===i[e[t]]?1:void 0===i[n[t]]?-1:i[e[t]]-i[n[t]])}n.d(t,"g",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"f",(function(){return r})),n.d(t,"h",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"e",(function(){return u}))},function(e,t,n){"use strict";function i(e,t){var n=navigator.userAgent||navigator.vendor||window.opera;if(/android/i.test(n))try{window.Android.postMessage(e,t)}catch(e){console.log("Android app interface failed")}if(/iPad|iPhone|iPod/.test(n)&&!window.MSStream)try{window.webkit.messageHandlers[e].postMessage(t)}catch(e){console.log("The native context does not exist yet")}}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(33),o=n(11);class s{constructor(e,{offset:t=0,debounce:n=0}={}){this.observer=new IntersectionObserver(this.observerHandler.bind(this),{rootMargin:`${t}px 0px ${t}px 0px`,threshold:0}),this.buffer_in=new i.a({delay:n,onFlushEvery:t=>e(t,!0)}),this.buffer_out=new i.a({delay:n,onFlushEvery:t=>e(t,!1)}),this.processEntry=this._processEntry.bind(this),this.uid=Object(o.a)()}getElementState(e){return void 0===e.__Scroller?null:!0===e.__Scroller[this.uid]}setElementState(e,t){void 0===e.__Scroller&&(e.__Scroller={}),e.__Scroller[this.uid]=t}addElement(e){this.observer.observe(e)}removeElement(e){this.observer.unobserve(e),this.buffer_in.remove(e),this.buffer_out.remove(e)}observerHandler(e){e.forEach(this.processEntry)}_processEntry(e){const t=0===e.intersectionRatio?e.isIntersecting:e.intersectionRatio>0,n=e.target;let i=this.getElementState(n);null===i&&(i=!t),t&&!i?(this.setElementState(n,!0),this.buffer_in.add(n),this.buffer_out.remove(n)):!t&&i&&(this.setElementState(n,!1),this.buffer_in.remove(n),this.buffer_out.add(n))}destroy(){this.observer.disconnect(),this.buffer_in.destroy(),this.buffer_out.destroy()}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(47);class o{constructor(e,t){this.init(e,t)}init(e,t){this.func=e,this.def_time=t,this.last_throttle=0,this.debounce_time_expires=0,this.timeout_next=null,this.animation_frame=new i.a(this.tick.bind(this))}tick(){Date.now()-this.debounce_time_expires>=0&&(this.animation_frame.stop(),this.run())}getTime(e){return void 0===e?this.def_time||0:e}throttle(e){(0===(e=this.getTime(e))||Date.now()-this.last_throttle>=e)&&this.run(),e>0&&this.debounce(e)}next(){clearTimeout(this.timeout_next),this.timeout_next=setTimeout(this.run.bind(this),0)}debounce(e){e>0?(this.debounce_time_expires=this.getTime(e)+Date.now(),this.animation_frame.start()):this.run()}start(e,t){clearInterval(this.repeat_interval),!1!==t&&this.run(),this.repeat_interval=setInterval(this.run.bind(this),this.getTime(e))}stop(){clearInterval(this.repeat_interval)}run(){clearTimeout(this.timeout_next),this.animation_frame.stop(),this.last_throttle=Date.now(),this.func()}reset(){this.last_throttle=0,this.debounce_time_expires=0,clearTimeout(this.timeout_next),clearInterval(this.repeat_interval),this.animation_frame&&this.animation_frame.stop()}setFn(e){this.func=e}destroy(){this.reset()}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));var i=n(11);class o{constructor(e){this.default_namespace=e,this.events=[],this.events_length=0,this.events_buffer={}}isEventMatches(e,t,n){var i=!1;return void 0!==n?void 0!==t?e.name===t&&e.namespace===n&&(i=!0):e.namespace===n&&(i=!0):void 0!==t?e.name===t&&(i=!0):i=!0,i}get(e,t){var n,i=[],o=0;for(e=e||void 0,t=t||this.default_namespace||void 0,n=0;n<this.events_length;n++)!0===this.isEventMatches(this.events[n],e,t)&&(i[o++]=n);return i}on(e,t,n){switch(typeof e){case"string":this.realOn(e,t,n);break;case"object":e.forEach((e,n)=>{this.realOn(e,t,n)});break;default:console.warn(`Event: Invalid name type in namsespace "${t}"`,e)}}realOn(e,t,n){var i,o;if(void 0===n&&(n=t,t=void 0),this.events[this.events_length++]={name:e,namespace:t||this.default_namespace,callback:n},void 0!==this.events_buffer[e])for(o=this.events_buffer[e].length,i=0;i<o;i++)n(this.events_buffer[e][i])}off(e,t){var n=this.get(e,t);this.events=this.events.filter((function(e,t){return n.indexOf(t)<0})),this.events_length=this.events.length}one(e,t,n){var i=this;void 0===n&&(n=t,t=void 0),t=t||this.default_namespace||void 0,this.on(e,t,(function(o){i.off(e,t),n(o)}))}trigger(e,t,n){let i,o;for(e=e||void 0,o=0;o<this.events_length;o++)i=this.events[o],void 0!==e&&i.name!==e||i.callback(t);switch(n){case"chain":void 0===this.events_buffer[e]&&(this.events_buffer[e]=[]),this.events_buffer[e].push(t);break;case"last":this.events_buffer[e]=[t]}i=null}clearBuffer(){this.events_buffer={}}}class s{constructor(e){this.eventsInstance=e,this.namepsace="eventWrapper_"+Object(i.a)()}on(e,t){this.eventsInstance.on(e,this.namepsace,t)}off(e){this.eventsInstance.off(e,this.namepsace)}one(e,t){this.eventsInstance.one(e,this.namepsace,t)}trigger(e,t,n){this.eventsInstance.trigger(e,t,n)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));function i(e){e.onload=null,e.onerror=null}function o(e,t,n=!1){let o=function(e){const t=document.getElementsByTagName("script"),n=t.length;let i;for(i=0;i<n;i++)if(t[i].src.indexOf(e)>=0)return t[i];return null}(e);if(null===o)o=document.createElement("script"),o.async=n,o.__loadStatus=0,o.addEventListener("load",()=>{o.__loadStatus=1,i(o),t&&t(!0,o,e)}),o.addEventListener("error",()=>{o.__loadStatus=2,i(o),t&&t(!1)}),o.src=e,document.getElementsByTagName("head")[0].appendChild(o);else switch(o.__loadStatus){case 0:o.addEventListener("load",()=>{t&&t(!0,o,e)}),o.addEventListener("error",()=>{t&&t(!1)});break;case 1:t&&t(!0,o,e);break;case 2:t&&t(!1)}}},function(e,t,n){"use strict";(function(e){var i=n(48),o=n(107),s=n(65);const r=Object(i.b)()&&!e.env.DEBUG?o.a:s.a;t.a=r}).call(this,n(50))},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"o",(function(){return d})),n.d(t,"h",(function(){return h})),n.d(t,"i",(function(){return f})),n.d(t,"l",(function(){return m})),n.d(t,"e",(function(){return p})),n.d(t,"m",(function(){return g})),n.d(t,"d",(function(){return b})),n.d(t,"f",(function(){return w})),n.d(t,"j",(function(){return _})),n.d(t,"g",(function(){return k})),n.d(t,"k",(function(){return C})),n.d(t,"n",(function(){return S}));var i=n(1);const o=1e3,s=1,r=60*s,a=60*r,c=24*a,l=[Object(i.c)("sunday"),Object(i.c)("monday"),Object(i.c)("tuesday"),Object(i.c)("wednesday"),Object(i.c)("thursday"),Object(i.c)("friday"),Object(i.c)("saturday")];function u(){return Math.round(Date.now()/o)}function d(e){return new Date(e*o)}function h(){const e=new Date,t=e.getDate(),n=f(e),i=e.getDay();return`${t} ${n}, ${l[i]}`}function f(e,t){switch(e.getMonth()){case 0:return t?Object(i.c)("jan"):Object(i.c)("january");case 1:return t?Object(i.c)("feb"):Object(i.c)("february");case 2:return t?Object(i.c)("mar"):Object(i.c)("march");case 3:return t?Object(i.c)("apr"):Object(i.c)("april");case 4:return Object(i.c)("may");case 5:return t?Object(i.c)("jun"):Object(i.c)("june");case 6:return t?Object(i.c)("jul"):Object(i.c)("july");case 7:return t?Object(i.c)("aug"):Object(i.c)("august");case 8:return t?Object(i.c)("sep"):Object(i.c)("september");case 9:return t?Object(i.c)("oct"):Object(i.c)("october");case 10:return t?Object(i.c)("nov"):Object(i.c)("november");case 11:return t?Object(i.c)("dec"):Object(i.c)("december")}}function m(e){return e<10&&(e="0"+e),e}function p(e){return m(e.getHours())+":"+m(e.getMinutes())}function g(e,t=" "){const[n,i]=e.split(t),[o,s,r]=n.split("-");return`${r}-${s}-${o}${t}${i}`}function b(e,t=" "){const[n,i]=e.split(t),[o,s,r]=n.split("-");return`${o}-${s}-${r} ${i}`}function v(e){const t=e.match(/^([\d.]+)([a-z]+)$/);return t&&t[1]&&t[2]?parseFloat(t[1])*function(e){switch(e){case"sec":return s;case"min":return r;case"hour":return a;default:return 0}}(t[2]):0}function y(e,t,n){if("*"===n)return!0;if(n===t)return!0;const i=n.match(/^\[([a-z0-9:.]+)\]$/);if(!i||!i[1])return!1;const s=i[1];if(s){if(!(s.indexOf(":")<0)){const[t,n]=s.split(":");return function(e,t,n){const i=t?e+v(t):0,s=n?e+v(n):1767139200,r=Date.now()/o;return i<=r&&r<=s}(e,t,n)}{let t;switch(s){case"today":return new Date(e*o).toDateString()===(new Date).toDateString();case"yesterday":return t=new Date,t.setDate(t.getDate()-1),new Date(e*o).toDateString()===t.toDateString();case"thisyear":return new Date(e*o).getFullYear()===(new Date).getFullYear();default:return!1}}}return!1}function w(e,t){const[n]=t.split("").reduce(([t,n],s)=>("{"===s?n=[]:"}"===s?(t.push(function(e,t){switch(t){case"minDiff":return Math.floor((u()-e)/r);case"minDiffWord":return Object(i.a)("minute","minutes",Math.floor((u()-e)/r));case"hourDiff":return Math.floor((u()-e)/a);case"hourDiffWord":return Object(i.a)("hour","hours",Math.floor((u()-e)/a));case"dayN":return new Date(e*o).getDate();case"monthNN":return m(new Date(e*o).getMonth()+1);case"month":return f(new Date(e*o),!1);case"monthShort":return f(new Date(e*o),!0);case"time":return p(new Date(e*o));case"year":return new Date(e*o).getFullYear();default:return console.warn(`lib.date -> parseTimeVar: unknown var "${t}"`),"none"}}(e,n.join(""))),n=null):null!==n?n.push(s):t.push(s),[t,n]),[[],null]);return n.join("")}function _(e,t,n="&nbsp;"){const i=function e(t,n,i){if("string"==typeof i)return i;for(const o in i)if(y(t,n,o)){const s=e(t,n,i[o]);if(null!==s)return s}return null}(e,t,window.__dates_behavior).split("//");1===i.length&&i.unshift("");const o=i[0].trim(),s=parseInt(i[1]||-1);let r=w(e,o);return r=r.replace(/\s/g,n),[r,s]}function k(){return Math.floor((new Date).getTime()/1e3)}function C(e){let t=e-k();return t<0&&(t=0),{raw:t,days:Math.floor(t/86400),hours:Math.floor(t%86400/3600),minutes:Math.floor(t%3600/60),seconds:Math.floor(t%60)}}function S(e,t="."){return e.map(e=>{let t=e.split("-");return t=t.map(Number),new Date(t[2],t[1]-1,t[0])})}},function(e,t,n){function i(e){if(e)return function(e){for(var t in i.prototype)e[t]=i.prototype[t];return e}(e)}e.exports=i,i.prototype.on=i.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},i.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<i.length;o++)if((n=i[o])===t||n.fn===t){i.splice(o,1);break}return 0===i.length&&delete this._callbacks["$"+e],this},i.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(n){i=0;for(var o=(n=n.slice(0)).length;i<o;++i)n[i].apply(this,t)}return this},i.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},i.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){var i,o=n(93),s=n(58),r=n(95),a=n(96),c=n(97);"undefined"!=typeof ArrayBuffer&&(i=n(98));var l="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),u="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),d=l||u;t.protocol=3;var h=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},f=o(h),m={type:"error",data:"parser error"},p=n(99);function g(e,t,n){for(var i=new Array(e.length),o=a(e.length,n),s=function(e,n,o){t(n,(function(t,n){i[e]=n,o(t,i)}))},r=0;r<e.length;r++)s(r,e[r],o)}t.encodePacket=function(e,n,i,o){"function"==typeof n&&(o=n,n=!1),"function"==typeof i&&(o=i,i=null);var s=void 0===e.data?void 0:e.data.buffer||e.data;if("undefined"!=typeof ArrayBuffer&&s instanceof ArrayBuffer)return function(e,n,i){if(!n)return t.encodeBase64Packet(e,i);var o=e.data,s=new Uint8Array(o),r=new Uint8Array(1+o.byteLength);r[0]=h[e.type];for(var a=0;a<s.length;a++)r[a+1]=s[a];return i(r.buffer)}(e,n,o);if(void 0!==p&&s instanceof p)return function(e,n,i){if(!n)return t.encodeBase64Packet(e,i);if(d)return function(e,n,i){if(!n)return t.encodeBase64Packet(e,i);var o=new FileReader;return o.onload=function(){t.encodePacket({type:e.type,data:o.result},n,!0,i)},o.readAsArrayBuffer(e.data)}(e,n,i);var o=new Uint8Array(1);o[0]=h[e.type];var s=new p([o.buffer,e.data]);return i(s)}(e,n,o);if(s&&s.base64)return function(e,n){var i="b"+t.packets[e.type]+e.data.data;return n(i)}(e,o);var r=h[e.type];return void 0!==e.data&&(r+=i?c.encode(String(e.data),{strict:!1}):String(e.data)),o(""+r)},t.encodeBase64Packet=function(e,n){var i,o="b"+t.packets[e.type];if(void 0!==p&&e.data instanceof p){var s=new FileReader;return s.onload=function(){var e=s.result.split(",")[1];n(o+e)},s.readAsDataURL(e.data)}try{i=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(t){for(var r=new Uint8Array(e.data),a=new Array(r.length),c=0;c<r.length;c++)a[c]=r[c];i=String.fromCharCode.apply(null,a)}return o+=btoa(i),n(o)},t.decodePacket=function(e,n,i){if(void 0===e)return m;if("string"==typeof e){if("b"===e.charAt(0))return t.decodeBase64Packet(e.substr(1),n);if(i&&!1===(e=function(e){try{e=c.decode(e,{strict:!1})}catch(e){return!1}return e}(e)))return m;var o=e.charAt(0);return Number(o)==o&&f[o]?e.length>1?{type:f[o],data:e.substring(1)}:{type:f[o]}:m}o=new Uint8Array(e)[0];var s=r(e,1);return p&&"blob"===n&&(s=new p([s])),{type:f[o],data:s}},t.decodeBase64Packet=function(e,t){var n=f[e.charAt(0)];if(!i)return{type:n,data:{base64:!0,data:e.substr(1)}};var o=i.decode(e.substr(1));return"blob"===t&&p&&(o=new p([o])),{type:n,data:o}},t.encodePayload=function(e,n,i){"function"==typeof n&&(i=n,n=null);var o=s(e);if(n&&o)return p&&!d?t.encodePayloadAsBlob(e,i):t.encodePayloadAsArrayBuffer(e,i);if(!e.length)return i("0:");g(e,(function(e,i){t.encodePacket(e,!!o&&n,!1,(function(e){i(null,function(e){return e.length+":"+e}(e))}))}),(function(e,t){return i(t.join(""))}))},t.decodePayload=function(e,n,i){if("string"!=typeof e)return t.decodePayloadAsBinary(e,n,i);var o;if("function"==typeof n&&(i=n,n=null),""===e)return i(m,0,1);for(var s,r,a="",c=0,l=e.length;c<l;c++){var u=e.charAt(c);if(":"===u){if(""===a||a!=(s=Number(a)))return i(m,0,1);if(a!=(r=e.substr(c+1,s)).length)return i(m,0,1);if(r.length){if(o=t.decodePacket(r,n,!1),m.type===o.type&&m.data===o.data)return i(m,0,1);if(!1===i(o,c+s,l))return}c+=s,a=""}else a+=u}return""!==a?i(m,0,1):void 0},t.encodePayloadAsArrayBuffer=function(e,n){if(!e.length)return n(new ArrayBuffer(0));g(e,(function(e,n){t.encodePacket(e,!0,!0,(function(e){return n(null,e)}))}),(function(e,t){var i=t.reduce((function(e,t){var n;return e+(n="string"==typeof t?t.length:t.byteLength).toString().length+n+2}),0),o=new Uint8Array(i),s=0;return t.forEach((function(e){var t="string"==typeof e,n=e;if(t){for(var i=new Uint8Array(e.length),r=0;r<e.length;r++)i[r]=e.charCodeAt(r);n=i.buffer}o[s++]=t?0:1;var a=n.byteLength.toString();for(r=0;r<a.length;r++)o[s++]=parseInt(a[r]);o[s++]=255;for(i=new Uint8Array(n),r=0;r<i.length;r++)o[s++]=i[r]})),n(o.buffer)}))},t.encodePayloadAsBlob=function(e,n){g(e,(function(e,n){t.encodePacket(e,!0,!0,(function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var i=new Uint8Array(e.length),o=0;o<e.length;o++)i[o]=e.charCodeAt(o);e=i.buffer,t[0]=0}var s=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),r=new Uint8Array(s.length+1);for(o=0;o<s.length;o++)r[o]=parseInt(s[o]);if(r[s.length]=255,p){var a=new p([t.buffer,r.buffer,e]);n(null,a)}}))}),(function(e,t){return n(new p(t))}))},t.decodePayloadAsBinary=function(e,n,i){"function"==typeof n&&(i=n,n=null);for(var o=e,s=[];o.byteLength>0;){for(var a=new Uint8Array(o),c=0===a[0],l="",u=1;255!==a[u];u++){if(l.length>310)return i(m,0,1);l+=a[u]}o=r(o,2+l.length),l=parseInt(l);var d=r(o,0,l);if(c)try{d=String.fromCharCode.apply(null,new Uint8Array(d))}catch(e){var h=new Uint8Array(d);d="";for(u=0;u<h.length;u++)d+=String.fromCharCode(h[u])}s.push(d),o=r(o,l)}var f=s.length;s.forEach((function(e,o){i(t.decodePacket(e,n,!0),o,f)}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n(0),o=n(14),s=n(106),r=n.n(s);const a=`/static/build/${window.__domain}/tpl_${window.__static_version}/`,c={},l={};function u(e){var t,n,s,u;s=e.template,u=function(o){o?(t=r.a.render(o,e.data||{}),n=i.parseHTML(t),t=null,e.el&&i.each(e.el,(function(e){i.html(e,""),i.each(n,(function(t){i.append(e,t)}))})),e.onReady&&e.onReady(n)):e.onError&&e.onError()},void 0===c[s]&&void 0===l[s]?(l[s]=[],l[s].push(u),o.get({url:a+s+".html",data:{v:window.__static_version},success:function(e){c[s]=e,l[s].forEach((function(t){t&&t(e)})),l[s]=void 0},error:function(){c[s]="",l[s].forEach((function(e){e&&e("")})),l[s]=void 0}})):void 0===c[s]&&void 0!==l[s]?l[s].push(u):u&&u(c[s])}},function(e,t){t.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){for(var t={},n=e.split("&"),i=0,o=n.length;i<o;i++){var s=n[i].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}},function(e,t){e.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(23);class o{constructor(e){this.init(e)}init(e){this.isOpen=!0,this.delay=e.delay||0,this.onFlush=e.onFlush,this.onFlushEvery=e.onFlushEvery,this.timerFlush=new i.a(this.flush.bind(this)),this.clear()}destroy(){this.timerFlush.reset(),this.clear()}add(e){!0===this.isOpen&&(this.items[this.itemsLength++]=e,this.timerFlush.debounce(this.delay))}remove(e){if(!0===this.isOpen){const t=this.items.indexOf(e);t>=0&&(this.items.splice(t,1),this.itemsLength--),this.timerFlush.debounce(this.delay)}}clear(e){this.items=[],this.itemsLength=0}flush(){const e=this.itemsLength,t=this.items.slice();let n;if(this.timerFlush.reset(),this.onFlush&&this.onFlush(t,e),this.onFlushEvery)for(n=0;n<e;n++)this.onFlushEvery(t[n],n,e);this.clear()}open(e){this.isOpen=!1!==e,!1===this.isOpen&&this.destroy()}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(110),o=n(0);function s(e,t){const n={};let s,r;const a=function(e){const t=o.attr(e,"air-dom");t&&(void 0===n[t]?(s=new i.a,s.select(e),n[t]=s,s=null):n[t].select(e))};if(void 0===t)if("other"===o.dealWithArbitraryData(e))for(r in e)s=new i.a,s.select(e[r]),n[r]=s,s=null;else o.each(e,(function(e){o.each(o.findAll(e,"[air-dom]"),a),a(e)}));else s=new i.a,s.select(t),n[e]=s,s=null;return n}},function(e,t,n){"use strict";n.d(t,"f",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"g",(function(){return c})),n.d(t,"h",(function(){return l})),n.d(t,"e",(function(){return u})),n.d(t,"c",(function(){return d}));var i=n(17);const o={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,DELETE:46,TILDA:192,BACKSLASH:220,LEFT:37,UP:38,DOWN:40,RIGHT:39,META:91,A:6,V:86,Y:89,Z:90,NUM_0:48,NUM_1:49,NUM_2:50,NUM_3:51,NUM_4:52,NUM_5:53,NUM_6:54,NUM_7:55,NUM_8:56,NUM_9:57,MINUS:189};function s(e){const t=e.keyCode;return t>47&&t<58||32==t||13==t||t>64&&t<91||t>95&&t<112||t>185&&t<193||t>218&&t<223}function r(e){return(s(e)||a(e,"BACKSPACE","ENTER","DELETE"))&&!l(e)}function a(){const e=Object(i.a)(arguments),t=e.shift(),n=e.length;if(0===n)console.warn('lib.keys: "is" has no keys to check',t);else for(let i=n-1;i>=0;i--)if(t.keyCode===o[e[i]])return!0;return!1}function c(e){return!0===e.ctrlKey}function l(e){return!0===e.metaKey}function u(e){return!d(e)&&(c(e)||l(e))&&a(e,"Z")}function d(e){return(c(e)||l(e))&&a(e,"Y")||(c(e)||l(e))&&function(e){return!0===e.shiftKey}(e)&&a(e,"Z")}},function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var i=n(86),o=n(87),s=n(88);function r(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(r()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return l(this,e,t,n)}function l(e,t,n,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,i){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,n):new Uint8Array(t,n,i);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=h(e,t);return e}(e,t,n,i):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|m(t,n),o=(e=a(e,i)).write(t,n);o!==i&&(e=e.slice(0,o));return e}(e,t,n):function(e,t){if(c.isBuffer(t)){var n=0|f(t.length);return 0===(e=a(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(i=t.length)!=i?a(e,0):h(e,t);if("Buffer"===t.type&&s(t.data))return h(e,t.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(u(t),e=a(e,t<0?0:0|f(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function h(e,t){var n=t.length<0?0:0|f(t.length);e=a(e,n);for(var i=0;i<n;i+=1)e[i]=255&t[i];return e}function f(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function m(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return N(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return H(e).length;default:if(i)return N(e).length;t=(""+t).toLowerCase(),i=!0}}function p(e,t,n){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return j(this,t,n);case"utf8":case"utf-8":return A(this,t,n);case"ascii":return O(this,t,n);case"latin1":case"binary":return T(this,t,n);case"base64":return x(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function g(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function b(e,t,n,i,o){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=c.from(t,i)),c.isBuffer(t))return 0===t.length?-1:v(e,t,n,i,o);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):v(e,[t],n,i,o);throw new TypeError("val must be string, number or Buffer")}function v(e,t,n,i,o){var s,r=1,a=e.length,c=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;r=2,a/=2,c/=2,n/=2}function l(e,t){return 1===r?e[t]:e.readUInt16BE(t*r)}if(o){var u=-1;for(s=n;s<a;s++)if(l(e,s)===l(t,-1===u?0:s-u)){if(-1===u&&(u=s),s-u+1===c)return u*r}else-1!==u&&(s-=s-u),u=-1}else for(n+c>a&&(n=a-c),s=n;s>=0;s--){for(var d=!0,h=0;h<c;h++)if(l(e,s+h)!==l(t,h)){d=!1;break}if(d)return s}return-1}function y(e,t,n,i){n=Number(n)||0;var o=e.length-n;i?(i=Number(i))>o&&(i=o):i=o;var s=t.length;if(s%2!=0)throw new TypeError("Invalid hex string");i>s/2&&(i=s/2);for(var r=0;r<i;++r){var a=parseInt(t.substr(2*r,2),16);if(isNaN(a))return r;e[n+r]=a}return r}function w(e,t,n,i){return F(N(t,e.length-n),e,n,i)}function _(e,t,n,i){return F(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function k(e,t,n,i){return _(e,t,n,i)}function C(e,t,n,i){return F(H(t),e,n,i)}function S(e,t,n,i){return F(function(e,t){for(var n,i,o,s=[],r=0;r<e.length&&!((t-=2)<0);++r)n=e.charCodeAt(r),i=n>>8,o=n%256,s.push(o),s.push(i);return s}(t,e.length-n),e,n,i)}function x(e,t,n){return 0===t&&n===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,n))}function A(e,t,n){n=Math.min(e.length,n);for(var i=[],o=t;o<n;){var s,r,a,c,l=e[o],u=null,d=l>239?4:l>223?3:l>191?2:1;if(o+d<=n)switch(d){case 1:l<128&&(u=l);break;case 2:128==(192&(s=e[o+1]))&&(c=(31&l)<<6|63&s)>127&&(u=c);break;case 3:s=e[o+1],r=e[o+2],128==(192&s)&&128==(192&r)&&(c=(15&l)<<12|(63&s)<<6|63&r)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:s=e[o+1],r=e[o+2],a=e[o+3],128==(192&s)&&128==(192&r)&&128==(192&a)&&(c=(15&l)<<18|(63&s)<<12|(63&r)<<6|63&a)>65535&&c<1114112&&(u=c)}null===u?(u=65533,d=1):u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u),o+=d}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var n="",i=0;for(;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=4096));return n}(i)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=r(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return l(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,n){return function(e,t,n,i){return u(t),t<=0?a(e,t):void 0!==n?"string"==typeof i?a(e,t).fill(n,i):a(e,t).fill(n):a(e,t)}(null,e,t,n)},c.allocUnsafe=function(e){return d(null,e)},c.allocUnsafeSlow=function(e){return d(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,o=0,s=Math.min(n,i);o<s;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!s(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=c.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var r=e[n];if(!c.isBuffer(r))throw new TypeError('"list" argument must be an Array of Buffers');r.copy(i,o),o+=r.length}return i},c.byteLength=m,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?A(this,0,e):p.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,i,o){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),t<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=n)return 0;if(i>=o)return-1;if(t>=n)return 1;if(this===e)return 0;for(var s=(o>>>=0)-(i>>>=0),r=(n>>>=0)-(t>>>=0),a=Math.min(s,r),l=this.slice(i,o),u=e.slice(t,n),d=0;d<a;++d)if(l[d]!==u[d]){s=l[d],r=u[d];break}return s<r?-1:r<s?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return b(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return b(this,e,t,n,!1)},c.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var s=!1;;)switch(i){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":return _(this,e,t,n);case"latin1":case"binary":return k(this,e,t,n);case"base64":return C(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function O(e,t,n){var i="";n=Math.min(e.length,n);for(var o=t;o<n;++o)i+=String.fromCharCode(127&e[o]);return i}function T(e,t,n){var i="";n=Math.min(e.length,n);for(var o=t;o<n;++o)i+=String.fromCharCode(e[o]);return i}function j(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var o="",s=t;s<n;++s)o+=U(e[s]);return o}function E(e,t,n){for(var i=e.slice(t,n),o="",s=0;s<i.length;s+=2)o+=String.fromCharCode(i[s]+256*i[s+1]);return o}function P(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function I(e,t,n,i,o,s){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<s)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function M(e,t,n,i){t<0&&(t=65535+t+1);for(var o=0,s=Math.min(e.length-n,2);o<s;++o)e[n+o]=(t&255<<8*(i?o:1-o))>>>8*(i?o:1-o)}function $(e,t,n,i){t<0&&(t=4294967295+t+1);for(var o=0,s=Math.min(e.length-n,4);o<s;++o)e[n+o]=t>>>8*(i?o:3-o)&255}function L(e,t,n,i,o,s){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function R(e,t,n,i,s){return s||L(e,0,n,4),o.write(e,t,n,i,23,4),n+4}function D(e,t,n,i,s){return s||L(e,0,n,8),o.write(e,t,n,i,52,8),n+8}c.prototype.slice=function(e,t){var n,i=this.length;if((e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=c.prototype;else{var o=t-e;n=new c(o,void 0);for(var s=0;s<o;++s)n[s]=this[s+e]}return n},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var i=this[e],o=1,s=0;++s<t&&(o*=256);)i+=this[e+s]*o;return i},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var i=this[e+--t],o=1;t>0&&(o*=256);)i+=this[e+--t]*o;return i},c.prototype.readUInt8=function(e,t){return t||P(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||P(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||P(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var i=this[e],o=1,s=0;++s<t&&(o*=256);)i+=this[e+s]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var i=t,o=1,s=this[e+--i];i>0&&(o*=256);)s+=this[e+--i]*o;return s>=(o*=128)&&(s-=Math.pow(2,8*t)),s},c.prototype.readInt8=function(e,t){return t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||P(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){t||P(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||P(e,4,this.length),o.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||P(e,4,this.length),o.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||P(e,8,this.length),o.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||P(e,8,this.length),o.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,i){(e=+e,t|=0,n|=0,i)||I(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,s=0;for(this[t]=255&e;++s<n&&(o*=256);)this[t+s]=e/o&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,i){(e=+e,t|=0,n|=0,i)||I(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,s=1;for(this[t+o]=255&e;--o>=0&&(s*=256);)this[t+o]=e/s&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):M(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):M(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):$(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):$(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t|=0,!i){var o=Math.pow(2,8*n-1);I(this,e,t,n,o-1,-o)}var s=0,r=1,a=0;for(this[t]=255&e;++s<n&&(r*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/r>>0)-a&255;return t+n},c.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t|=0,!i){var o=Math.pow(2,8*n-1);I(this,e,t,n,o-1,-o)}var s=n-1,r=1,a=0;for(this[t+s]=255&e;--s>=0&&(r*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/r>>0)-a&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):M(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):M(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):$(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||I(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):$(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return R(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return R(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return D(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return D(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,i){if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var o,s=i-n;if(this===e&&n<t&&t<i)for(o=s-1;o>=0;--o)e[o+t]=this[o+n];else if(s<1e3||!c.TYPED_ARRAY_SUPPORT)for(o=0;o<s;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+s),t);return s},c.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!c.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var s;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(s=t;s<n;++s)this[s]=e;else{var r=c.isBuffer(e)?e:N(new c(e,i).toString()),a=r.length;for(s=0;s<n-t;++s)this[s+t]=r[s%a]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function U(e){return e<16?"0"+e.toString(16):e.toString(16)}function N(e,t){var n;t=t||1/0;for(var i=e.length,o=null,s=[],r=0;r<i;++r){if((n=e.charCodeAt(r))>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(r+1===i){(t-=3)>-1&&s.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&s.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function H(e){return i.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(B,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function F(e,t,n,i){for(var o=0;o<i&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}}).call(this,n(78))},function(e,t,n){var i=n(16)("socket.io-parser"),o=n(28),s=n(85),r=n(53),a=n(54);function c(){}t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=c,t.Decoder=d;var l=t.ERROR+'"encode error"';function u(e){var n=""+e.type;if(t.BINARY_EVENT!==e.type&&t.BINARY_ACK!==e.type||(n+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(n+=e.nsp+","),null!=e.id&&(n+=e.id),null!=e.data){var o=function(e){try{return JSON.stringify(e)}catch(e){return!1}}(e.data);if(!1===o)return l;n+=o}return i("encoded %j as %s",e,n),n}function d(){this.reconstructor=null}function h(e){this.reconPack=e,this.buffers=[]}function f(e){return{type:t.ERROR,data:"parser error: "+e}}c.prototype.encode=function(e,n){(i("encoding packet %j",e),t.BINARY_EVENT===e.type||t.BINARY_ACK===e.type)?function(e,t){s.removeBlobs(e,(function(e){var n=s.deconstructPacket(e),i=u(n.packet),o=n.buffers;o.unshift(i),t(o)}))}(e,n):n([u(e)])},o(d.prototype),d.prototype.add=function(e){var n;if("string"==typeof e)n=function(e){var n=0,o={type:Number(e.charAt(0))};if(null==t.types[o.type])return f("unknown packet type "+o.type);if(t.BINARY_EVENT===o.type||t.BINARY_ACK===o.type){for(var s=n+1;"-"!==e.charAt(++n)&&n!=e.length;);var a=e.substring(s,n);if(a!=Number(a)||"-"!==e.charAt(n))throw new Error("Illegal attachments");o.attachments=Number(a)}if("/"===e.charAt(n+1)){for(s=n+1;++n;){if(","===(l=e.charAt(n)))break;if(n===e.length)break}o.nsp=e.substring(s,n)}else o.nsp="/";var c=e.charAt(n+1);if(""!==c&&Number(c)==c){for(s=n+1;++n;){var l;if(null==(l=e.charAt(n))||Number(l)!=l){--n;break}if(n===e.length)break}o.id=Number(e.substring(s,n+1))}if(e.charAt(++n)){var u=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(n));if(!(!1!==u&&(o.type===t.ERROR||r(u))))return f("invalid payload");o.data=u}return i("decoded %s as %j",e,o),o}(e),t.BINARY_EVENT===n.type||t.BINARY_ACK===n.type?(this.reconstructor=new h(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!a(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",n))}},d.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},h.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=s.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},h.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(e,t,n){var i=n(91),o=n(39);e.exports=function(e){var t=e.xdomain,n=e.xscheme,s=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||i))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!n&&s)return new XDomainRequest}catch(e){}if(!t)try{return new(o[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}},function(e,t){e.exports="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},function(e,t,n){var i=n(29),o=n(28);function s(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.isReactNative=e.isReactNative,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}e.exports=s,o(s.prototype),s.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},s.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},s.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},s.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},s.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},s.prototype.onData=function(e){var t=i.decodePacket(e,this.socket.binaryType);this.onPacket(t)},s.prototype.onPacket=function(e){this.emit("packet",e)},s.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(73);class o{constructor(e){this.elements_list=[],this.created_list=[],this.length=0,void 0!==e&&(this.create=e.create,this.destroy=e.destroy,this.refresh=e.refresh)}getByElement(e){var t=this.elements_list.indexOf(e);if(t>=0)return this.created_list[t]}isExists(e){return this.elements_list.indexOf(e)>=0}getLength(){return this.length}getElements(){return this.elements_list}getInstances(){return this.created_list}addElement(e){return!1===this.isExists(e)&&(this.elements_list[this.length]=e,this.created_list[this.length]=this.create?this.create(e):void 0,this.length++,!0)}addElements(e){var t,n=e.length,i=0;for(t=0;t<n;t++)this.addElement(e[t])&&i++;return i}each(e){for(let t=0;t<this.length&&null!==e(this.elements_list[t],this.created_list[t],t,this.length);t++);}eq(e,t){return t(this.elements_list[e],this.created_list[e],e,this.length)}map(e){var t=[];for(let n=0;n<this.length;n++)t[n]=e(this.elements_list[n],this.created_list[n],n,this.length);return t}every(e){for(let t=0;t<this.length;t++)if(!0!==e(this.elements_list[t],this.created_list[t],t,this.length))return!1;return!0}some(e){for(let t=0;t<this.length;t++)if(!0===e(this.elements_list[t],this.created_list[t],t,this.length))return!0;return!1}reduce(e,t){for(let n=0;n<this.length;n++)t=e(t,this.elements_list[n],this.created_list[n],n,this.length);return t}removeElement(e){for(let t=0;t<this.length;t++)if(e===this.elements_list[t])return void 0!==this.destroy&&this.destroy(this.elements_list[t],this.created_list[t]),this.elements_list.splice(t,1),this.created_list.splice(t,1),this.length--,!0;return!1}removeElements(e){var t=e.length,n=0;for(let i=0;i<t;i++)this.removeElement(e[i])&&n++;return n}clear(){var e=!1;for(let t=0;t<this.length;t++)void 0!==this.destroy&&this.destroy(this.elements_list[t],this.created_list[t]),e=!0;return this.elements_list=Object(i.a)(this.elements_list,[]),this.created_list=Object(i.a)(this.created_list,[]),this.length=0,e}makeAction(e,t){var n,i=document.querySelectorAll(t),o=i.length;for(let t=0;t<o;t++)!0===this[e](i[t])&&n++;return n}add(e){return this.makeAction("addElement",e)}remove(e){return this.makeAction("removeElement",e)}replace(e){return this.clear(),this.add(e)}filterByRule(e,t){var n=[],i=0;for(let o=0;o<this.length;o++)e(this.elements_list[o],this.created_list[o],o,this.length)===(!0!==t)&&(n[i++]={element:this.elements_list[o],created:this.created_list[o],index:o});return n}removeByRule(e,t){var n,i,o=this.filterByRule(e,t).reverse(),s=o.length;for(let e=s-1;e>=0;e--)n=o[e],void 0!==this.destroy&&this.destroy(this.elements_list[n.index],this.created_list[n.index]);for(let e=s-1;e>=0;e--)i=this.elements_list.indexOf(o[e].element),this.elements_list.splice(i,1),this.created_list.splice(i,1);return this.length-=s,s}isElementExists(e){return document.body.contains(e)}update(e){this.removeByRule(this.isElementExists,!0),void 0!==this.refresh&&this.each(this.refreshItem.bind(this)),this.add(e)}refreshItem(e,t,n){var i=this.refresh(e,t);void 0!==i&&(this.created_list[n]=i)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const i=document.createElement("a");function o(e){i.href=e;const t=i.search.substring(1);return{path:i.pathname,search:t,hash:i.hash.substring(1),full_path:i.pathname+(""===t?"":"?"+t),hostname:i.hostname}}},function(e,t,n){"use strict";function i(e){var t=e.length,n=0;if(t>0)for(let i=0;i<t;i++){n=(n<<5)-n+e.charCodeAt(i),n|=0}return n}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(2);const o=[];function s(e,t){!function(e,t){const n=Date.now(),o=new Image;o.onload=()=>{const o=Date.now()-n;o>2e3&&i.log("lazyload",`loading period exceeded: ${o}ms for "${e}"`),t(e)},o.onerror=()=>{i.log("lazyload",`loading error for "${e}"`)},o.src=e}(e,t)}window.__lazyLoadStat=function(){console.log("=========== LazyLoad stat ============");const e={time:[],success:0,error:0};o.forEach(([t,n])=>{n?(e.time.push(t),e.success++):e.error++});const t=Math.round(1e3*e.error/(e.success+e.error))/10;console.log(`${e.success} images of ${e.success+e.error} successfully loaded (${t}% lost)`),console.log("======================================")},i.define("lazyload","LazyLoad ( ͠° ͟ʖ ͠°)","#5171A5")},function(e,t,n){
/**
 * vue-gettext v2.1.12
 * (c) 2020 Polyconseil
 * @license MIT
 */
!function(e){"use strict";"function"!=typeof Object.assign&&(Object.assign=function(e){var t,n,i,o,s=arguments;if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(t=Object(e),n=1;n<arguments.length;n++)if(null!=(i=s[n]))for(o in i)i.hasOwnProperty(o)&&(t[o]=i[o]);return t});var t,n=function(e,t){switch(t="number"==typeof(t=Number(t))&&isNaN(t)?1:t,e.length>2&&"pt_BR"!==e&&(e=e.split("_")[0]),e){case"ay":case"bo":case"cgg":case"dz":case"fa":case"id":case"ja":case"jbo":case"ka":case"kk":case"km":case"ko":case"ky":case"lo":case"ms":case"my":case"sah":case"su":case"th":case"tt":case"ug":case"vi":case"wo":case"zh":return 0;case"is":return t%10!=1||t%100==11?1:0;case"jv":return 0!==t?1:0;case"mk":return 1===t||t%10==1?0:1;case"ach":case"ak":case"am":case"arn":case"br":case"fil":case"fr":case"gun":case"ln":case"mfe":case"mg":case"mi":case"oc":case"pt_BR":case"tg":case"ti":case"tr":case"uz":case"wa":case"zh":return t>1?1:0;case"lv":return t%10==1&&t%100!=11?0:0!==t?1:2;case"lt":return t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2;case"be":case"bs":case"hr":case"ru":case"sr":case"uk":return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2;case"mnk":return 0===t?0:1===t?1:2;case"ro":return 1===t?0:0===t||t%100>0&&t%100<20?1:2;case"pl":return 1===t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2;case"cs":case"sk":return 1===t?0:t>=2&&t<=4?1:2;case"csb":return 1===t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2;case"sl":return t%100==1?0:t%100==2?1:t%100==3||t%100==4?2:3;case"mt":return 1===t?0:0===t||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3;case"gd":return 1===t||11===t?0:2===t||12===t?1:t>2&&t<20?2:3;case"cy":return 1===t?0:2===t?1:8!==t&&11!==t?2:3;case"kw":return 1===t?0:2===t?1:3===t?2:3;case"ga":return 1===t?0:2===t?1:t>2&&t<7?2:t>6&&t<11?3:4;case"ar":return 0===t?0:1===t?1:2===t?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5;default:return 1!==t?1:0}},i=/[[\].]{1,2}/g,o=/%\{((?:.|\n)+?)\}/g,s=/\{\{((?:.|\n)+?)\}\}/g,r=function(e,n,r){return void 0===n&&(n={}),void 0===r&&(r=!1),t&&!t.config.getTextPluginSilent&&s.test(e)&&console.warn('Mustache syntax cannot be used with vue-gettext. Please use "%{}" instead of "{{}}" in: '+e),e.replace(o,(function(e,t){var o,s=t.trim(),a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return function e(t){try{o=function(e,t){for(var n=t.split(i).filter((function(e){return e}));n.length;)e=e[n.shift()];return e}(this,t)}catch(e){}if(void 0===o){if(this.$parent)return e.call(this.$parent,t);console.warn("Cannot evaluate expression: "+t),o=t}var n=o.toString();return r?n:n.replace(/[&<>"']/g,(function(e){return a[e]}))}.call(n,s)}))};r.INTERPOLATION_RE=o,r.INTERPOLATION_PREFIX="%{";var a=/\s{2,}/g,c={language:"",getTextPluginSilent:!1,getTextPluginMuteLanguages:[],silent:!1},l={},u={getTranslation:function(e,t,i,o,s){if(void 0===t&&(t=1),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=c.language),!e)return"";var r=c.getTextPluginSilent||-1!==c.getTextPluginMuteLanguages.indexOf(s),u=o&&n(s,t)>0?o:e,d=l[s]||l[s.split("_")[0]];if(!d)return r||console.warn("No translations found for "+s),u;e=e.trim();var h=d[e];if(!h&&a.test(e)&&Object.keys(d).some((function(t){if(t.replace(a," ")===e.replace(a," "))return h=d[t]})),h&&i&&(h=h[i]),!h){if(!r){var f="Untranslated "+s+" key found: "+e;i&&(f+=" (with context: "+i+")"),console.warn(f)}return u}h instanceof Array||!h.hasOwnProperty("")||(h=h[""]),"string"==typeof h&&(h=[h]);var m=n(s,t);return 1===h.length&&1===t&&(m=0),h[m]},gettext:function(e,t){return void 0===t&&(t=c.language),u.getTranslation(e,1,null,null,t)},pgettext:function(e,t,n){return void 0===n&&(n=c.language),u.getTranslation(t,1,e,null,n)},ngettext:function(e,t,n,i){return void 0===i&&(i=c.language),u.getTranslation(e,n,null,t,i)},npgettext:function(e,t,n,i,o){return void 0===o&&(o=c.language),u.getTranslation(t,i,e,n,o)},initTranslations:function(e,t){e&&"object"==typeof e&&(l=e),t&&"object"==typeof t&&(c=t)},gettextInterpolate:r.bind(r)};function d(){var e,t,n="";for(e=0;e<32;e++)t=16*Math.random()|0,8!==e&&12!==e&&16!==e&&20!==e||(n+="-"),n+=(12===e?4:16===e?3&t|8:t).toString(16);return n}var h,f={name:"translate",created:function(){if(this.msgid="",this.$options._renderChildren&&(this.$options._renderChildren[0].hasOwnProperty("text")?this.msgid=this.$options._renderChildren[0].text:this.msgid=this.$options._renderChildren[0]),this.isPlural=void 0!==this.translateN&&void 0!==this.translatePlural,!this.isPlural&&(this.translateN||this.translatePlural))throw new Error("`translate-n` and `translate-plural` attributes must be used together: "+this.msgid+".")},props:{tag:{type:String,default:"span"},translateN:{type:Number,required:!1},translatePlural:{type:String,required:!1},translateContext:{type:String,required:!1},translateParams:{type:Object,required:!1},translateComment:{type:String,required:!1}},computed:{translation:function(){var e=u.getTranslation(this.msgid,this.translateN,this.translateContext,this.isPlural?this.translatePlural:null,this.$language.current),t=this.$parent;return this.translateParams&&(t=Object.assign({},this.$parent,this.translateParams)),this.$gettextInterpolate(e,t)}},render:function(e){return t.config.autoAddKeyAttributes&&!this.$vnode.key&&(this.$vnode.key=d()),e(this.tag,[this.translation])}},m=function(e,n,i){var o=i.data.attrs||{},s=e.dataset.msgid,a=o["translate-context"],c=o["translate-n"],l=o["translate-plural"],d=void 0!==c&&void 0!==l,h=i.context,f="true"===o["render-html"];if(!d&&(c||l))throw new Error("`translate-n` and `translate-plural` attributes must be used together:"+s+".");!t.config.getTextPluginSilent&&o["translate-params"]&&console.warn("`translate-params` is required as an expression for v-translate directive. Please change to `v-translate='params'`: "+s),n.value&&"object"==typeof n.value&&(h=Object.assign({},i.context,n.value));var m=u.getTranslation(s,c,a,d?l:null,e.dataset.currentLanguage),p=r(m,h,f);e.innerHTML=p},p={bind:function(e,n,i){t.config.autoAddKeyAttributes&&!i.key&&(i.key=d());var o=e.innerHTML;e.dataset.msgid=o,e.dataset.currentLanguage=t.config.language,t.config.getTextPluginSilent||-1!==o.indexOf(r.INTERPOLATION_PREFIX)&&!n.expression&&console.info("No expression is provided for change detection. The translation for this key will be static:\n"+o),m(e,n,i)},update:function(e,n,i){var o=!1;e.dataset.currentLanguage!==t.config.language&&(e.dataset.currentLanguage=t.config.language,o=!0),o||!n.expression||function e(t,n){if(t===n)return!0;var i=null!==t&&"object"==typeof t,o=null!==n&&"object"==typeof n;if(!i||!o)return!i&&!o&&String(t)===String(n);try{var s=Array.isArray(t),r=Array.isArray(n);if(s&&r)return t.length===n.length&&t.every((function(t,i){return e(t,n[i])}));if(t instanceof Date&&n instanceof Date)return t.getTime()===n.getTime();if(s||r)return!1;var a=Object.keys(t),c=Object.keys(n);return a.length===c.length&&a.every((function(i){return e(t[i],n[i])}))}catch(e){return!1}}(n.value,n.oldValue)||(o=!0),o&&m(e,n,i)}};e.default=function(e,n){void 0===n&&(n={});var i={autoAddKeyAttributes:!1,availableLanguages:{en_US:"English"},defaultLanguage:"en_US",languageVmMixin:{},muteLanguages:[],silent:e.config.silent,translations:null};if(Object.keys(n).forEach((function(e){if(-1===Object.keys(i).indexOf(e))throw new Error(e+" is an invalid option for the translate plugin.")})),!n.translations)throw new Error("No translations available.");n=Object.assign(i,n),h=new e({created:function(){this.available=n.availableLanguages},data:{current:n.defaultLanguage},mixins:[n.languageVmMixin]}),function(e){t=e}(e),function(e,t){var n=e.prototype._init;e.prototype._init=function(e){void 0===e&&(e={});var i=e._parent||e.parent||this;this.$language=i.$language||t,n.call(this,e)};var i=e.prototype._destroy;e.prototype._destroy=function(){this.$language=null,i.apply(this,arguments)}}(e,h),function(e,t,n,i,o){Object.defineProperty(e.config,"language",{enumerable:!0,configurable:!0,get:function(){return t.current},set:function(e){t.current=e}}),Object.defineProperty(e.config,"getTextPluginSilent",{enumerable:!0,writable:!0,value:n}),Object.defineProperty(e.config,"autoAddKeyAttributes",{enumerable:!0,writable:!0,value:i}),Object.defineProperty(e.config,"getTextPluginMuteLanguages",{enumerable:!0,writable:!0,value:o})}(e,h,n.silent,n.autoAddKeyAttributes,n.muteLanguages),u.initTranslations(n.translations,e.config),e.component("translate",f),e.directive("translate",p),e.$translations=n.translations,e.prototype.$gettext=u.gettext.bind(u),e.prototype.$pgettext=u.pgettext.bind(u),e.prototype.$ngettext=u.ngettext.bind(u),e.prototype.$npgettext=u.npgettext.bind(u),e.prototype.$gettextInterpolate=r.bind(r)},e.translate=u,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,n){"use strict";function i(e){var t={};for(let n=0,i=(e=e.split("&")).length;n<i;n++)e[n]=e[n].split("="),t[e[n][0]]=void 0===e[n][1]||e[n][1];return t}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));class i{constructor(e){this.raf=null,this.current_state=!1,this.func=e.bind(this),this.selfLoop=this.loop.bind(this)}loop(){this.raf=requestAnimationFrame(this.selfLoop),this.func()}start(){!1===this.current_state&&(this.current_state=!0,this.raf=requestAnimationFrame(this.selfLoop))}stop(){!0===this.current_state&&(this.current_state=!1,cancelAnimationFrame(this.raf))}state(){return this.current_state}}!function(){for(var e=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,n){var i=(new Date).getTime(),o=Math.max(0,16-(i-e)),s=window.setTimeout((function(){t(i+o)}),o);return e=i+o,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var i=n(24);class o extends i.b{constructor({name:e}){super(),this.worker=new SharedWorker(`${window.__static_path}/${e}.${window.__static_version}.es6.min.js`),this.worker.port.onmessage=({data:e})=>{this.trigger("message",e)}}send(e){this.worker.port.postMessage(e)}}function s(){return"function"==typeof window.SharedWorker}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(41),o=n(23),s=n(11);function r(e){var t,n,r,a,c=this,l=0,u=Object(s.a)(),d={selector:"",offset:0,debounce:0,throttle:0,events:{}},h={rootMargin:"0px",threshold:0},f=function(e){e=e||{};for(var t=1;t<arguments.length;t++){var n=arguments[t];if(n)for(var i in n)n.hasOwnProperty(i)&&("object"==typeof n[i]?e[i]=f(e[i],n[i]):e[i]=n[i])}return e},m=function(){var e={};this.add=function(t){t.forEach((function(t){let n=t.__scroll_manager_data[u],i=e[n.id];i?i.visible!==n.visible&&(delete e[n.id],i=n=null):e[n.id]={visible:n.visible}}))},this.get=function(){return e},this.clear=function(){e={}}},p=function(e){var t=[],n=[],i=[];e.forEach((function(e){!0===e.__scroll_manager_data[u].visible?t.push({visible:!0,element:e}):n.push({visible:!1,element:e})})),i=t.concat(n),t.length&&g("onEnter",t),n.length&&g("onLeave",n),i.length&&g("onEnterOrLeave",i),t=null,n=null,i=null,e=null},g=function(e,t){c.options.events[e]&&c.options.events[e](t)},b=function(e){var t,i=[];e.forEach((function(e){null!==e.target.__scroll_manager_data[u]&&(void 0===e.isIntersecting&&(e.isIntersecting=e.intersectionRatio>0),!1===e.target.__scroll_manager_data[u].visible&&!0===e.isIntersecting?(e.target.__scroll_manager_data[u].visible=!0,t=i.push(e.target)):!0===e.target.__scroll_manager_data[u].visible&&!1===e.isIntersecting&&(e.target.__scroll_manager_data[u].visible=!1,t=i.push(e.target)))})),t&&(c.options.debounce>0&&(a.add(i),n.debounce()),c.options.throttle>0&&(a.add(i),n.throttle()),0===c.options.debounce&&0===c.options.throttle&&p(i)),i=null},v=function(){var e,n=a.get(),i=[];for(e in n)t.getElements().forEach((function(t){t.__scroll_manager_data[u].id==e&&i.push(t)}));a.clear(),i.length&&p(i),i=null,n=null};c.destroy=function(){t.clear(),r&&r.disconnect(),a&&a.clear(),n&&n.reset(),r=a=n=null},c.cacheObjects=function(){t.update(e.selector)},c.update=function(){console.log('Method "update" of class ScrollManager does not exist')},c.options=f({},d,e),h.rootMargin=c.options.offset+"px",r=new IntersectionObserver(b,h),(c.options.debounce||c.options.throttle)&&(n=new o.a(v,c.options.throttle||c.options.debounce),a=new m),t=new i.a({create:function(e){void 0!==e.__scroll_manager_data&&null!==e.__scroll_manager_data||(e.__scroll_manager_data={}),e.__scroll_manager_data[u]={visible:!1,id:++l},r.observe(e)},destroy:function(e){r.unobserve(e),e.__scroll_manager_data[u]=null,0===Object.keys(e.__scroll_manager_data).length&&(e.__scroll_manager_data=null),e=null}}),c.cacheObjects()}},function(e,t){var n,i,o=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(e){n=s}try{i="function"==typeof clearTimeout?clearTimeout:r}catch(e){i=r}}();var c,l=[],u=!1,d=-1;function h(){u&&c&&(u=!1,c.length?l=c.concat(l):d=-1,l.length&&f())}function f(){if(!u){var e=a(h);u=!0;for(var t=l.length;t;){for(c=l,l=[];++d<t;)c&&c[d].run();d=-1,t=l.length}c=null,u=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===r||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function p(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new m(e,t)),1!==l.length||u||a(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=p,o.addListener=p,o.once=p,o.off=p,o.removeListener=p,o.removeAllListeners=p,o.emit=p,o.prependListener=p,o.prependOnceListener=p,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return h}));var i=n(0),o=n(7);const s=[];function r(e){const t={};return t.x=e.pageX||e.clientX||(e.changedTouches?e.changedTouches[0].pageX:0),t.y=e.pageY||e.clientY||(e.changedTouches?e.changedTouches[0].pageY:0),t}function a(e){const t=r(e);s.forEach((function(n){n.el===e.target&&(n.mouseDown=!0,n.startCoord=t,n.options.start&&n.options.start(t.x,t.y,e))})),o.h?i.on(document,"touchmove.drag",c):i.on(document,"mousemove.drag",c)}function c(e){var t=r(e);s.forEach((function(n){n.mouseDown&&n.options.move&&n.options.move(t.x-n.startCoord.x,t.y-n.startCoord.y,e)}))}function l(e){var t=r(e);s.forEach((function(n){n.mouseDown&&(n.options.end&&n.options.end(t.x-n.startCoord.x,t.y-n.startCoord.y,e),n.mouseDown=!1,n.startCoord=null)})),o.h?i.off(document,"touchmove.drag"):i.off(document,"mousemove.drag")}function u(e){const{length:t}=s;0===t&&(e?o.h?(i.on(document,"touchstart.drag",a),i.on(document,"touchend.drag",l)):(i.on(document,"mousedown.drag",a),i.on(document,"mouseup.drag",l)):i.off(document,".drag"))}function d(e,t){u(!0),s.push({el:e,options:t})}function h(e){let t;s.forEach((function(n,i){n.el===e&&(t=i)})),s.splice(t,1),u(!1)}},function(e,t){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t=e,o=e.indexOf("["),s=e.indexOf("]");-1!=o&&-1!=s&&(e=e.substring(0,o)+e.substring(o,s).replace(/:/g,";")+e.substring(s,e.length));for(var r,a,c=n.exec(e||""),l={},u=14;u--;)l[i[u]]=c[u]||"";return-1!=o&&-1!=s&&(l.source=t,l.host=l.host.substring(1,l.host.length-1).replace(/;/g,":"),l.authority=l.authority.replace("[","").replace("]","").replace(/;/g,":"),l.ipv6uri=!0),l.pathNames=function(e,t){var n=t.replace(/\/{2,9}/g,"/").split("/");"/"!=t.substr(0,1)&&0!==t.length||n.splice(0,1);"/"==t.substr(t.length-1,1)&&n.splice(n.length-1,1);return n}(0,l.path),l.queryKey=(r=l.query,a={},r.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,n){t&&(a[t]=n)})),a),l}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){(function(t){e.exports=function(e){return n&&t.isBuffer(e)||i&&(e instanceof ArrayBuffer||function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}(e))};var n="function"==typeof t&&"function"==typeof t.isBuffer,i="function"==typeof ArrayBuffer}).call(this,n(36).Buffer)},function(e,t,n){var i=n(89),o=n(61),s=n(28),r=n(37),a=n(62),c=n(63),l=n(16)("socket.io-client:manager"),u=n(60),d=n(104),h=Object.prototype.hasOwnProperty;function f(e,t){if(!(this instanceof f))return new f(e,t);e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new d({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=t.parser||r;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}e.exports=f,f.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)h.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},f.prototype.updateSocketIds=function(){for(var e in this.nsps)h.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},f.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},s(f.prototype),f.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},f.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},f.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},f.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},f.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},f.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},f.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},f.prototype.open=f.prototype.connect=function(e,t){if(l("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;l("opening %s",this.uri),this.engine=i(this.uri,this.opts);var n=this.engine,o=this;this.readyState="opening",this.skipReconnect=!1;var s=a(n,"open",(function(){o.onopen(),e&&e()})),r=a(n,"error",(function(t){if(l("connect_error"),o.cleanup(),o.readyState="closed",o.emitAll("connect_error",t),e){var n=new Error("Connection error");n.data=t,e(n)}else o.maybeReconnectOnOpen()}));if(!1!==this._timeout){var c=this._timeout;l("connect attempt will timeout after %d",c),0===c&&s.destroy();var u=setTimeout((function(){l("connect attempt timed out after %d",c),s.destroy(),n.close(),n.emit("error","timeout"),o.emitAll("connect_timeout",c)}),c);this.subs.push({destroy:function(){clearTimeout(u)}})}return this.subs.push(s),this.subs.push(r),this},f.prototype.onopen=function(){l("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(a(e,"data",c(this,"ondata"))),this.subs.push(a(e,"ping",c(this,"onping"))),this.subs.push(a(e,"pong",c(this,"onpong"))),this.subs.push(a(e,"error",c(this,"onerror"))),this.subs.push(a(e,"close",c(this,"onclose"))),this.subs.push(a(this.decoder,"decoded",c(this,"ondecoded")))},f.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},f.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},f.prototype.ondata=function(e){this.decoder.add(e)},f.prototype.ondecoded=function(e){this.emit("packet",e)},f.prototype.onerror=function(e){l("error",e),this.emitAll("error",e)},f.prototype.socket=function(e,t){var n=this.nsps[e];if(!n){n=new o(this,e,t),this.nsps[e]=n;var i=this;n.on("connecting",s),n.on("connect",(function(){n.id=i.generateId(e)})),this.autoConnect&&s()}function s(){~u(i.connecting,n)||i.connecting.push(n)}return n},f.prototype.destroy=function(e){var t=u(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},f.prototype.packet=function(e){l("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,(function(n){for(var i=0;i<n.length;i++)t.engine.write(n[i],e.options);t.encoding=!1,t.processPacketQueue()})))},f.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},f.prototype.cleanup=function(){l("cleanup");for(var e=this.subs.length,t=0;t<e;t++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},f.prototype.close=f.prototype.disconnect=function(){l("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},f.prototype.onclose=function(e){l("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},f.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)l("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();l("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout((function(){e.skipReconnect||(l("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open((function(t){t?(l("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(l("reconnect success"),e.onreconnect())})))}),t);this.subs.push({destroy:function(){clearTimeout(n)}})}},f.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},function(e,t,n){var i=n(38),o=n(92),s=n(100),r=n(101);t.polling=function(e){var t=!1,n=!1,r=!1!==e.jsonp;if("undefined"!=typeof location){var a="https:"===location.protocol,c=location.port;c||(c=a?443:80),t=e.hostname!==location.hostname||c!==e.port,n=e.secure!==a}if(e.xdomain=t,e.xscheme=n,"open"in new i(e)&&!e.forceJSONP)return new o(e);if(!r)throw new Error("JSONP disabled");return new s(e)},t.websocket=r},function(e,t,n){var i=n(40),o=n(31),s=n(29),r=n(32),a=n(59),c=n(16)("engine.io-client:polling");e.exports=u;var l=null!=new(n(38))({xdomain:!1}).responseType;function u(e){var t=e&&e.forceBase64;l&&!t||(this.supportsBinary=!1),i.call(this,e)}r(u,i),u.prototype.name="polling",u.prototype.doOpen=function(){this.poll()},u.prototype.pause=function(e){var t=this;function n(){c("paused"),t.readyState="paused",e()}if(this.readyState="pausing",this.polling||!this.writable){var i=0;this.polling&&(c("we are currently polling - waiting to pause"),i++,this.once("pollComplete",(function(){c("pre-pause polling complete"),--i||n()}))),this.writable||(c("we are currently writing - waiting to pause"),i++,this.once("drain",(function(){c("pre-pause writing complete"),--i||n()})))}else n()},u.prototype.poll=function(){c("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},u.prototype.onData=function(e){var t=this;c("polling got data %s",e);s.decodePayload(e,this.socket.binaryType,(function(e,n,i){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():c('ignoring poll - transport state "%s"',this.readyState))},u.prototype.doClose=function(){var e=this;function t(){c("writing close packet"),e.write([{type:"close"}])}"open"===this.readyState?(c("transport open - closing"),t()):(c("transport not open - deferring close"),this.once("open",t))},u.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")};s.encodePayload(e,this.supportsBinary,(function(e){t.doWrite(e,n)}))},u.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=a()),this.supportsBinary||e.sid||(e.b64=1),e=o.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e}},function(e,t,n){(function(t){var i=n(94),o=Object.prototype.toString,s="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===o.call(Blob),r="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===o.call(File);e.exports=function e(n){if(!n||"object"!=typeof n)return!1;if(i(n)){for(var o=0,a=n.length;o<a;o++)if(e(n[o]))return!0;return!1}if("function"==typeof t&&t.isBuffer&&t.isBuffer(n)||"function"==typeof ArrayBuffer&&n instanceof ArrayBuffer||s&&n instanceof Blob||r&&n instanceof File)return!0;if(n.toJSON&&"function"==typeof n.toJSON&&1===arguments.length)return e(n.toJSON(),!0);for(var c in n)if(Object.prototype.hasOwnProperty.call(n,c)&&e(n[c]))return!0;return!1}}).call(this,n(36).Buffer)},function(e,t,n){"use strict";var i,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),s={},r=0,a=0;function c(e){var t="";do{t=o[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function l(){var e=c(+new Date);return e!==i?(r=0,i=e):e+"."+c(r++)}for(;a<64;a++)s[o[a]]=a;l.encode=c,l.decode=function(e){var t=0;for(a=0;a<e.length;a++)t=64*t+s[e.charAt(a)];return t},e.exports=l},function(e,t){var n=[].indexOf;e.exports=function(e,t){if(n)return e.indexOf(t);for(var i=0;i<e.length;++i)if(e[i]===t)return i;return-1}},function(e,t,n){var i=n(37),o=n(28),s=n(103),r=n(62),a=n(63),c=n(16)("socket.io-client:socket"),l=n(31),u=n(58);e.exports=f;var d={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},h=o.prototype.emit;function f(e,t,n){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}o(f.prototype),f.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[r(e,"open",a(this,"onopen")),r(e,"packet",a(this,"onpacket")),r(e,"close",a(this,"onclose"))]}},f.prototype.open=f.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.reconnecting||this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},f.prototype.send=function(){var e=s(arguments);return e.unshift("message"),this.emit.apply(this,e),this},f.prototype.emit=function(e){if(d.hasOwnProperty(e))return h.apply(this,arguments),this;var t=s(arguments),n={type:(void 0!==this.flags.binary?this.flags.binary:u(t))?i.BINARY_EVENT:i.EVENT,data:t,options:{}};return n.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this.flags={},this},f.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},f.prototype.onopen=function(){if(c("transport is open - connecting"),"/"!==this.nsp)if(this.query){var e="object"==typeof this.query?l.encode(this.query):this.query;c("sending connect packet with query %s",e),this.packet({type:i.CONNECT,query:e})}else this.packet({type:i.CONNECT})},f.prototype.onclose=function(e){c("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},f.prototype.onpacket=function(e){var t=e.nsp===this.nsp,n=e.type===i.ERROR&&"/"===e.nsp;if(t||n)switch(e.type){case i.CONNECT:this.onconnect();break;case i.EVENT:case i.BINARY_EVENT:this.onevent(e);break;case i.ACK:case i.BINARY_ACK:this.onack(e);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit("error",e.data)}},f.prototype.onevent=function(e){var t=e.data||[];c("emitting event %j",t),null!=e.id&&(c("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?h.apply(this,t):this.receiveBuffer.push(t)},f.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var o=s(arguments);c("sending ack %j",o),t.packet({type:u(o)?i.BINARY_ACK:i.ACK,id:e,data:o})}}},f.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(c("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):c("bad ack %s",e.id)},f.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},f.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)h.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},f.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},f.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},f.prototype.close=f.prototype.disconnect=function(){return this.connected&&(c("performing disconnect (%s)",this.nsp),this.packet({type:i.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},f.prototype.compress=function(e){return this.flags.compress=e,this},f.prototype.binary=function(e){return this.flags.binary=e,this}},function(e,t){e.exports=function(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}},function(e,t){var n=[].slice;e.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var i=n.call(arguments,2);return function(){return t.apply(e,i.concat(n.call(arguments)))}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(2),o=n(11);i.define("MVStore","MVStore","#a9a9a9\n");class s{constructor(e){void 0===e.props&&(e.props={}),void 0===e.handlers&&(e.handlers={}),this.model=this.copyProps(e.props),this.view=this.copyProps(e.props),this.handlers=e.handlers,this.name=`${e.name||"store"}~${Object(o.a)()}`}copyProps(e){var t,n={};for(t in e)n[t]=e[t];return n}handle(e,t){void 0!==this.handlers[e]&&this.handlers[e].apply(this,t)}get(e){return void 0===e?this.view:this.view[e]}set(e){var t,n=this.copyProps(this.view);for(t in i.log("MVStore",this.name+" set",e),e)this.view[t]=e[t];for(t in e)e[t]!==n[t]&&this.handle("viewChange",[t,e[t],n[t]]),e[t]!==this.model[t]&&this.handle("viewRequestModelChange",[t,e[t]])}commit(e){var t;for(t in void 0===e&&(e=this.view),i.log("MVStore",this.name+" commit",e),e)void 0!==e[t]&&(this.model[t]=e[t]);this.set(this.model)}revert(){i.log("MVStore",this.name+" revert"),this.set(this.model)}destroy(){this.model=null,this.view=null,this.handlers=null}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(66),o=n.n(i);let s=null;const r={};function a(){if(null===s){const e=o()("wss://ws-sio.vc.ru/",{transports:["websocket"]});s=e.connect(),s.on("reconnect",()=>{for(const e in r)r[e]>0&&s.emit("subscribe",{channel:e})})}return s}class c{constructor({url:e,name:t="",onMessage:n}){if(""===t){if(!e.includes("wss://ws-sio.vc.ru/"))throw console.log("~~~~~~~~~~~~~~~~~~~~~~~~~"),console.log("Strange socket URL "+e),console.log("It should be something like wss://ws-sio.vc.ru/"),console.log("Please fix it or call Artem if you don't know what to do"),console.log("~~~~~~~~~~~~~~~~~~~~~~~~~"),new Error("Invalid socket URL, read above");t=e.replace("wss://ws-sio.vc.ru/","")}this.name=t,this.handlers={onMessage:n},this.last_message_date=Date.now(),this.onMessage=this._onMessage.bind(this),this.log("create")}log(){}destroy(){this.log("destroy"),a().off("message",this.onMessage),void 0===r[this.name]&&(r[this.name]=0),r[this.name]>0&&r[this.name]--,this.log("decrease subscribers count to "+r[this.name]),0===r[this.name]&&(this.log("real unsubscribe"),a().emit("unsubscribe",{channel:this.name}))}send(e={}){this.log("send",e),a().emit("broadcast",{channel:this.name,data:e})}_onMessage({channel:e,data:t}){if(e===this.name){this.log("got a message",t);const e=Date.now();this.handlers.onMessage(t,{},e-this.last_message_date),this.last_message_date=Date.now()}}open(){var e;return this.log("connecting..."),a().on("event",this.onMessage),e=()=>{this.log("connected"),void 0===r[this.name]&&(r[this.name]=0),0===r[this.name]&&(this.log("real subscribe"),a().emit("subscribe",{channel:this.name})),r[this.name]++,this.log("increase subscribers count to "+r[this.name])},a().connected?e():a().once("connect",()=>{e()}),this}close(){this.destroy()}}},function(e,t,n){var i=n(82),o=n(37),s=n(55),r=n(16)("socket.io-client");e.exports=t=c;var a=t.managers={};function c(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,o=i(e),c=o.source,l=o.id,u=o.path,d=a[l]&&u in a[l].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||d?(r("ignoring socket cache for %s",c),n=s(c,t)):(a[l]||(r("new io instance for %s",c),a[l]=s(c,t)),n=a[l]),o.query&&!t.query&&(t.query=o.query),n.socket(o.path,t)}t.protocol=o.protocol,t.connect=c,t.Manager=n(55),t.Socket=n(61)},function(e,t,n){"use strict";n.r(t),n.d(t,"getScrollbarWidth",(function(){return o})),n.d(t,"scrollbarsWidth",(function(){return s})),n.d(t,"lock",(function(){return r}));var i=n(0);function o(){var e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",e.appendChild(n);var i=n.offsetWidth;return e.parentNode.removeChild(e),t-i}const s=o();function r(e){!0===e?(i.css(document.documentElement,{overflow:"hidden","margin-right":s+"px"}),i.toggleClass(document.documentElement,"with--no_scroll",!0)):(i.css(document.documentElement,{overflow:"","margin-right":""}),i.toggleClass(document.documentElement,"with--no_scroll",!1))}},function(e){e.exports=JSON.parse('{"ru_RU":{"\\"4+1\\" discount":"Скидка «4+1»","\\"Weekend\\" discount":"Скидка «Выходной»","(optional)":"(не обязательно)","[?] members":"[?] участников","%{ count } subscriber":["подписчик","подписчика","подписчиков"],"%{ membersCount } member":["%{ membersCount } участник","%{ membersCount } участника","%{ membersCount } участников"],"%{ name } added %{ members }":"%{ name } добавил %{ members }","%{ name } created the chat %{ title }":"%{ name } создал чат %{ title }","%{ name } joined the chat":"%{ name } вступил в чат","%{ name } left the chat":"%{ name } покинул чат","%{ name } removed %{ member }":"%{ name } удалил %{ member }","%{ number } of %{ total }":"%{ number } из %{ total }","%{ subject } was added to the blocklist":"%{ subject } добавлен в черный список","+ «Thanks»":"+ «Спасибо»","<a href=\\"%{ link }\\" target=\\"_blank\\">Here</a> is the explanation about what and how to write.":"Вот <a href=“%{ link }” target=“_blank”>здесь</a> подробнее о том, что и как писать.","<span class=\\"t-link-classic\\" air-click=\\"showBoosterConstructor\\">Create an ad</span> to continue.":"<span class=\\"t-link-classic\\" air-click=\\"showBoosterConstructor\\">Создайте объявление</span>, чтобы продолжить.","≈ 1 million subscribers":"≈ 1 млн подписчиков","1 month subscription":"Подписка 1 месяц","1 year subscription":"Подписка 1 год","3 months subscription":"Подписка 3 месяца","4+1 discount":"Скидка «4+1»","About interesting finding":"Об интересной находке","About the project":"О проекте","account":"аккаунт","Account ID":"ID аккаунта","Accounts":"Аккаунты","Active":{"Активен":"Активен"},"Ad":"Объявление","Add":"Добавить","Add a link":"Добавить ссылку","Add a vacancy":"Добавить вакансию","Add an ad":"Добавить объявление","Add an answer":"Добавить вариант","Add cover":"Добавить обложку","Add members":"Добавить участников","Add to blocklist":"В черный список","Add to blocklist?":"Добавить пользователя в черный список?","Add to bookmarks":"Добавить в закладки","Add to the order":"Добавить к заказу","added":"добавил","Administrator":"Администратор","Ads on %{ site }":"Реклама на %{ site }","Advertising":"Рекламу и промо","after moderation":"после модерации","After moderation, events will appear on the site.":"После модерации мероприятия появятся на сайте.","After moderation, vacancies will appear on the site":"После модерации вакансии появятся на сайте","All messages and the chat will be removed. However, they will remain for your interlocutor":"Все сообщения и диалог с пользователем будут удалены. Однако они останутся у вашего собеседника","All messages will be removed for everyone in this chat":"Все сообщения будут удалены у вас и вашего собеседника","All notifications":"Все уведомления","along with":"вместе с","amount":"количество","Amount":"Количество","Amount to be paid":"Сумма к оплате","An error has occurred":"Произошла ошибка","An error occurred":"Произошла ошибка","An error occurred while subscribing":"Произошла ошибка при подписке","An error occurred while unsubscribing":"Произошла ошибка при отписке","and":"и","and %{ hiddenLen } more member":["и еще %{ hiddenLen }  участника","и еще %{ hiddenLen }  участников","и еще %{ hiddenLen }  участников"],"and %{ hiddenMembersCount } more member":["и еще %{ hiddenMembersCount }  участника","и еще %{ hiddenMembersCount }  участников","и еще %{ hiddenMembersCount }  участников"],"and %{ n } more":"и еще %{ n }","Announcement in social networks":"Анонс в соцсетях","Announcement link":"Ссылка на анонс","Announcements":"Анонсы","Answer":{"":"Вариант ответа","Ответ":"Ответ","Ответить":"Ответить"},"API documentation.":"Документация API.","Apply":"Применить","apr":"апр","Apr":"Апр","april":"апреля","April":"Апрель","Archive":{"Noun":"Архив","Verb":"Архивировать","":"Архивировать"},"Archive?":{"Verb":"Архивировать?"},"Are you sure you want to leave?":"Вы уверены, что хотите покинуть чат?","Are you sure you want to remove the chat?":"Вы уверены, что хотите удалить чат?","Are you sure you want to remove the whole branch?":"Вы действительно хотите удалить всю ветку?","Are you sure you want to remove this comment?":"Вы действительно хотите удалить этот комментарий?","Are you sure you want to unban this subsite?":"Уверены, что хотите разбанить этот подсайт?","Are you sure you want to unban this user?":"Уверены, что хотите разбанить этого пользователя?","Are you sure?":"Вы уверены?","Ask a question":"Задать вопрос","Asset":"Актив","at":"в","Attach":"Прикрепить","Attach a video":"Прикрепить видео","Attach a video or link":"Прикрепить видео или ссылку","Audio":"Аудио","Audio title":"Название","Audio uploading failed":"Ошибка при загрузке аудио","aug":"авг","Aug":"Авг","august":"августа","August":"Август","Author":"Автор","Author name":"Имя автора","Back":"Назад","Back to login":"К авторизации","Background color":"Цвет фона","Balance":"Баланс","Balance replenished":"Баланс пополнен","Ban":"Забанить","Ban and remove all":"Забанить и удалить всё","Ban completely":"Забанить полностью","Ban duration in days":"Длительность бана в днях","Ban in subsite":"Забанить в подсайте","Ban on the whole platform":"Забанить на всей платформе","Ban subsite":"Забанить подсайт","Ban user":"Забанить пользователя","Be yourself":"Ведите себя как в обычной жизни","Beware of the people behind your back, they may be the first to get there. Each code can only be used once.":"Опасайтесь людей, стоящих за вашей спиной, они могут успеть первыми. Каждый код можно использовать только один раз.","Bill has been formed":"Счет сформирован","bitcoin":"биткоин","Blocked":"Заблокирован","Bold":"Жирность","bonuses":"бонусов","Breaking":"Молния","Browser":"Браузерный","Budget":"Бюджет","Button":"Кнопка","Button text":"Текст кнопки","Buy for 75 ₽":"Купить за 75 ₽","Buy for 75 ₽ per month":"Купить за 75 ₽ в месяц","Buy vacancy":"Купить вакансию","By attaching money to a comment, you agree to all":"Прикрепляя деньги к комментарию, вы соглашаетесь со всеми","By date":"По дате","By logging in":"Авторизуясь","By paying for a club account, you agree to all":"Оплачивая клубный аккаунт, вы соглашаетесь со всеми","By paying for a vacancy publishment, you agree to all":"Оплата размещения вакансии означает согласие со всеми","By paying for your club account, you agree":"Оплачивая клубный аккаунт, Вы соглашаетесь","By pressing the \\"Change Password\\" button":"Нажимая на кнопку «Сменить пароль»","By pressing the \\"Restore password\\" button":"Нажимая на кнопку «Восстановить пароль»","By replenishing your Personal account, you accept the terms and conditions of the <a href=\\"%{ link }\\" target=\\"_blank\\" class=\\"t-link-inline\\">Service Agreement</a>.":"Пополняя Лицевой счёт, вы принимаете условия <a href=\\"%{ link }\\" target=\\"_blank\\">Соглашения об оказании услуг</a>.","By signing up":"Регистрируясь","By withdrawing money, you agree to all":"Выводя средства, вы соглашаетесь со всеми","Cabinet":"Кабинет","Can\'t change after launch.":"Нельзя изменить после запуска.","Cancel":{"":"Отмена","Что сделать? Отменить":"Отменить"},"Cannot add hashtag to blocklist":"Не удалось добавить хештег в черный список","Cannot remove hashtag from blocklist":"Не удалось убрать хештег из черного списка","Caption":"Подпись","Card number":"Номер карты","Cards with 3DS:":"Карты с 3DS:","Cards without 3DS:":"Карты без 3DS:","Center":"По центру","Change":"Изменить","Change cover":"Сменить обложку","Change description":"Изменить описание","Change name or description":"Изменить имя или описание","Change password":"Сменить пароль","Change user rights":"Поменять права пользователя","changed":"изменил","changed chat picture":"изменил аватарку чата","changed chat picture and title for":"изменил аватарку и название чата на","changed chat title for":"изменил название чата на","Changes only through the <span class=\\"t-link-classic\\" data-chatra-show>support manager</span>":"Меняется через <span class=\\"t-link-classic\\" data-chatra-show>менеджера поддержки</span>","Chart ID":"ID графика","Charts":"Графики","Chat history is not available":"Переписка недоступна","chat title":"название чата","Chat title":"Название чата","Chats":"Чаты","Check your email":"Проверьте почту","Choose cities":"Выберите города","Cities":"Города","Clear":"Очистить","Clear cache":"Очистить кэш","Clear history":"Очистить переписку","Clear selection":"Снять выделение","Clicks":"Клики","Close":"Закрыть","Code":"Код","comment":["комментарий","комментария","комментариев"],"Comment (optional)":"Комментарий (необязательно)","Comment is too long, keep it in %{ max } characters limit, please":"Очень длинный комментарий, не больше %{ max } символов, пожалуйста","Comments":"Комментарии","Commission":"Комиссия","Company":"Компания","Company name":"Название компании","Complain":"Пожаловаться","Complain about the material":"Пожаловаться на материал","Completed":"Дополнен","conditions":{"To agree to":"условиями"},"Configure the feed":"Настроить ленту","Confirm action":"Подтвердите действие","Confirm password":"Подтвердите пароль","Confirmation":"Подтверждение","Contacts":"Контакты","Continue":"Продолжить","Conversions":"Конверсии","Copy content from other sites":"Копировать статьи с других сайтов","Copy external access link":"Скопировать ссылку для доступа","Copy the link":"Копировать ссылку","Corrupted data":"Испорченные данные","Cost":"Стоимость","Cost per 1000 impressions":"Стоимость за 1000 показов","Coub link":"Ссылка на коуб","Couldn\'t verify your age":"Не удалось подтвердить ваш возраст","Cover":"Обложка","Cover uploading failed":"Ошибка при загрузке обложки","Create":"Создать","Create a copy":"Создать копию","Create a group chat":"Создать групповой чат","Create a new ad":"Создать новое объявление","Create an ad":"Создать объявление","Create an invitation link":"Создать ссылку-приглашение","Create chat":"Создать чат","created a chat":"создал чат","Creating a company cabinet":"Создаём кабинет компании","Creating…":"Создаем…","Creation date":"Дата создания","Creator":"Создатель","Credentials":"Реквизиты","Currency":"Валюта","Current balance":"Текущий баланс","Customize":"Настроить","Customize the feed":"Настроить ленту","Danger! You are going to completely remove all activity of this user.":"Опасность! Вы собираетесь удалить вообще всю активность данного пользователя.","Dates":"Даты","day":["день","дня","дней"],"dec":"дек","Dec":"Дек","december":"декабря","December":"Декабрь","Delimiter":"Разделитель","Deposit":"Депозит","Describe the reason here":"Опишите причину здесь","Description":"Описание","Description and #tags":"Описание и #теги","Details":"Расшифровка","Devices":"Устройства","Disable":"Отключить","Disable <span>ads</span>":"Отключить <span>рекламу</span>","Disable ads":"Отключить рекламу","Disable notifications":"Отключить уведомления","Disable notifications from the user":"Отключить уведомления от пользователя","Discount":"Скидка","Display media":"Показывать медиа","Displaying in apps":"Показ в приложениях","Displaying in Russia":"Показ в РФ","Distribution":"Дистрибуция","Do not cancel":"Не отменять","Do not ignore":"Не игнорировать","Do not share your token with anyone. Use only if you know exactly what you are doing.":"Ни с кем не делитесь своим токеном. Используйте только если точно знаете, что делаете.","Docs":"Документы","Don\'t ignore":"Не игнорировать","Don\'t miss new posts from the subsite":"Не пропустите новые материалы подсайта","Don\'t miss new posts from the user":"Не пропустите новые материалы пользователя","Donation":"Донат","Donation is refunded":"Донат возвращён","Done":"Готово","Download invoice":"Скачать счёт","Download stats":"Скачать статистику","Drag a file to upload":"Перетащите файл для загрузки","Edit":{"Shorthand":"Ред.","":"Редактировать"},"Edit the ad":"Отредактируйте объявление","Edit the comment...":"Исправить комментарий...","Editing":"Редактирование","Editor is unavailable. Try to reload the page.":"Редактор недоступен. Попробуйте перезагрузить страницу.","Editor will make picture or video from them.":"Редактор превратит их в видео и снимки.","Editorial":"Редакционный","Editorial note":"От редакции","email":{"почту":"почту"},"Email":{"Full":"Электронная почта","":"Почта"},"Email addresses have been subscribed to newsletters":"Email-адреса отписаны от рассылок","Email addresses have been unsubscribed from newsletters":"Email-адреса отписаны от рассылок","Email for receipt":"E-mail для чека","Embed":{"Share":"Эмбед","":"Вставить"},"Embed code":"Вставить код","Empty title":"Не заполнен заголовок","Enable notifications":"Включить уведомления","Enter a promo code":"Ввести промокод","Enter a promo code to use it":"Введите промокод, чтобы использовать его","Enter email":"Укажите почту","enter name or link to profile":"введите имя или ссылку на профиль","Enter the replenishment amount":"Введите сумму, на которую вы хотите пополнить баланс","Entry":"Материал","Entry has been published":"Материал опубликован","Entry has been recovered":"Материал восстановлен","Entry has been removed":"Материал удален","Entry has been removed from the main page":"Материал убран с главной","Entry has been saved":"Материал сохранен","Entry has been saved to drafts":"Статья сохранена в черновики","Entry has been unpublished":"Материал распубликован","Entry link":"Ссылка на статью","Error":"Ошибка","Event rejected":"Мероприятие отклонено","Event removed":"Мероприятие удалено","Expand":"Развернуть","Expand the branch":"Развернуть ветку","Extra":"Дополнительно","Extra charge for urgency":"Наценка за срочность","Failed":"Не удалось","Failed to add user to the blocklist":"Не удалось добавить пользователя в черный список","Failed to apply version, something went wrong":"Не получилось применить версию, что-то пошло не так","Failed to ban the user":"Не удалось забанить пользователя","Failed to change user rights: %{ error }":"Не удалось изменить права пользователя: %{ error }","Failed to copy link":"Не удалось скопировать ссылку","Failed to create a payment order: %{ error }":"Не удалось создать заявку на оплату: %{ error }","Failed to disable notifications (%{ error })":"Не удалось отключить уведомления (%{ error })","Failed to hide the comment":"Не удалось скрыть комментарий","Failed to hide the entry":"Не удалось скрыть запись","Failed to load the cover":"Не удалось загрузить обложку","Failed to mark post as 18+":"Не удалось отметить пост как 18+","Failed to navigate to page (code %{ code })":"Не удалось перейти на страницу (код %{ code })","Failed to pin post":"Не удалось закрепить пост","Failed to pin the comment":"Не удалось закрепить комментарий","Failed to publish post":"Не удалось опубликовать пост","Failed to refresh the data: %{ error }":"Не удалось обновить данные: %{ error }","Failed to remove a user from the blocklist":"Не удалось убрать пользователя из черного списка","Failed to remove blur from entries":"Не удалось убрать блюр с записей","Failed to remove the branch":"Не удалось удалить ветку","Failed to remove the comment":"Не удалось удалить комментарий","Failed to remove the cover":"Не удалось удалить обложку","Failed to remove user from the blocklist":"Не удалось убрать пользователя из черного списка","Failed to save the position":"Не удалось сохранить позицию","Failed to send a complaint":"Не удалось отправить жалобу","Failed to send push (code %{ code })":"Не удалось отправить пуш (code %{ code })","Failed to send the complaint (%{ error })":"Не удалось отправить жалобу (%{ error })","Failed to subscribe to push notifications (%{ error })":"Не удалось подписаться на push-уведомления (%{ error })","Failed to unban the user":"Не удалось разбанить пользователя","Failed to unmark post":"Не удалось снять отметку у поста","Failed to unpin post":"Не удалось открепить пост","Failed to unpin the comment":"Не удалось открепить комментарий","Failed to unpublish post":"Не удалось распубликовать пост","Failed to unsubscribe from notifications":"Не удалось отписаться от уведомлений","Failed to unsubscribe from push notifications (%{ error })":"Не удалось отписаться от push-уведомлений (%{ error })","Failed to upload a photo":"Не удалось загрузить фотографию","Failed to upload a video":"Не удалось загрузить видео","Failed to upload an image":"Не удалось загрузить изображение","feb":"фев","Feb":"Фев","february":"февраля","February":"Февраль","Field is required":"Обязательное поле","File %{ name } exceeds %{ size } MB":"Файл %{ name } превышает размер %{ size } MB","File uploading failed":"Ошибка при загрузке файла","File uploading failed, try another one":"Ошибка при загрузке файла, попробуйте другой","File uploading failed: %{ error }":"Ошибка при загрузке файла: %{ error }","Fill the chat title":"Придумайте название чата","Find suitable tools":"Ищите подходящие инструменты","Fix formatting issues":"Исправить форматирование","Footer text":"Текст футера","For a month":"На месяц","For a year":"На год","For balance and service notifications.":"Для уведомлений о балансе и услугах.","For bills and docs":"Для счетов и документов","For contact":"Для связи","for example":"например","For example, Yandex LLC":"Например, ООО «Яндекс»","For the user":"Для пользователя","For three months":"На три месяца","fr":"пт","Frequently used":"Часто используемые","fri":"пт","Fri":"Пт","friday":"пятница","Funds withdrawal":"Вывод средств","General":"Основные","Gift an account":"Подарить аккаунт","Give":{"Подарить":"Подарить"},"Global search":"Глобальный поиск","Go to entry":"Перейти к статье","Go to messages":"Перейти к сообщениям","Go to results":"Перейти к результатам","Good news, you have a new nickname":"Хорошие новости, у вас новый ник","Got it":"Понятно","Great comment, keep it up!":"Отличный комментарий, так держать!","Group chat":"Групповой чат","h":{"hours":"ч"},"Hashtag has been added to blocklist":"Хештег добавлен в черный список","Hashtag has been removed from blocklist":"Хештег убран из черного списка","Hide":"Скрыть","High price. Promo often appear.":"Высокая цена, объявление будет откручиваться быстро","Hits":"Показы","Hold Ctrl to select days one by one":"Зажмите Ctrl, чтобы выбирать дни по одному","Hold for 4 h":"Поднять на 4 часа","hour":["час","часа","часов"],"How does it work?":"Как это работает?","How to write a good post":"Как написать хорошую заметку","I agree to subscribe to":"Я согласен с подпиской на","I am a legal entity":"Я — юридическое лицо","I am a private person":"Я — физическое лицо","I forgot the password":"Я забыл пароль","I have a promo code":"У меня есть промокод","I\'m flying on vacation":"Улетаю в отпуск","Id":"ID","ID":"ID","If you cancel your subscription, you remain the owner of the paid account until the end of the paid period.":"При отмене подписки вы остаётесь владельцем платного аккаунта до окончания оплаченного периода.","If you\'re not a robot, you can easily pass a small humanity test":"Если вы не робот, то без труда пройдете небольшой тест на человечность","Ignore":"Игнорировать","Ignore author %{ author }":"Игнорировать автора %{ author }","Ignore subsite %{ subsite }":"Игнорировать подсайт %{ subsite }","Ignore the author":"Игнорировать автора","Image uploading failed: %{ error }":"Ошибка при загрузке изображения: %{ error }","In archive":"В архиве","Incorrect user link":"Неправильно указана ссылка на пользователя","Increase your ad\'s budget":"Увеличьте бюджет объявления","Incut":"Врезка","Incut text":"Текст врезки","INN":"ИНН","Input the amount between %{ min } and %{ max } roubles":"Введите сумму от %{ min } до %{ max } рублей","Insert a link":"Вставьте ссылку","Instagram":"Инстаграм","Instagram post loading failed":"Не удалось загрузить инстаграм","Insufficient funds":"Недостаточно средств","Invalid email":"Неверный email","Invoice for payment":"Счет на оплату","Invoice generated":"Счет сформирован","is looking for specialists":"ищет специалистов","Issue an invoice":"Выставить счет","It looks like selected dates for this ad are not available. Try again.":"Похоже, что выбранные для объявления даты недоступны. Попробуйте снова.","It seems to us that you\'re a robot. You\'re not a robot, are you?":"Нам кажется, что вы робот, вы ведь не робот?","It\'s all good, money have been withdrawn. You can go back to the site now and continue the conversation.":"Всё хорошо, вы вывели деньги. Теперь можно вернуться на сайт и продолжить общение.","It\'s all good, we have you subscribed":"Всё хорошо, мы подписали вас","It\'s all good, we\'ve sent you a payment confirmation email":"Всё хорошо, мы отправили вам письмо с подтверждением оплаты","It\'s all good, your payment has been attached. You can go back to the comment now and continue the conversation.":"Всё хорошо, вы прикрепили платёж. Теперь можно вернуться к комментарию и продолжить общение.","It\'s empty":"Здесь пока пусто","It\'s okay, we subscribed you":"Всё хорошо, мы подписали вас","It\'s still empty. We will show statistics as soon as the ad starts to spin.":"Здесь пока пусто. Мы покажем статистику, как только объявление начнёт откручиваться.","Italic":"Курсив","jan":"янв","Jan":"Янв","january":"января","January":"Январь","joined chat":"вступил в чат","jul":"июл","Jul":"Июл","july":"июля","July":"Июль","jun":"июн","Jun":"Июн","june":"июня","June":"Июнь","Just a warning: the entry is very long, there may be problems when saving":"Просто предупреждаем: статья очень длинная, могут быть проблемы с сохранением","KPP":"КПП","last seen 5 mins ago":"был сети 5 минут назад","Last seen recently":"Был недавно","Launched":"Запущено","Learn more":"Узнать подробнее","Leave":"Выйти","Leave and remove chat":"Покинуть и удалить чат","Leave and report spam?":"Выйти из чата и пожаловаться на спам?","Leave chat":"Выйти из чата","Left":"Слева","left chat":"покинул чат","Legal address":"Юридический адрес","Let us know what happened":"Дайте знать, что случилось","Let\'s introduce ourselves":"Давайте представимся","Link":"Ссылка","Link copied":"Ссылка скопирована","Link processing failed":"Не удалось обработать ссылку","Link to an image, YouTube, Instagram, Vimeo":"Ссылка на картинку, видео Youtube, Vimeo, Instagram","Links":"Ссылки","List":"Список","Loading...":"Загрузка…","Log in":"Войти","Log in or register to rate and write posts and comments.":"Авторизуйтесь или зарегистрируйтесь, чтобы оценивать материалы, создавать записи и писать комментарии.","Log in to":"Вход на","log in to the site":"авторизоваться на сайте","Log in via email":"Войти через почту","Log in via QR code":"Авторизоваться через QR-код","log into account":"войти в аккаунт","Low price. Promo rarely appear.":"Низкая цена, объявление будет откручиваться медленно","m":{"minutes":"м"},"Mail to receive invoice":"Почта для получения счета","Mailing list":"Рассылка на почту","Make a deposit":"Пополнить","Make a gallery":"Создать галерею","Make an admin":"Сделать администратором","Make an invoice":"Выставить счет","Make good posts, comment and it won\'t be so empty here":"Пишите хорошие статьи, комментируйте, и здесь станет не так пусто","mar":"мар","Mar":"Мар","march":"марта","March":"Март","Mark 18+":"Отметить 18+","Mark all as read":"Пометить все как прочитанные","Mark as spam":"Это спам","Maximize":"Развернуть","may":"мая","May":"Май","Mediakit":"Медиакит","member":["участник","участника","участников"],"Members":"Участники","Members adding failed":"Не удалось добавить участников","Members loading failed":"Не удалось удалить участников","message":["сообщение","сообщения","сообщений"],"Message":"Сообщение","Message contains data that cannot be displayed in the current version of messenger":"Сообщение содержит данные, которые не могут быть отображены в текущей версии приложения","Message is removed":"Сообщение удалено","Message text":"Текст сообщения","messageId":{"":["сообщение","сообщения","сообщений"],"context":"сообщение"},"Messages":"Сообщения","Messenger":"Сообщения","Minimize":"Свернуть","minute":["минута","минуты","минут"],"Mir":{"Payment system":"Мир"},"mo":"пн","Mobile":"Мобильный","Moderator":"Модератор","mon":"пн","Mon":"Пн","monday":"понедельник","Money attachment":"Прикрепление денег","Money will be withdrawn to this card":"Выведем деньги на эту карту","Money withdrawal":"Вывод денег","month":["месяц","месяца","месяцев"],"Monthly subscription":"Ежемесячная подписка","More":{"Detailed":"Подробнее","":"Ещё"},"More advice":"Еще совет","More often":"Показывать чаще","My feed":"Моя лента","Name":"Имя","Name and surname":"Имя и фамилия","Nature":"Природа","Navigation":"Навигация","New":"Новые","New block":"Новый блок","New chat":"Новый чат","New order":"Новый заказ","New password":"Новый пароль","new post":["новую запись","новых записи","новых записей"],"New post":"Новая запись","Newsletter events":"Рассылка мероприятий","Next":{"Not adjective":"Дальше"},"Next time there will be another entry in this place":"В следующий раз на этом месте будет другая запись","No":"Нет","No dates selected":"Даты не выбраны","No donates yet":"Донатов пока нет","No less than":"Не менее","No more than":"Не более","No notifications yet":"Уведомлений пока нет","No registration":"Нет регистрации","No subscription":"Нет подписки","Not an admin":"Не администратор","Not enough funds to withdraw":"Недостаточно средств для вывода","Not launched":"Не запущено","Not sent":"Не отправлено","Nothing found":"Ничего не найдено","Nothing is better than a good comment":"Нет ничего лучше хорошего комментария","Notifications":"Уведомления","nov":"ноя","Nov":"Ноя","november":"ноября","November":"Ноябрь","Now entries 18+ don`t blur in the feed":"Теперь записи 18+ не блюрятся в ленте","Number":"Цифра","Objects":"Объекты","Occupation":"Должность","oct":"окт","Oct":"Окт","october":"октября","October":"Октябрь","of use of the site.":"пользования сайтом.","OK":"ОК","Old data":"Старые данные","On moderation":"На модерации","On the main":"На главной","Online":"Онлайн","Only visible to moderators":"Видна только модераторам","Operations history":"История операций","Opinion":"Мнение","Optional for solo entrepreneurs":"Не обязательно для ИП","or":"или","Or funny gif":"Или смешной гифке","Or paste a link":"Или введите ссылку","Order advertising":{"Единственное число - реклама":"Заказать рекламу"},"Ordered":"Нумерованный","Other":"Прочее","Our robots believe that you are a robot. You\'re not a robot, are you?":"Наши роботы считают, что вы робот, вы ведь не робот?","out of":{"Number out of range":"из"},"Out of money":"Кончились деньги","Overuse of bold and italic":"Злоупотреблять жирностью и курсивом","Overview":"Обзор","paid account":"платный аккаунт","Paid account":"Платный аккаунт","Parameters":"Параметры","Password":"Пароль","Password must be at least 6 symbols long":"Пароль должен быть не менее 6 символов","Paste Youtube, Twitter, Instagram links directly into the text":"Вставляйте ссылки на Youtube, Twitter, Instagram прямо в текст","Pay":"Оплатить","Pay by card":"Оплатить картой","Payment by bill and card.":"Оплата счётом и картой.","Payment by card":"Оплата картой","Payment by card. Quick and easy.":"Оплата картой. Быстро и просто.","Payment error":"Ошибка оплаты","Payment for the event posting means agreement <br class=\\"lm-hidden\\"> to all <a class=\\"t-link-classic\\" href=\\"/job/rules\\" target=\\"_blank\\" data-no-ajax>terms</a> and <a class=\\"t-link-classic\\" href=\\"/job/agreement\\" target=\\"_blank\\" data-no-ajax>conditions</a>.":"Оплата размещения мероприятия означает согласие <br class=\\"lm-hidden\\"> со всеми <a class=\\"t-link-classic\\" href=\\"/job/rules\\" target=\\"_blank\\" data-no-ajax>правилами</a> и <a class=\\"t-link-classic\\" href=\\"/job/agreement\\" target=\\"_blank\\" data-no-ajax>условиями</a>.","Payment for vacancy":"Оплата вакансии","Payment succeeded":"Оплата прошла успешно","People":"Люди","person":["человек","человека","человек"],"Person":"Персона","Photo":"Фото","Photo or Video":"Фото или видео","Picture":"Изображение","picture %{ and }":"аватарку чата %{ and }","Pin":"Закрепить","Place a vacancy":"Разместить вакансию","Please authorize":"Пожалуйста, авторизуйтесь","Please contact Murod Khaydarov to ban this user with removing all of his content":"Пожалуйста, свяжитесь с Муродом Хайдаровым, чтобы заблокировать этого пользователя, удалив весь его контент","Please enter a valid email":"Пожалуйста, введите корректную почту","Please fill in the required fields":"Пожалуйста, заполните обязательные поля","Please, indicate":"Пожалуйста, укажите","Poll":"Опрос","Poll title":"Заголовок опроса","Portfolio":"Портфолио","Post has been published in":"Запись была опубликована в","Post has been unpublished from":"Запись распубликована из","Post is hidden from your feed":"Публикация скрыта из вашей ленты","Post marked as 18+":"Пост отмечен как 18+","Post unpinned":"Пост откреплен","Preview":"Предпросмотр","Price list":"Прайс-лист","Profile":"Профиль","Profile description":"Описание профиля","Prolong":"Продлить","Promo code activated":"Промокод активирован","Promo code copied":"Промокод скопирован","Promo code copy failed":"Не удалось скопировать промокод","Promo cost":"Стоимость промо","Promo has been saved":"Промо сохранено","Promote":"Продвинуть","Public":"Опубликовать","Publish":"Опубликовать","Publish an event":"Опубликовать мероприятие","Publish press releases":"Публиковать пресс-релизы","Publish the coub?":"Опубликовать коуб?","Publish the entry?":"Опубликовать статью?","Purchase":"Покупка","Push has been sent":"Пуш отправлен","Push notification":"Отправка пуша","Push notification sending failed: %{ error }":"Не удалось отправить пуш: %{ error }","Push notification sent":"Пуш отправлен","Push sending failed: %{ error }":"Не удалось отправить пуш: %{ error }","Push title %{ optional }":"Заголовок пуша %{ optional }","Quote":"Цитата","Quote text":"Текст цитаты","Rare views":"Показывать реже","Rating":"Рейтинг","Reach":"Охват","Read the <a href=\\"%{ link }\\" target=\\"_blank\\" class=\\"t-link-inline\\">terms of service</a>.":"Ознакомьтесь с <a href=\\"%{ link }\\" target=\\"_blank\\" class=\\"t-link-inline\\">условиями оказания услуг</a>.","Reason":"Причина","Recent":"Свежее","Recent queries":"Недавние запросы","Recommendations":"Рекомендации","Recommended %{ cost } ₽":"Рекомендуем — %{ cost } ₽","Recover password":"Восстановить пароль","Refresh data":"Обновить данные","Regular":"Обычная","Reject vacancy":"Отклонить вакансию","Remaining":{"Man`s type":"Остался","Woman`s type":"Осталась","":"Осталось"},"Removal of all content at the request of the user":"Удаление всего контента по запросу пользователя","Remove":"Удалить","Remove chat":"Удалить чат","Remove from blocklist":"Убрать из чëрного списка","Remove from blocklist?":"Убрать пользователя из чëрного списка?","Remove from bookmarks":"Убрать из закладок","Remove from chat":"Удалить из чата","Remove from main?":"Убрать с главной?","Remove the branch":"Удалить ветку","Remove the entry from main page?":"Убрать запись с главной страницы?","Remove the event?":"Удалить мероприятие?","Remove the vacancy?":"Удалить вакансию?","Remove?":"Удалить?","removed":{"Messenger system message about member removing":"удалил"},"Replenish":"Пополнить","Replenish by card":"Пополнение картой","Replenish the balance":"Пополнить баланс","Reply":"Ответить","Report a bug":"Сообщить об ошибке","Report chat":"Пожаловаться","Request ended with error (code %{ code })":"Запрос закончился ошибкой (код %{ code })","Request ended with error (corrupted data)":"Запрос закончился ошибкой (испорченные данные)","Reset":"Сбросить","Right. We will send you a promo code by email.":"Верно. Мы отправим промокод вам на почту.","rules":{"To agree to":"правилами"},"Rules":"Правила","Run":"Запустить","Run on %{ site }":"Запустить на %{ site }","sa":"сб","sat":"сб","Sat":"Сб","saturday":"суббота","Save":"Сохранить","Save the entry first":"Сначала сохраните статью","Saved":"Сохранено","Saving":"Сохранение","Search":"Поиск","second":["секунда","секунды","секунд"],"See who voted for posts":"Посмотрите, кто голосовал за публикации","Select":{"Повелительное наклонение - Выберите":"Выберите"},"Select a dialog":"Выберите диалог","Select a reason":"Выберите причину","Select all":"Выделить всё","Select block":"Выделить блок","Select blocks to be displayed in feed":"Выберите, что выводить на обложку статьи","Send":"Отправить","Send a push-notification with sound and vibration to all users?":"Отправить push-уведомление со звуком и вибрацией всем пользователям?","Sending…":"Отправляем…","sep":"сен","Sep":"Сен","september":"сентября","September":"Сентябрь","Services":"Услуги","Settings":"Настройки","Share":"Поделиться","Share via...":"Поделиться через...","Show":"Показать","Show all":{"Animate":"Показать всех","Inanimate":"Показать все","Показать все":"Показать все"},"Show more":"Показать ещё","Show new notifications":"Показать новые уведомления","sign up":"зарегистрироваться","Sign up":"Зарегистрироваться","Sign up via email":"Регистрация через почту","Site":{"Platform":"Площадка"},"Site rules":"Правила","Social networks":"Соцсети","something interesting.":"что-нибудь интересное.","Something is wrong with the internet":"Что-то не так с интернетом","Something is wrong with the internet. Reconnecting":"Something is wrong with the internet. Reconnecting","Something went wrong":"Что-то пошло не так","Something went wrong, but don\'t worry. You can go back and try again. As a reminder, transfers from foreign banks cards are not supported at the moment.":"Что-то пошло не так, но переживать не стоит. Можно вернуться назад и попробовать снова. Напомним, что на данный момент переводы с карт зарубежных банков не поддерживаются.","Something went wrong, you can go back and try again. Just in case, read the donates <a class=\\"t-link-classic\\" href=\\"%{ guideUrl }\\" target=\\"_blank\\">withdrawal conditions</a> and make sure yout card is issued by a russian bank.":"Что-то пошло не так, можно вернуться назад и попробовать снова. На всякий случай ознакомьтесь с <a class=\\"t-link-classic\\" href=\\"%{ guideUrl }\\" target=\\"_blank\\">условиями вывода</a> донатов и убедитесь, что ваша карта выпущена банком РФ.","Spam report has been sent":"Жалоба на спам отправлена","Speaker name":"Имя спикера","Special project":"Спецпроект","Spent":"Потрачено","State the reason":"Укажите причину","Statistics":"Статистика","Stats":"Статистика","Stop":"Остановить","Style for feed":"Стиль в ленте","su":"вс","Submit":"Отправить","Submit a typo report":"Отправить сообщение об опечатке","Subscribe":"Подписаться","Subscribe to the newsletter":"Подписаться на рассылку","Subscribed":"Подписан","subscriber":["подписчик","подписчика","подписчиков"],"Subscribers":"Подписчики","Subscription cancellation":"Отмена подписки","Subscription details":"Детали подписки","Subscription period":"Срок действия","Subscriptions":"Подписки","Subsite %{ subsite } has been removed from your subscriptions":"Подсайт %{ subsite } был удален из списка ваших подписок","Subsite created":"Подсайт создан","Subsite name":"Название подсайта","Successful":"Успешно","Successful payment text":"Текст об успешной оплате","sun":"вс","Sun":"Вс","sunday":"воскресенье","Support":"Помощь","Symbols":"Символы","System message":"Системное сообщение","Tech requirements":"Техтребования","Telegram":"Телеграм","Tell about the task":"Рассказать о задаче","Tell about your experience":"Расскажите о своем опыте","Tell us briefly about yourself":"Расскажите коротко о себе","terms":{"To agree to":"правилами"},"Text color":"Цвет текста","th":"чт","Thank you. A typo has been reported to our editors.":"Спасибо. Сообщение об опечатке отправлено нашим редакторам.","Thank you. We now know that you are an adult":"Спасибо. Теперь мы знаем, что вы взрослый","Thanks! We\'ve got your message 👍":"Спасибо! Мы получили ваше сообщение 👍","The ad will be displayed on the home page and below the articles.":"Объявление будет показываться на главной странице и под статьями.","The branch has been removed":"Ветка удалена","The browser did not give the permission":"Браузер не дал разрешение","The browser does not support push-notifications":"Браузер не поддерживает push-уведомления","The comment has been pinned":"Комментарий закреплен","The comment has been removed":"Комментарий удален","The comment has been unpinned":"Комментарий откреплен","The current version of the article will be overwritten. Sure?":"Текущая версия статьи будет перезаписана. Уверены?","The data will be refreshed in 1 hour":"Данные обновятся в течение часа","The embed code has been copied":"Код эмбеда скопирован","The entry has not been saved. Are you sure you want to leave?":"Статья не сохранена. Точно хотите выйти?","The event has been removed":"Мероприятие удалено","The event will be removed. This action is irreversible.":"Мероприятие будет удалено. Это действие необратимо.","The event will be unpublished. This action is irreversible.":"Мероприятие будет снято с публикации. Это действие необратимо.","The feed is set up, you can always change subscriptions in your profile":"Лента настроена, вы всегда можете изменить подписки в своем профиле","The link has been copied":"Ссылка скопирована","The link was previously used in <a href=\\"%{ link }\\" target=\\"_blank\\">another entry</a>":"Ссылка ранее использовалась в <a href=\\"%{ link }\\" target=\\"_blank\\">другой статье</a>","The message will be removed for everyone":["Сообщение будет удалено у всех собеседников","Сообщения будут удалены у всех собеседников","Сообщения будут удалены у всех собеседников"],"The post is already repost in this subsite":"Запись уже размещена в этом подсайте","The post is pinned":"Пост закреплен","The post is unmarked 18+":"У поста снята отметка 18+","the service":"сервис","The user has been banned":"Пользователь забанен","The user has been unbanned":"Пользователь разбанен","The vacancy has been rejected":"Вакансия отклонена","The vacancy has been removed":"Вакансия удалена","The vacancy will be removed. This action is irreversible.":"Вакансия будет удалена. Это действие необратимо.","The vacancy will be unpublished. This action is irreversible.":"Вакансия будет снята с публикации. Это действие необратимо.","The version has been successfully applied!":"Версия успешно применена!","The word contains a forbidden character or is too short":"Слово содержит запрещенный символ или слишком короткое","There are no chats yet":"Пока нет диалогов","There is nothing here yet":"Здесь пока ничего нет","There was an error while creating the chat":"Ошибка во время создания чата","There will be another comment here next time":"В следующий раз на этом месте будет другой комментарий","These credentials will be used for invoicing and billing purposes.":"Эти данные будут использоваться для выставления счетов и актов.","This date can only be paid via card.":"Эту дату можно оплатить только по карте.","This email is already on the mailing list":"Такая почта уже есть в списке на рассылку","This is spam":"Это спам","This mail is already on the mailing list":"Такая почта уже в списке на рассылку","thu":"чт","Thu":"Чт","thursday":"четверг","Time is up":"Время вышло","tip":"подсказка","Tired of it":"Надоело","Title":"Заголовок","Title (optional)":"Заголовок (необязательно)","To log in, scan this QR code with the mobile app.":"Чтобы авторизоваться, отсканируйте этот QR-код мобильным приложением.","To my events":"К моим мероприятиям","To my vacancies":"К моим вакансиям","To order":"К заказу","To proceed to payment you need":"Для перехода к оплате необходимо","To the beginning":"К началу","To vote in private subsites, you need":"Чтобы голосовать в закрытых подсайтах, нужен","Token":"Токен","Too long text":"Слишком длинный текст","Too many actions in a short amount of time, are you a robot?":"Слишком много действий за короткий промежуток времени, вы не робот?","Top up balance":"Пополнить баланс","Total":"Всего","Total price":"Стоимость","Travel":"Путешествия","Try again":"Еще раз","Try again or write about the problem at":"Попробуйте снова или напишите о проблеме на","Try another file":"Попробуйте другой файл","tu":"вт","tue":"вт","Tue":"Вт","tuesday":"вторник","Tweet":"Твит","type":"тип","Type":"Тип","Type a description":"Введите описание","Type a title":"Введите заголовок","typing":"печатает","Unable to retrieve link data":"Не удается получить данные о ссылке","Unable to upload an image. Try another file":"Неполадки при загрузке изображения. Попробуйте другой файл","Unarchive":{"Verb":"Разархивировать"},"Unban":"Разбанить","Unban subsite":"Разбанить подсайт","Unban user":"Разбанить пользователя","Unmark 18+":"Снять отметку 18+","Unordered":"Обычный","Unpin":"Открепить","Unpublish":"Распубликовать","Unsubscribe":{"":"Отписаться","Отменить подписку":"Отменить подписку"},"Unsubscribe from new posts notifications":"Отписаться от уведомлений о записях","Unsubscribe from sub-site":"Отписаться от подсайта","Unsubscribe from subsite %{ subsite }":"Отписаться от подсайта %{ subsite }","Updating":"Дополняется","Upload":"Загрузить","Upload a file":"Загрузить файл","Upload an image":"Загрузите изображение","Upload cover":"Загрузить обложку","Upload cover image":"Загрузить картинку для обложки","Upload image":"Загрузить изображение","Use":"Использовать","Use hotkeys":"Используйте быстрые сочетания клавиш","User added to blocklist":"Пользователь добавлен в черный список","User is blocked":"Пользователь заблокирован","User is blocklisted":"Пользователь добавлен в черный список","User removed from blocklist":"Пользователь убран из черного списка","User rights changed":"Права пользователя изменены","User type":"Тип пользователя","Users will see the ad on the home page and in entries.":"Пользователи увидят объявление на главной странице и в статьях.","Vacancies":"Вакансии","Vacancy in":"Вакансия в","Valid until":"Действует до","Version history":"История версий","Version history is empty":"История версий пуста","Via email":{"Auth":"Через почту","":"На почту"},"Via Telegram":"В Telegram","view":["показ","показа","показов"],"views":{"multiple":"просмотров"},"Visible to all":"Виден всем","VK":"ВКонтакте","vote":["голос","голоса","голосов"],"Voted lists can only be seen for new posts":"Посмотреть проголосовавших можно только у новых записей","Voting":"Голосование","we":"ср","We will notify you of new entries":"Мы уведомим вас о новых записях","We will send it to":"Мы вышлем его на","We\'ve given you %{ number } bonus. Now you can go back to the cabinet and continue.":["Мы начислили вам %{ number } бонус. Теперь можно вернуться в кабинет и продолжить.","Мы начислили вам %{ number } бонуса. Теперь можно вернуться в кабинет и продолжить.","Мы начислили вам %{ number } бонусов. Теперь можно вернуться в кабинет и продолжить."],"We\'ve tried to upload the file, but it didn\'t work, alas":"Мы пытались загрузить файл, но ничего не вышло, увы","Web-push has been sent":"Веб-пуш отправлен","wed":"ср","Wed":"Ср","wednesday":"среда","Well well":"Так-так","What does it look like?":"Как это выглядит?","What not to do":"Что нельзя делать","When it starts, local time":"Когда начало, местное время","When it starts, time in Moscow":"Когда начало, время по Москве","Wise decision":"Мудрое решение","with all":"со всеми","With background":"Подложка","With border":"Рамка","With sound":"Со звуком","Withdraw":"Вывести","Withdraw the money":"Вывести деньги","Withdrawal amount":"Сумма к выводу","Withdrawal conditions":"Условия вывода","Withdrawal method":"Способ вывода","Withdrawal succeeded":"Вывод прошёл успешно","Withdrawal:":"Вывод:","Without picture":"Без фото","Without text":"Без текста","Wow, couldn\'t load the cover 😞":"Не удалось загрузить обложку 😞","Wow! %{ image } your ad could be here! Email us at %{ email }":"Ого! %{ image } тут могла бы быть ваша реклама! Напишите нам на %{ email }","Write":"Написать","Write a comment...":"Написать комментарий...","Write a reply...":"Написать ответ...","Write a text or paste a link":"Напишите текст или вставьте ссылку…","Write to somebody":"Для начала напишите кому-нибудь.","writing":{"Try":"написать"},"Wrong server response":"Неправильный ответ от сервера","Wrong, please try again.":"Неверно, попробуйте ещё раз.","Yandex.Music":"Яндекс.Музыка","year":["год","года","лет"],"Yes":"Да","You":"Вы","you agree to <a href=\\"/terms\\" data-no-ajax>the terms of use of the site</a> and give <a href=\\"/agreement\\" data-no-ajax>permission to process personal data</a>.":"вы соглашаетесь с <a href=\\"/terms\\" data-no-ajax>правилами пользования сайтом</a> и даёте <a href=\\"/agreement\\" data-no-ajax>согласие на обработку персональных данных</a>.","You are going to delete the post for some reason, are you sure that this is correct?":"Вы по каким-то причинам собираетесь удалить пост, вы уверены, что это правильно?","You are not a member anymore":"Вы больше не состоите в этом чате","You are trying to send an empty field":"Вы пытаетесь отправить пустое поле","You are unsubscribed":"Вы отписаны","You can attach a maximum of %{ n } attachment":["Можно прикреплять не более %{ n } вложения","Можно прикреплять не более %{ n } вложений","Можно прикреплять не более %{ n } вложений"],"You can move any not launched ad to the archive.":"Вы можете перенести в архив любое незапущенное объявление.","You can start a conversation via «Write» button in user profile":"Начать общение можно с помощью кнопки «Написать» в профиле пользователя","You can\'t send and receive messages":"Вы пока не можете отправлять и получать сообщения","You cannot repost from a private subsite":"Вы не можете делать репост из закрытого подсайта","You cannot upload files that exceeded the size of %{ max } mbs":"Нельзя загружать файлы более  %{ max } мб","You did not specify a name":"Вы не указали имя","You have %{ votesRemain } remained, authorize":"У вас осталось %{ votesRemain }, авторизуйтесь","You have already seen the rest of the entries":"Остальные записи вы уже видели","You have an ad blocker enabled. It will be great if you add %{ appDomain } to the exceptions or buy a plus-account — this will help us to develop.":"У вас включён блокировщик рекламы. Будет здорово, если вы добавите %{ appDomain } в исключения или купите plus-аккаунт — это поможет нам в развитии.","You have not received any donations yet, try":"Вам ещё не присылали донаты, попробуйте","You have unsubscribed":"Вы отписались","You have unsubscribed from new posts notifications":"Вы отписались от уведомлений о новых записях","You have unsubscribed from notifications of new entries":"Вы отписались от уведомлений о новых записях","You need a Plus-account to vote in private subsites":"You need a Plus-account to vote in private subsites","You need to agree to the rules first":"Сперва нужно согласиться с правилами","You need to write something":"Нужно хоть что-то написать","You specified an incorrect email":"Вы указали неверную электронную почту","You will be able to edit the vacancy and post it again":"Вы сможете отредактировать вакансию и разместить её заново","You will not be able to restore it.":"Вы не сможете восстановить его.","You\'ve typed something and decided to leave, is this intentional?":"Вы что-то ввели и решили уйти, это не случайность?","Your API token":"Ваш API-токен","your blog":{"genitive":"вашего блога","nominative":"ваш блог"},"Your complaint has been sent to a moderator":"Ваша жалоба отправлена модератору"}}')},function(e,t,n){"use strict";function i(e,t){return(e=Math.abs(e)).toString().indexOf(".")>-1?t[2]:e%10==1&&e%100!=11?t[1]:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?t[2]:t[0]}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));var i=n(47),o=n(111),s=n(0);let r=null;function a(e,t={},n){const{duration:i,easing:o,shift:r=0}=t;c(s.offset(e).top+r,{duration:i,easing:o},n)}function c(e,t={},n){const{duration:a=0,easing:c=null}=t,l=Date.now(),u=s.windowTop();if(null!==r&&r.stop(),a>0){const t=o[c]||null;r=new i.a((function(){let i,o=(Date.now()-l)/a;null!==t&&(o=t(o)),o<1?i=Math.round(u+(e-u)*o):(this.stop(),i=e,n&&n()),window.scrollTo(0,i)})),r.start()}else window.scrollTo(0,e),n&&n()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(24),o=n(3),s=n(9);class r extends i.b{constructor(e){super(),this.options=e,this.showState=!1}async show(e=!0){const{default:t}=await Promise.all([n.e(0),n.e(1),n.e(4),n.e(60)]).then(n.bind(null,158));if(this.showState=e,!0===this.showState&&void 0===this.instance){const e={events:{onSearch:(e,t,n="q")=>{let i;if("function"==typeof e)i=e(t);else{const o=e.includes("?")?"&":"?";i=e+(t?`${o}${n}=`+encodeURIComponent(t):"")}return new Promise((e,t)=>{o.b({url:i,success:function(t){e(t)},error:function(e){t(e)}})})},onSelect:e=>{this.trigger("select",e)},onReady:()=>{this.trigger("ready",this.instance)}}};this.options.options=Object.assign({},this.options.options,e),this.instance=new t({air:{andropov:s},container:this.options.container,options:this.options.options})}this.instance.show(this.showState)}setItems(){this.instance&&this.instance.setItems()}toggle(){this.instance?this.show(!this.instance.isVisible()):this.show(!0)}destroy(){this.instance&&this.instance.$destroy()}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(80),o=n(9);class s extends i.a{constructor(e){super(e),this.type="jpg",this.height=0,this.width=0,this.size=0,this.color="",this.external_service=[],e&&(this.data=e)}set data(e){for(const t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}get url(){return this.getUrl()}getUrl(e=""){const t=o.getCdnUrl();return"http"===this.uuid.substring(0,4)||"data:image/png;base64"===this.uuid.substring(0,21)?this.uuid:t+"/"+this.uuid+e}}},function(e,t,n){"use strict";function i(e,t=null){for(const t in e)e.hasOwnProperty(t)&&(e[t]=null);return t}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";function i(){return!0}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(26),o=n(8),s=n(0),r=n(3),a=n(1);class c{constructor(e){this.$dom={main:e.element,value:s.bem.find(e.element,"value"),label:s.bem.find(e.element,"label")},this.data={content_id:parseInt(s.data(e.element,"content-id")),value:parseInt(s.data(e.element,"value")),isCompact:"1"===s.data(e.element,"compact")},this.socket=this.createSocket(),this.ignore_first_socket=!1,this.wasDestoryed=!1,this.badCounter=0}ajaxHandler(e,t){t||(e.details&&this.setDetails(e.details),e.value&&this.setValue(e.value),e.is_hited||(this.ignore_first_socket=!0,this.sendHitThroughSocket()))}messageHandler(e){if(this.wasDestoryed,!0!==this.ignore_first_socket)try{e.content_id===this.data.content_id&&"content viewed"===e.type&&(void 0===e.value?this.incrementValue():this.setValue(e.value))}catch(e){}else this.ignore_first_socket=!1}createSocket(){return new i.a({name:"content-hits-"+this.data.content_id,onMessage:this.messageHandler.bind(this)}).open()}sendHitThroughAjax(e){let t="/hit/"+this.data.content_id;window.__is_app&&(t=`//${window.__url_domain}/hit/${this.data.content_id}/mobile`),r.c({url:t,success:function(t){e(t,!1)},error:function(){e(null,!0)},ignore_error_notify:!0})}sendHitThroughSocket(){this.socket.send({content_id:this.data.content_id,type:"content viewed"})}destroy(){this.socket.destroy(),this.$dom=s.nullDom(this.$dom),this.data=s.nullDom(this.data),this.wasDestoryed=!0}setValue(e){if((e=parseInt(e))>this.data.value){const t=this.data.isCompact?o.numberFormatCompact(e):o.numberFormat(e),n=Object(a.b)("multiple","views");s.html(this.$dom.value,t),this.$dom.label&&s.html(this.$dom.label,n),this.data.value=e}}incrementValue(){this.setValue(this.data.value+1)}setDetails(e){s.attr(this.$dom.main,"title",this.detailsToString(e))}detailsToString(e){var t=[];for(const n in e)t.push(`${n}: ${e[n]}`);return t.join("\r")}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l}));var i=n(25);const o={};function s(e,t,n){void 0===e.Player?setTimeout(s,500,e,t,n):(r(t,"ready"),n(e))}function r(e,t){if(o[e]||(o[e]={}),void 0===t)return o[e].status;o[e].status=t}function a(e,t,n,o){const s=r(e);switch(s){case void 0:r(e,"requiring"),Object(i.a)(t,(function(i){r(e,!0===i?"required":"failed"),a(e,t,n,o)}));break;case"requiring":case"initializing":setTimeout(a,300,e,t,n,o);break;case"failed":o(null,e,s);break;case"required":case"ready":o(void 0===window[n]?null:window[n],e,s)}}function c(e){a("youtube","//youtube.com/iframe_api","YT",(function(t,n,i){t?"required"===i?(r(n,"initializing"),window.onYouTubePlayerAPIReady=s.bind(null,t,n,e)):"ready"===i&&e(t):e(!1)}))}function l(e){a("recaptcha","//google.com/recaptcha/api.js","grecaptcha",(function(t,n){t?(r(n,"ready"),e(t)):e(!1)}))}},function(e,t,n){"use strict";function i(e={}){for(let t=1,n=arguments.length;t<n;t++){const n=arguments[t];if(n)for(let t in n)n.hasOwnProperty(t)&&(e[t]=n[t])}return e}n.d(t,"a",(function(){return i}))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function i(e,t,n,i,o,s){return!0===s&&e<=t?i:!0===s&&e>=n?o:e*(o-i)/(n-t)+(i*n-o*t)/(n-t)}function o(e,t,n,o,s){return function(r){return i(r,e,t,n,o,s)}}n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));class i{constructor(e){this.uuid="",e&&e.uuid&&(this.uuid=e.uuid)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const i={};function o(e,t){void 0===i.__clear&&(i.__clear=new RegExp("\\{{[^\\{{|\\}}]*\\}}","g"));for(const n in t)void 0===i[n]&&(i[n]=new RegExp("\\{{"+n+"\\}}","g")),e=e.replace(i[n],t[n]);return e=e.replace(i.__clear,"")}},function(e,t,n){var i=n(52),o=n(16)("socket.io-client:url");e.exports=function(e,t){var n=e;t=t||"undefined"!=typeof location&&location,null==e&&(e=t.protocol+"//"+t.host);"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(o("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),o("parse %s",e),n=i(e));n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443"));n.path=n.path||"/";var s=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+s+":"+n.port,n.href=n.protocol+"://"+s+(t&&t.port===n.port?"":":"+n.port),n}},function(e,t,n){function i(e){var n;function i(){if(i.enabled){var e=i,o=+new Date,s=o-(n||o);e.diff=s,e.prev=n,e.curr=o,n=o;for(var r=new Array(arguments.length),a=0;a<r.length;a++)r[a]=arguments[a];r[0]=t.coerce(r[0]),"string"!=typeof r[0]&&r.unshift("%O");var c=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,(function(n,i){if("%%"===n)return n;c++;var o=t.formatters[i];if("function"==typeof o){var s=r[c];n=o.call(e,s),r.splice(c,1),c--}return n})),t.formatArgs.call(e,r);var l=i.log||t.log||console.log.bind(console);l.apply(e,r)}}return i.namespace=e,i.enabled=t.enabled(e),i.useColors=t.useColors(),i.color=function(e){var n,i=0;for(n in e)i=(i<<5)-i+e.charCodeAt(n),i|=0;return t.colors[Math.abs(i)%t.colors.length]}(e),i.destroy=o,"function"==typeof t.init&&t.init(i),t.instances.push(i),i}function o(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=i.debug=i.default=i).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var i=("string"==typeof e?e:"").split(/[\s,]+/),o=i.length;for(n=0;n<o;n++)i[n]&&("-"===(e=i[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var s=t.instances[n];s.enabled=t.enabled(s.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,i;for(n=0,i=t.skips.length;n<i;n++)if(t.skips[n].test(e))return!1;for(n=0,i=t.names.length;n<i;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(84),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t){var n=1e3,i=6e4,o=60*i,s=24*o;function r(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var a,c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"days":case"day":case"d":return r*s;case"hours":case"hour":case"hrs":case"hr":case"h":return r*o;case"minutes":case"minute":case"mins":case"min":case"m":return r*i;case"seconds":case"second":case"secs":case"sec":case"s":return r*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}(e);if("number"===c&&!1===isNaN(e))return t.long?r(a=e,s,"day")||r(a,o,"hour")||r(a,i,"minute")||r(a,n,"second")||a+" ms":function(e){if(e>=s)return Math.round(e/s)+"d";if(e>=o)return Math.round(e/o)+"h";if(e>=i)return Math.round(e/i)+"m";if(e>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){var i=n(53),o=n(54),s=Object.prototype.toString,r="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===s.call(Blob),a="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===s.call(File);t.deconstructPacket=function(e){var t=[],n=e.data,s=e;return s.data=function e(t,n){if(!t)return t;if(o(t)){var s={_placeholder:!0,num:n.length};return n.push(t),s}if(i(t)){for(var r=new Array(t.length),a=0;a<t.length;a++)r[a]=e(t[a],n);return r}if("object"==typeof t&&!(t instanceof Date)){r={};for(var c in t)r[c]=e(t[c],n);return r}return t}(n,t),s.attachments=t.length,{packet:s,buffers:t}},t.reconstructPacket=function(e,t){return e.data=function e(t,n){if(!t)return t;if(t&&t._placeholder)return n[t.num];if(i(t))for(var o=0;o<t.length;o++)t[o]=e(t[o],n);else if("object"==typeof t)for(var s in t)t[s]=e(t[s],n);return t}(e.data,t),e.attachments=void 0,e},t.removeBlobs=function(e,t){var n=0,s=e;!function e(c,l,u){if(!c)return c;if(r&&c instanceof Blob||a&&c instanceof File){n++;var d=new FileReader;d.onload=function(){u?u[l]=this.result:s=this.result,--n||t(s)},d.readAsArrayBuffer(c)}else if(i(c))for(var h=0;h<c.length;h++)e(c[h],h,c);else if("object"==typeof c&&!o(c))for(var f in c)e(c[f],f,c)}(s),n||t(s)}},function(e,t,n){"use strict";t.byteLength=function(e){var t=l(e),n=t[0],i=t[1];return 3*(n+i)/4-i},t.toByteArray=function(e){var t,n,i=l(e),r=i[0],a=i[1],c=new s(function(e,t,n){return 3*(t+n)/4-n}(0,r,a)),u=0,d=a>0?r-4:r;for(n=0;n<d;n+=4)t=o[e.charCodeAt(n)]<<18|o[e.charCodeAt(n+1)]<<12|o[e.charCodeAt(n+2)]<<6|o[e.charCodeAt(n+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;2===a&&(t=o[e.charCodeAt(n)]<<2|o[e.charCodeAt(n+1)]>>4,c[u++]=255&t);1===a&&(t=o[e.charCodeAt(n)]<<10|o[e.charCodeAt(n+1)]<<4|o[e.charCodeAt(n+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t);return c},t.fromByteArray=function(e){for(var t,n=e.length,o=n%3,s=[],r=0,a=n-o;r<a;r+=16383)s.push(u(e,r,r+16383>a?a:r+16383));1===o?(t=e[n-1],s.push(i[t>>2]+i[t<<4&63]+"==")):2===o&&(t=(e[n-2]<<8)+e[n-1],s.push(i[t>>10]+i[t>>4&63]+i[t<<2&63]+"="));return s.join("")};for(var i=[],o=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=r.length;a<c;++a)i[a]=r[a],o[r.charCodeAt(a)]=a;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function u(e,t,n){for(var o,s,r=[],a=t;a<n;a+=3)o=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),r.push(i[(s=o)>>18&63]+i[s>>12&63]+i[s>>6&63]+i[63&s]);return r.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,n,i,o){var s,r,a=8*o-i-1,c=(1<<a)-1,l=c>>1,u=-7,d=n?o-1:0,h=n?-1:1,f=e[t+d];for(d+=h,s=f&(1<<-u)-1,f>>=-u,u+=a;u>0;s=256*s+e[t+d],d+=h,u-=8);for(r=s&(1<<-u)-1,s>>=-u,u+=i;u>0;r=256*r+e[t+d],d+=h,u-=8);if(0===s)s=1-l;else{if(s===c)return r?NaN:1/0*(f?-1:1);r+=Math.pow(2,i),s-=l}return(f?-1:1)*r*Math.pow(2,s-i)},t.write=function(e,t,n,i,o,s){var r,a,c,l=8*s-o-1,u=(1<<l)-1,d=u>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:s-1,m=i?1:-1,p=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,r=u):(r=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-r))<1&&(r--,c*=2),(t+=r+d>=1?h/c:h*Math.pow(2,1-d))*c>=2&&(r++,c/=2),r+d>=u?(a=0,r=u):r+d>=1?(a=(t*c-1)*Math.pow(2,o),r+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,o),r=0));o>=8;e[n+f]=255&a,f+=m,a/=256,o-=8);for(r=r<<o|a,l+=o;l>0;e[n+f]=255&r,f+=m,r/=256,l-=8);e[n+f-m]|=128*p}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){e.exports=n(90),e.exports.parser=n(29)},function(e,t,n){var i=n(56),o=n(28),s=n(16)("engine.io-client:socket"),r=n(60),a=n(29),c=n(52),l=n(31);function u(e,t){if(!(this instanceof u))return new u(e,t);t=t||{},e&&"object"==typeof e&&(t=e,e=null),e?(e=c(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=c(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=l.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.withCredentials=!1!==t.withCredentials,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||void 0,this.key=t.key||void 0,this.passphrase=t.passphrase||void 0,this.cert=t.cert||void 0,this.ca=t.ca||void 0,this.ciphers=t.ciphers||void 0,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}e.exports=u,u.priorWebsocketSuccess=!1,o(u.prototype),u.protocol=a.protocol,u.Socket=u,u.Transport=n(40),u.transports=n(56),u.parser=n(29),u.prototype.createTransport=function(e){s('creating transport "%s"',e);var t=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.query);t.EIO=a.protocol,t.transport=e;var n=this.transportOptions[e]||{};return this.id&&(t.sid=this.id),new i[e]({query:t,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,withCredentials:n.withCredentials||this.withCredentials,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0,isReactNative:this.isReactNative})},u.prototype.open=function(){var e;if(this.rememberUpgrade&&u.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout((function(){t.emit("error","No transports available")}),0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},u.prototype.setTransport=function(e){s("setting transport %s",e.name);var t=this;this.transport&&(s("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",(function(){t.onDrain()})).on("packet",(function(e){t.onPacket(e)})).on("error",(function(e){t.onError(e)})).on("close",(function(){t.onClose("transport close")}))},u.prototype.probe=function(e){s('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),n=!1,i=this;function o(){if(i.onlyBinaryUpgrades){var o=!this.supportsBinary&&i.transport.supportsBinary;n=n||o}n||(s('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",(function(o){if(!n)if("pong"===o.type&&"probe"===o.data){if(s('probe transport "%s" pong',e),i.upgrading=!0,i.emit("upgrading",t),!t)return;u.priorWebsocketSuccess="websocket"===t.name,s('pausing current transport "%s"',i.transport.name),i.transport.pause((function(){n||"closed"!==i.readyState&&(s("changing transport and sending upgrade packet"),h(),i.setTransport(t),t.send([{type:"upgrade"}]),i.emit("upgrade",t),t=null,i.upgrading=!1,i.flush())}))}else{s('probe transport "%s" failed',e);var r=new Error("probe error");r.transport=t.name,i.emit("upgradeError",r)}})))}function r(){n||(n=!0,h(),t.close(),t=null)}function a(n){var o=new Error("probe error: "+n);o.transport=t.name,r(),s('probe transport "%s" failed because of error: %s',e,n),i.emit("upgradeError",o)}function c(){a("transport closed")}function l(){a("socket closed")}function d(e){t&&e.name!==t.name&&(s('"%s" works - aborting "%s"',e.name,t.name),r())}function h(){t.removeListener("open",o),t.removeListener("error",a),t.removeListener("close",c),i.removeListener("close",l),i.removeListener("upgrading",d)}u.priorWebsocketSuccess=!1,t.once("open",o),t.once("error",a),t.once("close",c),this.once("close",l),this.once("upgrading",d),t.open()},u.prototype.onOpen=function(){if(s("socket open"),this.readyState="open",u.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){s("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},u.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(s('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else s('packet received with socket readyState "%s"',this.readyState)},u.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},u.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout((function(){"closed"!==t.readyState&&t.onClose("ping timeout")}),e||t.pingInterval+t.pingTimeout)},u.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout((function(){s("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)}),e.pingInterval)},u.prototype.ping=function(){var e=this;this.sendPacket("ping",(function(){e.emit("ping")}))},u.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},u.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(s("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},u.prototype.write=u.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},u.prototype.sendPacket=function(e,t,n,i){if("function"==typeof t&&(i=t,t=void 0),"function"==typeof n&&(i=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var o={type:e,data:t,options:n};this.emit("packetCreate",o),this.writeBuffer.push(o),i&&this.once("flush",i),this.flush()}},u.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",(function(){this.upgrading?i():t()})):this.upgrading?i():t()}function t(){e.onClose("forced close"),s("socket closing - telling transport to close"),e.transport.close()}function n(){e.removeListener("upgrade",n),e.removeListener("upgradeError",n),t()}function i(){e.once("upgrade",n),e.once("upgradeError",n)}return this},u.prototype.onError=function(e){s("socket error %j",e),u.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},u.prototype.onClose=function(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){s('socket close with reason: "%s"',e);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0}},u.prototype.filterUpgrades=function(e){for(var t=[],n=0,i=e.length;n<i;n++)~r(this.transports,e[n])&&t.push(e[n]);return t}},function(e,t){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},function(e,t,n){var i=n(38),o=n(57),s=n(28),r=n(32),a=n(16)("engine.io-client:polling-xhr"),c=n(39);function l(){}function u(e){if(o.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,"undefined"!=typeof location){var t="https:"===location.protocol,n=location.port;n||(n=t?443:80),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port,this.xs=e.secure!==t}}function d(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}if(e.exports=u,e.exports.Request=d,r(u,o),u.prototype.supportsBinary=!0,u.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.withCredentials=this.withCredentials,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new d(e)},u.prototype.doWrite=function(e,t){var n="string"!=typeof e&&void 0!==e,i=this.request({method:"POST",data:e,isBinary:n}),o=this;i.on("success",t),i.on("error",(function(e){o.onError("xhr post error",e)})),this.sendXhr=i},u.prototype.doPoll=function(){a("xhr poll");var e=this.request(),t=this;e.on("data",(function(e){t.onData(e)})),e.on("error",(function(e){t.onError("xhr poll error",e)})),this.pollXhr=e},s(d.prototype),d.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new i(e),n=this;try{a("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var o in t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(o)&&t.setRequestHeader(o,this.extraHeaders[o])}catch(e){}if("POST"===this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=this.withCredentials),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){n.onLoad()},t.onerror=function(){n.onError(t.responseText)}):t.onreadystatechange=function(){if(2===t.readyState)try{var e=t.getResponseHeader("Content-Type");(n.supportsBinary&&"application/octet-stream"===e||"application/octet-stream; charset=UTF-8"===e)&&(t.responseType="arraybuffer")}catch(e){}4===t.readyState&&(200===t.status||1223===t.status?n.onLoad():setTimeout((function(){n.onError("number"==typeof t.status?t.status:0)}),0))},a("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout((function(){n.onError(e)}),0)}"undefined"!=typeof document&&(this.index=d.requestsCount++,d.requests[this.index]=this)},d.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},d.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},d.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},d.prototype.cleanup=function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=l:this.xhr.onreadystatechange=l,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete d.requests[this.index],this.xhr=null}},d.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type")}catch(e){}e=("application/octet-stream"===t||"application/octet-stream; charset=UTF-8"===t)&&this.xhr.response||this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},d.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},d.prototype.abort=function(){this.cleanup()},d.requestsCount=0,d.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",h);else if("function"==typeof addEventListener){addEventListener("onpagehide"in c?"pagehide":"unload",h,!1)}function h(){for(var e in d.requests)d.requests.hasOwnProperty(e)&&d.requests[e].abort()}},function(e,t){e.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var i in e)n.call(e,i)&&t.push(i);return t}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t){e.exports=function(e,t,n){var i=e.byteLength;if(t=t||0,n=n||i,e.slice)return e.slice(t,n);if(t<0&&(t+=i),n<0&&(n+=i),n>i&&(n=i),t>=i||t>=n||0===i)return new ArrayBuffer(0);for(var o=new Uint8Array(e),s=new Uint8Array(n-t),r=t,a=0;r<n;r++,a++)s[a]=o[r];return s.buffer}},function(e,t){function n(){}e.exports=function(e,t,i){var o=!1;return i=i||n,s.count=e,0===e?t():s;function s(e,n){if(s.count<=0)throw new Error("after called too many times");--s.count,e?(o=!0,t(e),t=i):0!==s.count||o||t(null,n)}}},function(e,t){
/*! https://mths.be/utf8js v2.1.2 by @mathias */
var n,i,o,s=String.fromCharCode;function r(e){for(var t,n,i=[],o=0,s=e.length;o<s;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<s?56320==(64512&(n=e.charCodeAt(o++)))?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),o--):i.push(t);return i}function a(e,t){if(e>=55296&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function c(e,t){return s(e>>t&63|128)}function l(e,t){if(0==(4294967168&e))return s(e);var n="";return 0==(4294965248&e)?n=s(e>>6&31|192):0==(4294901760&e)?(a(e,t)||(e=65533),n=s(e>>12&15|224),n+=c(e,6)):0==(4292870144&e)&&(n=s(e>>18&7|240),n+=c(e,12),n+=c(e,6)),n+=s(63&e|128)}function u(){if(o>=i)throw Error("Invalid byte index");var e=255&n[o];if(o++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function d(e){var t,s;if(o>i)throw Error("Invalid byte index");if(o==i)return!1;if(t=255&n[o],o++,0==(128&t))return t;if(192==(224&t)){if((s=(31&t)<<6|u())>=128)return s;throw Error("Invalid continuation byte")}if(224==(240&t)){if((s=(15&t)<<12|u()<<6|u())>=2048)return a(s,e)?s:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&(s=(7&t)<<18|u()<<12|u()<<6|u())>=65536&&s<=1114111)return s;throw Error("Invalid UTF-8 detected")}e.exports={version:"2.1.2",encode:function(e,t){for(var n=!1!==(t=t||{}).strict,i=r(e),o=i.length,s=-1,a="";++s<o;)a+=l(i[s],n);return a},decode:function(e,t){var a=!1!==(t=t||{}).strict;n=r(e),i=n.length,o=0;for(var c,l=[];!1!==(c=d(a));)l.push(c);return function(e){for(var t,n=e.length,i=-1,o="";++i<n;)(t=e[i])>65535&&(o+=s((t-=65536)>>>10&1023|55296),t=56320|1023&t),o+=s(t);return o}(l)}}},function(e,t){!function(e){"use strict";t.encode=function(t){var n,i=new Uint8Array(t),o=i.length,s="";for(n=0;n<o;n+=3)s+=e[i[n]>>2],s+=e[(3&i[n])<<4|i[n+1]>>4],s+=e[(15&i[n+1])<<2|i[n+2]>>6],s+=e[63&i[n+2]];return o%3==2?s=s.substring(0,s.length-1)+"=":o%3==1&&(s=s.substring(0,s.length-2)+"=="),s},t.decode=function(t){var n,i,o,s,r,a=.75*t.length,c=t.length,l=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var u=new ArrayBuffer(a),d=new Uint8Array(u);for(n=0;n<c;n+=4)i=e.indexOf(t[n]),o=e.indexOf(t[n+1]),s=e.indexOf(t[n+2]),r=e.indexOf(t[n+3]),d[l++]=i<<2|o>>4,d[l++]=(15&o)<<4|s>>2,d[l++]=(3&s)<<6|63&r;return u}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},function(e,t){var n=void 0!==n?n:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,i=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),o=i&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),s=n&&n.prototype.append&&n.prototype.getBlob;function r(e){return e.map((function(e){if(e.buffer instanceof ArrayBuffer){var t=e.buffer;if(e.byteLength!==t.byteLength){var n=new Uint8Array(e.byteLength);n.set(new Uint8Array(t,e.byteOffset,e.byteLength)),t=n.buffer}return t}return e}))}function a(e,t){t=t||{};var i=new n;return r(e).forEach((function(e){i.append(e)})),t.type?i.getBlob(t.type):i.getBlob()}function c(e,t){return new Blob(r(e),t||{})}"undefined"!=typeof Blob&&(a.prototype=Blob.prototype,c.prototype=Blob.prototype),e.exports=i?o?Blob:c:s?a:void 0},function(e,t,n){var i=n(57),o=n(32),s=n(39);e.exports=u;var r,a=/\n/g,c=/\\n/g;function l(){}function u(e){i.call(this,e),this.query=this.query||{},r||(r=s.___eio=s.___eio||[]),this.index=r.length;var t=this;r.push((function(e){t.onData(e)})),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",(function(){t.script&&(t.script.onerror=l)}),!1)}o(u,i),u.prototype.supportsBinary=!1,u.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),i.prototype.doClose.call(this)},u.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)}),100)},u.prototype.doWrite=function(e,t){var n=this;if(!this.form){var i,o=document.createElement("form"),s=document.createElement("textarea"),r=this.iframeId="eio_iframe_"+this.index;o.className="socketio",o.style.position="absolute",o.style.top="-1000px",o.style.left="-1000px",o.target=r,o.method="POST",o.setAttribute("accept-charset","utf-8"),s.name="d",o.appendChild(s),document.body.appendChild(o),this.form=o,this.area=s}function l(){u(),t()}function u(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(e){n.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+n.iframeId+'">';i=document.createElement(e)}catch(e){(i=document.createElement("iframe")).name=n.iframeId,i.src="javascript:0"}i.id=n.iframeId,n.form.appendChild(i),n.iframe=i}this.form.action=this.uri(),u(),e=e.replace(c,"\\\n"),this.area.value=e.replace(a,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===n.iframe.readyState&&l()}:this.iframe.onload=l}},function(e,t,n){(function(t){var i,o,s=n(40),r=n(29),a=n(31),c=n(32),l=n(59),u=n(16)("engine.io-client:websocket");if("undefined"!=typeof WebSocket?i=WebSocket:"undefined"!=typeof self&&(i=self.WebSocket||self.MozWebSocket),"undefined"==typeof window)try{o=n(102)}catch(e){}var d=i||o;function h(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=i&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(d=o),s.call(this,e)}e.exports=h,c(h,s),h.prototype.name="websocket",h.prototype.supportsBinary=!0,h.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,n={};this.isReactNative||(n.agent=this.agent,n.perMessageDeflate=this.perMessageDeflate,n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?t?new d(e,t):new d(e):new d(e,t,n)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},h.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},h.prototype.write=function(e){var n=this;this.writable=!1;for(var i=e.length,o=0,s=i;o<s;o++)!function(e){r.encodePacket(e,n.supportsBinary,(function(o){if(!n.usingBrowserWebSocket){var s={};if(e.options&&(s.compress=e.options.compress),n.perMessageDeflate)("string"==typeof o?t.byteLength(o):o.length)<n.perMessageDeflate.threshold&&(s.compress=!1)}try{n.usingBrowserWebSocket?n.ws.send(o):n.ws.send(o,s)}catch(e){u("websocket closed before onclose event")}--i||a()}))}(e[o]);function a(){n.emit("flush"),setTimeout((function(){n.writable=!0,n.emit("drain")}),0)}},h.prototype.onClose=function(){s.prototype.onClose.call(this)},h.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},h.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=l()),this.supportsBinary||(e.b64=1),(e=a.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e},h.prototype.check=function(){return!(!d||"__initialize"in d&&this.name===h.prototype.name)}}).call(this,n(36).Buffer)},function(e,t){},function(e,t){e.exports=function(e,t){for(var n=[],i=(t=t||0)||0;i<e.length;i++)n[i-t]=e[i];return n}},function(e,t){function n(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=n,n.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(e){this.ms=e},n.prototype.setMax=function(e){this.max=e},n.prototype.setJitter=function(e){this.jitter=e}},function(e,t,n){"use strict";function i(){const e=new Uint32Array(1);return o(window.crypto.getRandomValues(e)[0]).then(e=>e.substring(0,16)+Date.now())}function o(e){const t=new TextEncoder("utf-8").encode(e);return window.crypto.subtle.digest("SHA-256",t).then(e=>function(e){const t=[],n=new DataView(e);for(let e=0;e<n.byteLength;e+=4){const i=n.getUint32(e).toString(16),o="00000000",s=(o+i).slice(-o.length);t.push(s)}return t.join("")}(e))}function s(e){const{alphabet:t,encryptedMessage:n}=e.split("").reduce(({alphabet:e,encryptedMessage:t},n,i)=>(e.includes(n)?t.push(n):i%2==0?e.push(n):t.push(n),{alphabet:e,encryptedMessage:t}),{alphabet:[],encryptedMessage:[]}),i=t.reduce((e,n,i)=>(e[t[i+1]||t[0]]=n,e),{});return n.map(e=>i[e]).join("")}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s}))},function(e,t,n){e.exports=function(){"use strict";
/*!
   * mustache.js - Logic-less {{mustache}} templates with JavaScript
   * http://github.com/janl/mustache.js
   */var e=Object.prototype.toString,t=Array.isArray||function(t){return"[object Array]"===e.call(t)};function n(e){return"function"==typeof e}function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function o(e,t){return null!=e&&"object"==typeof e&&t in e}var s=RegExp.prototype.test,r=/\S/;function a(e){return!function(e,t){return s.call(e,t)}(r,e)}var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},l=/\s*/,u=/\s+/,d=/\s*=/,h=/\s*\}/,f=/#|\^|\/|>|\{|&|=|!/;function m(e){this.string=e,this.tail=e,this.pos=0}function p(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function g(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}m.prototype.eos=function(){return""===this.tail},m.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},m.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},p.prototype.push=function(e){return new p(e,this)},p.prototype.lookup=function(e){var t,i,s,r=this.cache;if(r.hasOwnProperty(e))t=r[e];else{for(var a,c,l,u=this,d=!1;u;){if(e.indexOf(".")>0)for(a=u.view,c=e.split("."),l=0;null!=a&&l<c.length;)l===c.length-1&&(d=o(a,c[l])||(i=a,s=c[l],null!=i&&"object"!=typeof i&&i.hasOwnProperty&&i.hasOwnProperty(s))),a=a[c[l++]];else a=u.view[e],d=o(u.view,e);if(d){t=a;break}u=u.parent}r[e]=t}return n(t)&&(t=t.call(this.view)),t},g.prototype.clearCache=function(){void 0!==this.templateCache&&this.templateCache.clear()},g.prototype.parse=function(e,n){var o=this.templateCache,s=e+":"+(n||b.tags).join(":"),r=void 0!==o,c=r?o.get(s):void 0;return null==c&&(c=function(e,n){if(!e)return[];var o,s,r,c=!1,p=[],g=[],v=[],y=!1,w=!1,_="",k=0;function C(){if(y&&!w)for(;v.length;)delete g[v.pop()];else v=[];y=!1,w=!1}function S(e){if("string"==typeof e&&(e=e.split(u,2)),!t(e)||2!==e.length)throw new Error("Invalid tags: "+e);o=new RegExp(i(e[0])+"\\s*"),s=new RegExp("\\s*"+i(e[1])),r=new RegExp("\\s*"+i("}"+e[1]))}S(n||b.tags);for(var x,A,O,T,j,E,P=new m(e);!P.eos();){if(x=P.pos,O=P.scanUntil(o))for(var I=0,M=O.length;I<M;++I)a(T=O.charAt(I))?(v.push(g.length),_+=T):(w=!0,c=!0,_+=" "),g.push(["text",T,x,x+1]),x+=1,"\n"===T&&(C(),_="",k=0,c=!1);if(!P.scan(o))break;if(y=!0,A=P.scan(f)||"name",P.scan(l),"="===A?(O=P.scanUntil(d),P.scan(d),P.scanUntil(s)):"{"===A?(O=P.scanUntil(r),P.scan(h),P.scanUntil(s),A="&"):O=P.scanUntil(s),!P.scan(s))throw new Error("Unclosed tag at "+P.pos);if(j=">"==A?[A,O,x,P.pos,_,k,c]:[A,O,x,P.pos],k++,g.push(j),"#"===A||"^"===A)p.push(j);else if("/"===A){if(!(E=p.pop()))throw new Error('Unopened section "'+O+'" at '+x);if(E[1]!==O)throw new Error('Unclosed section "'+E[1]+'" at '+x)}else"name"===A||"{"===A||"&"===A?w=!0:"="===A&&S(O)}if(C(),E=p.pop())throw new Error('Unclosed section "'+E[1]+'" at '+P.pos);return function(e){for(var t,n=[],i=n,o=[],s=0,r=e.length;s<r;++s)switch((t=e[s])[0]){case"#":case"^":i.push(t),o.push(t),i=t[4]=[];break;case"/":o.pop()[5]=t[2],i=o.length>0?o[o.length-1][4]:n;break;default:i.push(t)}return n}(function(e){for(var t,n,i=[],o=0,s=e.length;o<s;++o)(t=e[o])&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(i.push(t),n=t));return i}(g))}(e,n),r&&o.set(s,c)),c},g.prototype.render=function(e,t,n,i){var o=this.getConfigTags(i),s=this.parse(e,o),r=t instanceof p?t:new p(t,void 0);return this.renderTokens(s,r,n,e,i)},g.prototype.renderTokens=function(e,t,n,i,o){for(var s,r,a,c="",l=0,u=e.length;l<u;++l)a=void 0,"#"===(r=(s=e[l])[0])?a=this.renderSection(s,t,n,i,o):"^"===r?a=this.renderInverted(s,t,n,i,o):">"===r?a=this.renderPartial(s,t,n,o):"&"===r?a=this.unescapedValue(s,t):"name"===r?a=this.escapedValue(s,t,o):"text"===r&&(a=this.rawValue(s)),void 0!==a&&(c+=a);return c},g.prototype.renderSection=function(e,i,o,s,r){var a=this,c="",l=i.lookup(e[1]);if(l){if(t(l))for(var u=0,d=l.length;u<d;++u)c+=this.renderTokens(e[4],i.push(l[u]),o,s,r);else if("object"==typeof l||"string"==typeof l||"number"==typeof l)c+=this.renderTokens(e[4],i.push(l),o,s,r);else if(n(l)){if("string"!=typeof s)throw new Error("Cannot use higher-order sections without the original template");null!=(l=l.call(i.view,s.slice(e[3],e[5]),(function(e){return a.render(e,i,o,r)})))&&(c+=l)}else c+=this.renderTokens(e[4],i,o,s,r);return c}},g.prototype.renderInverted=function(e,n,i,o,s){var r=n.lookup(e[1]);if(!r||t(r)&&0===r.length)return this.renderTokens(e[4],n,i,o,s)},g.prototype.indentPartial=function(e,t,n){for(var i=t.replace(/[^ \t]/g,""),o=e.split("\n"),s=0;s<o.length;s++)o[s].length&&(s>0||!n)&&(o[s]=i+o[s]);return o.join("\n")},g.prototype.renderPartial=function(e,t,i,o){if(i){var s=this.getConfigTags(o),r=n(i)?i(e[1]):i[e[1]];if(null!=r){var a=e[6],c=e[5],l=e[4],u=r;0==c&&l&&(u=this.indentPartial(r,l,a));var d=this.parse(u,s);return this.renderTokens(d,t,i,u,o)}}},g.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},g.prototype.escapedValue=function(e,t,n){var i=this.getConfigEscape(n)||b.escape,o=t.lookup(e[1]);if(null!=o)return"number"==typeof o&&i===b.escape?String(o):i(o)},g.prototype.rawValue=function(e){return e[1]},g.prototype.getConfigTags=function(e){return t(e)?e:e&&"object"==typeof e?e.tags:void 0},g.prototype.getConfigEscape=function(e){return e&&"object"==typeof e&&!t(e)?e.escape:void 0};var b={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){v.templateCache=e},get templateCache(){return v.templateCache}},v=new g;return b.clearCache=function(){return v.clearCache()},b.parse=function(e,t){return v.parse(e,t)},b.render=function(e,n,i,o){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+(t(s=e)?"array":typeof s)+'" was given as the first argument for mustache#render(template, view, partials)');var s;return v.render(e,n,i,o)},b.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,(function(e){return c[e]}))},b.Scanner=m,b.Context=p,b.Writer=g,b}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(48);let o=null;class s{constructor({url:e="wss://ws-sio.vc.ru/",name:t="",onMessage:n,onError:s,onBreak:r,onRestore:a}){this.url=e+t,this.onMessage=n,this.onError=s,this.onBreak=r,this.onRestore=a,this.uid="socket_"+Math.random(),this.target=this.url,null===o&&(o=new i.a({name:"socketWorker"})),this.bindedClose=this.close.bind(this),this.wasDestroyed=!1}open(){return o.on("message",this.uid,this.processMessage.bind(this)),o.send({target:this.target,command:"open",data:{url:this.url}}),window.addEventListener("beforeunload",this.bindedClose),this}send(e){o.send({target:this.target,command:"send",data:e})}processMessage({target:e,command:t,data:n}){if(this.wasDestroyed,e===this.target)switch(t){case"message":this.onMessage&&this.onMessage(n);break;case"error":this.onError&&this.onError(n);break;case"break":this.onBreak&&this.onBreak(n);break;case"restore":this.onRestore&&this.onRestore(n);break;default:console.warn(`Unknown command "${t}" from "${this.url}", data:`,n)}}close(){this.destroy()}destroy(){window.removeEventListener("beforeunload",this.bindedClose),o.off("message",this.uid),o.send({command:"close",target:this.target,data:{url:this.url}}),this.wasDestroyed=!0}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return a}));var i=n(14);const o=200;function s(e,t,n){console.assert("function"==typeof t,"module.notifyBroker: Unexpected type of success-callback"),console.assert("function"==typeof n,"module.notifyBroker: Unexpected type of error-callback");const s=e?"/notifications/"+e:"/notifications";i.get({url:s,dataType:"json",success:function(e){e.rc===o&&e.data?t(e.data):n(e.data)},error:function(e){n(e.data)}})}function r(){a()}function a(e="",t=null,n=null){i.post({url:"/notifications/read",dataType:"json",data:{ids:e},success:function(e){e.rc===o?null!==t&&t(e):null!==n&&n(e)},error:n})}},function(e,t,n){"use strict";function i(e,t){var n,i=screen.width/2-360,o=screen.height/2-220;return n=window.open(e,"displayWindow","width=720,height=440,left="+i+",top="+o+",location=no, directories=no,status=no,toolbar=no,menubar=no"),t&&(n.onbeforeunload=function(){t()}),n}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(41),o=n(0);class s{constructor(e){this.collection=new i.a,void 0!==e&&this.select(e)}select(e){o.each(e,this.collection.addElement.bind(this.collection))}deselect(e){void 0===e?this.collection.clear():"string"==typeof e?this.collection.removeByRule((function(t){return t.matches(e)})):o.each(e,this.collection.removeElement)}remove(e){void 0===e?this.each((function(e){o.remove(e)})):o.each(e,e=>o.remove(e))}each(e){return this.collection.each(e),this}addClass(e){return this.each((function(t){o.toggleClass(t,e,!0)})),this}removeClass(e){return this.each((function(t){o.toggleClass(t,e,!1)})),this}toggleClass(e,t){return this.each((function(n){o.toggleClass(n,e,t)})),this}hasClass(e){return this.collection.eq(0,(function(t){return o.hasClass(t,e)}))}hasClassEvery(e){return this.collection.every((function(t){return o.hasClass(t,e)}))}attr(e,t){return null==t?this.collection.eq(0,(function(n){return o.attr(n,e,t)})):(this.each((function(n){o.attr(n,e,t)})),this)}data(e,t){return null==t?this.collection.eq(0,(function(n){return o.data(n,e,t)})):(this.each((function(n){o.data(n,e,t)})),this)}append(e){return this.each((function(t){o.each(e,(function(e){o.append(t,e)}))})),this}prepend(e){return this.each((function(t){o.each(e,(function(e){o.prepend(t,e)}))})),this}before(e){return this.each((function(t){o.each(e,(function(e){o.before(t,e)}))})),this}after(e){return this.each((function(t){o.each(e,(function(e){o.after(t,e)}))})),this}find(e){var t=new s;return this.each((function(n){t.select(o.findAll(n,e))})),t}children(){var e=new s;return this.each((function(t){e.select(o.children(t))})),e}parent(){var e=new s;return this.each((function(t){e.select(o.parent(t))})),e}parents(e){var t=new s;return this.each((function(n){var i=o.parents(n,e);i&&t.select(i)})),t}html(e){return void 0===e?this.collection.eq(0,(function(e){return o.html(e)})):(this.each((function(t){o.html(t,e)})),this)}val(e){return void 0===e?this.collection.eq(0,(function(e){return o.val(e)})):(this.each((function(t){o.val(t,e)})),this)}outerHtml(e){return void 0===e?this.collection.eq(0,(function(e){return o.outerHtml(e)})):(this.each((function(t){o.outerHtml(t,e)})),this)}text(e){return void 0===e?this.collection.eq(0,(function(e){return o.text(e)})):(this.each((function(t){o.text(t,e)})),this)}next(){var e=new s;return this.each((function(t){var n=o.next(t);n&&e.select(n)})),e}prev(){var e=new s;return this.each((function(t){var n=o.prev(t);n&&e.select(n)})),e}css(e,t){return void 0===t&&"string"==typeof e?this.collection.eq(0,(function(t){return o.css(t,e)})):(this.each((function(n){o.css(n,e,t)})),this)}width(e){return void 0===e?this.collection.eq(0,(function(e){return o.width(e)})):(this.each((function(t){o.width(t,e)})),this)}height(e){return void 0===e?this.collection.eq(0,(function(e){return o.height(e)})):(this.each((function(t){o.height(t,e)})),this)}position(e){return void 0===e?this.collection.eq(0,(function(e){return o.position(e)})):(this.each((function(t){o.position(t,e)})),this)}offset(e){return void 0===e?this.collection.eq(0,(function(e){return o.offset(e)})):(this.each((function(t){o.offset(t,e)})),this)}focus(e){return this.each((function(t){o.focus(t,e)})),this}length(){return this.collection.getLength()}get(){return this.collection.getElements()}on(e,t){return this.each((function(n){o.on(n,e,t)})),this}delegate(e,t,n){return this.each((function(i){o.delegateEvent(i,e,t,n)})),this}off(e){return this.each((function(t){o.off(t,e,!0)})),this}}},function(e,t,n){"use strict";function i(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1}function o(e){return 1+--e*e*e*e*e}n.r(t),n.d(t,"easeInOutCubic",(function(){return i})),n.d(t,"easeOutQuint",(function(){return o}))},function(e,t,n){"use strict";var i=n(25),o=n(81),s=n(8),r=n(20),a=n(11);!function(e,t,n){var c=new function(){const n=this;n.utility=new function(){var e=this;e.who=function(e){var t;if(e instanceof Function)return"function";if(e instanceof Array)return"array";if(e instanceof Object)return"object";if(null===e)return"null";switch(t=typeof e){case"number":case"string":case"boolean":return t;default:return"unknown"}},e.mergeJSON=function(t){t=t||{};for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var o in i)i.hasOwnProperty(o)&&("object"!=typeof i[o]||i[o]instanceof Array?t[o]=i[o]:t[o]=e.mergeJSON(t[o],i[o]))}return t},e.pathToComponents=function(e){return e.split("/").filter((function(e){return""!==e}))},e.null=function(e,t=null){for(const t in e)e.hasOwnProperty(t)&&(e[t]=null);return t}},n.ConfigManager=new function(){var t=this,i=[];t.replaceConfigVars=function(e){var i=n.utility.mergeJSON(t.config.variables,e.variables);return JSON.parse(Object(o.a)(JSON.stringify(e).replace(/'/g,'"'),i,"{{","}}"))},t.init=function(e){t.config=e,t.config=t.replaceConfigVars(t.config)},t.getGlobalModules=function(){return Object(s.listToArray)(t.config.global)},t.getPageModules=function(n){var o,s,a,c={},l=1/0;for(o in"/"!==(n=n||e.location.pathname)&&"/"===n.substr(-1)&&(n=n.substr(0,n.length-1)),i.forEach((function(e){!0===e.regexp.test(n)&&(c[e.mask]=e)})),c)l>(s=c[o].weight)&&(l=s,a=o);return Object(r.g)(((c[a]||{}).modules_list||[]).concat(t.getGlobalModules()))},t.getPathToModule=function(e){return(e&&t.config.modules[e]&&t.config.modules[e].path?t.config.modules[e].path:t.config.path.modules)+"/"+e+".js"},t.getModuleConfig=function(e){return t.config.modules[e]||{}}},n.ModuleManager=new function(){var i,o,c=this,l=[],u=0,d=[],h=[],f=[],m={},p=function(e){this.default_namespace=e,this.events=[],this.events_length=0,this.events_buffer={}};p.prototype.isEventMatches=function(e,t,n){var i=!1;return void 0!==n?void 0!==t?e.name===t&&e.namespace===n&&(i=!0):e.namespace===n&&(i=!0):void 0!==t?e.name===t&&(i=!0):i=!0,i},p.prototype.get=function(e,t){var n,i=[],o=0;for(e=e||void 0,t=t||this.default_namespace||void 0,n=0;n<this.events_length;n++)!0===this.isEventMatches(this.events[n],e,t)&&(i[o++]=n);return i},p.prototype.on=function(e,t,n){switch(typeof e){case"string":this.realOn(e,t,n);break;case"object":e.forEach((e,n)=>{this.realOn(e,t,n)});break;default:console.warn(`[ Air ] Event on: invalid name type in namsespace "${t}"`,e)}},p.prototype.realOn=function(e,t,n){var i,o;if(void 0===n&&(n=t,t=void 0),this.events[this.events_length++]={name:e,namespace:t||this.default_namespace,callback:n},void 0!==this.events_buffer[e])for(o=this.events_buffer[e].length,i=0;i<o;i++)n(this.events_buffer[e][i])},p.prototype.off=function(e,t){var n=this.get(e,t);this.events=this.events.filter((function(e,t){return n.indexOf(t)<0})),this.events_length=this.events.length},p.prototype.one=function(e,t,n){var i=this;void 0===n&&(n=t,t=void 0),t=t||this.default_namespace||void 0,this.on(e,t,(function(o){i.off(e,t),n(o)}))},p.prototype.trigger=function(e,t,n){e=e||void 0;switch(this.events.forEach(n=>{void 0!==e&&n.name!==e||n.callback(t)}),n){case"chain":void 0===this.events_buffer[e]&&(this.events_buffer[e]=[]),this.events_buffer[e].push(t);break;case"last":this.events_buffer[e]=[t]}},p.prototype.clearBuffer=function(){this.events_buffer={}};var g=function(e){const t=m[e];if(void 0===t)return null;{const n=l[t];return void 0===n?(console.warn('[ Air ] get: couldn\'t get module "%s" by index %s',e,t),null):n}},b=function(e){var t,n,i=[];for("string"==typeof e&&(e=[e]),t=e.length,i=Object(r.f)(i,e),n=0;n<t;n++)i=Object(r.f)(i,b(g(e[n]).deps_list));return Object(r.g)(i)},v=function(){return{build:n.ModuleManager.build,delegateData:n.ModuleManager.delegateData,Event:p,inherit:function(e){return n.ModuleManager.inherit(e.name)}}},y=function(e){this.uid=Object(a.a)(e.name),this.name=e.name,this.config=e.config,this.elements=null,this.util=v(),this.__event=new p,this.delegateData=function(e,t){!0===t?(this.delegated_data=n.utility.mergeJSON(this.delegated_data,e),this.trigger("Delegated data update",e)):this.delegated_data=e},this.delegateElements=function(e){this.elements=e},this.undelegateElements=function(){this.elements=n.utility.null(this.elements)},this.on=function(e,t){this.__event.on(e,this.uid,t)},this.one=function(e,t){this.__event.one(e,this.uid,t)},this.off=function(e){this.__event.off(e,this.uid)},this.trigger=function(e,t){this.__event.trigger(e,t)},this.triggerOnce=function(e,t){this.__event.trigger(e,t,"last")},this.triggerChain=function(e,t){this.__event.trigger(e,t,"chain")},this.__clearEventsBuffer=function(){this.__event.clearBuffer()};try{e.content.apply(this,e.deps_kit.concat(this.util))}catch(t){if(console.error('[ Air ] BaseConstructor: error while define "%s": %s',e.name,t.message),!0===n.is_debug)throw t}this.delegateData({})};c.get=function(e){const t=g(e);return null===t?null:t.constructed},c.inherit=function(e){var t=g(e),n=Object(a.a)(e);if(!t)return null;switch(t.type){case"constructor":return Object.create(t.constructed,{uid:{value:n},on:{value:function(e,i){t.constructed.__event.on(e,n,i)}},one:{value:function(e,i){t.constructed.__event.one(e,n,i)}},off:{value:function(e){t.constructed.__event.off(e,n)}}});default:return t.constructed}},c.delegateData=function(e,t){var n,i;for(n in e)null!==(i=g(n))&&i.prepared&&i.constructed&&i.constructed.delegateData&&i.constructed.delegateData(e[n],t);i=null},c.delegateElements=function(e){var t,n;for(t in e)null!==(n=g(t))&&n.prepared&&n.constructed&&n.constructed.delegateElements&&n.constructed.delegateElements(e[t]);n=null},c.undelegateElements=function(e){e.forEach((function(e){let t=g(e);null!==t&&t.prepared&&t.constructed&&t.constructed.undelegateElements&&t.constructed.undelegateElements(),t=null}))},c.define=function(e,t,i,o){var c,d,h,f;if(void 0===e?f="Module can`t be defined without name":!0===function(e){return null!==g(e)}(e)&&console.warn('[ Air ] define: module "%s" redefined',e),void 0===t)t=[],i=null,o={},console.error('[ Air ] define: module "%s" defined without content',e);else{switch(n.utility.who(t)){case"function":case"object":case"null":void 0!==o?void 0!==i&&n.utility.mergeJSON(o,i):o=i,i=t,t=[];break;case"string":t=Object(s.listToArray)(t);break;default:f='Module "%s" has invalid dependencies format'}switch(t=t||[],i=void 0===i?null:i,o=o||{},c=n.utility.who(i),d=o.type,c){case"function":switch(d){case void 0:case"constructor":h="constructor";break;case"function":h="function";break;default:f='Module "%s" is a function but using as "'+d+'"'}break;case"null":h="null";break;default:f='Module "%s" has invalid type "'+c+'" (using as "'+d+'")'}}if(void 0===f){const n=u++;return m[e]=n,l[n]={uid:Object(a.a)(e),name:e,deps_list:Object(r.g)(t),deps_kit:null,content:i,type:h,actual_type:c,parameters:o,weight:0,topological_color:"white",config:null},!0}return console.error("[ Air ]",f,e),!1},c.defineWithType=function(e,t,n,i,o){return void 0===o&&(o={}),o.type=e,c.define(t,n,i,o)},c.autoDefine=function(e,t,n,i){var o=e.split(".");switch(void 0===i&&(i={}),o[0]){case"fn":i.type="function";break;case"module":i.type="constructor";break;default:console.warn('[ Air ] define: module "%s" has unknown type "%s"',e,o[0])}return c.define(e,t,n,i)},c.defineModule=function(e,t,n,i){return c.defineWithType("constructor",e,t,n,i)},c.defineFn=function(e,t,n,i){return c.defineWithType("function",e,t,n,i)};var w=function(e,t){var i=g(e);null===i&&(console.error('[ Air ] prepareDefinedModule: module "%s" is not defined',e),c.define(e),i=g(e)),C(i.deps_list,(function(o){switch(i.deps_kit=o.map((function(e){return c.inherit(e)})),i.config=n.ConfigManager.getModuleConfig(e),i.type){case"constructor":i.constructed=new y(i);break;case"function":i.constructed=function(e){return e.content.apply(null,e.deps_kit.concat(v()))}(i);break;case"null":i.constructed=null;break;default:console.warn('[ Air ] prepareDefinedModule: module "%s" has invalid type "%s"',i.name,i.type)}i.prepared=!0,t&&t(i),i=null}))},_=new function(){var e={},t={},n={};this.get=function(t){return e[t]||null},this.set=function(i,o){var s=i+" "+o;e[i]=o,t[s]=!0,n[s]&&(n[s].forEach((function(e){e()})),n[s]=null)},this.when=function(e,i,o){var s=e+" "+i;!0!==t[s]?(void 0===n[s]&&(n[s]=[]),n[s].push(o)):o()}},k=function(e,t){switch(_.get(e)){case null:case"required":null===g(e)?(_.set(e,"requiring"),_.set(e,"required"),c.define(e,null),k(e,t)):(_.set(e,"preparing"),w(e,(function(n){_.set(e,"prepared"),t&&t(n)})));break;case"requiring":case"preparing":case"prepared":_.when(e,"prepared",t)}},C=function(e,t){var n,i=e.length,o=[],s=0,r=function(n){k(e[n],(function(r){s+=1,o[n]=r,s===i&&t&&t(e,o)}))};if(i>0)for(n=0;n<i;n++)r(n);else t&&t(e)},S=function(e,t){if(e)switch(e.topological_color){case"white":e.topological_color="grey",e.deps_list.forEach((function(e){S(g(e),t)})),e.topological_color="black",t.push(e)}},x=function(){var e=[];return function(e){var t;for(t=0;t<u&&null!==e(l[t],t,u);t++);}((function(t){"white"===t.topological_color&&S(t,e)})),e[0].weight=0,i=1/0,o=-1/0,e.forEach((function(e){var t=0;e.deps_list.forEach((function(e){var n=g(e);null!==n&&n.weight>=t&&(t=n.weight+1)})),e.weight=t,e.topological_color="white",i>t&&(i=t),o<t&&(o=t)})),!0};c.processModules=function(e,t,s,r){var a="increase"===t?1:-1,c="increase"===t?o:i,d=0,h=function(t){var i,o,f,m=function(e){var t,n=[],i=0;for(t=0;t<u;t++)!0===e(l[t],t,length)&&(n[i++]=l[t]);return n}((function(n){return n.weight===t&&e.indexOf(n.name)>=0})),p=m.length,g=0,b=function(e,n,i){d+=1,(g+=1)===p&&(t!==c?h(t+a):r&&r(d))};if(p>0)for(i=0;i<p;i++)if(o=m[i],Date.now(),"constructor"===o.type)if(f=o.constructed[s],"destroy"===s&&o.constructed.__clearEventsBuffer(),void 0!==f)try{!0===o.parameters.async?(o.name,f.call(o.constructed,(function(){b(0,0,Date.now())}))):(f.call(o.constructed),b(0,o.name,Date.now()))}catch(e){if(console.error('[ Air ] processModules: error while %s "%s": %s',s,o.name,e.message),!0===n.is_debug)throw e;b(0,o.name,Date.now())}else b(0,o.name,Date.now());else null===o.content&&console.warn('[ Air ] processModules: ignore "%s"',o.name),b(0,o.name,Date.now());else t!==c?h(t+a):r&&r(d)};h("increase"===t?i:o)},c.initModules=function(e){c.processModules(d,"increase","init",e)},c.refreshModules=function(e){c.processModules(h,"increase","refresh",e)},c.destroyModules=function(e){c.processModules(f,"decrease","destroy",e)},c.getDOMModules=function(){var e,i,o,r,a,c,l,u,d=t.querySelectorAll("air, [air-module]"),h=d.length,f={},m=[];for(e=0;e<h;e++){switch((o=d[e]).tagName.toLowerCase()){case"air":l=o.getAttribute("module"),a=o.querySelector("air-settings")||o.querySelector("[air-settings]")||o;break;default:l=o.getAttribute("air-module"),a=o.querySelector("air-settings")||o.querySelector("[air-settings]")}if((u=(l=Object(s.listToArray)(l)).length)>0){r=a&&a.textContent.trim()||"{}";try{r="{}"===r?{}:JSON.parse(r)}catch(e){if(console.error('[ Air ] getDOMModules: error while parsing DOM-modules "%s": "%s" in:',l.join(", "),e.message),console.log(r),r={},!0===n.is_debug)throw e}for(i=0;i<u;i++)void 0===f[c=l[i]]&&(f[c]=[]),f[c].push({element:o,settings:r}),m.indexOf(c)<0&&m.push(c)}}return{map:f,list:m}},c.session=function(e,t){C(e,(function(e,n){var i,o=b(e);!0===x()?(i=Object(r.f)(d,h),d=Object(r.a)(o,i),h=Object(r.d)(o,i),f=Object(r.a)(i,o),t&&t(n)):console.error("[ Air ] session: modules are in loop. Shutting down")}))},c.build=function(t,i){var o=Date.now(),s=n.ConfigManager.getPageModules(t),a=c.getDOMModules(),l=Object(r.g)(s.concat(a.list));i=i||{},console.log(`[ Air ] Build "${decodeURIComponent(t)}"...`),c.session(l,(function(t){i.beforeDestroy&&i.beforeDestroy(),c.destroyModules((function(t){c.undelegateElements(f),h.forEach((function(e){a.list.indexOf(e)<0&&(a.list.push(e),a.map[e]=[])})),c.delegateElements(a.map),i.beforeRefresh&&i.beforeRefresh(),c.refreshModules((function(n){i.beforeInit&&i.beforeInit(),c.initModules((function(s){console.log(`[ Air ] Ready (${t}+${n}+${s}=${t+n+s} components in ${Date.now()-o}ms)`),i.finish&&i.finish(),e.onAirReady&&e.onAirReady()}))}))}))}))},c.run=function(e,t){switch(n.utility.who(e)){case"string":e=Object(s.listToArray)(e)}e=e||[],c.session(e,(function(){c.initModules((function(){t.apply(null,e.map((function(e){return c.inherit(e)})))}))}))},c.init=function(){n.ModuleManager.build(e.location.pathname,{beforeInit:function(){n.ModuleManager.delegateData(e.__delegated_data||{})}})}},n.config=function(e){return n.ConfigManager.init(e),n},n.start=function(t={}){return n.is_debug=!0===t.is_debug,e.airBeforeInit?Object(i.a)(e.airBeforeInit(),n.ModuleManager.init):n.ModuleManager.init(),n}};e.Air={init:c.init,config:c.config,start:c.start,run:c.ModuleManager.run,define:c.ModuleManager.autoDefine,defineModule:c.ModuleManager.defineModule,defineFn:c.ModuleManager.defineFn,delegateData:c.ModuleManager.delegateData,get:c.ModuleManager.get,inherit:function(e){return c.ModuleManager.inherit(e.name)},import:c.ModuleManager.inherit}}(window,document)},function(e,t,n){"use strict";var i=n(2),o=n(0),s=n(12),r=n(13);Air.defineModule("module.analytics","module.page, module.entry, module.ajaxify",(function(e,t,n){var a=this;a.hit=function(){var n={event:"Page — View",url:decodeURIComponent(Object(r.c)()),title:document.title,section:e.getNavigationName()},o=t.getData(),a=Object(r.d)();o?(n.post_details={contentGroup1:"Материалы",author:{name:o.author_name,type:o.author_type},tags:o.tags,comments:o.comments,rating:o.likes,favorites:o.favorites,sponsored:o.is_advertisement,section:o.navigation_name},n.tags=o.tags):(n.post_details={},"category"===a[0]?n.tags=[decodeURIComponent(a[1])]:n.tags=[]),i.log("ana","Hit",n),s.pushToDataLayer(n)},a.init=function(){i.define("ana","Analytics ʕ•ᴥ•ʔ","#FF934F"),o.delegateEvent(document,"[data-gtm]","click.module_analytics",(function(e,t){s.sendDefaultEvent(o.data(t,"gtm"))})),n&&n.on("Build finished",a.hit),a.hit()},a.refresh=function(){},a.destroy=function(){o.off(document,"click.module_analytics"),n.off()}}))},function(e,t,n){"use strict";var i=n(4);Air.defineModule("module.code",(function(){var e=this;let t;var o=null;function s(){t=new i.a({module_name:"module.code",Constructor:o})}this.init=function(){e.elements&&e.elements.length&&(o?s():n.e(63).then(n.bind(null,152)).then(({Highlight:e})=>{o=e,s()}).catch(e=>{console.error("An error occurred while loading the component:",e)}))},this.refresh=function(){t&&t.update()},this.destroy=function(){t&&t.destroy()}}))},function(e,t,n){"use strict";var i=n(26),o=n(2);Air.define("module.content_events",(function(){const e=this,t={},n={};e.init=function(){o.define("content_events","ContentEvents =^._.^=","#00cc33")},e.isEmpty=function(e){return void 0===e||(null===e||e<=0)},e.listen=function(t){e.isEmpty(n[t])&&(n[t]=0),n[t]++,e.updateSocketsList()},e.unlisten=function(t){e.isEmpty(n[t])||n[t]--,e.updateSocketsList()},e.updateSocketsList=function(){for(const i in n)e.isEmpty(t[i])&&!e.isEmpty(n[i])&&e.createSocket(i);for(const i in t)e.isEmpty(n[i])&&!e.isEmpty(t[i])&&e.destroySocket(i)},e.createSocket=function(n){t[n]=new i.a({name:"content-"+n,onMessage:e.messageHandler}).open()},e.destroySocket=function(e){t[e].destroy(),t[e]=null},e.messageHandler=function(t){o.log("content_events",`"${t.type}" for #${t.content_id}`),e.trigger("Event",t)},e.send=function(n,i){e.isEmpty(t[n])||t[n].send(i)}}))},function(e,t,n){"use strict";var i=n(0),o=n(7);Air.defineModule("module.entry_hit","module.andropov, module.gallery, module.iframe_lazy_load",(function(e,t,n){this.init=function(){var t;o.i&&(t=i.findAll('a[href*="/tag/"], a[href*="/u/"]'),i.each(t,(function(e){i.attr(e,"target","_blank")})),i.off(document,"click.module_ajaxify"),e.loadImmediately(),n.loadImmediately())}}))},function(e,t,n){"use strict";var i=n(0),o=n(9),s=n(72),r=n(4);Air.defineModule("module.gallery","module.image_zoom",(function(e){let t;class n{constructor({element:e,settings:t}){this.element=e,this.settings=t,this.items=[],this.dataHolder=this.element.querySelector('[name="gallery-data-holder"]');try{this.items=JSON.parse(this.dataHolder.value),i.delegateEvent(e,".gall__item","click",e=>{this.itemClicked(e.target)})}catch(e){console.error("Wrong gallery data format:",e)}}itemClicked(t){const n=t.dataset.index,o=i.findAll(this.element,".gall__item"),r=this.items.map((e,t)=>{const n=new s.a(e.image.data),i={width:n.width,height:n.height,element:o[t],html:this.renderZoomedImage(e,t,this.items.length),src:n.getUrl("/"),preview_src:n.getUrl("/-/resize/680/"),title:e.title,author:e.author};return"gif"===n.type&&Object.assign(i,{video_src:n.getUrl("/-/format/mp4/")}),i});e.zoomIn({items:r,startIndex:n,animation:!1,onDragStart(){Array.from(document.querySelectorAll(".gl__dots")).forEach(e=>{e.style.visibility="hidden"})},onDragEnd(){Array.from(document.querySelectorAll(".gl__dots")).forEach(e=>{e.style.visibility="visible"})},psOptions:{closeOnScroll:!1}})}renderZoomedImage(e,t,n){const i=new s.a(e.image.data),r=this.computeImageSize(i),a=`max-width: ${r.width}px; max-height: ${r.height}px`,{title:c,author:l}=e;let u="";u="gif"===i.type?`<video\n                                    src="${i.getUrl("/-/format/mp4")}"\n                                    autoplay\n                                    muted\n                                    loop\n                                    playsinline>\n                                  </video>`:`<img src="${o.tryToApplyWebpToUrlIfNeeded(i.getUrl(`/-/resize/${r.width*o.getRetinaMult()}/`))}" style="${a}">`;const d=[];for(let e=0;e<n;e++)d.push(`<span class="gl__dots-item ${e===t?"current":""}"></span>`);return`\n                    <div class="gl">\n                        <div class="gl__container">\n                            <div class="gl__image">\n                                ${u}\n                            </div>\n                            <div class="gl__footer l-clear">\n                                <div class="gl__counter">\n                                    ${t+1} из ${n}\n                                </div>\n                                <div class="gl__title">\n                                    ${c||""}\n                                </div>\n                                <div class="gl__author">\n                                    ${l||""}\n                                </div>\n                            </div>\n                            <div class="gl__dots">\n                                ${d.join("")}\n                            </div>\n                        </div>\n                    </div>\n                `}computeImageSize(e){const t=e.width/e.height;let n,i;const o=window.innerWidth<1e3?1:.9;return t>=window.innerWidth/window.innerHeight?(n=Math.ceil(window.innerWidth*o),i=Math.ceil(n*(e.height/e.width))):(i=Math.ceil(window.innerHeight*o),n=Math.ceil(i*t)),{width:n,height:i}}destroy(){i.off(this.element),this.settings=null,this.element=null,this.dataHolder=null,this.items=null}}this.init=function(){t=new r.a({module_name:"module.gallery",Constructor:n})},this.refresh=function(){t.update()},this.destroy=function(){t.destroy()}}))},function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d}));var i=n(7),o=n(0),s=n(10),r=n(24);class a extends r.b{constructor(){super(),this._isDetected=null}set isDetected(e){const t=this._isDetected;this._isDetected=e,t!==e&&this.trigger("update",this._isDetected)}get isDetected(){return this._isDetected}}const c=new a;function l(e){s.c("adblock-state",e?1:0,365),o.bem.toggle(document.body,"ad-blocked",e),o.bem.toggle(document.body,"ad-allowed",!e),c.isDetected=e}function u(){return new Promise((e,t)=>{if(null!==c.isDetected)return void e(c.isDetected);if("IE"===i.a)return l(!1),void e(!1);const n=document.createElement("a");n.innerHTML="&nbsp;",n.className="adsbox",n.href="https://ads.adfox.ru",document.body.appendChild(n);const o=0===document.getElementsByClassName("adsbox")[0].offsetHeight;document.body.removeChild(n),o?(l(!0),e(!0)):new Promise((e,t)=>{let n=new XMLHttpRequest;n.onreadystatechange=()=>{n.readyState===(XMLHttpRequest.DONE||XMLHttpRequest.READYSTATE_COMPLETE)&&(e(200!==n.status),n=null)},n.open("GET","/advert.gif",!0),n.send(null)}).then(t=>{l(t),e(t)})})}const d=()=>{const e=(e,t)=>new Promise((n,i)=>{const o=new Image,s=11*Math.random();o.src=t.replace(/\*/,e).replace(/\*/,s.toString()),o.onload=()=>n(!0),o.onerror=()=>n(!1),setTimeout(()=>{i(new Error("Pixel timed out"))},2e3)}),t="/px.gif?ch=*&rn=*",n=e("1",t),i=e("2",t);return Promise.all([n,i]).then(e=>e[0]&&!e[1]).catch(e=>(console.error(e),!1))}},function(e,t,n){"use strict";var i=n(105),o=n(0),s=n(49),r=n(3);const a=new(n(6).a);Air.defineModule("module.vacancy_contacts",(function(){var e,t,n,c=this,l=function(e){if(n){let t=o.find(`.vacancy_contacts[data-content-id="${e.data.content_id}"]`),s=o.find(t,"ul");s&&(o.html(s,Object(i.c)(o.text(s))),o.bem.toggle(t,"shown",!0),o.remove(e.el),u(n),s=null,t=null)}},u=function(e,t){r.c({url:"/job/hit/"+e,data:{}})};c.init=function(){var i;e=o.find(".show_vacancy_contact__counter span"),n=o.data(c.elements[0].element,"vacancy-id"),i=n,r.b({url:"/job/hits/"+i,complete:function(t){t&&t.count?o.text(e,t.count):o.remove(o.parent(e))}}),a.on("show_contacts",l),t=new s.a({selector:".show_vacancy_contact",offset:0,events:{onEnter:function(e){e.forEach((function(e){o.addClass(e.element,"show_vacancy_contact--ani-pulse")}))},onLeave:function(e){e.forEach((function(e){o.removeClass(e.element,"show_vacancy_contact--ani-pulse")}))}}})},c.refresh=function(){c.destroy(),c.init()},c.destroy=function(){a.off(),e=null,t&&t.destroy()}}))},function(e,t,n){"use strict";var i=n(0),o=n(3);Air.defineModule("module.events_interest",(function(){const e=this;e.init=function(){e.elements.length&&i.delegateEvent(document,".event_interest","click.event_interest",()=>{o.c({url:"/events/hit/"+i.data(e.elements[0].element,"event-id"),data:{}})})},e.refresh=function(){e.destroy(),e.init()},e.destroy=function(){i.off(document,"click.event_interest")}}))},function(e,t,n){"use strict";var i=n(0),o=n(4),s=n(1);Air.defineModule("module.events_today_label",(function(){let e;class t{constructor(e){this.element=e.element,this.timestamp=1e3*i.data(this.element,"timestamp"),this.date=new Date(this.timestamp),this.now=new Date,this.checkTimestamp()}checkTimestamp(){const e=(this.date.getTime()-this.now.getTime())/1e3/60,t=e/60;t<=24&&t>=0&&(t>=1?this.setLabel(`${Math.floor(t)} ${Object(s.b)("hours","h")}`):this.setLabel(`${Math.floor(e)} ${Object(s.b)("minutes","m")}`))}setLabel(e){const t=`\n        <svg class="icon icon--ui_chronograph" width="15" height="15" xmlns="http://www.w3.org/2000/svg"><use xlink:href="#ui_chronograph"></use></svg>\n        <span>${e}</span>`;i.bem.add(this.element,"soon"),i.html(this.element,t)}}this.init=function(){e=new o.a({module_name:"module.events_today_label",Constructor:t})},this.refresh=function(){e.update()},this.destroy=function(){e.destroy()}}))},function(e,t,n){"use strict";var i=n(27),o=n(0),s=n(4);class r{constructor({element:e}){this.$element=e,this.unixtime=parseInt(o.data(e,"date")),this.type=o.data(e,"type"),this.updateTimer=null,this.update()}update(){if(isNaN(this.unixtime))return;const[e,t]=i.j(this.unixtime,this.type);o.html(this.$element,e),t>0&&(this.updateTimer=setTimeout(this.update.bind(this),t*i.b))}destroy(){clearTimeout(this.updateTimer)}}Air.defineModule("module.date",(function(){let e=null;this.init=function(){e=new s.a({module_name:"module.date",Constructor:r})},this.refresh=function(){e.update()},this.destroy=function(){e.destroy()}}))},function(e,t,n){"use strict";var i=n(69),o=n(0),s=n(67),r=n(22),a=n(14),c=n(4),l=n(8),u=n(9);Air.defineModule("module.evaluate_script",(function(){var e,t=function(e){var t=e.element,i=document.createElement("SCRIPT");i.innerHTML=t.innerHTML.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"),o.copyAllAttrsFromOneToAnother(t,i),n(!0),o.replace(t,i),i=t=null},n=function(e){!0!==e||window.AirInterface?!1===e&&(window.AirInterface=null):window.AirInterface={$:o,ajax:a,string:l,andropov:u,declineWord:i.a,Scroller:r.a,scroll_locker:s}};this.init=function(){e=new c.a({selector:"air[script]",Constructor:t})},this.refresh=function(){e.update()},this.destroy=function(){e.clear(),n(!1)}}))},function(e,t,n){"use strict";var i=n(10);Air.define("module.fingerprint",(function(){this.init=function(){window.XMLHttpRequest.before=function(e){void 0===i.a("fingerprint")?(i.c("fingerprint",function(e=40){const t="abcdefghijklmnopqrstuvwzyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".split(""),n=t.length,i=[];for(let o=0;o<e;o++)i.push(t[Math.round(Math.random()*(n-1))]);return i.join("")}(),30),e()):e()}}}))},function(e,t,n){"use strict";var i=n(0),o=n(4);Air.defineModule("module.iframe_lazy_load",(function(){var e,t=function(e){this.is_loaded=!1,this.iframe=e.element,this.iframe_src=i.attr(this.iframe,"data-src")};t.prototype.load=function(e){!0===e&&!0!==this.is_loaded&&(i.attr(this.iframe,"src",this.iframe_src),i.attr(this.iframe,"data-src",null),this.is_loaded=!0,this.iframe=this.iframe_src=null)},this.loadImmediately=function(){e.callInstancesMethod("load",!0)},this.init=function(){e=new o.a({selector:"iframe[data-src]",Constructor:t,scrollers:[{method:"load",offset:1e3}]})},this.refresh=function(){e.update()},this.destroy=function(){e.clear()}}))},function(e,t,n){"use strict";var i=n(0);Air.define("module.radioButtons",(function(){const e=this,t="ui-radio-button",n="ui-radio-button--checked";let o={};function s(e){let s;if(e.dataset&&"true"!==e.dataset.processed)s=i.make("SPAN",[t]),i.after(e,s),i.append(s,e);else if(s=i.parents(e,"."+t),!s)return;e.checked?s.classList.add(n):s.classList.remove(n),function(e){o[e.name]||(o[e.name]=[]);o[e.name].push(e)}(e),e.dataset.processed=!0}function r(e,s){const r=s.firstChild,a=r.name;if(s.classList.contains(n)||(!function(e,s){let r;const a=o[e];for(let e=0;e<a.length;e++)s&&s==a[e]||(a[e].checked=!1,r=i.parents(a[e],"."+t),r&&r.classList&&r.classList.remove(n))}(a,r),s.classList.add(n),r.checked=!0),"createEvent"in document){var c=document.createEvent("HTMLEvents");c.initEvent("change",!1,!0),r.dispatchEvent(c)}else r.fireEvent("onchange")}function a(e){const t=e.firstChild;i.before(e,t),e.remove(),t.dataset.processed=null}e.processVisibleIn=function(e){i.findAll(e,'input[type="radio"]:not([data-radio-ignore])').forEach(s)},e.init=function(){e.processVisibleIn(document),window.setTimeout((function(){i.delegateEvent(document,"."+t,"click.radiobuttons",r)}),10)},e.destroy=function(){o={},i.off(document,"click.radiobuttons"),e.destroyIn(document)},e.destroyIn=function(e){i.findAll(e,"."+t).forEach(a)},e.refresh=function(){e.destroy(),e.init()}}))},function(e,t,n){"use strict";var i=n(0),o=n(4);Air.define("module.waterfall",(function(){var e,t,n=this,s=function(e){this.element=e.element,this.id=i.attr(i.find(this.element,"[data-broadcast]"),"data-broadcast")};s.prototype.init=function(){this.inited||(a(this.id),this.inited=!0)},s.prototype.destroy=function(){this.element=null};var r=function(t){!0===e?t&&t():function(e){var t,i,o=document.getElementsByTagName("script")[0];(t=document.createElement("script")).id="wtf-embed",t.src="//wtrfall.com/widget.js?id="+n.config.space_id,o.parentNode.insertBefore(t,o),i=function(){window.WTF&&window.WTF.bootstrap?e&&e():setTimeout(i,100)},t.onload=function(){i()}}((function(){e=!0,t&&t()}))},a=function(e){window.WTF.bootstrap("wtf-broadcast-"+e)},c=function(){r((function(){t.each((function(e,t){t.init()}))}))};n.init=function(){t=new o.a({module_name:"module.waterfall",Constructor:s}),c()},n.refresh=function(){t.update(),c()},n.destroy=function(){t.clear()}}))},function(e,t,n){"use strict";var i=n(10),o=n(21),s=n(2),r=n(0),a=n(49),c=n(7),l=n(4);const u=new(n(6).a);Air.defineModule("module.audio_controller",(function(){const e=this;let t,d,h,f,m,p,g,b;s.define("audio","Audio ♪","#4da0da");class v{constructor({element:t}){this.params={theme:"full",container:r.next(t)||r.parent(t),src:r.attr(t,"src"),size:r.data(t,"size"),title:r.attr(t,"title"),listens:r.data(t,"listens"),duration:r.data(t,"duration"),cover:r.data(t,"cover"),author:r.data(t,"author"),hash:r.data(t,"hash"),entryUrl:r.data(t,"entry-url")},this.audio_player=new e.AudioPlayer(this.params),this.audio_player.on("play",C),this.audio_player.on("pause",S),this.audio_player.on("rwd",x),this.audio_player.on("fwd",A),this.audio_player.on("rate",O),this.audio_player.on("seek",T),this.audio_player.on("volume",j),r.addClass(t,"l-hidden")}destroy(){this.audio_player.off(),this.audio_player.destroy(),this.audio_player=null}}const y=function(e,t,n){h&&h.audio_player&&h.params.src===e&&t?t():n&&n()},w=function(e){const t=_(e);let n=!1;t?h?(k(),U(!1),h=t,n=!0):(h=t,n=!0):h&&(k(),h=null),n&&(h.audio_player.setState(d.state||"initial"),h.audio_player.setRate(d.rate()),h.audio_player.setActive(!0),U(h))};let _=function(e){let n;return t.each((function(t,i){i.params.src===e&&(n=i)})),n},k=function(){h.audio_player&&(h.audio_player.setState("initial"),h.audio_player.setPosition(0),h.audio_player.setRate(1),h.audio_player.setActive(!1))},C=function(e){s.log("audio","playHandler",e),y(e.src,(function(){d.play()}),(function(){d.setSource(e.src,e.title,e.entryUrl,e.hash,e.cover,e.author),d.play()}))},S=function(e){s.log("audio","pauseHandler",e),y(e.src,(function(){d.pause()}))},x=function(e){s.log("audio","rwdHandler",e),y(e.src,(function(){d.rewind(-15)}))},A=function(e){s.log("audio","fwdHandler",e),y(e.src,(function(){d.rewind(15)}))},O=function(e){s.log("audio","rateHandler",e),y(e.src,(function(){d.rate(e.rate)}))},T=function(e){s.log("audio","seekHandler",e),y(e.src,(function(){d.seek(e.current_time)}))},j=function(e){s.log("audio","volumeHandler",e),y(e.src,(function(){d.volume(e.volume)}))};const E=function(t){s.log("audio","State changed",t);const n=d.getSource();y(n,(function(){h.audio_player.setState(t)})),f.setState(t),e.trigger("AudioPlayer state change",{state:t,source:n})},P=function(t){if(g!==t.duration&&(g=t.duration,y(d.getSource(),(function(){h.audio_player.setDuration(g)})),f.setDuration(g)),y(d.getSource(),(function(){h.audio_player.setPosition(t.current_time)})),f.setPosition(t.current_time),b&&b.isActive())switch(!0){case t.progress>=0&&t.progress<1:b.send("play");break;case t.progress>50:b.send("listened")}e.trigger("AudioPlayer progress change",t.progress)},I=function(e){s.log("audio","Rate changed",e),y(d.getSource(),(function(){h.audio_player.setRate(e)})),f.setRate(e)},M=function(e){s.log("audio","Volume changed",e),t.each((function(t,n){n.audio_player.setVolume(e)})),f.setVolume(e),i.c("audio_player_volume",e,365)},$=async function(e){const{default:t}=await n.e(13).then(n.bind(null,153));s.log("audio","Source changed",e),w(e.source),f.setTitle(e.title),f.setEntryUrl(e.entryUrl),f.setDisable(!1),y(d.getSource(),(function(){f.setDuration(h.params.duration)})),b&&b.destroy(),b=new t({hash:d.getHash(),list:["play","listened"]})},L=function(e){s.log("audio","Error",e),y(d.getSource(),(function(){h.audio_player.setDisable(!0)})),f.setDisable(!0)},R=function(e){t.each((function(e,t){t.audio_player.setVolume(d.volume())}))},D=function(){B(!1,!0)};let B=function(t,n=!1){r.bem.toggle(e.dom.floating_player,"hidden",!1===t),!1===t&&!0===n&&d.pause(),e.trigger("floating_player_visibility_change",{state:t})},U=function(e){!1===e?(p&&p.destroy(),"playing"===d.state&&B(!0)):p=new a.a({selector:e.audio_player.selector,events:{onEnter:function(e){(h&&h.audio_player?h.audio_player.audio_player:null)===(e.length>0&&e[0]?e[0].element:null)&&B(!1)},onLeave:function(e){"playing"===d.state&&B(!0)}}})};e.playFromExternalSource=function(e){const t=r.data(e,"src"),n=r.data(e,"title"),i=r.data(e,"entry-url"),o=r.data(e,"hash"),s=r.bem.hasMod(e,"active");!0===s?(d.pause(),B(!1,!0)):(d.setSource(t,n,i,o),d.play(),B(!0)),r.bem.toggle(e,"active",!s)},e.init=async function(){r.one(window,"load",()=>{window.requestAnimationFrame(()=>{e.initialize()})})},e.initialize=async function(){const{default:s}=await n.e(13).then(n.bind(null,154)),{default:a}=await n.e(13).then(n.bind(null,155)),{default:h}=await n.e(13).then(n.bind(null,159));this.AudioPlayer=h,m=i.a("audio_player_volume")||.75,e.dom={},e.dom.floating_player=r.find(".floating_player"),e.dom.floating_player_close=r.parseHTML('<div class="floating_player__close"><svg class="icon icon--ui_close" width="12" height="12" xmlns="http://www.w3.org/2000/svg"><use xlink:href="#ui_close"></use></svg></div>'),d=c.c?new a:new s,d.on("State changed",E),d.on("Time update",P),d.on("Rate changed",I),d.on("Volume changed",M),d.on("Source changed",$),d.on("Error",L),f=new e.AudioPlayer({container:this.dom.floating_player,theme:"compact"}),f.on("play",(function(){d.play()})),f.on("pause",(function(){d.pause()})),f.on("rwd",(function(){d.rewind(-15)})),f.on("fwd",(function(){d.rewind(15)})),f.on("rate",(function(e){d.rate(e.rate)})),f.on("seek",(function(e){d.seek(e.current_time)})),f.on("volume",(function(e){d.volume(e.volume)})),f.on("ready",(function(){t=new l.a({module_name:"module.audio_controller",Constructor:v}),R(),Object(o.a)("audio",JSON.stringify({name:"ready",data:{}})),d.volume(m),f.setActive(!0),r.append(e.dom.floating_player,e.dom.floating_player_close),r.on(e.dom.floating_player_close,"click",D)})),u.on("Listen audio entry",(function(t){e.playFromExternalSource(t.el)}))},e.refresh=function(){t&&(t.update(),R(),w(d.getSource()))}}))},function(e,t,n){"use strict";var i=n(21),o=n(0),s=n(30),r=n(9),a=n(7);Air.define("module.image_zoom",(function(){let e=null;function t(){const t=r.transformUrlToOriginal(e.currItem.msrc);return this.$dom.pswp_download.href=t,window.open(t),a.g&&setTimeout(()=>{e.applyZoomPan(1,0,0)},1e3),event.preventDefault(),event.stopPropagation(),!1}this.init=async function(){this.$dom={pswp:null}},this.refresh=this.destroy=function(){e&&(e.close(),e=null)},this.createStructure=function(e,n){var i=this;null===this.$dom.pswp?s.a({template:"photo_swipe",onReady:function(n){i.$dom.pswp=n,i.$dom.pswp_close=o.find(i.$dom.pswp,".pswp__close_area"),i.$dom.pswp_download=o.find(i.$dom.pswp,".pswp__download"),o.append(document.body,i.$dom.pswp),o.on(i.$dom.pswp_download,"click",t.bind(i)),e()},onError:n}):e()},this.zoomIn=function({items:e,startIndex:t=0,animation:n=!0,onDragStart:o,onDragEnd:s,psOptions:r,onClose:c}){a.c?e.length>1?Object(i.a)("media_click",JSON.stringify({items:e.map(e=>({src:e.src,video_src:e.video_src||"",title:e.title,author:e.author})),start:t})):(Object(i.a)("image_click",e[0].src),Object(i.a)("image_click_v2",JSON.stringify({src:e[0].src,title:e[0].title,author:e[0].author}))):this.createStructure(()=>{this.open(e.map(this.itemToPhotoSwipeItem),t,n,o,s,r,c)})},this.itemToPhotoSwipeItem=function(e){return{src:e.html?null:e.src,html:e.html,msrc:e.preview_src,w:e.width,h:e.height,element:e.element,title:e.title}},this.open=async function(t,i,s,r,a,c={},l){const{default:u}=await n.e(73).then(n.bind(null,156)),{default:d}=await n.e(73).then(n.t.bind(null,157,7));e=new u(this.$dom.pswp,d,t,Object.assign({history:!1,focus:!1,tapToToggleControls:!1,showAnimationDuration:s?333:0,hideAnimationDuration:s?333:0,tapToClose:!0,getThumbBoundsFn:function(e){if(!t[e].element)return null;var n=o.rect(t[e].element);return{x:n.left,y:n.top+o.windowTop(),w:n.width}},closeElClasses:["item","caption","ui","top-bar","close_area","zoom-wrap"],index:parseInt(i)},c)),"function"==typeof r&&e.listen("pointerDown",(function(){r()})),"function"==typeof a&&e.listen("mainScrollAnimComplete",(function(){a()})),"function"==typeof l&&e.listen("close",()=>{l()}),e.init()}}))},function(e,t,n){"use strict";var i=n(2),o=n(0);Air.define("module.instagram_frames",(function(){function e(e){return e.indexOf("instagram.com")>=0}function t(t){return e(t.src)}function n(e){return o.findAll("iframe").filter(t).filter((function(t){return t.contentWindow===e.source}))[0]}function s(t){var s,r=null;if(e(t.origin)){try{r=JSON.parse(t.data)}catch(e){i.log("andropov","Invalid instagram message data",r)}null!==r&&"MEASURE"===r.type&&r.details&&r.details.height&&void 0!==(s=n(t))&&o.css(s,"height",r.details.height+"px")}}this.init=function(){o.on(window,"message.instagram_frames",s)},this.destroy=function(){o.off(window,"message.instagram_frames")}}))},function(e,t,n){"use strict";var i=n(1);n(132),n(133);n(134),n(135).polyfill(),function(e){if(e&&e.log){var t,n="Black Blue Cyan Gray Green Magenta Red White Yellow".split(" "),i=/<(css|b|i)(?:=['"](.*?)['"])?>(.*?)<\/(?:css|b|i)>/gi,o=/([a-z\-]+)\s?:\s?([^;'"]+);?/gi,s=/%[sdifoO]/g,r=/<img=['"](.*?)['"]>/gi,a="background",c=function(e){var n=[e];return"string"==typeof e&&(e=e.replace(r,(function(e,n){var i,s,r,c,l=["font-size:1px"];return n.replace(o,(function(e,t,n){switch(t){case a:case a+"-image":l.push(t+":"+n,a+"-repeat:no-repeat");break;case"width":i=n;break;case"height":s=n,l.push("line-height:"+n)}})),c=Math.ceil(parseInt(i)/2),r=Math.ceil(parseInt(s)/2),l.push(a+"-size:"+i+" "+s),l.push("padding:"+r+"px "+c+"px"),t("",l.join(";"))})),n[0]=e.replace(i,(function(e,t,i,o){switch(i=i||"",o=o.replace(s,""),t){case"b":i+=";font-weight:bold";break;case"i":i+=";font-style:italic"}return n.push(i,""),"%c"+o+"%c"}))),n};e.colors={},n.forEach((function(n){e.colors[n.toLowerCase()]=function(e){return t(e,"color:"+n)},e.colors["bg"+n]=function(e){return t(e,a+"-color:"+n)}})),e.style=function(){var t=[].slice.call(arguments);e.log.apply(e,c(t.shift()).concat(t))},e.style.wrap=t=function(e,t){return'<css="'+t+'">'+e+"</css>"}}}(window.console),!window.__debug&&console.style(Object(i.c)("Wow! %{ image } your ad could be here! Email us at %{ email }",{image:'<img="background:url(http://goo.gl/EGlS7v);width:40px;height:40px">',email:"sales@cmtt.ru"})),window._log=console.log.bind(console),window.inspector={arrToStr:function(e){return"["+e.map((function(e){return'"'+e+'"'})).join(", ")+"]"},getGlobalVariables:function(e){var t=[];for(const e in window)t.push(e);return!0===e&&(t=this.arrToStr(t)),t},inspectGlobalVariables:function(e){var t,n=this.getGlobalVariables(),i=["stop","open","alert","confirm","prompt","print","requestAnimationFrame","cancelAnimationFrame","requestIdleCallback","cancelIdleCallback","captureEvents","releaseEvents","getComputedStyle","matchMedia","moveTo","moveBy","resizeTo","resizeBy","getSelection","find","getMatchedCSSRules","webkitRequestAnimationFrame","webkitCancelAnimationFrame","btoa","atob","setTimeout","clearTimeout","setInterval","clearInterval","postMessage","createImageBitmap","blur","scroll","focus","close","scrollTo","scrollBy","fetch","webkitRequestFileSystem","webkitResolveLocalFileSystemURL","openDatabase","chrome","console","parent","opener","top","length","frames","closed","location","self","window","document","name","history","locationbar","menubar","personalbar","scrollbars","statusbar","toolbar","status","frameElement","navigator","applicationCache","external","screen","innerWidth","innerHeight","scrollX","pageXOffset","scrollY","pageYOffset","screenX","screenY","outerWidth","outerHeight","devicePixelRatio","clientInformation","screenLeft","screenTop","defaultStatus","defaultstatus","styleMedia","onanimationend","onanimationiteration","onanimationstart","onsearch","ontransitionend","onwebkitanimationend","onwebkitanimationiteration","onwebkitanimationstart","onwebkittransitionend","onwheel","isSecureContext","onabort","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncontextmenu","oncuechange","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onpause","onplay","onplaying","onprogress","onratechange","onreset","onresize","onscroll","onseeked","onseeking","onselect","onshow","onstalled","onsubmit","onsuspend","ontimeupdate","ontoggle","onvolumechange","onwaiting","onbeforeunload","onhashchange","onlanguagechange","onmessage","onoffline","ononline","onpagehide","onpageshow","onpopstate","onrejectionhandled","onstorage","onunhandledrejection","onunload","performance","onauxclick","customElements","ongotpointercapture","onlostpointercapture","onpointercancel","onpointerdown","onpointerenter","onpointerleave","onpointermove","onpointerout","onpointerover","onpointerup","crypto","ondevicemotion","ondeviceorientation","ondeviceorientationabsolute","indexedDB","webkitStorageInfo","sessionStorage","localStorage","caches","speechSynthesis","getGlobalVariables","TEMPORARY","PERSISTENT","addEventListener","removeEventListener","dispatchEvent"];return t=n.filter((function(e){return i.indexOf(e)<0})),!0===e&&(t=this.arrToStr(t)),t},intersection:function(e,t){return this.arrToStr(e.filter((function(e){return t.indexOf(e)>=0})))}},Air.config({variables:{global_modules:window.__global_modules},router:{},global:"{{global_modules}}",modules:{"module.push":{push_domain:"push."+window.__domain,apple_web_push_id:window.__apple_web_push_id},"module.error_tracker":{domain:window.__domain},"module.waterfall":{space_id:window.__waterfall_space_id},"module.entry":{complain_reasons:window.__complain_reasons},"module.subsite_admin":{complain_reasons:window.__complain_reasons},"module.comments":{complain_reasons:window.__complain_reasons}},path:{modules:"/not/used/path/to/modules"}}),!1!==window.__air_autostart&&Air.start({is_debug:window.__debug})},function(e,t){!function(e,t){"use strict";var n=e.History=e.History||{};if(void 0!==n.Adapter)throw new Error("History.js Adapter has already been loaded...");n.Adapter={handlers:{},_uid:1,uid:function(e){return e._uid||(e._uid=n.Adapter._uid++)},bind:function(e,t,i){var o=n.Adapter.uid(e);n.Adapter.handlers[o]=n.Adapter.handlers[o]||{},n.Adapter.handlers[o][t]=n.Adapter.handlers[o][t]||[],n.Adapter.handlers[o][t].push(i),e["on"+t]=function(e,t){return function(i){n.Adapter.trigger(e,t,i)}}(e,t)},trigger:function(e,t,i){i=i||{};var o,s,r=n.Adapter.uid(e);for(n.Adapter.handlers[r]=n.Adapter.handlers[r]||{},n.Adapter.handlers[r][t]=n.Adapter.handlers[r][t]||[],o=0,s=n.Adapter.handlers[r][t].length;o<s;++o)n.Adapter.handlers[r][t][o].apply(this,[i])},extractEventData:function(e,t){return t&&t[e]||void 0},onDomLoad:function(t){var n=e.setTimeout((function(){t()}),2e3);e.onload=function(){clearTimeout(n),t()}}},void 0!==n.init&&n.init()}(window)},function(e,t){
/**
 * History.js Core
 * @author Benjamin Arthur Lupton <contact@balupton.com>
 * @copyright 2010-2011 Benjamin Arthur Lupton <contact@balupton.com>
 * @license New BSD License <http://creativecommons.org/licenses/BSD/>
 */
!function(e,t){"use strict";var n=e.console||void 0,i=e.document,o=e.navigator,s=!1,r=e.setTimeout,a=e.clearTimeout,c=e.setInterval,l=e.clearInterval,u=e.JSON,d=e.alert,h=e.History=e.History||{},f=e.history;try{(s=e.sessionStorage).setItem("TEST","1"),s.removeItem("TEST")}catch(e){s=!1}if(u.stringify=u.stringify||u.encode,u.parse=u.parse||u.decode,void 0!==h.init)throw new Error("History.js Core has already been loaded...");h.init=function(e){return void 0!==h.Adapter&&(void 0!==h.initCore&&h.initCore(),void 0!==h.initHtml4&&h.initHtml4(),!0)},h.initCore=function(t){if(void 0!==h.initCore.initialized)return!1;if(h.initCore.initialized=!0,h.options=h.options||{},h.options.hashChangeInterval=h.options.hashChangeInterval||100,h.options.safariPollInterval=h.options.safariPollInterval||500,h.options.doubleCheckInterval=h.options.doubleCheckInterval||500,h.options.disableSuid=h.options.disableSuid||!1,h.options.storeInterval=h.options.storeInterval||1e3,h.options.busyDelay=h.options.busyDelay||250,h.options.debug=h.options.debug||!1,h.options.initialTitle=h.options.initialTitle||i.title,h.options.html4Mode=h.options.html4Mode||!1,h.options.delayInit=h.options.delayInit||!1,h.intervalList=[],h.clearAllIntervals=function(){var e,t=h.intervalList;if(null!=t){for(e=0;e<t.length;e++)l(t[e]);h.intervalList=null}},h.debug=function(){h.options.debug&&h.log.apply(h,arguments)},h.log=function(){var e,t,o,s,r,a=!(void 0===n||void 0===n.log||void 0===n.log.apply),c=i.getElementById("log");for(a?(e=(s=Array.prototype.slice.call(arguments)).shift(),void 0!==n.debug?n.debug.apply(n,[e,s]):n.log.apply(n,[e,s])):e="\n"+arguments[0]+"\n",t=1,o=arguments.length;t<o;++t){if("object"==typeof(r=arguments[t])&&void 0!==u)try{r=u.stringify(r)}catch(e){}e+="\n"+r+"\n"}return c?(c.value+=e+"\n-----\n",c.scrollTop=c.scrollHeight-c.clientHeight):a||d(e),!0},
/**
     * History.getInternetExplorerMajorVersion()
     * Get's the major version of Internet Explorer
     * @return {integer}
     * @license Public Domain
     * @author Benjamin Arthur Lupton <contact@balupton.com>
     * @author James Padolsey <https://gist.github.com/527683>
     */
h.getInternetExplorerMajorVersion=function(){return h.getInternetExplorerMajorVersion.cached=void 0!==h.getInternetExplorerMajorVersion.cached?h.getInternetExplorerMajorVersion.cached:function(){for(var e=3,t=i.createElement("div"),n=t.getElementsByTagName("i");(t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e")&&n[0];);return e>4&&e}()},
/**
     * History.isInternetExplorer()
     * Are we using Internet Explorer?
     * @return {boolean}
     * @license Public Domain
     * @author Benjamin Arthur Lupton <contact@balupton.com>
     */
h.isInternetExplorer=function(){return h.isInternetExplorer.cached=void 0!==h.isInternetExplorer.cached?h.isInternetExplorer.cached:Boolean(h.getInternetExplorerMajorVersion())},h.options.html4Mode?h.emulated={pushState:!0,hashChange:!0}:h.emulated={pushState:!(e.history&&e.history.pushState&&e.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(o.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(o.userAgent)),hashChange:Boolean(!("onhashchange"in e||"onhashchange"in i)||h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<8)},h.enabled=!h.emulated.pushState,h.bugs={setHash:Boolean(!h.emulated.pushState&&"Apple Computer, Inc."===o.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(o.userAgent)),safariPoll:Boolean(!h.emulated.pushState&&"Apple Computer, Inc."===o.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(o.userAgent)),ieDoubleCheck:Boolean(h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<7)},h.isEmptyObject=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},h.cloneObject=function(e){var t,n;return e?(t=u.stringify(e),n=u.parse(t)):n={},n},h.getRootUrl=function(){var e=i.location.protocol+"//"+(i.location.hostname||i.location.host);return i.location.port&&(e+=":"+i.location.port),e+="/"},h.getBaseHref=function(){var e=i.getElementsByTagName("base"),t="";return 1===e.length&&(t=e[0].href.replace(/[^\/]+$/,"")),(t=t.replace(/\/+$/,""))&&(t+="/"),t},h.getBaseUrl=function(){return h.getBaseHref()||h.getBasePageUrl()||h.getRootUrl()},h.getPageUrl=function(){return((h.getState(!1,!1)||{}).url||h.getLocationHref()).replace(/\/+$/,"").replace(/[^\/]+$/,(function(e,t,n){return/\./.test(e)?e:e+"/"}))},h.getBasePageUrl=function(){return h.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,(function(e,t,n){return/[^\/]$/.test(e)?"":e})).replace(/\/+$/,"")+"/"},h.getFullUrl=function(e,t){var n=e,i=e.substring(0,1);return t=void 0===t||t,/[a-z]+\:\/\//.test(e)||(n="/"===i?h.getRootUrl()+e.replace(/^\/+/,""):"#"===i?h.getPageUrl().replace(/#.*/,"")+e:"?"===i?h.getPageUrl().replace(/[\?#].*/,"")+e:t?h.getBaseUrl()+e.replace(/^(\.\/)+/,""):h.getBasePageUrl()+e.replace(/^(\.\/)+/,"")),n.replace(/\#$/,"")},h.getShortUrl=function(e){var t=e,n=h.getBaseUrl(),i=h.getRootUrl();return h.emulated.pushState&&(t=t.replace(n,"")),t=t.replace(i,"/"),h.isTraditionalAnchor(t)&&(t="./"+t),t=t.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},h.getLocationHref=function(e){return(e=e||i).URL===e.location.href?e.location.href:e.location.href===decodeURIComponent(e.URL)?e.URL:e.location.hash&&decodeURIComponent(e.location.href.replace(/^[^#]+/,""))===e.location.hash||-1==e.URL.indexOf("#")&&-1!=e.location.href.indexOf("#")?e.location.href:e.URL||e.location.href},h.store={},h.idToState=h.idToState||{},h.stateToId=h.stateToId||{},h.urlToId=h.urlToId||{},h.storedStates=h.storedStates||[],h.savedStates=h.savedStates||[],h.normalizeStore=function(){h.store.idToState=h.store.idToState||{},h.store.urlToId=h.store.urlToId||{},h.store.stateToId=h.store.stateToId||{}},h.getState=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);var n=h.getLastSavedState();return!n&&t&&(n=h.createStateObject()),e&&((n=h.cloneObject(n)).url=n.cleanUrl||n.url),n},h.getIdByState=function(e){var t,n=h.extractId(e.url);if(!n)if(t=h.getStateString(e),void 0!==h.stateToId[t])n=h.stateToId[t];else if(void 0!==h.store.stateToId[t])n=h.store.stateToId[t];else{for(;n=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),void 0!==h.idToState[n]||void 0!==h.store.idToState[n];);h.stateToId[t]=n,h.idToState[n]=e}return n},h.normalizeState=function(e){var t,n;return e&&"object"==typeof e||(e={}),void 0!==e.normalized?e:(e.data&&"object"==typeof e.data||(e.data={}),(t={}).normalized=!0,t.title=e.title||"",t.url=h.getFullUrl(e.url?e.url:h.getLocationHref()),t.hash=h.getShortUrl(t.url),t.data=h.cloneObject(e.data),t.id=h.getIdByState(t),t.cleanUrl=t.url.replace(/\??\&_suid.*/,""),t.url=t.cleanUrl,n=!h.isEmptyObject(t.data),(t.title||n)&&!0!==h.options.disableSuid&&(t.hash=h.getShortUrl(t.url).replace(/\??\&_suid.*/,""),/\?/.test(t.hash)||(t.hash+="?"),t.hash+="&_suid="+t.id),t.hashedUrl=h.getFullUrl(t.hash),(h.emulated.pushState||h.bugs.safariPoll)&&h.hasUrlDuplicate(t)&&(t.url=t.hashedUrl),t)},h.createStateObject=function(e,t,n){var i={data:e,title:t,url:n};return i=h.normalizeState(i)},h.getStateById=function(e){return e=String(e),h.idToState[e]||h.store.idToState[e]||void 0},h.getStateString=function(e){var t;return t={data:h.normalizeState(e).data,title:e.title,url:e.url},u.stringify(t)},h.getStateId=function(e){return h.normalizeState(e).id},h.getHashByState=function(e){return h.normalizeState(e).hash},h.extractId=function(e){var t,n;return n=-1!=e.indexOf("#")?e.split("#")[0]:e,(t=/(.*)\&_suid=([0-9]+)$/.exec(n))&&t[1]||e,(t?String(t[2]||""):"")||!1},h.isTraditionalAnchor=function(e){return!/[\/\?\.]/.test(e)},h.extractState=function(e,t){var n,i,o=null;return t=t||!1,(n=h.extractId(e))&&(o=h.getStateById(n)),o||(i=h.getFullUrl(e),(n=h.getIdByUrl(i)||!1)&&(o=h.getStateById(n)),o||!t||h.isTraditionalAnchor(e)||(o=h.createStateObject(null,null,i))),o},h.getIdByUrl=function(e){return h.urlToId[e]||h.store.urlToId[e]||void 0},h.getLastSavedState=function(){return h.savedStates[h.savedStates.length-1]||void 0},h.getLastStoredState=function(){return h.storedStates[h.storedStates.length-1]||void 0},h.hasUrlDuplicate=function(e){var t;return(t=h.extractState(e.url))&&t.id!==e.id},h.storeState=function(e){return h.urlToId[e.url]=e.id,h.storedStates.push(h.cloneObject(e)),e},h.isLastSavedState=function(e){var t=!1;return h.savedStates.length&&(t=e.id===h.getLastSavedState().id),t},h.saveState=function(e){return!h.isLastSavedState(e)&&(h.savedStates.push(h.cloneObject(e)),!0)},h.getStateByIndex=function(e){return void 0===e?h.savedStates[h.savedStates.length-1]:e<0?h.savedStates[h.savedStates.length+e]:h.savedStates[e]},h.getCurrentIndex=function(){return h.savedStates.length<1?0:h.savedStates.length-1},h.getHash=function(e){var t=h.getLocationHref(e);return h.getHashByUrl(t)},h.unescapeHash=function(e){var t=h.normalizeHash(e);return t=(t=(t=decodeURIComponent(t)).replace(/\//g,"%2F")).replace(/\./g,"_")},h.normalizeHash=function(e){return e.replace(/[^#]*#/,"").replace(/#.*/,"")},h.setHash=function(e,t){var n,o;return!1!==t&&h.busy()?(h.pushQueue({scope:h,callback:h.setHash,args:arguments,queue:t}),!1):(h.busy(!0),(n=h.extractState(e,!0))&&!h.emulated.pushState?h.pushState(n.data,n.title,n.url,!1):h.getHash()!==e&&(h.bugs.setHash?(o=h.getPageUrl(),h.pushState(null,null,o+"#"+e,!1)):i.location.hash=e),h)},h.escapeHash=function(t){var n=h.normalizeHash(t);return n=e.encodeURIComponent(n),h.bugs.hashEscape||(n=n.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),n},h.getHashByUrl=function(e){var t=String(e).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return t=h.unescapeHash(t)},h.setTitle=function(e){var t,n=e.title;n||(t=h.getStateByIndex(0))&&t.url===e.url&&(n=t.title||h.options.initialTitle);try{i.getElementsByTagName("title")[0].innerHTML=n.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(e){}return i.title=n,h},h.queues=[],h.busy=function(e){if(void 0!==e?h.busy.flag=e:void 0===h.busy.flag&&(h.busy.flag=!1),!h.busy.flag){a(h.busy.timeout);var t=function(){var e,n,i;if(!h.busy.flag)for(e=h.queues.length-1;e>=0;--e)0!==(n=h.queues[e]).length&&(i=n.shift(),h.fireQueueItem(i),h.busy.timeout=r(t,h.options.busyDelay))};h.busy.timeout=r(t,h.options.busyDelay)}return h.busy.flag},h.busy.flag=!1,h.fireQueueItem=function(e){return e.callback.apply(e.scope||h,e.args||[])},h.pushQueue=function(e){return h.queues[e.queue||0]=h.queues[e.queue||0]||[],h.queues[e.queue||0].push(e),h},h.queue=function(e,t){return"function"==typeof e&&(e={callback:e}),void 0!==t&&(e.queue=t),h.busy()?h.pushQueue(e):h.fireQueueItem(e),h},h.clearQueue=function(){return h.busy.flag=!1,h.queues=[],h},h.stateChanged=!1,h.doubleChecker=!1,h.doubleCheckComplete=function(){return h.stateChanged=!0,h.doubleCheckClear(),h},h.doubleCheckClear=function(){return h.doubleChecker&&(a(h.doubleChecker),h.doubleChecker=!1),h},h.doubleCheck=function(e){return h.stateChanged=!1,h.doubleCheckClear(),h.bugs.ieDoubleCheck&&(h.doubleChecker=r((function(){return h.doubleCheckClear(),h.stateChanged||e(),!0}),h.options.doubleCheckInterval)),h},h.safariStatePoll=function(){var t=h.extractState(h.getLocationHref());if(!h.isLastSavedState(t))return t||h.createStateObject(),h.Adapter.trigger(e,"popstate"),h},h.back=function(e){return!1!==e&&h.busy()?(h.pushQueue({scope:h,callback:h.back,args:arguments,queue:e}),!1):(h.busy(!0),h.doubleCheck((function(){h.back(!1)})),f.go(-1),!0)},h.forward=function(e){return!1!==e&&h.busy()?(h.pushQueue({scope:h,callback:h.forward,args:arguments,queue:e}),!1):(h.busy(!0),h.doubleCheck((function(){h.forward(!1)})),f.go(1),!0)},h.go=function(e,t){var n;if(e>0)for(n=1;n<=e;++n)h.forward(t);else{if(!(e<0))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(n=-1;n>=e;--n)h.back(t)}return h},h.emulated.pushState){var m=function(){};h.pushState=h.pushState||m,h.replaceState=h.replaceState||m}else h.onPopState=function(t,n){var i,o,s,r=!1;return h.doubleCheckComplete(),(o=h.getHash())?((s=h.extractState(o||h.getLocationHref(),!0))?h.replaceState(s.data,s.title,s.url,!1):(h.Adapter.trigger(e,"anchorchange"),h.busy(!1)),h.expectedStateId=!1,!1):((r=(i=h.Adapter.extractEventData("state",t,n)||!1)?h.getStateById(i):h.expectedStateId?h.getStateById(h.expectedStateId):h.extractState(h.getLocationHref()))||(r=h.createStateObject(null,null,h.getLocationHref())),h.expectedStateId=!1,h.isLastSavedState(r)?(h.busy(!1),!1):(h.storeState(r),h.saveState(r),h.setTitle(r),h.Adapter.trigger(e,"statechange"),h.busy(!1),!0))},h.Adapter.bind(e,"popstate",h.onPopState),h.pushState=function(t,n,i,o){if(h.getHashByUrl(i)&&h.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==o&&h.busy())return h.pushQueue({scope:h,callback:h.pushState,args:arguments,queue:o}),!1;h.busy(!0);var s=h.createStateObject(t,n,i);return h.isLastSavedState(s)?h.busy(!1):(h.storeState(s),h.expectedStateId=s.id,f.pushState(s.id,s.title,s.url),h.Adapter.trigger(e,"popstate")),!0},h.replaceState=function(t,n,i,o){if(h.getHashByUrl(i)&&h.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==o&&h.busy())return h.pushQueue({scope:h,callback:h.replaceState,args:arguments,queue:o}),!1;h.busy(!0);var s=h.createStateObject(t,n,i);return h.isLastSavedState(s)?h.busy(!1):(h.storeState(s),h.expectedStateId=s.id,f.replaceState(s.id,s.title,s.url),h.Adapter.trigger(e,"popstate")),!0};if(s){try{h.store=u.parse(s.getItem("History.store"))||{}}catch(e){h.store={}}h.normalizeStore()}else h.store={},h.normalizeStore();h.Adapter.bind(e,"unload",h.clearAllIntervals),h.saveState(h.storeState(h.extractState(h.getLocationHref(),!0))),s&&(h.onUnload=function(){var e,t,n;try{e=u.parse(s.getItem("History.store"))||{}}catch(t){e={}}for(t in e.idToState=e.idToState||{},e.urlToId=e.urlToId||{},e.stateToId=e.stateToId||{},h.idToState)h.idToState.hasOwnProperty(t)&&(e.idToState[t]=h.idToState[t]);for(t in h.urlToId)h.urlToId.hasOwnProperty(t)&&(e.urlToId[t]=h.urlToId[t]);for(t in h.stateToId)h.stateToId.hasOwnProperty(t)&&(e.stateToId[t]=h.stateToId[t]);h.store=e,h.normalizeStore(),n=u.stringify(e);try{s.setItem("History.store",n)}catch(e){if(e.code!==DOMException.QUOTA_EXCEEDED_ERR)throw e;s.length&&(s.removeItem("History.store"),s.setItem("History.store",n))}},h.Adapter.bind(e,"beforeunload",h.onUnload),h.Adapter.bind(e,"unload",h.onUnload)),h.emulated.pushState||(h.bugs.safariPoll&&h.intervalList.push(c(h.safariStatePoll,h.options.safariPollInterval)),"Apple Computer, Inc."!==o.vendor&&"Mozilla"!==(o.appCodeName||"")||(h.Adapter.bind(e,"hashchange",(function(){h.Adapter.trigger(e,"popstate")})),h.getHash()&&h.Adapter.onDomLoad((function(){h.Adapter.trigger(e,"hashchange")}))))},h.options&&h.options.delayInit||h.init()}(window)},function(e,t){!function(){"use strict";if("object"==typeof window)if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var e=function(e){for(var t=window.document,n=o(t);n;)n=o(t=n.ownerDocument);return t}(),t=[],n=null,i=null;r.prototype.THROTTLE_TIMEOUT=100,r.prototype.POLL_INTERVAL=null,r.prototype.USE_MUTATION_OBSERVER=!0,r._setupCrossOriginUpdater=function(){return n||(n=function(e,n){i=e&&n?d(e,n):{top:0,bottom:0,left:0,right:0,width:0,height:0},t.forEach((function(e){e._checkForIntersections()}))}),n},r._resetCrossOriginUpdater=function(){n=null,i=null},r.prototype.observe=function(e){if(!this._observationTargets.some((function(t){return t.element==e}))){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(e.ownerDocument),this._checkForIntersections()}},r.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter((function(t){return t.element!=e})),this._unmonitorIntersections(e.ownerDocument),0==this._observationTargets.length&&this._unregisterInstance()},r.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},r.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},r.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter((function(e,t,n){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==n[t-1]}))},r.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map((function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}}));return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},r.prototype._monitorIntersections=function(t){var n=t.defaultView;if(n&&-1==this._monitoringDocuments.indexOf(t)){var i=this._checkForIntersections,s=null,r=null;if(this.POLL_INTERVAL?s=n.setInterval(i,this.POLL_INTERVAL):(a(n,"resize",i,!0),a(t,"scroll",i,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in n&&(r=new n.MutationObserver(i)).observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),this._monitoringDocuments.push(t),this._monitoringUnsubscribes.push((function(){var e=t.defaultView;e&&(s&&e.clearInterval(s),c(e,"resize",i,!0)),c(t,"scroll",i,!0),r&&r.disconnect()})),t!=(this.root&&this.root.ownerDocument||e)){var l=o(t);l&&this._monitorIntersections(l.ownerDocument)}}},r.prototype._unmonitorIntersections=function(t){var n=this._monitoringDocuments.indexOf(t);if(-1!=n){var i=this.root&&this.root.ownerDocument||e;if(!this._observationTargets.some((function(e){var n=e.element.ownerDocument;if(n==t)return!0;for(;n&&n!=i;){var s=o(n);if((n=s&&s.ownerDocument)==t)return!0}return!1}))){var s=this._monitoringUnsubscribes[n];if(this._monitoringDocuments.splice(n,1),this._monitoringUnsubscribes.splice(n,1),s(),t!=i){var r=o(t);r&&this._unmonitorIntersections(r.ownerDocument)}}}},r.prototype._unmonitorAllIntersections=function(){var e=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var t=0;t<e.length;t++)e[t]()},r.prototype._checkForIntersections=function(){if(this.root||!n||i){var e=this._rootIsInDom(),t=e?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach((function(i){var o=i.element,r=l(o),a=this._rootContainsTarget(o),c=i.entry,u=e&&a&&this._computeTargetAndRootIntersection(o,r,t),d=i.entry=new s({time:window.performance&&performance.now&&performance.now(),target:o,boundingClientRect:r,rootBounds:n&&!this.root?null:t,intersectionRect:u});c?e&&a?this._hasCrossedThreshold(c,d)&&this._queuedEntries.push(d):c&&c.isIntersecting&&this._queuedEntries.push(d):this._queuedEntries.push(d)}),this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},r.prototype._computeTargetAndRootIntersection=function(t,o,s){if("none"!=window.getComputedStyle(t).display){for(var r,a,c,u,h,m,p,g,b=o,v=f(t),y=!1;!y&&v;){var w=null,_=1==v.nodeType?window.getComputedStyle(v):{};if("none"==_.display)return null;if(v==this.root||9==v.nodeType)if(y=!0,v==this.root||v==e)n&&!this.root?!i||0==i.width&&0==i.height?(v=null,w=null,b=null):w=i:w=s;else{var k=f(v),C=k&&l(k),S=k&&this._computeTargetAndRootIntersection(k,C,s);C&&S?(v=k,w=d(C,S)):(v=null,b=null)}else{var x=v.ownerDocument;v!=x.body&&v!=x.documentElement&&"visible"!=_.overflow&&(w=l(v))}if(w&&(r=w,a=b,c=void 0,u=void 0,h=void 0,m=void 0,p=void 0,g=void 0,c=Math.max(r.top,a.top),u=Math.min(r.bottom,a.bottom),h=Math.max(r.left,a.left),m=Math.min(r.right,a.right),g=u-c,b=(p=m-h)>=0&&g>=0&&{top:c,bottom:u,left:h,right:m,width:p,height:g}||null),!b)break;v=v&&f(v)}return b}},r.prototype._getRootRect=function(){var t;if(this.root)t=l(this.root);else{var n=e.documentElement,i=e.body;t={top:0,left:0,right:n.clientWidth||i.clientWidth,width:n.clientWidth||i.clientWidth,bottom:n.clientHeight||i.clientHeight,height:n.clientHeight||i.clientHeight}}return this._expandRectByRootMargin(t)},r.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map((function(t,n){return"px"==t.unit?t.value:t.value*(n%2?e.width:e.height)/100})),n={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},r.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1,i=t.isIntersecting?t.intersectionRatio||0:-1;if(n!==i)for(var o=0;o<this.thresholds.length;o++){var s=this.thresholds[o];if(s==n||s==i||s<n!=s<i)return!0}},r.prototype._rootIsInDom=function(){return!this.root||h(e,this.root)},r.prototype._rootContainsTarget=function(t){return h(this.root||e,t)&&(!this.root||this.root.ownerDocument==t.ownerDocument)},r.prototype._registerInstance=function(){t.indexOf(this)<0&&t.push(this)},r.prototype._unregisterInstance=function(){var e=t.indexOf(this);-1!=e&&t.splice(e,1)},window.IntersectionObserver=r,window.IntersectionObserverEntry=s}function o(e){try{return e.defaultView&&e.defaultView.frameElement||null}catch(e){return null}}function s(e){this.time=e.time,this.target=e.target,this.rootBounds=u(e.rootBounds),this.boundingClientRect=u(e.boundingClientRect),this.intersectionRect=u(e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0}),this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,n=t.width*t.height,i=this.intersectionRect,o=i.width*i.height;this.intersectionRatio=n?Number((o/n).toFixed(4)):this.isIntersecting?1:0}function r(e,t){var n,i,o,s=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(s.root&&1!=s.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=(n=this._checkForIntersections.bind(this),i=this.THROTTLE_TIMEOUT,o=null,function(){o||(o=setTimeout((function(){n(),o=null}),i))}),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(s.rootMargin),this.thresholds=this._initThresholds(s.threshold),this.root=s.root||null,this.rootMargin=this._rootMarginValues.map((function(e){return e.value+e.unit})).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}function a(e,t,n,i){"function"==typeof e.addEventListener?e.addEventListener(t,n,i||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n)}function c(e,t,n,i){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,i||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,n)}function l(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function u(e){return!e||"x"in e?e:{top:e.top,y:e.top,bottom:e.bottom,left:e.left,x:e.left,right:e.right,width:e.width,height:e.height}}function d(e,t){var n=t.top-e.top,i=t.left-e.left;return{top:n,left:i,height:t.height,width:t.width,bottom:n+t.height,right:i+t.width}}function h(e,t){for(var n=t;n;){if(n==e)return!0;n=f(n)}return!1}function f(t){var n=t.parentNode;return 9==t.nodeType&&t!=e?o(t):n&&11==n.nodeType&&n.host?n.host:n&&n.assignedSlot?n.assignedSlot.parentNode:n}}()},function(e,t,n){!function(){"use strict";e.exports={polyfill:function(){var e=window,t=document;if(!("scrollBehavior"in t.documentElement.style)||!0===e.__forceSmoothScrollPolyfill__){var n,i=e.HTMLElement||e.Element,o={scroll:e.scroll||e.scrollTo,scrollBy:e.scrollBy,elementScroll:i.prototype.scroll||a,scrollIntoView:i.prototype.scrollIntoView},s=e.performance&&e.performance.now?e.performance.now.bind(e.performance):Date.now,r=(n=e.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(n)?1:0);e.scroll=e.scrollTo=function(){void 0!==arguments[0]&&(!0!==c(arguments[0])?m.call(e,t.body,void 0!==arguments[0].left?~~arguments[0].left:e.scrollX||e.pageXOffset,void 0!==arguments[0].top?~~arguments[0].top:e.scrollY||e.pageYOffset):o.scroll.call(e,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:e.scrollX||e.pageXOffset,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:e.scrollY||e.pageYOffset))},e.scrollBy=function(){void 0!==arguments[0]&&(c(arguments[0])?o.scrollBy.call(e,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):m.call(e,t.body,~~arguments[0].left+(e.scrollX||e.pageXOffset),~~arguments[0].top+(e.scrollY||e.pageYOffset)))},i.prototype.scroll=i.prototype.scrollTo=function(){if(void 0!==arguments[0])if(!0!==c(arguments[0])){var e=arguments[0].left,t=arguments[0].top;m.call(this,this,void 0===e?this.scrollLeft:~~e,void 0===t?this.scrollTop:~~t)}else{if("number"==typeof arguments[0]&&void 0===arguments[1])throw new SyntaxError("Value could not be converted");o.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left:"object"!=typeof arguments[0]?~~arguments[0]:this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top:void 0!==arguments[1]?~~arguments[1]:this.scrollTop)}},i.prototype.scrollBy=function(){void 0!==arguments[0]&&(!0!==c(arguments[0])?this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior}):o.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop))},i.prototype.scrollIntoView=function(){if(!0!==c(arguments[0])){var n=h(this),i=n.getBoundingClientRect(),s=this.getBoundingClientRect();n!==t.body?(m.call(this,n,n.scrollLeft+s.left-i.left,n.scrollTop+s.top-i.top),"fixed"!==e.getComputedStyle(n).position&&e.scrollBy({left:i.left,top:i.top,behavior:"smooth"})):e.scrollBy({left:s.left,top:s.top,behavior:"smooth"})}else o.scrollIntoView.call(this,void 0===arguments[0]||arguments[0])}}function a(e,t){this.scrollLeft=e,this.scrollTop=t}function c(e){if(null===e||"object"!=typeof e||void 0===e.behavior||"auto"===e.behavior||"instant"===e.behavior)return!0;if("object"==typeof e&&"smooth"===e.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+e.behavior+" is not a valid value for enumeration ScrollBehavior.")}function l(e,t){return"Y"===t?e.clientHeight+r<e.scrollHeight:"X"===t?e.clientWidth+r<e.scrollWidth:void 0}function u(t,n){var i=e.getComputedStyle(t,null)["overflow"+n];return"auto"===i||"scroll"===i}function d(e){var t=l(e,"Y")&&u(e,"Y"),n=l(e,"X")&&u(e,"X");return t||n}function h(e){for(;e!==t.body&&!1===d(e);)e=e.parentNode||e.host;return e}function f(t){var n,i,o,r,a=(s()-t.startTime)/468;r=a=a>1?1:a,n=.5*(1-Math.cos(Math.PI*r)),i=t.startX+(t.x-t.startX)*n,o=t.startY+(t.y-t.startY)*n,t.method.call(t.scrollable,i,o),i===t.x&&o===t.y||e.requestAnimationFrame(f.bind(e,t))}function m(n,i,r){var c,l,u,d,h=s();n===t.body?(c=e,l=e.scrollX||e.pageXOffset,u=e.scrollY||e.pageYOffset,d=o.scroll):(c=n,l=n.scrollLeft,u=n.scrollTop,d=a),f({scrollable:c,method:d,startTime:h,startX:l,startY:u,x:i,y:r})}}}}()},function(e,t,n){"use strict";var i=n(2),o=n(0),s=n(4),r=n(1);class a{constructor(e){this.dom={main:e,full:o.bem.find(e,"full")},this.dom.full&&this.makeMoreButton()}makeMoreButton(){this.dom.more=o.make("span",o.bem.getMainClass(this.dom.main)+"__more"),this.dom.more.textContent=Object(r.c)("More"),o.append(this.dom.main,this.dom.more),o.on(this.dom.more,"click",this.showFullText.bind(this))}showFullText(){const e=o.html(this.dom.full);o.html(this.dom.main,e)}destroy(){this.dom.more&&o.off(this.dom.more),this.dom=o.nullDom(this.dom)}}class c{constructor(e){this.$dom={main:e,iframe:null},this.data={src:o.data(e,"iframe-src"),service:o.data(e,"iframe-service")},this.all_classes=this.classname+"--status-loading "+this.classname+"--status-loaded",this.setStatus("deactivated")}setStatus(e){this.current_status!==e&&(this.current_status=e,o.removeClass(this.$dom.main,this.all_classes),"deactivated"!==this.current_status&&o.bem.add(this.$dom.main,"status-"+this.current_status))}getSrc(){return this.data.service,this.data.src}loadIframe(){if(null===this.$dom.iframe){this.setStatus("loading"),this.$dom.iframe=o.create("iframe"),o.one(this.$dom.iframe,"readystatechange",()=>{"interactive"===this.$dom.iframe.readyState&&this.setStatus("loaded")});["spotify"].includes(this.data.service)&&(o.attr(this.$dom.iframe,"allowtransparency","true"),o.attr(this.$dom.iframe,"allow","encrypted-media")),o.attr(this.$dom.iframe,"allowFullScreen","allowFullScreen"),o.attr(this.$dom.iframe,"src",this.getSrc()),o.append(this.$dom.main,this.$dom.iframe)}}removeIframe(){null!==this.$dom.iframe&&(o.off(this.$dom.iframe),o.remove(this.$dom.iframe),this.$dom.iframe=null,this.setStatus("deactivated"))}onVisible(e){!0===e&&this.loadIframe()}setHeight(e){this.$dom.iframe.style.height=parseInt(e,10)+"px"}destroy(){this.removeIframe(),this.$dom=o.nullDom(this.$dom),this.data=o.nullDom(this.data)}}var l=n(9);class u{constructor(e){this.$dom={main:e},this.data={width:null,name:o.data(e,"name")},this.setImageSrc(o.data(e,"src"))}isMyName(e){return this.data.name===e}getWidth(){return null===this.data.width&&(this.data.width=o.width(this.$dom.main)),this.data.width}setImageSrc(e){e&&(o.data(this.$dom.main,"src",e),o.attr(this.$dom.main,"src",this.formUrl(e)))}formUrl(e){return"data:"===e.substr(0,5)?e:`${e}-/scale_crop/${this.getWidth()*l.getRetinaMult()}/${l.isWebpSupported()?"-/format/webp/":""}`}destroy(){this.$dom=null,this.data=null}}class d{constructor(e){this.$dom={video:e,source:o.create("source")},this.data={width:null,name:o.data(e,"name")},this.initiateVideo(),this.setVideoSrc(o.data(e,"src"))}initiateVideo(){this.$dom.video.autoplay=!0,this.$dom.video.loop=!0,this.$dom.video.playsinline=!0,this.$dom.video.muted=!0,this.$dom.video.controls=!1,o.attr(this.$dom.video,"autoplay",""),o.attr(this.$dom.video,"loop",""),o.attr(this.$dom.video,"playsinline",""),o.attr(this.$dom.video,"muted",""),o.append(this.$dom.video,this.$dom.source)}isMyName(e){return this.data.name===e}getWidth(){return null===this.data.width&&(this.data.width=o.width(this.$dom.video)),this.data.width}setVideoSrc(e){e&&(o.data(this.$dom.video,"src",e),o.attr(this.$dom.source,"src",e),o.attr(this.$dom.source,"type","video/mp4"),this.$dom.video.load(),this.$dom.video.play())}setImageSrc(e){this.setVideoSrc(e)}formUrl(e){return""+e}destroy(){this.$dom=null,this.data=null}}var h=n(76),f=n(18),m=n(11),p=n(44),g=n(7);const b=new class{constructor(){this.visibleVideos=[],this.checkVisibleVideos(),o.on(window,"scroll.videoSyncer",this.checkVisibleVideos.bind(this))}destroy(){o.off("scroll.videoSyncer")}addVisibleVideo(e){this.visibleVideos.find(t=>t.isSame(e))||(this.visibleVideos.push(e),this.checkVisibleVideos())}removeVisibleVideo(e){this.visibleVideos=this.visibleVideos.filter(t=>!t.isSame(e)),this.checkVisibleVideos()}checkVisibleVideos(){if(!this.visibleVideos.length)return;const e=this.visibleVideos.reduce((e,t)=>e.getDistanceFromScreenLevel()<t.getDistanceFromScreenLevel()?e:t);this.visibleVideos.forEach(t=>{t.play(t.isSame(e))})}},v={Click:"click",Visible:"visible"},y={Deactivated:"deactivated",Loading:"loading",Playing:"playing",Paused:"paused"};class w{constructor(e,t){if(this.controlling_module=t,this.$dom={main:e,dummy:o.bem.find(e,"dummy"),container:o.bem.find(e,"container"),iframe:null,video:null},this.data={thumbnail:o.data(e,"video-thumbnail"),iframe:o.data(e,"video-iframe"),mp4:o.data(e,"video-mp4"),play_mode:g.i||g.b&&"IE"===g.a?v.Click:o.data(e,"video-play-mode"),autoplayIfMostVisible:"1"===o.data(e,"autoplay-if-most-visible"),has_audio:"1"===o.data(e,"video-has-audio"),service:o.data(e,"video-service"),service_id:o.data(e,"video-service-id"),uid:Object(m.a)(),video_id:o.data(e,"video-id"),timecode:parseInt(o.data(e,"video-timecode"))||0},!Object.values(v).includes(this.data.play_mode)){const e=v.Click;console.warn(`Invalid play mode "${this.data.play_mode}", switch to ${e}`),this.data.play_mode=e}this.classname=o.bem.getMainClass(e),this.all_classes=Object.values(y).map(this.formStatusClassName.bind(this)).join(" "),this.is_thumbnail_loaded=!1,this.is_play_mode_binded=!1,this.play_timer=null,this.youtube_instance=null,this.ignore_youtube_api=!1,this.setStatus(y.Deactivated)}formStatusClassName(e){return`${this.classname}--status-${e}`}isSame(e){return this.data.uid===e.data.uid}getDistanceFromScreenLevel(e=.5){const t=Object(f.e)()*e,{y:n,height:i}=o.rect(this.$dom.main),s=n+i*e;return Math.abs(t-s)}setStatus(e){if(!Object.values(y).includes(e))throw new Error(`Invalid status "${e}"`);this.current_status!==e&&(this.current_status=e,o.removeClass(this.$dom.main,this.all_classes),this.current_status!==y.Deactivated&&o.bem.add(this.$dom.main,"status-"+this.current_status))}getIframeSrcWithAutoplay(){let e,t=this.data.iframe;switch(this.data.service){case"youtube":case"vk":case"vimeo":e="autoplay=1";break;case"coub":e="autoplay=true";break;default:e=null}return null!==e&&(t.indexOf("?")>=0?t+="&"+e:t+="?"+e),t}isMyUid(e){return e===this.data.uid}isMyVideoId(e){return e===this.data.video_id}isPlaying(){return"youtube"!==this.data.service||(null===this.youtube_instance||(!this.youtube_instance.getPlayerState||1===this.youtube_instance.getPlayerState()))}insertIframe(){null===this.$dom.iframe&&(this.setStatus(y.Loading),"youtube"!==this.data.service||this.ignore_youtube_api?(this.$dom.iframe=o.create("iframe"),o.one(this.$dom.iframe,"load",this.setStatus.bind(this,y.Playing)),o.attr(this.$dom.iframe,"allowFullScreen","allowFullScreen"),o.attr(this.$dom.iframe,"allow","autoplay"),o.attr(this.$dom.iframe,"src",this.getIframeSrcWithAutoplay()),this.controlling_module.trigger("Gonna play video",{video_id:this.data.video_id,element:this.$dom.main}),o.append(this.$dom.container,this.$dom.iframe)):h.b(e=>{if(e){const t=`${this.data.video_id}_${this.data.uid}`,n=o.parseHTML(`<div id="${t}"></div>`);o.append(this.$dom.container,n),this.youtube_instance=new e.Player(t,{videoId:this.data.service_id,playerVars:{autoplay:1,start:this.data.timecode},events:{onReady:this.setStatus.bind(this,y.Playing)}}),this.$dom.iframe=this.youtube_instance.getIframe(),this.controlling_module.trigger("Gonna play video",{video_id:this.data.video_id,element:this.$dom.main})}else this.ignore_youtube_api=!0,this.insertIframe()}))}removeIframe(){null!==this.$dom.iframe&&(o.off(this.$dom.iframe),o.remove(this.$dom.iframe),this.$dom.iframe=null,this.setStatus(y.Deactivated),this.controlling_module.trigger("Gonna stop video",{video_id:this.data.video_id,element:this.$dom.main}))}insertVideo(){var e;null===this.$dom.video&&(this.setStatus(y.Loading),this.$dom.video=o.create("video"),e=o.create("source"),this.$dom.video.autoplay=!0,this.$dom.video.loop=!0,this.$dom.video.playsinline=!0,o.attr(this.$dom.video,"autoplay",""),o.attr(this.$dom.video,"loop",""),o.attr(this.$dom.video,"playsinline",""),this.isAutoplay()&&(this.$dom.video.muted=!0,o.attr(this.$dom.video,"muted","")),o.one(this.$dom.video,"play",this.setStatus.bind(this,y.Playing)),o.on(this.$dom.video,"click.forPause",this.play.bind(this,!1)),o.on(this.$dom.video,"click.forAutoplay",()=>{this.data.play_mode=v.Click}),this.checkHasAudio().then(e=>{this.$dom.video.controls=e,o.bem.add(this.$dom.main,e?"with-controls":"no-controls"),e&&o.off(this.$dom.video,"click.forPause")}),o.attr(e,"src",this.data.mp4),o.attr(e,"type","video/mp4"),o.append(this.$dom.video,e),o.append(this.$dom.container,this.$dom.video),this.playVideo(),e=null)}removeVideo(){null!==this.$dom.video&&(o.off(this.$dom.video),o.remove(this.$dom.video),this.$dom.video=null,this.setStatus(y.Deactivated))}playVideo(){null!==this.$dom.video&&(this.$dom.video.play(),this.setStatus(y.Playing))}pauseIfNonautoplayAndAnotherUid(e){this.isAutoplay()||this.isMyUid(e)||this.pauseStructure()}pauseVideo(){null!==this.$dom.video&&(o.off(this.$dom.video,"canplay"),clearTimeout(this.play_timer),this.$dom.video.pause(),this.setDummyImage(null),this.setStatus(y.Paused))}pauseIframe(){null!==this.$dom.iframe&&(this.removeIframe(),this.setStatus(y.Deactivated))}setDummyImage(e){null===e?o.css(this.$dom.dummy,{"background-image":"none","background-color":"transparent"}):o.css(this.$dom.dummy,"background-image","url("+e+")")}insertStructure(){this.data.iframe?this.insertIframe():this.data.mp4?this.insertVideo():i.warn("andropov","AndropovVideo has no iframe URL or mp4 URL",this.$dom.main)}removeStructure(){this.data.iframe?this.removeIframe():this.data.mp4&&this.removeVideo()}pauseStructure(){this.data.mp4?this.pauseVideo():this.data.iframe&&this.pauseIframe()}playStructure(){this.data.mp4&&this.playVideo()}play(e,t){if(t&&"function"==typeof t.preventDefault&&t.preventDefault(),e=!1!==e)switch(this.isAutoplay()||this.controlling_module.trigger("Play non-autoplay video",{uid:this.data.uid}),this.current_status){case y.Deactivated:this.insertStructure();break;case y.Paused:this.playStructure()}else switch(this.current_status){case y.Deactivated:case y.Paused:break;case y.Playing:case y.Loading:this.pauseStructure()}}loadThumbnail(){if(!1===this.is_thumbnail_loaded){this.is_thumbnail_loaded=!0;const e=l.formImageUrlWidthOnly(this.data.thumbnail,o.width(this.$dom.dummy),l.getResizeFilter(),"");p.a(e,e=>{o.css(this.$dom.dummy,"background-image","url("+e+")")})}}bindPlayMode(){!1===this.is_play_mode_binded&&(this.is_play_mode_binded=!0,o.on(this.$dom.dummy,"click",this.play.bind(this,!0))),this.isAutoplay()&&!this.data.autoplayIfMostVisible&&this.play(!0)}isAutoplay(){return this.data.play_mode===v.Visible}checkHasAudio(){return new Promise(e=>{null!==this.$dom.video?o.on(this.$dom.video,"loadeddata",()=>{const t=this.$dom.video.mozHasAudio||this.$dom.video.webkitAudioDecodedByteCount||this.$dom.video.audioTracks&&this.$dom.video.audioTracks.length;e(t)}):e(this.data.has_audio)})}onVisible(e){this.data.autoplayIfMostVisible&&(e?b.addVisibleVideo(this):b.removeVisibleVideo(this)),e?this.load():this.unload()}onHorizon(e){!0===e&&this.loadThumbnail()}load(){this.bindPlayMode()}unload(){this.isAutoplay()&&this.play(!1)}destroy(){b.removeVisibleVideo(this),this.removeStructure(!1),o.off(this.$dom.dummy),this.$dom=o.nullDom(this.$dom),this.data=o.nullDom(this.data),this.youtube_instance=null}}class _{constructor(e){this.$dom={main:e,inner:o.bem.find(e,"inner"),img:null},this.data={uid:"andropov_image_"+Object(m.a)(),is_responsive:null,element_width:null,element_height:null,is_zoom_enabled:null,original_width:null,original_height:null,max_width:null,max_height:null,rendered_width:null,rendered_height:null,title:null,author:null,name:null},this.image_zoom=Air.import("module.image_zoom")}getName(){return null===this.data.name&&(this.data.name=o.data(this.$dom.main,"image-name")||""),this.data.name}getTitle(){return null===this.data.title&&(this.data.title=o.data(this.$dom.main,"image-title")||""),this.data.title}getAuthor(){return null===this.data.author&&(this.data.author=o.data(this.$dom.main,"image-author")||""),this.data.author}isResponsive(){return null===this.data.is_responsive&&(this.data.is_responsive="DIV"===this.$dom.main.tagName),this.data.is_responsive}getOriginalWidth(){return null===this.data.original_width&&(this.data.original_width=parseInt(o.data(this.$dom.main,"image-width"))),this.data.original_width}getOriginalHeight(){return null===this.data.original_height&&(this.data.original_height=parseInt(o.data(this.$dom.main,"image-height"))),this.data.original_height}getOriginalProportion(){const e=this.getOriginalWidth()/this.getOriginalHeight();return isNaN(e)?null:e}getElementWidth(){return null===this.data.element_width&&(this.data.element_width=o.width(this.$dom.main)),this.data.element_width}getElementHeight(){return null===this.data.element_height&&(this.data.element_height=o.height(this.$dom.main)),this.data.element_height}getRenderedWidth(){if(null===this.data.rendered_width){const e=o.data(this.$dom.main,"image-max-width");this.data.rendered_width=void 0===e?this.getElementWidth():Math.min(this.getElementWidth(),e)}return this.data.rendered_width}getRenderedHeight(){if(null===this.data.rendered_height){const e=o.data(this.$dom.main,"image-max-height");this.data.rendered_height=void 0===e?this.getElementHeight():Math.min(this.getElementHeight(),e)}return this.data.rendered_height}getCalculatedHeight(){const e=this.getOriginalProportion();return null===e?this.getRenderedHeight():Math.ceil(this.getRenderedWidth()/e)}getOriginalSrc(){return o.data(this.$dom.main,"image-src")}getUsedSrc(){return this.isResponsive()?l.formImageUrlWidthOnly(this.getOriginalSrc(),this.getRenderedWidth(),l.getResizeFilter(),""):l.formImageUrl(this.getOriginalSrc(),this.getRenderedWidth(),this.getRenderedHeight())}onHorizon(e){!0===e&&this.load()}zoomIn(){this.image_zoom.zoomIn({items:[{src:this.getOriginalSrc(),preview_src:this.getUsedSrc(),width:this.getOriginalWidth(),height:this.getOriginalHeight(),element:this.$dom.main,title:this.getTitle(),author:this.getAuthor()}]})}enableZoom(){null===this.data.is_zoom_enabled&&(this.getOriginalWidth()&&this.getOriginalHeight()&&(this.data.is_zoom_enabled=!0,o.on(this.$dom.main,"click."+this.data.uid,this.zoomIn.bind(this))),this.data.is_zoom_enabled&&o.bem.add(this.$dom.main,"zoomable"))}load(){this.isResponsive()?this.appendImage():this.loadImage(),this.enableZoom()}appendImage(){null===this.$dom.img&&(this.$dom.img=o.create("img"),p.a(this.getUsedSrc(),this.setImageAndRemoveHolderPadding.bind(this)))}loadImage(){null===this.$dom.img&&(this.$dom.img=this.$dom.main,p.a(this.getUsedSrc(),e=>{null!==this.$dom&&(o.attr(this.$dom.img,"src",e),o.css(this.$dom.main,"background-color","transparent"))}))}setImageSrc(e){if(null!==this.$dom.img){const t=l.formImageUrl(e,this.getRenderedWidth(),this.getRenderedHeight());o.attr(this.$dom.img,"src",t)}}isMyName(e){return this.getName()===e}setImageAndRemoveHolderPadding(e){if(null!==this.$dom){let t=null,n=null;null!==this.$dom.inner&&(t=o.height(this.$dom.main),o.css(this.$dom.inner,"padding-bottom",0),o.css(this.$dom.inner,"background","transparent")),null!==this.$dom.inner&&null!==this.$dom.img&&o.append(this.$dom.inner,this.$dom.img),null!==this.$dom.img&&(o.attr(this.$dom.img,"src",e),n=o.height(this.$dom.main)),null!==t&&null!==n&&t!==n&&console.log(`IMG > ${this.getOriginalSrc()}: diff=${t-n}`)}}destroy(){null!==this.$dom.img&&o.off(this.$dom.img),null!==this.$dom.main&&o.off(this.$dom.main,"click."+this.data.uid),this.$dom=o.nullDom(this.$dom),this.data=o.nullDom(this.data)}}var k=function(e){return function(e,t,n){let o=null;switch(t){case"video":o=w;break;case"image":o=_;break;case"simple-image":o=u;break;case"iframe":o=c;break;case"tweet":o=a;break;case"simple-video":o=d;break;default:i.warn("andropov",`Unknown Andropov type "${t}"`,e)}return null===o?null:new o(e,n)}(e.element,o.data(e.element,"andropov-type"),e.controlling_module)};Air.define("module.andropov",(function(){let e;function t(t){e.callInstancesMethod("pauseIfNonautoplayAndAnotherUid",t.uid)}this.init=function(){i.define("andropov","Andropov (￢з￢)","#939393"),e=new s.a({module_name:"module.andropov",Constructor:k,controlling_module:this,scrollers:[{method:"onVisible",offset:0},{method:"onHorizon",offset:1.5*o.windowHeight()}]}),this.on("Play non-autoplay video",t)},this.refresh=function(){e.update()},this.destroy=function(){this.off(),e.destroy()},this.loadImmediately=function(){e.callInstancesMethod("load")},this.stopVideo=function(t){e.callIfMe("isMyVideoId",t,"play",!1)},this.isVideoPlaying=function(t){return e.callIfMe("isMyVideoId",t,"isPlaying")},this.setImageSrc=function(t,n){e.callIfMe("isMyName",t,"setImageSrc",n)},this.formImageUrl=l.formImageUrl}))},function(e,t,n){"use strict";var i=n(0),o=n(12),s=n(8);const r={default:{load:"Load",show:"Show",click:"Click"},ad:{load:"Show/Reach",show:"In-Viewport",click:"Click"}};class a{constructor({element:e}){this.element=e,this.init()}init(){this.type=i.data(this.element,"ad-analytics")?"ad":"default",this.name="ad"===this.type?i.data(this.element,"ad-analytics"):i.data(this.element,"analytics"),this.url=i.data(this.element,"analytics-url"),this.data=i.data(this.element,"analytics-data"),this.events=r[this.type],this.wasActivated=!1,this.clicksRestricted=this.element.querySelectorAll("[data-analytics-clickable]").length>0,i.on(this.element,"click.module_analytics_events",e=>{if(!this.clicksRestricted)return void this.send(this.events.click);i.belong(e.target,"[data-analytics-clickable]")&&this.send(this.events.click)}),this.send(this.events.load)}destroy(){i.off(this.element,"click.module_analytics_events")}activate(e){e&&!1===this.wasActivated&&(this.send(this.events.show),this.wasActivated=!0)}send(e){if(this.allowedEvents.map(e=>e.toLowerCase()).includes(e.toLowerCase()))if(this.url){if(this.data&&"string"==typeof this.data)try{this.data=JSON.parse(this.data)}catch(e){console.log("Analytics data parse error",e)}o.sendToCustomURL(this.name+" — "+e,this.url,this.data||{})}else o.sendDefaultEvent(this.name+" — "+e)}get allowedEvents(){const e=i.data(this.element,"analytics-events");return e?Object(s.listToArray)(e):Object.values(this.events)}}var c=n(4);Air.defineModule("module.analytics_events",(function(){const e=["[data-analytics]","[data-ad-analytics]"];let t=null;this.init=()=>{t=new c.a({selector:e.join(","),Constructor:a,scrollers:[{method:"activate"}]})},this.refresh=()=>{t.update()},this.destroy=()=>{t.destroy()}}))},function(e,t,n){"use strict";var i=n(7),o=n(23),s=n(0);var r=n(21),a=n(18);Air.define("module.appDocumentResize",(function(){this.init=function(){if(i.i){const e=500,t=new o.a(()=>{Object(a.d)(),Object(r.a)("document_resize",Object(a.a)())},e);requestAnimationFrame(()=>{Object(r.a)("document_resize",Object(a.a)()),function(e,t){let n=document.createElement("iframe");s.css(n,{position:"absolute",width:"100%",height:"100%",left:"-9999px",top:"-9999px","z-index":"-1"}),s.append(e,n),n.contentWindow.onresize=t,n=null}(document.body,()=>{t.debounce()})})}}}))},function(e,t,n){"use strict";var i=n(75);class o extends i.a{constructor(e){super(e),this.sendHitThroughAjax(this.ajaxHandler.bind(this))}}var s=n(4);Air.define("module.entryViews",(function(){let e;this.init=function(){e=new s.a({module_name:"module.entryViews",Constructor:o})},this.refresh=function(){e.update()},this.destroy=function(){e.destroy()}}))},function(e,t,n){"use strict";var i=n(7),o=n(4),s=n(6),r=n(0),a=n(9),c=n(71);class l{constructor(e){this.$dom={main:e.element},this.controlling_module=e.controlling_module,this.data={hash:r.data(e.element,"quiz-hash"),content_id:r.data(e.element,"content-id")},this.states=["initial","voted","revealed"],this.is_revealed=!1,this.rendered_users={},this.item_dropdowns={},this.requestResult(),this.ajaxify=Air.import("module.ajaxify")}destroy(){this.controlling_module.trigger("View destroyed",{hash:this.getHash(),content_id:this.getContentId()});for(const e in this.item_dropdowns)this.item_dropdowns[e].destroy();this.$dom=r.nullDom(this.$dom),this.controlling_module=null,this.data=null,this.states=null,this.rendered_users=null}getHash(){return this.data.hash}getContentId(){return this.data.content_id}isHashMine(e){return e===this.getHash()}requestResult(){this.controlling_module.trigger("View requests result",{hash:this.getHash(),content_id:this.getContentId()})}setResult(e){if(e){void 0!==e.userVoted&&(e.userVoted?this.setState("voted"):this.isRevealed()?this.setState("revealed"):this.setState("initial"));for(const t in e.items)this.setItemResult({item_hash:t,data:e.items[t],users:e.randomVotedUsers&&e.randomVotedUsers[t]||null})}else console.warn(`Quiz "${this.getHash()}" get invalid result`)}renderItemUser(e,t,n){return`<a href="${t.url}" target="_blank" class="${e}__item ${e}__item--${t.id}" title="${t.name}">\n                    <img class="t-outline" style="width:${n}px;height:${n}px;" src="${a.formImageUrl(t.avatar_url,n)}"/>\n                </a>`}setItemUsers(e,t,n,i){void 0===this.rendered_users[t]&&(this.rendered_users[t]=[]);for(const e in this.rendered_users)e!==t&&n.forEach(t=>{const n=this.rendered_users[e],i=n.indexOf(t.id);if(i>=0){n.splice(i,1);const o=r.bem.find(this.getItemElement(e),"voted__users__item--"+t.id);r.remove(o)}});const o=this.rendered_users[t],s=o.length;s<i&&(n=(n=n.filter(e=>o.indexOf(e.id)<0)).slice(0,i-s)).forEach(t=>{r.appendHTML(r.bem.find(e,"voted__users"),this.renderItemUser(r.bem.getMainClass(e)+"__voted__users",t,18)),o.push(t.id)})}getItemElement(e){return r.find(this.$dom.main,".quiz__item--"+e)}setItemResult({item_hash:e,data:t,users:n}){const i=this.getItemElement(e);i?(r.bem.toggle(i,"winner",t.isWinner),r.text(r.bem.find(i,"label__percent"),t.percentage+"%"),r.text(r.bem.find(i,"voted__count"),t.count),r.css(r.bem.find(i,"progressbar__runner"),"width",t.percentage+"%"),n&&this.setItemUsers(i,e,n,3)):console.warn(`Quiz "${this.getHash()}" don't have item "${e}"`)}setLoading(e=!0){r.bem.toggle(this.$dom.main,"loading",e)}stateToMod(e){return"state-"+e}setState(e){this.states.indexOf(e)>=0?r.bem.hasMod(this.$dom.main,this.stateToMod(e))||(this.states.forEach(e=>r.bem.remove(this.$dom.main,this.stateToMod(e))),r.bem.add(this.$dom.main,this.stateToMod(e))):console.warn(`Quiz "${this.getHash()}" setting invalid state "${e}"`)}isRevealed(){return this.is_revealed}reveal(e=!0){this.is_revealed=e,this.is_revealed?this.setState("revealed"):this.setState("initial")}showUsersList(e,t){void 0!==this.item_dropdowns[e]&&this.item_dropdowns[e].show(t)}setUsersList(e,t){if(void 0===this.item_dropdowns[e]){const n=this.getItemElement(e),i=new c.a({container:r.bem.find(n,"voted__list"),options:{bubble:{arrowAlignment:"top right"},list:{type:"image+text",items:t.map(e=>({id:e.id,img:e.avatar_url,text:e.name,data:{url:e.url}}))}}});i.on("select",e=>this.ajaxify.open(e.data.url)),i.show(!0),this.item_dropdowns[e]=i}}}const u=new s.a;Air.defineModule("module.quiz","module.quiz_model",(function(e){let t;function n(t){e.requestResult(t.hash),e.listen(t.content_id)}function s(e){t.callIfMe("isHashMine",e.hash,{setResult:[e.result],setLoading:[!1]})}function r(n){t.callIfMe("isHashMine",n.data.hash,"setLoading",!0),e.vote(n.data.content_id,n.data.hash,n.data.item_hash||null)}function a(e){t.callIfMe("isHashMine",e.data.hash,"reveal","1"===e.data.state)}function c(t){e.unlisten(t.content_id)}function d(n){if(i.d){const i="1"===n.data.state;i&&e.requestUsers(n.data.hash,n.data.item_hash),t.callIfMe("isHashMine",n.data.hash,"showUsersList",n.data.item_hash,i)}}function h(e){t.callIfMe("isHashMine",e.hash,"setUsersList",e.item_hash,e.result)}this.init=function(){this.on("View requests result",n),this.on("View destroyed",c),e.on("Result",s),e.on("Item users",h),u.on("quiz_vote",r),u.on("quiz_cancel",r),u.on("quiz_reveal",a),u.on("quiz_item_users",d),t=new o.a({module_name:"module.quiz",Constructor:l,controlling_module:this})},this.refresh=function(){t.update()},this.destroy=function(){this.off(),e.off(),u.off(),t.destroy()}}))},function(e,t,n){"use strict";var i=n(10);var o=n(21),s=n(33),r=n(3);Air.define("module.quiz_model","module.content_events",(function(e){let t;function n(){return i.a("x-device-token")}function a(e){r.b({url:"/quiz/bundleResult",data:{hashes:e.join(","),mode:"raw"},headers:{"x-webview-device-token":n()},success:t=>{e.forEach(e=>{this.trigger("Result",{hash:e,result:t[e]?t[e]:null})})},error:(t,n)=>{e.forEach(e=>{this.trigger("Result",{hash:e,result:null})}),401===n&&Object(o.a)("unauthorized_click","quiz")}})}function c(e){"quiz results updated"===e.type&&e.results&&(e.results.userVoted=void 0,this.trigger("Result",{hash:e.hash,result:e.results}))}function l(e,t,n=null){let i=`/quiz/${t}/entryId/${e}/vote`;return null!==n&&(i+="/"+n),i}this.init=function(){t=new s.a({delay:200,onFlush:a.bind(this)}),e.on("Event",c.bind(this))},this.destroy=function(){t.destroy(),e.off()},this.requestResult=function(e){t.add(e)},this.requestUsers=function(e,t){r.b({url:`/quiz/randomResults/${e}/${t}`,data:{mode:"raw"},success:n=>{var i;i=n,(Array.isArray(i)?0===i.length:0===Object.keys(i).length)||this.trigger("Item users",{hash:e,item_hash:t,result:n})},cache:!0})},this.vote=function(e,t,i){r.c({url:l(e,t,i),data:{mode:"raw"},headers:{"x-webview-device-token":n()},success:e=>{this.trigger("Result",{hash:t,result:e})},error:(e,n)=>{this.trigger("Result",{hash:t,result:null}),401===n&&Object(o.a)("unauthorized_click","quiz")}})},this.listen=function(t){e.listen(t)},this.unlisten=function(t){e.unlisten(t)}}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n(47),o=n(111),s=n(23),r=n(0),a=n(19);const c={defaultMain:"ui-tabs",navigation:"navigation",mod:{prev:"prev",next:"next",overflown:"overflown",start:"start",end:"end"}};function l(e){const{top:t,left:n,right:i,bottom:o,width:s,height:r,x:a,y:c}=e,l={top:t,left:n,right:i,bottom:o,width:s,height:r,x:a,y:c},u=Object.keys(l),d={};return u.forEach(e=>{d[e]=Math.round(l[e])}),d}class u{constructor({element:e}){this.mainContainer=e,this.scrollContainer=null,this.scrollContent=null,this.scrollItems=null,this.navigation=null,this.isScrolling=!1,this.scrolled=0,this.history=[],this.scrollAttemptsCount=0,this.hasPrev=!1,this.hasNext=!1,this.isOverflown=!1,this.scrollTimer=null,this.initTimer=new s.a(this.init.bind(this)),this.initTimer.debounce(300)}init(){this.scrollContainer=r.firstChild(this.mainContainer),this.scrollContent=r.firstChild(this.scrollContainer),this.scrollItems=r.children(this.scrollContent),this.isOverflown=this.checkIsOverflown(),this.isOverflown&&(this.performScroll(0),this.updateNavigationState(),this.enableScroll()),this.initTimer&&(this.initTimer.destroy(),this.initTimer=null)}checkIsOverflown(){return!!this.scrollContainer&&r.scrollWidth(this.scrollContainer)>r.offsetWidth(this.scrollContainer)}getOffset(e){switch(e){case"container":return parseInt(r.css(this.scrollContent,"padding-left"))||0;case"item":return parseInt(r.css(this.scrollItems[0],"margin-right"))||0;case"navigation":return this.getNavigationOffset();default:return 0}}getNavigationOffset(){if(!this.navigation)return 0;const e=a.e.is("mobile")?1:.75,t=this.getOffset("container")?0:this.getOffset("item");return(r.offsetWidth(this.navigation.next)||r.offsetWidth(this.navigation.prev))*e+t}enableScroll(){this.navigation||(this.makeNavigation(),r.bem.add(this.mainContainer,c.mod.overflown),this.scrollToActiveItem(),this.scrollTimer=new s.a(this.onScrollDebounce.bind(this)),r.on(this.scrollContainer,"scroll",this.onScroll.bind(this)))}disableScroll(){this.navigation&&(this.performScroll(0),this.scrollTimer&&(this.scrollTimer.destroy(),this.scrollTimer=null),r.off(this.scrollContainer),r.off(this.mainContainer),r.remove(this.navigation.prev),r.remove(this.navigation.next),r.bem.remove(this.mainContainer,c.mod.overflown),this.navigation=null,this.isScrolling=!1,this.scrolled=0,this.history=[],this.scrollAttemptsCount=0,this.hasPrev=!1,this.hasNext=!1)}makeNavigation(){const e=r.bem.getMainClass(this.mainContainer),t=r.bem.getMainClass(this.mainContainer)+"-"+c.navigation,n=[t];e===c.defaultMain&&n.push("ui-button","ui-button--11"),this.navigation={},this.navigation.prev=r.make("div",n,{innerHTML:r.svgHtml("ui_arrow_right",9,14)}),this.navigation.next=r.clone(this.navigation.prev,!0);Object.keys(this.navigation).forEach(e=>{const t=this.navigation[e];r.data(t,"direction",e),r.bem.add(t,c.mod[e]),r.append(this.mainContainer,t)}),r.delegateEvent(this.mainContainer,"."+t,"click",this.onNavigationPressed.bind(this))}onNavigationPressed({target:e}){const t=r.data(e,"direction");this.onBeforeScroll(t)}getContainerBounds(){const e=r.rect(this.scrollContainer),t=this.getOffset("container"),n=this.getOffset("container")+this.getOffset("navigation");return{left:Math.ceil(e.left+(this.hasPrev?n:t)),right:Math.ceil(e.right-(this.hasNext?n:t)),width(){return this.right-this.left}}}getContentBounds(){const e=r.rect(this.scrollContent),t=this.getOffset("container");return{left:Math.round(e.left+t),right:Math.round(e.right-t),width(){return this.right-this.left}}}setScrollingState(e=!0){r.bem.toggle(this.mainContainer,"scrolling",e),this.isScrolling=e}updateNavigationState(e,t){const n=this.getContainerBounds(),i=this.getContentBounds(),o=n.left-i.left,s=i.right-n.right;"next"===e?(this.hasNext=s>n.width(),this.hasPrev=!0):"prev"===e?(this.hasNext=!0,this.hasPrev=!!(t&&t.index>0)):(this.hasNext=s>this.getOffset("navigation"),this.hasPrev=o>this.getOffset("navigation")),r.bem.toggle(this.mainContainer,"has-next",this.hasNext),r.bem.toggle(this.mainContainer,"has-prev",this.hasPrev)}onBeforeScroll(e="next",t=300){if(this.isScrolling)return;let n=this.findScrollTarget("next",e);n||(this.updateNavigationState(e),n="prev"===e?this.formatScrollTarget(this.scrollItems[0]):this.formatScrollTarget(this.scrollItems[this.scrollItems.length-1])),this.setScrollingState(!0),"next"===e&&this.history.push(this.findScrollTarget("current")),this.updateNavigationState(e,n);const i=this.getContainerBounds(),o=this.getContentBounds();let s=Math.round(Math.abs(n.bounds().left-i.left));const r={left:i.left-o.left,right:o.right-i.right};return"next"===e&&r.right<i.width()&&(s=r.right),"prev"===e&&r.left<i.width()&&(s=r.left),this.scrolled+=s*("prev"===e?-1:1),new Promise(e=>{this.performScroll(-1*this.scrolled,t).then(()=>{this.setScrollingState(!1),e()})})}onScroll(){this.scrollTimer&&!this.isScrolling&&this.scrollTimer.debounce()}onScrollDebounce(){this.updateNavigationState(),this.scrolled=this.scrollContainer.scrollLeft}findScrollTarget(e="next",t="next"){if("next"===e&&"prev"===t){return this.history.pop()}const n=this.getContainerBounds();for(let t=0,i=this.scrollItems.length;t<i;t+=1){const i=this.scrollItems[t],o=l(r.rect(i));if("current"===e?o.left>=n.left:o.right>n.right)return this.formatScrollTarget(i)}return null}formatScrollTarget(e){return{index:this.scrollItems.indexOf(e),item:e,bounds:()=>l(r.rect(e))}}performScroll(e,t=0){return e=Math.abs(e),new Promise(n=>{const s=Date.now(),r=this.scrollContainer.scrollLeft;this.scrollAnimation&&this.scrollAnimation.stop(),t>0?(this.scrollAnimation=new i.a(()=>{let t=e;const i=Object(o.easeOutQuint)((Date.now()-s)/300);i<1?t=Math.round(r+(e-r)*i):(this.scrollAnimation.stop(),n()),this.scrollContainer.scrollLeft=t}),this.scrollAnimation.start()):(this.scrollContainer.scrollLeft=Math.abs(e),n())})}scrollToActiveItem(e=null){if(!(e=e||this.scrollItems.find(e=>r.bem.hasMod(e,"active"))))return;const t=this.getContainerBounds();let n=l(r.rect(e)),i=n.right>t.right;i&&this.onBeforeScroll("next",0).then(()=>{n=l(r.rect(e)),i=n.right>t.right,i&&this.scrollAttemptsCount<3?(this.scrollToActiveItem(e),this.scrollAttemptsCount+=1):this.scrollAttemptsCount=0})}refresh(){this.isOverflown=this.checkIsOverflown(),this.isOverflown?(this.updateNavigationState(),this.enableScroll()):this.disableScroll()}destroy(){this.disableScroll(),this.scrollAnimation&&this.scrollAnimation.stop(),this.scrollTimer&&(this.scrollTimer.destroy(),this.scrollTimer=null),r.off(this.scrollContainer),r.off(this.mainContainer)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(64),o=n(24),s=n(0),r=n(5),a=n(1);class c extends o.b{constructor({element:e,controlling_module:t}){super(),this.container=e,this.buttons={},this.subsiteModel=t,this.subsiteId=s.data(this.container,"subsite-id"),this.store=new i.a({props:{isSubscribed:this.getState("isSubscribed"),isEnabledNotifications:this.getState("isEnabledNotifications")},handlers:{viewChange:(e,t)=>{this.setState(e,t)},viewRequestModelChange:(e,t)=>{switch(e){case"isSubscribed":this.subsiteModel.subscribe(this.subsiteId,t);break;case"isEnabledNotifications":this.subsiteModel.enableNotifications(this.subsiteId,t)}}},name:"subsite_subscribe #"+this.subsiteId}),this.subsiteModel.on("Subscription updated "+this.subsiteId,e=>{this.store.commit({isSubscribed:e.state}),e.state||this.store.commit({isEnabledNotifications:e.state}),this.trigger("Subscription updated",e.state)}),this.subsiteModel.on("Subsite notifications updated "+this.subsiteId,e=>{this.store.commit({isEnabledNotifications:e.state}),this.trigger("Subsite notifications updated",e.state)}),this.subsiteModel.on("Update failed "+this.subsiteId,()=>{this.store.revert()}),s.delegateEvent(this.container,"[data-button]","click",this.onButtonClick.bind(this))}onButtonClick(e,t){const n=s.data(t,"button");"subscribe"===n&&this.onSubscribeClick(e,t),"notifications"===n&&this.onNotificationsClick()}onSubscribeClick(e,t){const n=!this.getState("isSubscribed");this.store.set({isSubscribed:n}),s.bem.add(this.container,"just-clicked"),s.on(t,"mouseleave",()=>{s.bem.remove(this.container,"just-clicked"),s.off(t,"mouseleave")})}onNotificationsClick(){const e=!this.getState("isEnabledNotifications");this.store.set({isEnabledNotifications:e}),r.success(e?Object(a.c)("We will notify you of new entries"):Object(a.c)("You have unsubscribed from notifications of new entries"))}getState(e){switch(e){case"isSubscribed":return s.bem.hasMod(this.container,"state-active");case"isEnabledNotifications":return s.bem.hasMod(this.container,"notifications-enabled")}return s.bem.hasMod(this.container,"state-active")}setState(e,t){switch(e){case"isSubscribed":s.bem.toggle(this.container,"state-active",t),s.bem.toggle(this.container,"state-inactive",!t);break;case"isEnabledNotifications":s.bem.toggle(this.container,"notifications-enabled",t),s.bem.toggle(this.container,"notifications-disabled",!t)}}destroy(){this.splash&&this.splash.destroy(),this.subsiteModel.off(),s.off(this.container)}}},function(e,t,n){"use strict";t.a=function(e,t){const n=document.createElement("input");Object.assign(n.style,{position:"fixed",top:"0",left:"0",opacity:"0"}),n.value=e,document.body.appendChild(n),n.select();let i=!1;try{document.execCommand("copy"),i=!0}catch(e){}document.body.removeChild(n),t(i)}},function(e,t,n){"use strict";function i(e){return e/255}function o(e){const t=function(e){"#"===e.charAt(0)&&(e=e.substr(1));const t=parseInt(e,16);return[t>>16&255,t>>8&255,255&t]}(e).map(i);return.299*t[0]+.587*t[1]+.114*t[2]}function s(e){return o(e)>.5?"#000000":"#ffffff"}n.d(t,"a",(function(){return s}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));class i{constructor(e){this.element=e.element,this.parent=this.element.parentElement,this.currentPositionValue=null,this.lastScrollPosition=null,this.isReady=!1,this.isRunning=!1,this.resizeObserver=null,this.scrollHandler=null,this.resizeHandler=null,this.breakpoints={...e.breakpoints},this.offset={top:0,bottom:0,...e.offset},this.heights={viewport:null,element:null,parent:null},this.init()}static get Position(){return{Sticky:"sticky",Relative:"relative",Fixed:"fixed",Absolute:"absolute",Static:"static"}}static get Direction(){return{Up:"up",Down:"down"}}static get viewportHeight(){return document.documentElement.clientHeight||document.body.clientHeight}static get hiddenBrowserBarsHeight(){return window.innerHeight-i.viewportHeight}static get scrollPosition(){return window.pageYOffset||document.documentElement.scrollTop}static elementRectTop(e){return Math.round(e.getBoundingClientRect().top)}static elementRectBottom(e){return Math.round(e.getBoundingClientRect().bottom)}static topTransformValue(e){return`translate3d(0, ${e}px, 0)`}static setElementStyles(e,t={}){Object.keys(t).forEach(n=>{const i=t[n],o="number"==typeof i&&0!==i?"px":"";e.style[n]=i+o})}static isElementHidden(e){return null===e.offsetParent}static debounce(e,t){let n;return(...i)=>{const o=e.bind(this,...i);clearTimeout(n),n=setTimeout(o,t)}}get isElementFitInViewport(){return this.heights.element+this.offset.top+this.offset.bottom<=this.heights.viewport}init(){if(!this.isReady){if(this.isReady=!0,this.setBaseStyles(),this.setStaticStyles(i.elementRectTop(this.element)),this.checkBreakpointsAndRefresh(),window.ResizeObserver&&(this.resizeObserver=new ResizeObserver(()=>{this.refresh()}),this.resizeObserver.observe(this.element),this.resizeObserver.observe(this.parent)),!this.resizeHandler){const e=100;this.resizeHandler=i.debounce(this.checkBreakpointsAndRefresh.bind(this),e),window.addEventListener("resize",this.resizeHandler)}this.run()}}destroy(e=!1){this.isReady&&(this.isReady=!1,e||(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null),window.removeEventListener("scroll",this.scrollHandler),this.scrollHandler=null,this.resizeObserver&&(this.resizeObserver.unobserve(this.element),this.resizeObserver.unobserve(this.parent),this.resizeObserver=null),this.clearStyles(),this.heights={},this.lastScrollPosition=null,this.isRunning=!1)}refresh(){if(this.isReady){if(this.cacheHeights(),this.isElementFitInViewport)return window.removeEventListener("scroll",this.scrollHandler),this.scrollHandler=null,void this.setStickyTopStyles();this.scrollHandler||(this.scrollHandler=this.run.bind(this),window.addEventListener("scroll",this.scrollHandler,{passive:!0,capture:!1})),this.currentPositionValue===i.Position.Static&&this.setStaticStyles(i.elementRectTop(this.element))}}checkBreakpointsAndRefresh(){if(i.isElementHidden(this.element))this.destroy(!0);else{this.init();for(let e=0,t=Object.keys(this.breakpoints).length;e<t;e+=1){const t=Object.keys(this.breakpoints)[e],n=this.breakpoints[t];if(window.matchMedia(t).matches&&!n){this.destroy(!0);break}this.init()}this.refresh()}}cacheHeights(){this.heights.viewport=i.viewportHeight,this.heights.element=this.element.offsetHeight,this.heights.parent=this.parent.offsetHeight}run(){this.isRunning||(this.isRunning=!0,window.requestAnimationFrame(()=>{this.updateStyles(),this.isRunning=!1}))}updateStyles(){const e=i.scrollPosition,t=this.lastScrollPosition;if(e===t)return;this.lastScrollPosition=e;const n=this.heights.viewport+i.hiddenBrowserBarsHeight,o=e>t?i.Direction.Down:i.Direction.Up,s=i.elementRectTop(this.element);if(o===i.Direction.Down){n-i.elementRectBottom(this.element)>=this.offset.bottom?this.setStickyBottomStyles():this.currentPositionValue!==i.Position.Static&&this.setStaticStyles(s)}else s>=this.offset.top?this.setStickyTopStyles():this.currentPositionValue!==i.Position.Static&&this.setStaticStyles(s)}setBaseStyles(){this.currentPositionValue=null,i.setElementStyles(this.parent,{position:i.Position.Relative,display:"flex","flex-direction":"column"}),i.setElementStyles(this.element,{transform:i.topTransformValue(0),"will-change":"position, transform"})}setStickyTopStyles(){this.currentPositionValue=i.Position.Sticky,i.setElementStyles(this.parent,{"justify-content":"flex-start"}),i.setElementStyles(this.element,{position:i.Position.Sticky,transform:i.topTransformValue(0),top:this.offset.top,bottom:"auto"})}setStickyBottomStyles(){this.currentPositionValue=i.Position.Sticky,i.setElementStyles(this.parent,{"justify-content":"flex-end"}),i.setElementStyles(this.element,{position:i.Position.Sticky,transform:i.topTransformValue(0),bottom:this.offset.bottom,top:"auto"})}setStaticStyles(e=0){this.currentPositionValue=i.Position.Static;let t=e-i.elementRectTop(this.parent);t+this.heights.element>this.heights.parent&&(t=this.heights.parent-this.heights.element),i.setElementStyles(this.parent,{"justify-content":"flex-start"}),i.setElementStyles(this.element,{position:i.Position.Static,transform:i.topTransformValue(t)})}clearStyles(){this.currentPositionValue=null,i.setElementStyles(this.parent,{position:"",display:"","flex-direction":"","justify-content":""}),i.setElementStyles(this.element,{position:"",transform:"","will-change":"",top:"",bottom:""})}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(35),o=n(0),s=n(5),r=n(1);const a="ui-limited-input",c="ui-limited-input--warn",l="ui-limited-input--big",u="ui-limited-input--showed";class d{constructor({input:e}){let t;if(this.input=e,this.changeDebounce=null,"true"!==e.dataset.processed)t=o.make("div",[a]),o.after(e,t),o.append(t,e);else if(t=o.parents(e,"."+a),!t)return;"TEXTAREA"!==e.tagName&&"true"!==e.getAttribute("contentEditable")||t.classList.add(l),this.wrapper=t,this.maxLength=parseInt(e.getAttribute("maxlength"),10),this.disableCharsLeft=!!e.dataset.disableCharsLeft,this.charsLeft=this.maxLength-this.length,e.dataset.processed=!0,o.on(e,"input.LimitedInput",e=>{this.change(e)}),o.on(e,"keydown.LimitedInput",e=>{this.keydown(e)}),o.on(e,"paste.LimitedInput",e=>{setTimeout(()=>{this.paste(e)},100)})}set charsLeft(e){!this.disableCharsLeft&&this.wrapper&&(e>20?this.wrapper.classList.remove(u):this.wrapper.classList.add(u),e<10?this.wrapper.classList.add(c):this.wrapper.classList.remove(c),this.wrapper.setAttribute("data-length",e))}get length(){return this.value?this.value.trim().length:0}get value(){let e=this.input.value||this.input.textContent||"";return e=e.replace(/\s+/g," "),e.trim()}set value(e){this.input.value?this.input.value=e:this.input.innerHTML=e}paste(e){const t=e.clipboardData.getData("text/plain");this.maxLength-this.length-t.length<1&&(s.error(Object(r.c)("Too long text")),e.preventDefault())}keydown(e){var t=i.d(e);!(e.ctrlKey||e.metaKey)&&t&&this.maxLength<=this.length&&e.preventDefault()}change(){this.charsLeft=this.maxLength-this.length,this.changeDebounce&&window.clearTimeout(this.changeDebounce),this.changeDebounce=window.setTimeout(()=>{this.check()},200)}check(){this.maxLength-this.length<0&&(this.value=this.value.substr(0,this.maxLength),this.placeCaretAtEnd()),this.charsLeft=this.maxLength-this.length}placeCaretAtEnd(){const e=this.input;e.focus();var t=document.createRange(),n=window.getSelection();t.selectNodeContents(e),t.collapse(!1),n.removeAllRanges(),n.addRange(t)}unwrap(){if(!this.wrapper)return;const e=this.wrapper,t=e.parentNode;if(t){for(;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e),this.wrapper=null}}destroy(){this.changeDebounce&&window.clearTimeout(this.changeDebounce),this.changeDebounce=null,this.unwrap(),o.off(this.input,".LimitedInput"),this.maxLength=0,this.input&&(this.input.dataset.processed=null),this.input=null,this.wrapper=null}}},function(e,t,n){"use strict";t.a=function(e,t="&nbsp;"){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,t)}},function(e,t,n){"use strict";t.a={Direct:"Direct URL",Header:"Header Create Button"}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return d}));var i=n(0),o=n(2),s=n(118),r=n(25);function a(){return new Promise((e,t)=>{Air.import("module.page").isBanner()?Promise.all([s.b(),s.a()]).then(([n,i])=>{n||!i?e(n):t(new Error("Ads blocker is detected"))}):t(new Error("Ads disabled in page options"))})}function c(){return new Promise((e,t)=>{const n="UA"===i.attr(document.body,"data-country-code")?"https://d1177nxzmxwomq.cloudfront.net/pcode/adfox/loader_rel.js":"https://yastatic.net/pcode/adfox/loader.js";Object(r.a)(n,(function(i){i&&void 0!==window.Ya?e():t(new Error("Error occured while loading adfox script from",n))}))})}function l(){const e="https://cdn-plus.roxot-panel.com/roxot-wrapper/js/roxot-manager.js?pid=4fd6e495-3dd3-49f7-9ea4-c2723f15c54c";Object(r.a)(e,(function(t){t||o.log("propaganda","Error occured while loading Roxot script from "+e)}),!0)}function u(){let e=i.find("#adfox-branding"),t=i.find("#adfox-branding-shifter"),n=i.find('.propaganda[data-id="4"]'),o=i.find('.propaganda[data-id="1"]');i.attr(e,"style",null),i.removeClass(e,"adfoxClickable"),i.html(e,""),i.attr(t,"style",null),i.html(n,""),i.html(o,""),e=t=n=o=null}function d(){let e=i.find(".inline_video_banner"),t=i.find('.propaganda[data-id="14"]');i.remove(e),i.remove(t),e=t=null}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(0),o=n(18);function s(e){var t=i.rect(e);return t.top<Object(o.e)()&&t.bottom>0}},,,,,,,,,function(e,t,n){},function(e,t,n){Air.defineModule("module.hawk","",(function(){let e=null,t=!1;this.init=async()=>{const t=this.elements&&this.elements.length?this.elements[0].settings:null;if(!t)return;const{default:i}=await n.e(62).then(n.t.bind(null,422,7));e=new i(t)},this.catch=function(t,n){e&&e.send(t,n)},this.connectVue=function(n){e&&(t||(e.connectVue(n),t=!0))},this.test=function(){e.test()}}))},function(e,t,n){Air.define("module.cabinetPromocodes",(function(){let e=null;this.init=()=>{Promise.all([n.e(0),n.e(1),n.e(2),n.e(88)]).then(n.bind(null,431)).then(({default:t})=>{e=new t(this.elements[0].element)}).catch(e=>{console.error("An error occurred while loading the component:",e)})},this.refresh=()=>{this.destroy(),this.init()},this.destroy=()=>{e&&e.destroy()}}))},function(e,t,n){Air.define("module.cabinetWithdrawal",(function(){let e=null;this.init=()=>{Promise.all([n.e(0),n.e(2),n.e(92)]).then(n.bind(null,432)).then(({default:t})=>{e=new t(this.elements[0].element)}).catch(e=>{console.error("An error occurred while loading the component:",e)})},this.refresh=()=>{this.destroy(),this.init()},this.destroy=()=>{e&&e.destroy()}}))},function(e,t,n){Air.defineModule("module.messenger","module.auth_data",(function(e){let t=null,i=!1;const o=e=>{this.trigger("Channel change",e)};this.init=()=>{if(!this.elements||!this.elements.length)return;i=!0;const s=this.elements[0].element;Promise.all([new Promise(t=>{e.on("Change",e=>{t(e)})}),Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(68)]).then(n.bind(null,429)).then(e=>e.Messenger).catch(e=>{console.error("An error occurred while loading the component:",e)}),Promise.all([n.e(2),n.e(3),n.e(10),n.e(69)]).then(n.bind(null,428)).then(e=>e.default).catch(e=>{console.error("An error occurred while loading the component:",e)})]).then(([e,n,i])=>{t=new n({user:e,container:s,appComponent:i,socketName:"m:"+e.m_hash,onChannelOpen:o}),setTimeout(()=>{this.trigger("Messenger opened",!0)},400)})},this.refresh=()=>{this.destroy(),this.init()},this.destroy=()=>{i&&(i=!1,this.trigger("Channel change",null),this.trigger("Messenger opened",!1),e.off(),t&&(t.destroy(),t=null))}}))},function(e,t,n){Air.define("module.alfaCapital",(function(){let e=null;this.init=async()=>{const{element:t,settings:i}=this.elements[0],{default:o}=await n.e(19).then(n.bind(null,423));e=new o({element:t,settings:i})},this.refresh=()=>{e&&e.refresh()},this.destroy=()=>{e&&e.destroy()}}))},function(e,t,n){Air.defineModule("module.citymobilMarks",(function(){const e=this;let t=null;e.init=async()=>{const{element:i}=e.elements[0],{default:o}=await n.e(26).then(n.bind(null,424));t=new o({element:i})},e.refresh=()=>{e.destroy(),e.init()},e.destroy=()=>{t&&t.destroy()}}))},function(e,t,n){Air.define("module.liveStreamSettings",(function(){let e;const t="/private/liveStream";function i(){window.location.reload()}this.init=async()=>{const{default:o}=await n.e(35).then(n.bind(null,421)),{element:s}=this.elements[0];e=new o({element:s,actions:{save:{url:t+"/settings",success:i},disable:{url:t+"/disable",success:i},enable:{url:t+"/enable",success:i}}})},this.refresh=()=>{this.destroy(),this.init()},this.destroy=()=>{e.destroy()}}))},function(e,t){Air.define("module.pixels","module.page",(function(e){var t=function(){var t="//ads.adfox.ru/228129/tracePoint?p7=mzog&amp;p8=h&amp;dl="+encodeURIComponent(document.location)+"&amp;pr="+(Math.floor(4294967295*Math.random())+1);"mainpage"===e.getNavigationName()&&((new Image).src=t)};this.init=function(){t()},this.refresh=function(){t()}}))},function(e,t,n){"use strict";(function(e){var t=n(150),i=n(2);Air.define("module.propaganda","module.page, module.targeting, module.ajaxify",(function(){const o=this;let s,r=null;function a(){return new Promise(e=>{o.config.length&&Object(t.a)().then(t=>{o.isAcceptable=t,r?e():n.e(21).then(n.bind(null,433)).then(({default:t})=>{r=new t({controllingModule:o}),e()}).catch(e=>{i.error("propaganda","Error occured while loading component:",e)})}).catch(e=>{i.warn("propaganda",e.message),r&&r.destroy()})})}o.isAcceptable=!1,this.config=[],this.init=()=>{i.define("propaganda","Propaganda (⊃｡•́‿•̀｡)⊃","#ffcb05"),e.env.DEBUG?i.warn("propaganda","module.propaganda disabled in local environment"):(o.config=o.elements?o.elements[0].settings:[],s=a().then(()=>{r.init()}))},this.addBanner=function({prependTo:e,id:t}){s&&s.then(()=>{r.addBanner({prependTo:e,id:t})})},this.refresh=()=>{a().then(()=>{r.refresh()})},this.destroy=()=>{}}))}).call(this,n(50))},function(e,t,n){Air.defineModule("module.psbHell",(function(){let e=null;this.init=async()=>{const{settings:t}=this.elements[0],{default:i}=await n.e(53).then(n.bind(null,425));e=new i({settings:t})},this.refresh=()=>{e.refresh()},this.destroy=()=>{e.destroy()}}))},function(e,t,n){Air.defineModule("module.specialValorant",(function(){const e=this;let t=null;e.init=async()=>{const{element:i}=e.elements[0],{default:o}=await n.e(47).then(n.bind(null,426));t=new o({element:i})},e.refresh=()=>{e.destroy(),e.init()},e.destroy=()=>{t&&t.destroy()}}))},function(e,t,n){Air.define("module.specialsPanel",(function(){let e;this.init=async()=>{if(!this.elements||!this.elements.length)return;const{default:t}=await Promise.all([n.e(0),n.e(1),n.e(2),n.e(89)]).then(n.bind(null,430));e=new t({element:this.elements[0].element})},this.refresh=()=>{e&&e.refresh()},this.destroy=()=>{e&&e.destroy()}}))},function(e,t,n){Air.defineModule("module.charts",(function(){this.init=function(){Promise.all([n.e(11),n.e(17)]).then(n.bind(null,427)).then(({Chart:e})=>e).catch(e=>{console.error("An error occurred while loading the component:",e)}).then(e=>{this.elements.forEach(({element:t,settings:n})=>{this.chart=new e({container:t,dataUrl:n.dataUrl,dataUrlMonthly:n.dataUrlMonthly,chartSettings:n.chart})})}).catch(e=>{console.error("Chart initialization failed: ",e)})},this.refresh=function(){},this.destroy=function(){}}))},function(e,t){Air.define("fn.refreshContentModules","module.blogsWidget, module.entry, module.gallery, module.evaluate_script, module.quiz, module.andropov, module.iframe_lazy_load, module.audio_controller, module.code, module.dailyPromoUnits, module.floatingScreen, module.subsite_subscribe, module.sharesUniversal, module.boosterPromo",(function(e,t,n,i,o,s,r,a,c,l,u,d,h,f){return function(){t.refresh(),n.refresh(),i.refresh(),o.refresh(),s.refresh(),a.refresh(),r.refresh(),c.refresh(),l.refresh(),u.refresh(),e.refresh(),d.refresh(),h.refresh(),f.refresh()}}))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var i={};n.r(i),n.d(i,"show",(function(){return S})),n.d(i,"addController",(function(){return x}));var o={};n.r(o),n.d(o,"isSupported",(function(){return ve})),n.d(o,"subscribe",(function(){return Me})),n.d(o,"unsubscribe",(function(){return $e})),n.d(o,"prepare",(function(){return Re}));var s={};n.r(s),n.d(s,"setCookie",(function(){return Ne})),n.d(s,"removeCookie",(function(){return He})),n.d(s,"getCookie",(function(){return Fe})),n.d(s,"isPreviouslyUnsubscribed",(function(){return Ve})),n.d(s,"isSupported",(function(){return qe})),n.d(s,"getPermission",(function(){return ze})),n.d(s,"getDeviceToken",(function(){return We})),n.d(s,"isDeviceTokenAvailable",(function(){return Ye})),n.d(s,"permissionIs",(function(){return Xe})),n.d(s,"getState",(function(){return Je})),n.d(s,"requestPermission",(function(){return Ke})),n.d(s,"subscribeWithCallback",(function(){return Ge})),n.d(s,"wrapIntoPromise",(function(){return Qe})),n.d(s,"subscribe",(function(){return Ze})),n.d(s,"formAjaxUrl",(function(){return et})),n.d(s,"resubscribe",(function(){return tt})),n.d(s,"unsubscribeWithCallback",(function(){return nt})),n.d(s,"unsubscribe",(function(){return it})),n.d(s,"prepare",(function(){return ot}));n(160),n(112);var r=n(6),a=n(0),c=n(3);Air.define("module.boosterConstructor","module.popup",(function(e){const t=new r.a;let i=null,o=!1;const s=()=>{i&&i.destroy()},l=({data:{id:t,copyTo:r,contentId:l}})=>{o||(e.hide(),e.show({html:`<div class="booster-constructor-container">${a.outerHtml(a.preloader())}</div>`,onReady:s=>{(async({container:e,id:t,copyTo:s,contentId:r})=>{if(o=!0,!i){const{default:e}=await Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(22)]).then(n.bind(null,1548));i=new e}let a="/booster";t&&(a="/booster/"+t);const l={};return s?l.copyTo=s:r&&(l.contentId=r),new Promise((t,n)=>{c.b({url:a,data:l,success:n=>{i.init({container:e,data:n,copyTo:s,contentId:r}),t()},error:n})})})({container:s,id:t,copyTo:r,contentId:l}).then(()=>{o=!1}).catch(()=>{o=!1,e.hide()})},onClose:()=>{s()}}))};this.init=()=>{t.on("showBoosterConstructor",l);const e=new URLSearchParams(location.search);e.has("booster")&&l({data:{id:parseInt(e.get("booster"))}})},this.destroy=()=>{t.off(),s()}}));var l=n(4);Air.define("module.boosterPromo","",(function(){let e=null;this.init=async()=>{const{default:t}=await Promise.all([n.e(0),n.e(1),n.e(2),n.e(11),n.e(23)]).then(n.bind(null,1581));e=new l.a({moduleName:"module.boosterPromo",Constructor:t})},this.refresh=()=>{console.log("module.boosterPromo, refresh"),e.update()},this.destroy=()=>{console.log("module.boosterPromo, destroy"),e.destroy()}}));var u=n(26),d=n(77),h=n(8),f=n(23),m=n(9),p=n(5),g=n(15);class b{constructor({storageKey:e,initialState:t}){if(!e)throw new Error("Can not create a Persistent State Object: option storageKey is required");this._storageKey=e,this._initialState=t,this.state=null,this.initState()}initState(){const e=g.b(this._storageKey,!0);this.state=e||this._initialState}mutateState(e,t,n){switch(t){case"++":this.state[e]++;break;case"--":this.state[e]--;break;case"push":this.state[e].push(n);break;case"set":this.state[e]=n}g.d(this._storageKey,this.state,!0)}clear(){g.c(this._storageKey),this.state=null,console.log("state cleared:",this.state)}}var v=n(1),y=n(34);const w=new r.a;const _=new class{constructor(){this.controllers={},this.new_controller=null}add(e,t){this.controllers[e]=t}run(e,t){void 0!==this.controllers[e]?this.new_controller=new this.controllers[e](t,Object(y.a)(t)):this.new_controller={},this.new_controller.status=!1,this.new_controller.init&&this.new_controller.init()}getData(){return this.new_controller.getData&&this.new_controller.getData()}setStatus(e){this.new_controller.status=e}getStatus(e){return this.new_controller.status}stop(){this.new_controller.destroy&&this.new_controller.destroy(),this.new_controller=null}};let k=null;function C(){return null===k&&(k=Air.import("module.popup")),k}function S(e){!function(e){const t=e.data||{};C().show({template:"modal_window_"+e.name,data:{...t,i18n:{stateTheReason:Object(v.c)("State the reason"),cancel:Object(v.c)("Cancel"),unpublish:Object(v.c)("Unpublish"),rejectVacancy:Object(v.c)("Reject vacancy"),giftAccount:Object(v.c)("Gift an account"),forOneMonth:Object(v.c)("For a month"),forThreeMonth:Object(v.c)("For three months"),forOneYear:Object(v.c)("For a year"),give:Object(v.b)("Подарить","Give"),changeUserRights:Object(v.c)("Change user rights"),save:Object(v.c)("Save"),yourAPIToken:Object(v.c)("Your API token"),active:Object(v.b)("Активен","Active"),token:Object(v.c)("Token"),validUntil:Object(v.c)("Valid until"),APIDocumentation:Object(v.c)("API documentation."),doNotShare:Object(v.c)("Do not share your token with anyone. Use only if you know exactly what you are doing."),ok:Object(v.c)("OK"),complain:Object(v.c)("Complain"),send:Object(v.c)("Send"),logInViaQRCode:Object(v.c)("Log in via QR code"),scanQRCode:Object(v.c)("To log in, scan this QR code with the mobile app."),bewareOfThePeople:Object(v.c)("Beware of the people behind your back, they may be the first to get there. Each code can only be used once."),remove:Object(v.c)("Remove"),thisIsCorrect:Object(v.c)("You are going to delete the post for some reason, are you sure that this is correct?")}},style:!1,onReady:function(t){_.run(e.name,t)},onClose:function(){e.onClose&&e.onClose(_.getStatus(),_.getData()),_.stop()}})}(e)}function x(e,t){return _.add(e,t)}_.add("vacancy_reject",(function(e,t){this.init=function(){setTimeout((function(){t.reason_text.focus(!0)}),100)},this.getData=function(){return{reason_text:t.reason_text.val()}}})),_.add("event_reject",(function(e,t){this.init=function(){setTimeout((function(){t.reason_text.focus(!0)}),100)},this.getData=function(){return{reason_text:t.reason_text.val()}}})),_.add("daily_promo_reject",(function(e,t){this.init=function(){setTimeout((function(){t.reason_text.focus(!0)}),100)},this.getData=function(){return{reason_text:t.reason_text.val()}}})),_.add("unpublish",(function(e,t){this.init=function(){setTimeout((function(){t.reason_text.focus(!0)}),100)},this.getData=function(){return{reason_text:t.reason_text.val()}}})),_.add("ban",(function(e,t){this.init=function(){setTimeout((function(){t.reason_text.focus(!0)}),100),t.remove_user&&t.remove_user.on("change",(function(){this.checked&&(this.checked=window.confirm(Object(v.c)("Danger! You are going to completely remove all activity of this user.")))}))},this.getData=function(){var e=parseInt(t.days.val()),n={};return e>1095&&(e=1095),n={reason_text:t.reason_text.val(),days:e},t.remove_user&&(n.remove_all_data=t.remove_user.get()[0].checked),t.whole_platfrom&&(n.whole_platfrom=t.whole_platfrom.get()[0].checked),n},this.destroy=function(){t.remove_user&&t.remove_user.off("change")}})),w.on("modal_window_cancel:click",(function(){_.setStatus(!1),C().hide()})),w.on("modal_window_close:click",(function(){_.setStatus(!1),C().hide()})),w.on("modal_window_apply:click",(function(){_.setStatus(!0),C().hide()})),w.on("modal_window_apply:key",(function(e){e.is_enter&&(e.is_meta||e.is_ctrl)&&(_.setStatus(!0),C().hide())})),Air.defineModule("module.dailyPromoForm","module.popup, module.inputs, module.pay,\n   module.ajaxify, module.auth_data",(function(e,t,o,s,r){const l=this;let g=null,v=null;function y(e){c.c({url:`/booster/${g.boosterType}/log`,data:{data:e},ignore_error_notify:!0,success:()=>{console.log("Log sent")},error:()=>{console.log("Log was not sent")}})}l.init=function(){if(l.elements&&l.elements.length)try{g=JSON.parse(l.elements[0].element.querySelector("textarea").textContent),v=null,Promise.all([n.e(0),n.e(1),n.e(8),n.e(9),n.e(15)]).then(n.bind(null,1550)).then(e=>{e&&"object"==typeof e&&e.BoosterDailyForm||y({imported:e});const n=e.BoosterDailyForm;v=new n({air:{$:a,string:h,extend:d.a,andropov:m,notify:p,inputs:t,modal_window:i,pay_module:o,ajaxify:s,PersistentStateObject:b,Timer:f.a,Socket:u.a,authData:r},container:l.elements[0].element,promoData:g.form,userHash:g.userHash,siteTitle:g.siteTitle,boosterType:g.boosterType,boosterData:g.boosterData,modes:g.modes})}).catch(e=>{console.error("An error occurred while loading the component:",e),y({message:e.message,error:e,stack:e.stack})})}catch(e){console.log("Error while parsing module settings",e)}},l.refresh=function(){l.destroy(),l.init()},l.destroy=function(){v&&v.destroy()}})),Air.define("module.dailyPromoPreview","module.payment_receipt, module.pay",(function(e,t){let n=null,i=null;function o(e,{list:n,sum:o}){const s={texts:{success_button:"На главную",success_text:"Объявление отправлено на модерацию.",footer:'Оплата размещения промо дня означает согласие <br class="lm-hidden"> со всеми <a class="t-link-classic" href="/booster/daily/rules" target="_blank" data-no-ajax>правилами</a> и <a class="t-link-classic" href="/booster/daily/agreement" target="_blank" data-no-ajax>условиями</a>.'},order:{card_url:`/booster/${i.boosterType}/order/create/cloudpayments`,invoice_url:`/booster/${i.boosterType}/order/create/invoice`,data:{id:i.id}},redirect_url:"/",redirect_after_success:!0,cashier:{id:i.cashier,public_key:i.cp_public},sum:o,user_email:i.user_email};t.show(e,s)}this.init=function(){i=this.elements[0].settings,console.log("paymentData",i),n=e.create({container:a.find(".payment_receipt_place"),options:{items:i.paymentItems,additionalItems:[],events:{onPay:o},disableBillButton:!i.is_payable_by_bill}})},this.refresh=function(){this.destroy(),this.init()},this.destroy=function(){n.destroy()}}));var A=n(7);class O{constructor({element:e}){this.$dom={main:e},this.booster_type=a.data(e,"booster-type"),this.was_visible=!1,this.modifyLinks(),"app"===this.getData("mode")&&this.checkAppButtons(),setTimeout(()=>{this.sendAnalytics("Load")},100),a.delegateEvent(this.$dom.main,"a","click",()=>this.sendAnalytics("Click"))}getData(e){return a.data(this.$dom.main,e)}checkAppButtons(){const e=a.bem.find(this.$dom.main,"button--google-play"),t=a.bem.find(this.$dom.main,"button--app-store");e&&t&&(A.e&&a.remove(e),A.b&&a.remove(t))}onVisible(e){e&&!this.was_visible&&(this.was_visible=!0,this.sendAnalytics("Show"))}modifyLink(e){return`${e}&os=${A.j.toLowerCase()}&isDesktop=${A.d}`}modifyLinks(){a.findAll(this.$dom.main,".daily-promo-unit__inner a").forEach(e=>{a.href(e,this.modifyLink(a.href(e)))})}sendAnalytics(e){c.c({url:`/booster/${this.booster_type}/hits`,data:{event:"Booster Daily – "+e,object_id:this.getData("id"),target:this.getData("type"),isDesktop:A.d,os:A.j.toLowerCase()},ignore_error_notify:!0})}destroy(){a.off(this.$dom.main)}}Air.define("module.dailyPromoUnits",(function(){let e=null;this.init=()=>{e=new l.a({selector:".daily-promo-unit",Constructor:O,scrollers:[{method:"onVisible"}]})},this.refresh=()=>{e.update()},this.destroy=()=>{e.destroy()}}));var T=n(12);const j=new r.a;Air.define("module.buyClubAccount","module.ajaxify, module.popup, module.auth_data, module.pay, module.plumbus, module.checkboxes, module.radioButtons",(function(e,t,i,o,s,r,l){const u=this;let d,h,f,g="";const b=window.__apptitle,w={texts:{success_button:Object(v.c)("Close"),success_text:Object(v.c)("It's all good, we've sent you a payment confirmation email"),footer:`<p>${Object(v.c)("By paying for a club account, you agree to all")}\n        <a class="t-link-classic" href="/terms" target="_blank" data-no-ajax>\n          ${Object(v.b)("To agree to","rules")}\n        </a>\n        ${Object(v.c)("and")}\n        <a class="t-link-classic" href="/agreement" target="_blank" data-no-ajax>\n          ${Object(v.b)("To agree to","conditions")}\n        </a>.\n      </p>`+a.svgHtml("ui_pci",48,30)},order:{card_url:"/payments/accounts/orders/create"},reload_after_success:!0,show_back_button:!0},_=function(e){d=Object(y.a)(e);let t=function(e,t=!0){t&&d.parent.removeClass("payments_popup--state_auth payments_popup--state_pay payments_popup--state_email"),d.parent.addClass("payments_popup--state_"+e)};i.on("Change",(function(e){e?(t("pay"),async function(e){if(d.user_avatar.attr("src",m.formImageUrl(e.avatar_url,24)),d.user_name.html(e.name),!e.is_known_email){t("email",!1);const{default:e}=await n.e(34).then(n.bind(null,1534));h=new e({form:d.email_form.get()[0]})}}(e)):t("auth")})),d.tariff.on("change",()=>{a.bem.toggle(d.agreement.get(0)[0],"hidden","18"!==d.tariff.val())}),r.processVisibleIn(e)},k=function(e){const t=Object(y.a)(e);g="",t.radio.on("change",e=>{g=e.target.value;const n=e.target.checked&&"other"===g;t.text.toggleClass("shown",n),n&&(setTimeout(()=>{t.text.focus()},100),g=t.text.val())}),t.text.on("change",()=>{g=t.text.val()}),l.processVisibleIn(e)},C=function(e){c.b({url:"/payments/accounts/orders/prepare",success:function(t){e&&e(t)},error:function(t){e&&e(!1,t)}})},S=function(e){"18"!==d.tariff.val()||d.agreementCheckbox.val()?d&&(w.cashier={id:f.cashier,public_key:f.cp_public},w.sum=x(d.tariff.val()).price,h?h.checkValidation((function(e,t){e?(h.showMessage(!1),w.order.data={stuff_id:d.tariff.val(),email:d.email.val()},o.show("card",w)):h.showMessage(t,"error")})):(w.order.data={stuff_id:d.tariff.val(),email:f.user_email},o.show("card",w))):p.error(Object(v.c)("You need to agree to the rules first"))};u.showBuyClubAccount=function(e,n={}){u.trigger("Form shown",{}),C((function(o){o?(f=o,n=Object.assign({},n,{stuff:f.stuff,site_name:b,recurring:!0,i18n:{paidAccount:Object(v.c)("Paid account"),subscriptionPeriod:Object(v.c)("Subscription period"),monthlySubscription:Object(v.c)("Monthly subscription"),oneMonth:Object(v.a)("month","months",1),threeMonth:Object(v.a)("month","months",3),oneYear:Object(v.a)("year","years",1),iAgreeToSubscribeTo:Object(v.c)("I agree to subscribe to"),service:Object(v.c)("the service"),emailForReceipt:Object(v.c)("Email for receipt"),forTheUser:Object(v.c)("For the user"),pay:Object(v.c)("Pay"),youAgree:Object(v.c)("By paying for your club account, you agree"),withAll:Object(v.c)("with all"),rules:Object(v.b)("To agree to","rules"),and:Object(v.c)("and"),conditions:Object(v.b)("To agree to","conditions"),youNeed:Object(v.c)("To proceed to payment you need"),logInToTheSite:Object(v.c)("log in to the site"),VKontakte:Object(v.c)("VK")}}),t.show({template:"buy_club_account",data:n,onReady:_.bind(u),onClose:function(){i.off("Change"),e&&e(!1),h&&(h.destroy(),h=null),d=null}})):e&&e(!1)}))},u.showRecurringOptions=function(e,n={}){C((function(i){if(i){f=i;let e=a.find("#recurring-popup-data");if(e)try{e=JSON.parse(a.html(e))}catch(e){}n=Object.assign({},n,{stuff:f.stuff,...e}),t.show({template:"recurring_options",data:{...n,i18n:{monthlySubscription:Object(v.c)("Monthly subscription"),subscriptionDetails:Object(v.c)("Subscription details"),unsubscribe:Object(v.b)("Отменить подписку","Unsubscribe")}},onClose:function(){}})}else e&&e(!1)}))};let x=function(e){const t={};if(e=parseInt(e)){switch(t.id=e,t.brand=b,t.category="subscription",e){case 18:t.name=Object(v.c)("Monthly subscription"),t.price="75",t.variant="recurring";break;case 2:t.name=Object(v.c)("3 months subscription"),t.price="229",t.variant="3 month";break;case 3:t.name=Object(v.c)("1 year subscription"),t.price="749",t.variant="1 year";break;case 1:t.name=Object(v.c)("1 month subscription"),t.price="99",t.variant="1 month"}return t}};function A(e){s.dinglebop()?s.showBuyPopup().then(()=>{O((function(t){e(t),"error"===t&&s.hide()}))}).catch(()=>{e("error")}):O(e)}function O(e){u.showBuyClubAccount((function(t){e(t?"repeat":"error")}))}function E(){t.replace({template:"recurring_cancel",data:{i18n:{subscriptionCancellation:Object(v.c)("Subscription cancellation"),whatHappened:Object(v.c)("Let us know what happened"),tiredOf:Object(v.c)("Tired of it"),outOfMoney:Object(v.c)("Out of money"),flyingOnVacation:Object(v.c)("I'm flying on vacation"),other:Object(v.c)("Other"),unsubscribe:Object(v.b)("Отменить подписку","Unsubscribe"),doNotCancel:Object(v.c)("Do not cancel"),describeTheReasonHere:Object(v.c)("Describe the reason here"),remain:Object(v.c)("If you cancel your subscription, you remain the owner of the paid account until the end of the paid period.")}},onReady:k.bind(u),onClose:function(){}})}function P(){c.c({url:"/payments/cancel_recurrent",data:{reason_text:g},success:function(n){p.success(Object(v.c)("You have unsubscribed")),t.hide(),e.reload()},error:function(e){p.error(e)}})}function I(){}u.init=function(){c.a(402,A),e.addResponseCodeHandler(402,A),j.on("buy_club_account:click",(function({el:e}){const t="true"===a.data(e,"disable-preloader");t||a.toggleClass(e,"ui--bg_loading",!0),u.showBuyClubAccount((function(){t||a.toggleClass(e,"ui--bg_loading",!1)}))})),j.on("recurring_options:click",(function(e){u.showRecurringOptions()})),j.on("proccess_buy:click",S),j.on("show_recurring_cancel_reason_popup:click",E),j.on("cancel_recurring:click",P),j.on("change_card:click",I),u.on("Form shown",(function(){T.pushToDataLayer({event:"productClick",ecommerce:{click:{actionField:{list:"Article"},products:[{name:Object(v.c)("1 month subscription"),id:"1",price:"99",brand:b,category:"subscription",variant:"1 month",position:1}]}}})})),u.on("Form submited",(function(e){(e=x(e.stuff_id))&&T.pushToDataLayer({event:"addToCart",ecommerce:{currencyCode:"RUB",add:{products:[{name:e.name,id:e.id,price:e.price,brand:e.brand,category:e.category,variant:e.variant,quantity:1}]}}})})),u.on("Payment success",(function(e){const t=x(e.stuff_id);t&&T.pushToDataLayer({event:"purchase",ecommerce:{purchase:{actionField:{id:e.order_number,affiliation:"Online Store",revenue:t.price,tax:"0",shipping:"0"},products:[{name:t.name,id:t.id,price:t.price,brand:t.brand,category:t.category,variant:t.variant,quantity:1}]}}})})),u.delegated_data.action&&("true"===u.delegated_data.action.payment.status&&u.triggerOnce("Payment success",u.delegated_data.action.payment),"false"===u.delegated_data.action.payment.status&&u.triggerOnce("Payment failed"))},u.refresh=function(){},u.destroy=function(){j.off(),u.off()}}));Air.defineModule("module.invoice_generator",(function(){let e;this.init=async function(){const{default:t}=await n.e(35).then(n.bind(null,421));e=new t({element:a.find(".form2"),actions:{save:{getData:function(e){document.location.href="/tools/bills/store?"+function(e){const t=[];let n;for(n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}(e)},success:function(e){p.success(Object(v.c)("Bill has been formed"))}}},events:{change:function(e,t){},autocompleteSearch:function(e,t,n){"organization"===e&&(t.length>0?function(e,t){const n=new XMLHttpRequest;n.open("POST","https://suggestions.dadata.ru/suggestions/api/4_1/rs/suggest/party"),n.setRequestHeader("Authorization","Token 21225cbf754e1af28d07913fdbde859057a20088"),n.setRequestHeader("Content-Type","application/json"),n.setRequestHeader("Accept","application/json"),n.onload=function(){200===n.status?t&&t(JSON.parse(n.responseText||"{}")):t&&t(!1)},n.send(JSON.stringify({query:e}))}(t,(function(e){var t=[];e.suggestions.forEach((function(e){t.push({text:"<p>"+e.value+"</p><span>ИНН: "+e.data.inn+" Адрес: "+e.data.address.value+"</span>",value:{name:e.value,address:e.data.address.value,inn:e.data.inn,kpp:e.data.kpp}})})),n(t)})):n(!1))},autocompleteSelected:function(t,n){"organization"===t&&(e.value("organization",n.value.name),e.value("inn",n.value.inn),e.value("address",n.value.address),n.value.kpp?(e.value("kpp",n.value.kpp),e.show("kpp",!0)):(e.value("kpp",""),e.show("kpp",!1)))}}})}}));var E=n(109),P=n(145),I=n(25);const M=new r.a;Air.defineModule("module.pay","module.popup, module.ajaxify",(function(e,t){var i,o,s,r,l,u,f=this,m=async function(s){const{default:c}=await n.e(35).then(n.bind(null,421));let l;o=Object(y.a)(s),r=new c({element:a.find(s,".form2"),actions:{save:{url:i.order.invoice_url,getData:function(e){return l=e.email,{data:i.order.data}},success:function(e){i.reload_after_success&&t.reload(),k({email:l}),i.events.success&&i.events.success()}}},events:{change:function(e,t){},autocompleteSearch:function(e,t,n){"organization"===e&&(t.length>0?S(t,(function(e){var t=[];e.suggestions.forEach((function(e){t.push({text:"<p>"+e.value+"</p><span>ИНН: "+e.data.inn+" Адрес: "+e.data.address.value+"</span>",value:{name:e.value,address:e.data.address.value,inn:e.data.inn,kpp:e.data.kpp}})})),n(t)})):n(!1))},autocompleteSelected:function(e,t){"organization"===e&&(r.value("organization",t.value.name),r.value("inn",t.value.inn),r.value("address",t.value.address),t.value.kpp?(r.value("kpp",t.value.kpp),r.show("kpp",!0)):(r.value("kpp",""),r.show("kpp",!1)))}}}),o.go_back&&o.go_back.on("click",(function(){e.historyBack()}))},b=function(e){r.destroy(),o.go_back&&o.go_back.off(),i.events.close&&i.events.close(),o=null},w=async function(t){var o;const{default:r}=await n.e(2).then(n.bind(null,468));s=Object(y.a)(t),(l=[]).push(new r(s.card_number.get()[0],{blocks:[4,4,4,4,3],delimiter:" ",numericOnly:!0,onValueChanged:A})),l.push(new r(s.exp_month.get()[0],{numericOnly:!0})),l.push(new r(s.exp_year.get()[0],{numericOnly:!0})),l.push(new r(s.cvv.get()[0],{numericOnly:!0})),Object(I.a)("https://widget.cloudpayments.ru/bundles/checkout",(function(){o=new window.cp.Checkout(i.cashier.public_key,t),s.pay_by_card.on("click",(function(){var e,t=o.createCryptogramPacket(),n="";if(t.success)j.showPreloader(),x({cryptogram:t.packet},(function(e,t){e?e.AcsUrl?j.show3DS(e,(function(t,n){t?(C({status:!0}),i.events.success&&i.events.success()):n?(C({status:!1,title:Object(v.c)("Payment error"),text:n,email:e.site_email}),i.events.error&&i.events.error(n)):(C({status:!1,email:e.site_email}),i.events.error&&i.events.error(null))})):(j.close(),C({status:!0}),i.events.success&&i.events.success()):(j.close(),C({status:!1,title:Object(v.c)("Payment error"),text:t,email:e.site_email}),i.events.error&&i.events.error(t))}));else{for(e in t.messages)n+=t.messages[e]+"<br>";p.error(n)}}))})),s.go_back&&s.go_back.on("click",(function(){e.historyBack()})),M.on("test_card",(function(e){s.card_number.val(e.data.a),s.exp_month.val(e.data.b),s.exp_year.val(e.data.c),s.cvv.val(e.data.d)}))},_=function(e){s.go_back&&s.go_back.off(),s.pay_by_card.off(),l.forEach((function(e){e.destroy()})),i.events.close&&i.events.close(),s=l=u=null},k=function(n){n=Object(d.a)({},{success_button:i.texts.success_button,redirect_url:i.redirect_url,redirect_after_success:i.redirect_after_success,i18n:{invoiceGenerated:Object(v.c)("Invoice generated"),willSend:Object(v.c)("We will send it to"),afterModeration:Object(v.c)("after moderation")}},n),e.replace({template:"pay_invoice_result",data:n,onReady:function(){i.reload_after_success&&t.reload(),i.redirect_after_success&&t.goTo(i.redirect_url)}})},C=function(n){!0===(n=Object(d.a)({},{success_button:i.texts.success_button,success_text:i.texts.success_text,redirect_url:i.redirect_url,redirect_after_success:i.redirect_after_success},n)).status&&i.redirect_after_success&&t.goTo(i.redirect_url),e.replace({template:"pay_card_result",data:n,history:!n.status,onReady:function(){n.status&&i.reload_after_success&&t.reload(),n.status&&i.redirect_after_success&&t.goTo(i.redirect_url)}})},S=function(e,t){var n=new XMLHttpRequest;n.open("POST","https://suggestions.dadata.ru/suggestions/api/4_1/rs/suggest/party"),n.setRequestHeader("Authorization","Token 21225cbf754e1af28d07913fdbde859057a20088"),n.setRequestHeader("Content-Type","application/json"),n.setRequestHeader("Accept","application/json"),n.onload=function(){200===n.status?t&&t(JSON.parse(n.responseText||"{}")):t&&t(!1)},n.send(JSON.stringify({query:e}))},x=function(e,t){c.c({url:i.order.card_url,data:{data:i.order.data,cryptogram:e.cryptogram,mode:"raw"},ignore_error_notify:!0,success:function(e){t&&t(e)},error:function(e){t&&t(!1,e)}})},A=function(e){var t,n=parseInt(e.target.rawValue.substring(0,1)),i=parseInt(e.target.rawValue.substring(0,2));t=[51,52,53,54,55].indexOf(i)>-1?1:[50,56,57,58].indexOf(i)>-1?2:[4].indexOf(n)>-1?3:[2].indexOf(n)>-1?4:0,s.payment_system.attr("data-payment-system",t),O(e.target.rawValue)},O=function(e){(e=e.toString().substr(0,6)).length>=6?e!==u&&(u=e,c.c({url:"/payments/bank/info",data:{card_prefix:e,mode:"raw"},success:function(e){e.is_unknown||T(e.color,e.name)},error:function(){u=null,T("","")}})):(u=null,T("",""))},T=function(e,t){s.card_layout_bg.css("background-color",e),s.card_layout_text.css("color",P.a(e)),s.card_layout_text.text(t)},j=new function(){var e;this.showPreloader=function(){(e=Object(E.a)("")).document.body.innerHTML='<div class="spinner"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div><style>body{display:flex;height:100%;align-items:center;width:100%;margin:0;padding:0;justify-content:center;}.spinner{width:78px;text-align:center}.spinner>div{margin:0 4px;width:18px;height:18px;background-color:#696969;border-radius:100%;display:inline-block;-webkit-animation:sk-bouncedelay 1.4s infinite ease-in-out both;animation:sk-bouncedelay 1.4s infinite ease-in-out both}.spinner .bounce1{-webkit-animation-delay:-0.32s;animation-delay:-0.32s}.spinner .bounce2{-webkit-animation-delay:-0.16s;animation-delay:-0.16s}@-webkit-keyframes sk-bouncedelay{0%,80%,100%{-webkit-transform:scale(0)}40%{-webkit-transform:scale(1.0)}}@keyframes sk-bouncedelay{0%,80%,100%{-webkit-transform:scale(0);transform:scale(0)}40%{-webkit-transform:scale(1.0);transform:scale(1.0)}}</style>'},this.show3DS=function(t,n){var i=`<form name="downloadForm" action="${t.AcsUrl}" method="POST"><input type="hidden" name="PaReq" value="${t.PaReq}"><input type="hidden" name="MD" value="${t.TransactionId}"><input type="hidden" name="TermUrl" value="${t.term_url}"></form>`;e.document.body.innerHTML=i,e.focus(),setTimeout((function(){e.downloadForm.submit()}),100),a.off(window,"storage.module_pay"),g.c("3ds_error"),g.c("3ds_success"),a.on(window,"storage.module_pay",(function(){g.b("3ds_success")?n(!0):g.b("3ds_error")&&(n(!1,g.b("3ds_error")),a.off(window,"storage.module_pay")),n=null}))},this.close=function(){e.close()}};f.show=function(t,n){const o={texts:{success_button:Object(v.c)("Close"),success_text:Object(v.c)("Successful payment text"),footer:Object(v.c)("Footer text")},order:{data:{}},events:{},reload_after_success:!1,show_back_button:!1};switch(i=Object(d.a)({},o,n),t){case"card":switch(i.cashier.id){case 1:c.c({url:i.order.card_url,data:{data:i.order.data,mode:"raw"},success:function(e){s&&s(e)},error:function(e){s&&s(!1,e)}});break;case 5:e.replace({template:"pay_card",data:{total:h.numberFormat(i.sum)+" ₽",back_button:i.show_back_button,footer:i.texts.footer,debug:window.__debug,i18n:{paymentByCard:Object(v.c)("Payment by card"),amountToPay:Object(v.c)("Amount to be paid"),cardNumber:Object(v.c)("Card number"),back:Object(v.c)("Back"),pay:Object(v.c)("Pay")}},history:!0,onReady:w.bind(f),onClose:_.bind(f)})}break;case"invoice":e.replace({template:"pay_invoice",data:{email:i.user_email,back_button:i.show_back_button,footer:i.texts.footer,i18n:{invoiceForPayment:Object(v.c)("Invoice for payment"),companyName:Object(v.c)("Company name"),forExampleYandex:Object(v.c)("For example, Yandex LLC"),inn:Object(v.c)("INN"),kpp:Object(v.c)("KPP"),legalAddress:Object(v.c)("Legal address"),mailToReceiveInvoice:Object(v.c)("Mail to receive invoice"),back:Object(v.c)("Back"),issueAnInvoice:Object(v.c)("Issue an invoice")}},history:!0,onReady:m.bind(f),onClose:b.bind(f)})}var s},f.hide=function(){e.hide()},f.destroy=function(){M.off(),a.off(window,"storage.module_pay")}}));var $=n(11);Air.define("module.payment_receipt",(function(e){let t,i=!1,o=[];class s extends e.Event{constructor(e){super(),e&&e.items&&e.items.forEach(e=>{void 0===e.id&&(e.id=Object($.a)())}),this.options=e}ready(){this.instance=new t.PaymentReceipt({container:this.options.container,options:this.options.options})}removeItem(e){this.instance.removeItem(e)}checkItem(e){this.instance.checkItem(e)}uncheckItem(e){this.instance.uncheckItem(e)}updateItem(e,t){this.instance.updateItem(e,t)}destroy(){this.instance&&this.instance.$destroy()}}function r(e){i=!0,t=e,o.forEach((function(e){e.ready()})),o=[]}this.create=function(e){const t=new s(e);return!1===i?o.push(t):t.ready(),t},this.init=function(){Promise.all([n.e(0),n.e(1),n.e(71)]).then(n.bind(null,1583)).then(r)},this.refresh=function(){},this.destroy=function(){}}));class L{constructor({count:e,element:t,size:n}){this.count=e,this.element=t,this.size=n,this.userCount=0,this.getData(e=>{this.onUserCountUpdate&&this.onUserCountUpdate(e.length),this.renderGrid(e),this.loadAvatars()})}renderGrid(e){let t="";e.forEach(e=>{t+=`<a class="avatar-grid__item"\n                      href="${e.url}"\n                      title="${e.name}"\n                      data-uuid="${e.avatar}"\n                  ></a>`}),a.html(this.element,t),t=null}async loadAvatars(){let e=a.findAll(this.element,".avatar-grid__item");e=e.sort(()=>.5-Math.random());for(let t=0,n=e.length;t<n;t++)await this.loadImage(e[t])}loadImage(e){return new Promise((t,n)=>{const i=a.data(e,"uuid"),o=m.formImageUrl(i,this.size,this.size);let s=a.create("img");s.src=o,s.onload=function(){a.addClass(s,"fadein"),t(),s=null},s.onerror=function(){t(),s=null},a.append(e,s)})}getData(e){c.b({url:"/plus/sponsors/"+this.count,success:function(t){e(t)}})}}Air.define("module.plusPage",(function(){const e=this;let t=null;e.init=function(){t=new L({count:A.g?714:2178,element:a.find(".avatar-grid"),size:(A.g,32)}),t.onUserCountUpdate=e=>{let t=a.find("#js-paid-users-count");t&&a.html(t,`${e} ${Object(v.a)("person","people",e)}`),t=null}},e.refresh=()=>{e.destroy(),e.init()},e.destroy=function(){t=null}})),Air.defineModule("module.accountingAdmin","",(function(){let e=null;this.init=async()=>{const{default:t}=await Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(18)]).then(n.bind(null,1559));e=new l.a({moduleName:"module.accountingAdmin",Constructor:t})},this.refresh=()=>{e.update()},this.destroy=()=>{e.destroy()}}));var R=n(13),D=n(10);class B{constructor(e){if(this.size=e||null,e&&e<=0)throw new Error(`Invalid stack size "${e}"`);this.storage=[]}push(e){this.storage.push(e),this.size&&(this.storage=this.storage.slice(-1*this.size))}toJSON(){return this.storage}destroy(){this.storage=null}}Air.defineModule("module.actionsAnalytics","module.ajaxify",(function(e){const t={segues:new B(2)};function n(){t.segues.push(i()),o()}function i(){return R.c()}function o(){D.c("an-data",JSON.stringify(t),5)}this.init=function(){e&&e.on("Build finished",n),t.segues.push(i()),o()},this.refresh=function(){},this.destroy=function(){t.destroy(),e.off()}}));n(113),n(137),n(161);const U=new r.a;Air.define("module.auth","module.auth_data, module.authForm, module.ajaxify, module.plumbus",(function(e,t,n,i){const o=this;this.showAuth=({screen:n,formData:i,callback:o}={})=>{t.show({screen:n,formData:i}).then(n=>{e.update(()=>{t.hide(),"function"==typeof o&&o(e.isAuthorized())},n)}).catch(e=>{console.error(e)})},this.signinBySocial=(e,t="")=>{const n={tw:"/auth/twitter",fb:"/auth/facebook",vk:"/auth/vk",gg:"/auth/googleplus",apple:"/auth/apple"};return new Promise((i,o)=>{let s=n[e]+t;A.f&&(s+="?redirect="+encodeURIComponent(document.location.href));let r=null;a.on(window,"message.module_auth",e=>{const{data:t,source:n}=e;if(null!==r&&n!==r)return;const{success:s,error:c}=t;s?i():c&&(p.error(c),o(new Error(c))),r.close(),r=null,a.off(window,"message.module_auth")}),r=Object(E.a)(s)})},o.sendUserDataToAnalytics=function(){const t=e.get(),n={};t&&(n.id=t.id,n.date=t.createdRFC,n.banned=t.is_banned,n.stat_group=t.stat_group,n.level=t.level,void 0!==t.is_paid&&(n.paid_user=!0===t.is_paid,n.paid_user&&(n.paid_till_date=t.paid_till_date))),T.pushToDataLayer({event:"User — Init",user_data:n})},o.getData=function(){return console.warn('Oops! Method "getData" of module "auth" is no longer exist.'),!1},o.possess=function(t){return new Promise((i,o)=>{t?c.c({url:"/auth/possess",data:{id:t},success:t=>{t.result&&e.update(()=>{i(),n.reload()})}}):o(new Error("Subssite id is empty"))})},o.logout=function(){c.c({url:"/auth/logout",data:{mode:"raw"},success:function(){window.location.reload()}})},o.init=function(){U.on("show_auth",e=>{o.showAuth({screen:e.data.screen,callback:t=>{t&&e.data.need_reload&&n.reload()}})}),U.on("auth_via_social:click",i=>{const s=a.data(i.el,"social"),r="1"===a.data(i.el,"refresh");o.signinBySocial(s).then(()=>{t.hide(),r&&(e.update(),n.reload())})}),U.on("auth_logout:click",(function(e){o.logout()})),c.a(401,(function(e,t){i.dinglebop()?i.showAuthPopup().then(()=>{e("repeat")}).catch(()=>{e("error")}):o.showAuth({callback:function(i){i?(t.reload_after_auth&&(t.afterSuccess=n.reload.bind(n)),e("repeat")):e("error")}})})),c.a(403,(function(e){e("error")})),n.addResponseCodeHandler(401,(function(e){i.dinglebop()?i.showAuthPopup().then(()=>{e("repeat")}).catch(()=>{e("error")}):o.showAuth({callback:function(t){e(t?"repeat":"error")}})})),n.addResponseCodeHandler(403,(function(e,t){e("error",t["module.ajaxify"].error)})),e.on("Login",(function(e){T.sendDefaultEvent(e.login_method.toUpperCase()+" Login — Init")})),e.on("Join",(function(e){T.pushToDataLayer({event:"User — Registration",user_data:{id:e.id,date:e.createdRFC,method:e.login_method}})})),n.on("Build finished",o.sendUserDataToAnalytics),e.set(o.delegated_data),o.sendUserDataToAnalytics()}})),Air.define("module.authForm","module.auth_data",(function(e){let t=null;async function i(){const{default:e}=await Promise.all([n.e(0),n.e(2),n.e(5),n.e(20)]).then(n.bind(null,1563));return t=new e,Promise.resolve()}this.show=async(e={})=>(t||await i(),T.sendDefaultEvent("Login Window — Shown"),t.show(e)),this.hide=async()=>{t&&t.hide()},this.init=()=>{e.on("Change",e=>{e?this.destroy():i()})},this.refresh=()=>{},this.destroy=()=>{e.off(),t&&(t.destroy(),t=null)}})),Air.define("module.auth_data","module.etc_controls, module.popup",(function(e,t){const n=this;let i,o,s=!1;function r(){n.trigger("Connection restored")}n.unlinkSocial=function(e,t,n){c.c({url:"/users/settings/unlink",data:{id:e,type:t,mode:"raw"},success:function(){n&&n(!0)},error:function(e){n&&n(!1,e)}})},n.setSubsitesTuned=function(e){s&&(s.is_subsites_tuned=e)},n.isSubsitesTuned=function(){return!!s&&s.is_subsites_tuned},n.set=function(e){const t=e;e&&void 0!==e.id||(e=!1),s=e,s&&s.login_method&&((Date.now()-Date.parse(s.createdRFC))/1e3<60&&n.triggerOnce("Join",s),n.triggerOnce("Login",s)),n.triggerOnce("Change",s),n.setLiveToken({token:!(!s||!s.is_paid)&&"private",expires:0}),t&&(n.setSubscribedIds(t.subscribed_ids||[]),n.setIgnoredIds(t.ignored_ids||[])),s&&!i&&(i=new u.a({name:this.getUserHash(),onMessage:function(e){switch(e.type){case"notification":n.triggerChain("User notifications changed",e);break;case"personal content voted":n.triggerChain("Personal content voted",e);break;default:n.triggerChain("Notification received",e)}},onRestore:r}),i.open())},n.getUserHash=function(){return s?s.hash:null},n.get=function(){return s},n.getId=function(){return s&&s.id},n.check=function(e){c.b({url:"/auth/check",data:{mode:"raw"},ignore_error_notify:!0,success:function(t){e&&e(t)},error:function(t){e&&e(!1,t)}})},n.isSuperuser=function(){return!!s&&s.is_superuser},n.isPaid=function(){return!!s&&s.is_paid},n.update=function(e,t){n.check((function(i){i&&void 0!==t&&(i.login_method=t),n.set(i),e&&e()}))},n.updateLiveToken=function(){c.b({url:"/live/token/update",data:{mode:"raw"},success:n.setLiveToken})},n.setLiveToken=function(e){e&&e.expires>0&&(clearTimeout(o),o=setTimeout(n.updateLiveToken,1e3*e.expires-Date.now())),n.triggerOnce("Change live token",e.token)},n.setSubscribedIds=function(e){n.triggerOnce("Change subscribed ids",e)},n.setIgnoredIds=function(e){n.triggerOnce("Change ignored ids",e)},n.isMe=function(e){return!!s&&s.id==e},n.isAuthorized=function(){return!1!==n.get()},n.isAnon=function(){return!this.isAuthorized()},n.isPossessionAvailable=function(){return!!s&&s.show_possession},n.isUser=function(){return!!s&&s.is_user},n.banUser=function(e,n){t.showVuePopup({componentName:"subsite-ban-popup",props:{callback:n,isUser:e.isUser,subsiteIds:`${e.id}${e.subsite_id?"/"+e.subsite_id:""}`,hasWholePlatform:e.hasWholePlatform||!1,hasRemoveAllContent:e.hasRemoveAllContent||!1}})},n.unbanUser=function(e,n){t.showVuePopup({componentName:"subsite-unban-popup",props:{callback:n,isUser:e.isUser,subsiteId:e.id}})},n.init=function(){e.defineControl({name:"ban",use:"toggle",labels:[Object(v.c)("Ban completely"),Object(v.c)("Unban")],action:function(e,t,i){0===t?n.banUser({id:a.data(e,"user-id"),hasWholePlatform:!0,isUser:!a.data(e,"subsite-id")},i):n.unbanUser({id:a.data(e,"user-id"),isUser:!a.data(e,"subsite-id")},i)}}),e.defineControl({name:"ban_creator_comment",use:"toggle",labels:[Object(v.c)("Ban completely"),Object(v.c)("Unban")],action:function(e,t,i){0===t?n.banUser({id:a.data(e,"user-id"),hasWholePlatform:!0,isUser:!a.data(e,"subsite-id")},i):n.unbanUser({id:a.data(e,"user-id"),isUser:!a.data(e,"subsite-id")},i)}}),e.defineControl({name:"ban_creator_content",use:"toggle",labels:[Object(v.c)("Ban completely"),Object(v.c)("Unban")],action:function(e,t,i){0===t?n.banUser({id:a.data(e,"user-id"),hasWholePlatform:!0,isUser:!a.data(e,"subsite-id")},i):n.unbanUser({id:a.data(e,"user-id"),isUser:!a.data(e,"subsite-id")},i)}}),e.defineControl({name:"ban_subsite",use:"button",label:Object(v.c)("Ban in subsite"),action:function(e,t){n.banUser({id:a.data(e,"user-id"),subsite_id:a.data(e,"subsite-id"),isUser:!a.data(e,"subsite-id")},t)}}),e.defineControl({name:"ban_and_remove_all",use:"button",label:Object(v.c)("Ban and remove all"),action:function(e,t){n.banUser({id:a.data(e,"user-id"),hasRemoveAllContent:!0,isUser:!a.data(e,"subsite-id")},t)}})},n.destroy=function(){i&&i.destroy()}})),Air.define("module.cabinet",(function(){let e=null;function t(){e&&e.update()}this.init=async()=>{if(!this.elements||!this.elements.length)return;const{default:i}=await Promise.all([n.e(0),n.e(1),n.e(2),n.e(6),n.e(24)]).then(n.bind(null,1547));e=new l.a({moduleName:"module.cabinet",Constructor:i}),a.on(window,"resize.cabinet",t)},this.refresh=()=>{e&&e.update()},this.destroy=()=>{a.off(window,".cabinet"),e&&e.destroy()}}));n(162),n(163);var N=n(2);Air.defineModule("module.comments","module.ajaxify, module.comments_admin, module.votes, module.favorite, module.date, module.floatingScreen, module.comments_last_visit",(function(e){var t,i=this,o=null;const s=function(){const e=a.find(".ui_modal_window .ui-button");e.classList.contains("ui-button--disabled")&&e.classList.remove("ui-button--disabled")};i.init=async function(){const{default:r}=await n.e(27).then(n.bind(null,1576));N.define("comm","Comments (°ᴥ°)","#0FA3B1"),t=new l.a({selector:'[air-module="module.comments"]',Constructor:r,scrollers:[{method:"activate"}],controlling_module:i}),e.addQueryEvent("comments",(function(e){if((!0===e.comments||void 0!==e.comment)&&!e.hard)return"Scroll to comments"})),x("complain",(function(){this.init=function(){},Promise.all([n.e(0),n.e(58)]).then(n.bind(null,1585)).then(({default:e})=>{const t=a.find(".ui_modal_window #complain-select"),n=i.config.complain_reasons;o=new e({container:t,callback:s,complainReasons:n})}),this.getData=function(){return parseInt(o.getValue())}}))},i.refresh=function(){t.update()},i.destroy=function(){e.removeQueryEvent("comments"),t.destroy(),o&&o.destroy()},i.setFormText=function(e,n){t.callInstancesMethod("setFormText",e,n)}})),Air.define("module.comments_admin","module.etc_controls",(function(e){this.init=function(){e.defineControl({name:"edit_comment",use:"button",label:Object(v.c)("Edit"),getClickData:function(e){return`place_form?to=item&id=${a.data(e,"comment-id")}&mode=edit&short_level=${a.data(e,"short-level")}`}}),e.defineControl({name:"edit_comment_link",use:"link",label:Object(v.c)("Edit"),getHref:function(e){return`/${a.data(e,"content-id")}?comment=${a.data(e,"comment-id")}&mode=edit`}}),e.defineControl({name:"remove_comment",use:"ajax_button",label:Object(v.c)("Remove"),url:"/admin/comments/remove",getData:function(e){return{id:a.data(e,"comment-id"),mode:"raw"}},msg:{confirm:Object(v.c)("Are you sure you want to remove this comment?"),success:Object(v.c)("The comment has been removed"),error:Object(v.c)("Failed to remove the comment")}}),e.defineControl({name:"remove_comment_branch",use:"ajax_button",label:Object(v.c)("Remove the branch"),url:"/admin/comments/removeBranch",getData:function(e){return{id:a.data(e,"comment-id"),mode:"raw"}},msg:{confirm:Object(v.c)("Are you sure you want to remove the whole branch?"),success:Object(v.c)("The branch has been removed"),error:Object(v.c)("Failed to remove the branch")}}),e.defineControl({name:"complain_comment",use:"button",label:Object(v.c)("Complain"),action:function(e,t){S({name:"complain",data:{title:Object(v.c)("Complain"),button_yes:Object(v.c)("Send")},onClose:function(t,n){t&&c.c({url:"/comments/complain",data:{content_id:a.data(e,"content-id"),comment_id:a.data(e,"comment-id"),user_id:a.data(e,"user-id"),reason_id:n,mode:"raw"},success:function(){p.success(Object(v.c)("Your complaint has been sent to a moderator"))},error:function(e){p.success(Object(v.c)("Failed to send the complaint (%{ error })",{error:e}))}})}}),t(!0)}}),e.defineControl({name:"pin_comment",use:"ajax_toggle",labels:[Object(v.c)("Pin"),Object(v.c)("Unpin")],url:"/admin/comments/pin",getData:function(e,t){return{id:a.data(e,"comment-id"),state:!t,mode:"raw"}},msg:{success:[Object(v.c)("The comment has been pinned"),Object(v.c)("The comment has been unpinned")],error:[Object(v.c)("Failed to pin the comment"),Object(v.c)("Failed to unpin the comment")]}}),e.defineControl({name:"hide_top_comment",use:"ajax_button",label:Object(v.c)("Hide"),getUrl:function(e){return a.data(e,"url")},msg:{success:Object(v.c)("There will be another comment here next time"),error:Object(v.c)("Failed to hide the comment")}})},this.refresh=function(){e.refresh()}})),Air.defineModule("module.comments_counter","module.comments_last_visit, module.auth_data",(function(e,t){let n;function i(e){this.uid=Object($.a)(),this.element=e.element,this.element_value_new=a.bem.find(this.element,"count__value_new"),this.element_value=a.bem.find(this.element,"count__value"),this.id=a.data(this.element,"comments_counter-id"),this.type=a.data(this.element,"comments_counter-type"),this.current_value=parseInt(a.text(this.element_value))||0,t.isAnon()&&this.updateNewValue()}i.prototype.destroy=function(){},i.prototype.setNewValue=function(e){const t=e>0;t&&a.text(this.element_value_new,e),a.bem.toggle(this.element,"has_new",t)},i.prototype.updateNewValue=function(){e.isThereLocalCount(this.id)&&this.setNewValue(this.getValue()-e.getLocalCount(this.id))},i.prototype.getValue=function(){return this.current_value},this.init=function(){n=new l.a({selector:'[air-module="module.comments_counter"]',Constructor:i})},this.refresh=function(){n.update()},this.destroy=function(){n.destroy()}})),Air.defineModule("module.comments_last_visit","module.auth_data",(function(e){N.define("comments_last_visit","CommentsLastVisit U´ᴥ`U","#FFE347");const t="comments_last_visit_",n="comments_last_count_";function i(){window.console.groupCollapsed("clearOldItems"),g.a((function(e){e&&e.indexOf(t)>=0&&(Date.now()/1e3-g.b(e))/86400>30&&(g.c(e),g.c(e.replace(t,n)))})),window.console.groupEnd("clearOldItems")}this.getLocalLastTime=function(e){const n=g.b(t+e);return n?parseInt(n):null},this.getCurrentTime=function(){return Math.round(Date.now()/1e3)},this.setLocalLastTime=function(e){g.d(t+e,this.getCurrentTime())},this.isThereLocalCount=function(e){return null!==g.b(n+e)},this.getLocalCount=function(e){return parseInt(g.b(n+e)||0)},this.setLocalCount=function(e,t){g.d(n+e,t)},this.setRemoteCount=function(e,t,n){c.c({url:"/comments/saveCommentsSeenCount",data:{content_id:e,count:t},ignore_error_notify:!0,success:()=>{n(!0)},error:()=>{n(!1)}})},this.setCount=function(t,n){N.log("comments_last_visit",`saving count=${n} for entry=${t}...`),this.setLocalLastTime(t),this.setLocalCount(t,n),e.isAuthorized()&&this.setRemoteCount(t,n,e=>{N.log("comments_last_visit",e?"done!":"failed!")})},this.init=function(){var e;e=i,.05>=Math.random()&&e()}})),Air.defineModule("module.comments_subscribe",(function(){const e=this;let t=null,n=null,i=[],o=null,s=0,r=!1;function l(){return 1===s}function u(){const e=i[l()?1:0];n.textContent=e}function d(){r||(r=!0,a.bem.add(t,"disabled"),c.c({url:`/notifications/${l()?"unsubscribe":"subscribe"}/thread/${o}`,success:({subscribe:e})=>{s=e?1:0,a.data(t,"is-subscribed",s),a.data(t,"gtm",`Comments — ${s?"Unsubscribe":"Subscribe"} — Clicked`),a.bem.toggle(t,"active",l()),u()},complete:()=>{r=!1,a.bem.remove(t,"disabled")}}))}e.init=()=>{t=e.elements[0].element,n=a.bem.find(t,"label"),i=a.data(n,"labels").split(",").map(e=>e.trim()),o=a.data(t,"content-id"),s=parseInt(a.data(t,"is-subscribed")),u(),a.on(t,"click",d)},e.refresh=()=>{e.destroy(),e.init()},e.destroy=()=>{a.off(t),t=null,n=null}}));n(138);Air.defineModule("module.checkCoubReadiness","",(function(){let e=null;this.init=async()=>{const{default:t}=await n.e(25).then(n.bind(null,1535));e=new l.a({moduleName:"module.checkCoubReadiness",Constructor:t})},this.refresh=()=>{e.update()},this.destroy=()=>{e.destroy()}}));n(114);var H=n(30);Air.defineModule("module.commerce_question","module.auth, module.entry",(function(e,t){let n;const i="content-commerce-question",o="content-commerce-question__message",s="ui--shake",r="l-hidden";class u{constructor(e){this.form=e.element,this.entryId=t.getData().id,this.isAuthRequired=a.attr(this.form,"air-auth")||!1,this.labels=a.attr(this.form,"air-labels"),this.data={title:a.attr(this.form,"air-title"),subtitle:a.attr(this.form,"air-subtitle"),values:a.attr(this.form,"air-values"),labels:this.labels?this.labels.split(","):[Object(v.b)("Ответ","Answer"),Object(v.b)("Ответить","Answer")],email:!this.isAuthRequired},this.messages={success:a.attr(this.form,"air-success")||Object(v.c)("Right. We will send you a promo code by email."),error:a.attr(this.form,"air-error")||Object(v.c)("Wrong, please try again.")},this.correctValues=this.data.values.split(","),this.init()}init(){a.addClass(this.form,i),H.a({el:this.form,template:"commerce_question",data:this.data,onReady:()=>{this.addListeners(),a.attr(this.form,"air-values",null)}})}addListeners(){this.submitButton=a.find(this.form,"button"),a.on(this.submitButton,"click",()=>this.submitFormData()),this.messageOverlay=a.find(this.form,"."+o),a.on(this.messageOverlay,"click",()=>this.hideMessage()),a.delegateEvent(this.form,"input","input",e=>this.watchInput(e.target)),a.delegateEvent(this.form,"input","keydown",e=>{13===e.keyCode&&this.submitFormData()})}watchInput(e){""!==e.value.trim()?a.bem.add(e,"filled"):a.bem.remove(e,"filled")}collectFormData(){const e=this.form.querySelectorAll("input");let t={};for(let n=0,i=e.length;n<i;n++){const i=e[n];if(!i.validity.valid||""===i.value.trim()){t={error:!0,field:i};break}t[i.name]=i.value.trim()}return t}submitFormData(){const t=this.collectFormData(),n=e.getData();if(t.error)this.focusOnInvalidField(t.field);else{const i=this.checkUserValue(t.answer);this.isAuthRequired?n?(t.userId=n.id,this.postFormData(t)):e.showAuth({callback:function(){t.userId=e.getData().id,this.postFormData(t)}}):i?this.postFormData(t):this.showMessage(a.svg("ui_refresh",19,19).outerHTML+this.messages.error)}}postFormData(e){a.bem.add(this.form,"loading"),c.c({url:"/commerceEntry/saveEmail/"+this.entryId,data:e,success:()=>{this.showMessage(this.messages.success),a.off(this.messageOverlay)}})}focusOnInvalidField(e){e.focus(),a.toggleClass(e.parentNode,s,!0),setTimeout(()=>{a.toggleClass(e.parentNode,s,!1)},500)}checkUserValue(e){let t=!1;return e=(e=(e=e.trim()).toLowerCase()).replace(/[\:\`\.\,\s\'\"\/\|\\]/g,""),this.correctValues&&this.correctValues.indexOf(e)>-1&&(t=!0),t}showMessage(e){a.html(this.messageOverlay,e),a.toggleClass(this.messageOverlay,r,!1)}hideMessage(){const e=a.find(this.form,"input");e.value="",e.focus(),a.toggleClass(this.messageOverlay,r,!0)}destroy(){a.off(this.form),a.off(this.submitButton),a.off(this.messageOverlay)}}this.init=function(){n=new l.a({module_name:"module.commerce_question",Constructor:u})},this.refresh=function(){n.update()},this.destroy=function(){n.destroy()}}));const F=new r.a;Air.define("module.commercialContacts",(function(){this.init=function(){!function({element:e}){Promise.all([n.e(0),n.e(55)]).then(n.bind(null,1577)).then(({default:t})=>{new t({container:e,props:{isFull:!0}})})}(this.elements[0])},this.refresh=function(){this.destroy(),this.init()},this.destroy=function(){F.off()}})),Air.define("module.contentTabs",(function(){let e=null;this.init=async()=>{if(!this.elements||!this.elements.length)return;const{default:t}=await Promise.all([n.e(0),n.e(1),n.e(6),n.e(28)]).then(n.bind(null,1569));e=new l.a({moduleName:"module.contentTabs",Constructor:t})},this.refresh=()=>{this.destroy(),this.init()},this.destroy=()=>{e&&e.destroy()}}));n(115);var V=n(27);const q=new r.a;Air.define("module.content_stats",(function(){const e={main:null,stats:null,shares:null};let t=!0,n=!1,i=!1,o=null;function s(e,t){const n=Object.keys(e),i="content-stats__list__item";a.removeChildren(t),n.forEach(n=>{const o=a.make("div",i),s=a.make("div",i+"__name",{textContent:n}),r=a.make("div",i+"__line"),c=a.make("div",i+"__value",{textContent:e[n]});a.append(o,s),a.append(o,r),a.append(o,c),a.append(t,o)})}function r(){if(t){if(a.bem.remove(e.main,"hidden"),a.css(e.main,"max-height",a.offsetHeight(e.container)+"px"),!i&&!n){a.bem.remove(e.main,"error");let t="/stats/content/"+o;const l=new URLSearchParams(window.location.search);l.has("ea")&&(t+="?ea="+l.get("ea")),(r=t,new Promise((e,t)=>{n=!0,c.b({url:r,success:t=>{e(t),n=!1,i=!0},error:e=>{t(e),n=!1}})})).then(t=>{new Promise((n,i)=>{s(t.main,e.stats),s(t.shares,e.shares),function(e,t){const n="content-stats__list__item";Object.keys(e).forEach(i=>{const o=a.make("div",n),s=a.make("div",n+"__name",{textContent:i}),r=a.make("div",n+"__line"),c=a.make("div",n+"__value",{textContent:e[i]});a.append(o,s),a.append(o,r),a.append(o,c),a.append(t,o)})}(t.links,e.links),function(e,t){if(0===Object.keys(e).length)return;const n={"ВКонтакте":"ui_vkontakte",Facebook:"ui_facebook",Telegram:"ui_telegram",Twitter:"ui_twitter"},i="announcement-stats";a.html(t,`\n      <div class="announcement-stats__row">\n          <div class="announcement-stats__col announcement-stats__col--h">\n              <div class="announcement-stats__title">${Object(v.c)("Announcements")}</div>\n          </div>\n          <div class="announcement-stats__col announcement-stats__col--h">\n              <div class="announcement-stats__title">${Object(v.c)("Conversions")}</div>\n          </div>\n          <div class="announcement-stats__col announcement-stats__col--h">\n              <div class="announcement-stats__title">${Object(v.c)("Reach")}</div>\n          </div>\n      </div>\n    `),Object.keys(e).forEach(o=>{const s=a.make("div",i+"__row"),r=a.make("div",i+"__col"),c=a.svgHtml(n[e[o].social],14,14),l=a.make("a",i+"__social",{href:o,target:"_blank",innerHTML:"<div>"+c+"</div><div>"+e[o].social+"</div>"});if(a.append(r,l),e[o].date){const t=Object(V.f)(new Date(e[o].date),"{dayN} {monthShort}, {time}"),n=Object(V.f)(new Date(e[o].date),"{dayN} {monthShort} {year}, {time}"),s=a.make("div",i+"__date",{innerHTML:"<div>"+t+"</div><div>"+n+"</div>"});a.append(r,s)}if(a.append(s,r),void 0!==e[o].clicks){const t=a.make("div",i+"__col"),n=a.make("div",i+"__value",{innerHTML:Object(h.numberFormat)(e[o].clicks)});a.append(t,n),a.append(s,t)}const u=a.make("div",i+"__col"),d=a.make("div",i+"__value",{innerHTML:Object(h.numberFormat)(e[o].views)});a.append(u,d),a.append(s,u),a.append(t,s)})}(t.announcements,e.announcements),n()}).then(()=>{t.links&&Object.keys(t.links).length>5&&a.css(e.linksShow,"display","block"),a.css(e.main,"max-height",a.offsetHeight(e.container)+"px")})}).catch(()=>{a.bem.add(e.main,"error")})}t=!1}else a.bem.add(e.main,"hidden"),a.css(e.main,"max-height",""),t=!0;var r}function l(){a.css(e.links,"max-height","none"),a.css(e.main,"max-height",a.offsetHeight(e.container)+"px"),a.remove(e.linksShow)}this.init=()=>{e.main=this.elements[0].element,e.container=a.firstChild(e.main),e.stats=a.find(e.main,'[name="js-stats"]'),e.shares=a.find(e.main,'[name="js-shares"]'),e.links=a.find(e.main,'[name="js-links"]'),e.linksShow=a.find(e.links,'[air-click="content_stats_links_show"]'),e.announcements=a.find(e.main,'[name="js-announcements"]'),o=a.data(e.main,"content-id"),q.on("content_stats_toggle",r),q.on("content_stats_links_show",l)},this.refresh=()=>{this.destroy(),this.init()},this.destroy=()=>{q.off(),a.nullDom(e),t=!0,n=!1,i=!1,o=null}}));var z=n(75);class W extends z.a{constructor(e){super(e),window.coubPlayerEvents.on("play-first-time-"+this.data.content_id,()=>{this.sendHitThroughAjax(this.ajaxHandler.bind(this))})}destroy(){window.coubPlayerEvents.off("play-first-time-"+this.data.content_id)}}var Y=n(24);Air.define("module.coubViews",(function(){let e;this.init=function(){window.coubPlayerEvents=new Y.b,e=new l.a({module_name:"module.coubViews",Constructor:W})},this.refresh=function(){e.update()},this.destroy=function(){e.destroy()}}));class X{constructor(e,t,n){this.data=e,this.events=t,this.$dom={},this.additionalData=n,this.$dom.stub=a.parseHTML(this.getTemplate(this.data)),this.$dom.options=a.findAll(this.$dom.stub,".entry_stub__option"),this.$dom.buttons=a.findAll(this.$dom.stub,".entry_stub__button"),a.each(this.$dom.options,e=>{const t=a.data(e,"action");a.on(e,"click",()=>{"1"===a.data(e,"state")&&this.optionHandler(t,!0)})}),a.each(this.$dom.buttons,e=>{const t=a.data(a.parents(e,".entry_stub__option"),"action");a.on(e,"click",()=>{this.optionHandler(t,!1)})}),this.triggerEvent("onIgnoreEntry",!0).then(()=>{this.showStub(!0)})}showStub(e=!0){e?(a.css(this.data.entryElement,"display","none"),a.before(this.data.entryElement,this.$dom.stub)):(a.css(this.data.entryElement,"display","block"),this.destroy())}setOptionState(e,t){const n=a.find(this.$dom.stub,`.entry_stub__option[data-action="${e}"]`);n&&a.data(n,"state",t?2:1);let i=!1;a.each(this.$dom.options.slice(1),e=>{"2"===a.data(e,"state")&&(i=!0)}),i?a.css(this.$dom.buttons[0],"display","none"):a.css(this.$dom.buttons[0],"display","")}optionHandler(e,t){switch(this.loading(!0),e){case"hide":this.triggerEvent("onIgnoreEntry",t).then(()=>{this.loading(!1),this.showStub(!1)}).catch(()=>{this.loading(!1)});break;case"ignore":this.triggerEvent("onIgnoreAuthor",t).then(()=>{this.loading(!1),this.setOptionState(e,t)}).catch(()=>{this.loading(!1)});break;case"ignoreSubsite":this.triggerEvent("onIgnoreSubsite",t).then(()=>{this.loading(!1),this.setOptionState(e,t)}).catch(()=>{this.loading(!1)});break;case"unsubscribe":this.triggerEvent("onUnsubscribeSubsite",t).then(()=>{this.loading(!1),this.setOptionState(e,t)}).catch(()=>{this.loading(!1)});break;case"complain":this.triggerEvent("onComplain").then(()=>{this.loading(!1),this.setOptionState(e,t)}).catch(()=>{this.loading(!1)})}}triggerEvent(e,t){const n=this.events[e];if(n)return n(t)}loading(e){a.bem.toggle(this.$dom.stub,"loading",e)}getTemplate(e){const t=`\n      <div class="entry_stub__option" data-action="unsubscribe" data-action="unsubscribe" data-state="1">\n        <div class="entry_stub__option__state entry_stub__option__state--1">\n          <p>\n            <svg class="icon icon--ui_close" width="10" height="10" xmlns="http://www.w3.org/2000/svg"><use xlink:href="#ui_close"></use></svg>\n            ${Object(v.c)("Unsubscribe from subsite %{ subsite }",{subsite:e.subsiteName})}\n          </p>\n        </div>\n        <div class="entry_stub__option__state entry_stub__option__state--2">\n          <p>\n            ${Object(v.c)("Subsite %{ subsite } has been removed from your subscriptions",{subsite:e.subsiteName})}\n          </p>\n          <div class="entry_stub__button">${Object(v.c)("Cancel")}</div>\n        </div>\n      </div>`,n=`\n        <div class="entry_stub__option" data-action="ignoreSubsite" data-state="1">\n\n            <div class="entry_stub__option__state entry_stub__option__state--1">\n                <p>\n                    <svg class="icon icon--ui_lock" width="9" height="12" xmlns="http://www.w3.org/2000/svg"><use xlink:href="#ui_lock"></use></svg>\n                    ${Object(v.c)("Ignore subsite %{ subsite }",{subsite:e.subsiteName})}\n                </p>\n            </div>\n\n            <div class="entry_stub__option__state entry_stub__option__state--2">\n                <p>\n                    ${Object(v.c)("%{ subject } was added to the blocklist",{subject:e.subsiteName})}\n                </p>\n                <div class="entry_stub__button">${Object(v.c)("Cancel")}</div>\n            </div>\n\n        </div>\n    `,i=`\n        <div class="entry_stub__option" data-action="ignore" data-state="1">\n\n            <div class="entry_stub__option__state entry_stub__option__state--1">\n                <p>\n                    <svg class="icon icon--ui_lock" width="9" height="12" xmlns="http://www.w3.org/2000/svg"><use xlink:href="#ui_lock"></use></svg>\n                    ${Object(v.c)("Ignore author %{ author }",{author:e.authorName})}\n                </p>\n            </div>\n\n            <div class="entry_stub__option__state entry_stub__option__state--2">\n                <p>\n                    ${Object(v.c)("%{ subject } was added to the blocklist",{subject:e.authorName})}\n                </p>\n                <div class="entry_stub__button">${Object(v.c)("Cancel")}</div>\n            </div>\n\n        </div>`;return`\n          <div class="entry_stub l-island-a l-fs-13 l-lh-20">\n\n              <div class="entry_stub__option" data-action="hide" data-state="2">\n\n                  <div class="entry_stub__option__state entry_stub__option__state--2">\n                      <p>${Object(v.c)("Post is hidden from your feed")}</p>\n                      <div class="entry_stub__button" data-ignore="1">${Object(v.c)("Cancel")}</div>\n                  </div>\n\n              </div>\n\n              ${"whole-site"===this.additionalData.feedType&&e.authorIsUser?i:""}\n\n              ${"whole-site"!==this.additionalData.feedType||e.authorId===e.subsiteId&&e.authorIsUser?"":n}\n\n              ${e.isSubscribedToSubsite?t:""}\n\n              <div class="entry_stub__option" data-action="complain" data-state="1">\n\n                  <div class="entry_stub__option__state entry_stub__option__state--1">\n                      <p>\n                          <svg class="icon icon--ui_flag" width="10" height="13" xmlns="http://www.w3.org/2000/svg"><use xlink:href="#ui_flag"></use></svg>\n                          ${Object(v.c)("Complain about the material")}\n                      </p>\n                  </div>\n\n                  <div class="entry_stub__option__state entry_stub__option__state--2">\n                      <p>${Object(v.c)("Your complaint has been sent to a moderator")}</p>\n                  </div>\n\n              </div>\n\n          </div>`}destroy(){a.each(this.$dom.options,e=>{a.off(e)}),a.each(this.$dom.buttons,e=>{a.off(e)}),a.remove(this.$dom.stub),this.$dom=a.nullDom(this.$dom),this.events=a.nullDom(this.events),this.data=a.nullDom(this.data)}}class J{constructor(e){this.id=0,this.type=0,this.title="",this.entry={blocks:[]},this.date="",this.modification_date="",this.forced_to_mainpage=0,this.is_published=!1,this.is_advertisement=!1,this.is_enabled_instant_articles=!1,this.is_enabled_amp=!0,this.is_enabled_likes=!1,this.is_enabled_best_comments=!1,this.is_enabled_comments=!1,this.is_still_updating=!1,this.is_approved_for_public_rss=!1,this.is_show_thanks=!1,this.is_clean_cover=!1,this.locked_by_admin=!1,this.external_access="",this.path="",this.subsite_id=0,this.subsite_name="",this.removed=!1,this.user_id=0,this.access_link="",this.is_closed_editing="",this.withheld="",this.custom_style="",this.is_holdonmain=!1,this.is_holdonflash=!1,this.is_editorial=!0,this.is_disabled_apps=!1,this.custom_cover=null,this.url="",this.external_access_link="",this.is_special=!1,this.is_filled_by_editors=!1,this.is_enabled_ad=!1,this.is_nsfw=!1,this.attaches=null,e&&(this.data=e),this.subsiteModel=Air.import("module.subsite_model")}loadEntry(){return this.id?new Promise((e,t)=>{c.b({url:"/writing/get/"+this.id,ignore_error_notify:!0,success:function(t){e(t)},error:function(e){t(e)}})}):Promise.resolve({})}set data(e){for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&void 0!==this[t]&&(this[t]=e[t]);this.date_str=e.date_str?V.m(e.date_str):null,this.modification_date_str=e.modification_date_str?V.m(e.modification_date_str):null,this.attaches=e.attaches||null}get data(){const e={};return Object.getOwnPropertyNames(this).forEach(t=>{"dataLoading"!==t&&"entry"!==t&&"attaches"!==t&&void 0!==this[t]&&(e[t]=this[t])}),this.date_str&&(e.date_str=V.d(this.date_str)),{entry:this.entry,attaches:this.attaches,settings:e}}remove(){return new Promise((e,t)=>{S({name:"remove",onClose:n=>{n?this.request("remove").then(()=>{p.success(Object(v.c)("Entry has been removed")),e()}).catch(e=>{t(e)}):t(new Error("declined"))}})})}restore(){return this.request("restore").then(()=>{p.success(Object(v.c)("Entry has been recovered"))})}request(e){return new Promise((t,n)=>{c.c({url:"/writing/"+this.id+"/"+e,success:function(e){t(e)},error:function(e){n(e)}})})}push(e,t){const n=(e,t)=>new Promise((n,i)=>{c.c({url:e,data:{values:t},ignore_error_notify:!0,success:function(){p.success(Object(v.c)("Push notification sent")),n()},error:function(e){p.error(Object(v.c)("Push notification sending failed: %{ error }",{error:e})),i(Error(e))}})});return t.is_enabled_mobile_push_sound?new Promise((i,o)=>{S({name:"push_with_sound",onClose:s=>{s?i(n(e,t)):(p.error(Object(v.c)("Wise decision")),o(Error("declined")))}})}):n(e,t)}unpublish(){return new Promise((e,t)=>{S({name:"unpublish",onClose:(n,i)=>{n?c.c({url:"/content/unpublish/"+this.id,data:{reason_text:i.reason_text,reason_id:0},success:()=>{p.success(Object(v.c)("Entry has been unpublished")),e()},error:e=>{t(e)}}):t(new Error("declined"))}})})}hideFromMain(){return new Promise((e,t)=>{S({name:"confirm",data:{title:Object(v.c)("Remove from main?"),text:Object(v.c)("Remove the entry from main page?"),button_yes:Object(v.c)("Yes"),button_no:Object(v.c)("No")},onClose:n=>{n?c.c({url:"/content/unforce/"+this.id,data:{},success:function(){p.success(Object(v.c)("Entry has been removed from the main page")),e()},error:function(e){t(new Error(e))}}):t(new Error("declined"))}})})}hideFromFeed(e){const t=this,n=e.entryElement.dataset.location;new X(e,{onIgnoreEntry:t=>new Promise((n,i)=>{const o=t?"mute":"unmute";c.c({url:`/content/${o}/${e.contentId}`,success:function(){n()},error:function(e){i(e)}})}),onIgnoreAuthor:n=>new Promise((i,o)=>{t.subsiteModel.ignore(e.authorId,n,(function(e){e?i():o(new Error("ignore failed"))}))}),onIgnoreSubsite:n=>new Promise((i,o)=>{t.subsiteModel.ignore(e.subsiteId,n,(function(e){e?i():o(new Error("ignore failed"))}))}),onUnsubscribeSubsite:n=>new Promise((i,o)=>{t.subsiteModel.subscribe(e.subsiteId,!n,(function(e){e?i():o(new Error("unsubscribe failed"))}))}),onComplain:()=>new Promise((t,n)=>{c.c({url:"/contents/complain",data:{content_id:e.contentId,user_id:e.authorId,mode:"raw"},success:function(){t()},error:function(e){n(e)}})})},{feedType:n})}}var K=n(19);class G{constructor(e){this.init(e)}init(e){this.element=e.element,this.id=a.data(e.element,"content-id"),this.type=a.attr(e.element,"air-entry-type"),this.title=a.attr(e.element,"air-entry-title"),this.element_shares=a.find(this.element,".shares--mobile"),"full"===this.type&&this.searchAndRewriteLinks()}destroy(){}rewriteLink(e){Object(R.g)(e.href)&&a.attr(e,"target",null)}searchAndRewriteLinks(){a.findAll(this.element,".b-article a").forEach(this.rewriteLink)}getData(){var e=a.find(this.element,".entry_data");return e?JSON.parse(a.html(e)):{}}hideShares(e){this.element_shares&&a.bem.toggle(this.element_shares,"hidden",e)}activate(e){switch(this.type){case"short":break;case"full":K.e.is("mobile")&&this.hideShares(!e)}}}let Q=null;function Z(){return null===Q&&(Q=Air.import("module.popup")),Q}var ee=async function(e,t){const{default:i}=await n.e(34).then(n.bind(null,1534));let o=null;Z().show({template:"send_"+e.type+"_push",data:e,onReady:function(n){o=new i({form:a.find(n,".ui_form"),onBeforeSubmit:function(t){return"web"===e.type&&(t.url+="?from=push"),void 0===t.icon&&(t.icon=""),t},onSuccess:function(){p.success(Object(v.c)("Web-push has been sent")),t&&t(!0)},onError:function(e){p.error(Object(v.c)("Failed to send push (code %{ code })",{code:e.rc})),t&&t(!1)}})},onClose:function(){o.destroy(),o=null}})};const te=new r.a;Air.defineModule("module.entry","module.comments_counter, module.auth_data,\n    module.etc_controls, module.favorite, module.votes, module.date,\n    module.ajaxify, module.page, module.subsite_model, module.sharesUniversal",(function(e,t,i,o,s,r,u,d,h,f){var m,g=this,b=null;g.getFirstFullInstance=function(){var e=m.getInstances()[0];return void 0!==e&&"full"!==e.type&&(e=void 0),e};const y=function(e){Array.from(document.getElementsByClassName(e)).forEach(t=>{t.classList.remove(e)})},w=function(e){e.classList.remove("content--is-visible-blur")},_=function({el:e}){w(e.closest(".content"))},k=function(){c.c({url:"/subsite/is_blur_nsfw",data:{is_blur_nsfw:!1},success:function({success:e}){e?(y("content--is-visible-blur"),p.success(Object(v.c)("Now entries 18+ don`t blur in the feed"))):p.error(Object(v.c)("Failed to remove blur from entries"))},error:function(e){p.error(`${Object(v.c)("Failed to remove blur from entries")}: (${e})`)}})},C=function({el:e}){c.c({url:"/subsite/is_adult",data:{is_adult:!0},success:function({success:t}){t?(w(e.closest(".content")),y("content-adult--unknown-user"),p.success(Object(v.c)("Thank you. We now know that you are an adult")+" :)")):p.error(Object(v.c)("Couldn't verify your age"))},error:function(e){p.error(`${Object(v.c)("Couldn't verify your age")}: (${e})`)}})},O=({el:e})=>{const t=e.closest(".block-hidden-wrapper"),n=e.closest(".block-hidden");t&&n&&(a.remove(n),a.unwrap(t))};var j=function(){var e,n=a.find("[data-editing-closed-maker-id]"),i=t.get();i&&n&&(e=a.data(n,"editing-closed-maker-id"),a.bem.toggle(n,"hidden",!(e==i.id)))};const E=function(){const e=a.find(".ui_modal_window .ui-button");e.classList.contains("ui-button--disabled")&&e.classList.remove("ui-button--disabled")};g.getData=function(){var e=g.getFirstFullInstance();return void 0!==e&&e.getData()},g.init=function(){if(N.define("entry","Entry (＾-＾)","#EF798A"),N.define("codex","[CodeX Editor]","#4da0da"),m=new l.a({module_name:"module.entry",Constructor:G,controlling_module:g,scrollers:[{method:"activate"}]}),i.defineControl({name:"complain_content",use:"button",label:Object(v.c)("Complain"),action:function(e,t){S({name:"complain",data:{title:Object(v.c)("Complain"),button_yes:Object(v.c)("Send")},onClose:function(t,n){t&&c.c({url:"/contents/complain",data:{content_id:a.data(e,"content-id"),reason_id:n,user_id:a.data(e,"user-id"),mode:"raw"},success:function(){p.success(Object(v.c)("Your complaint has been sent to a moderator"))},error:function(e){p.error(`${Object(v.c)("Failed to send a complaint")}: (${e})`)}})}}),t(!0)}}),i.defineControl({name:"pin_content",use:"ajax_toggle",labels:[Object(v.c)("Pin"),Object(v.c)("Unpin")],url:"/admin/content/pin",getData:function(e,t){return{content_id:t?0:a.data(e,"content-id"),subsite_id:a.data(e,"subsite-id"),mode:"raw"}},msg:{success:[Object(v.c)("The post is pinned"),Object(v.c)("Post unpinned")],error:[Object(v.c)("Failed to pin post"),Object(v.c)("Failed to unpin post")]}}),i.defineControl({name:"boost_entry",use:"button",label:Object(v.c)("Promote"),action(e){T.sendDefaultEvent("Booster — Promote entry — Context menu — Click"),window.triggerDomEvent.call(e,"showBoosterConstructor",{contentId:a.data(e,"content-id")})}}),i.defineControl({name:"edit_entry",use:"button",label:Object(v.c)("Edit"),getClickData:function(e){return"openEntryEditor?id="+a.data(e,"content-id")}}),i.defineControl({name:"edit_coub",use:"link",label:Object(v.c)("Edit"),getHref:function(e){return"/create/"+a.data(e,"content-id")}}),i.defineControl({name:"unpublish_entry",use:"toggle",labels:[Object(v.c)("Unpublish"),""],action:function(e,t,n){var i=new J;i.id=a.data(e,"content-id"),0===t?i.unpublish().then(()=>{n(!0),u.reload({saveScroll:!0})}).catch(e=>{n(!1),N.log("entry","Entry unpublishing failed:",e)}):alert("Хаха, лох! Нет такого метода")}}),i.defineControl({name:"remove_entry",use:"button",label:Object(v.c)("Remove"),action:function(e,t){var n=new J;n.id=a.data(e,"content-id"),n.remove().then(()=>{t(!0),d.isContent()||u.reload({saveScroll:!0})}).catch(e=>{t(!1),N.log("entry","Entry removing cancelled:",e)})}}),i.defineControl({name:"hide_from_feed",use:"button",label:Object(v.c)("Hide"),action:function(e,t){var n=new J;n.id=a.data(e,"content-id");const i=a.data(e,"subsite-id"),o=a.data(e,"user-id");n.hideFromFeed({contentId:n.id,subsiteId:i,subsiteName:a.data(e,"subsite-name"),authorId:o,authorName:a.data(e,"author-name"),authorIsUser:"1"===a.data(e,"author-is-user"),entryElement:a.parents(e,".content-feed"),isSubscribedToSubsite:h.isSubscribedTo(i),isSubscribedToAuthor:h.isSubscribedTo(o)}),t(!0)}}),i.defineControl({name:"ignore_user",use:"button",label:Object(v.c)("Ignore the author"),action:function(e,t){h.ignore(a.data(e,"user-id"),!0,(function(e){t(e),e&&(u.reload(),p.success(Object(v.c)("User added to blocklist")))}))}}),i.defineControl({name:"unsubscribe",use:"button",label:Object(v.c)("Unsubscribe from sub-site"),action:function(e,t){h.subscribe(a.data(e,"subsite-id"),!1,(function(e){t(e),e&&(u.reload(),p.success(Object(v.c)("You are unsubscribed")))}))}}),A.g&&i.defineControl({name:"share",use:"button",label:Object(v.c)("Share"),action:function(e,t){const n=parseInt(a.data(e,"content-id"),10);f.openShareDialog(n),t(!0)}}),x("complain",(function(){this.init=function(){},Promise.all([n.e(0),n.e(58)]).then(n.bind(null,1585)).then(({default:e})=>{const t=a.find(".ui_modal_window #complain-select"),n=g.config.complain_reasons;b=new e({container:t,callback:E,complainReasons:n})}),this.getData=function(){return parseInt(b.getValue())}})),t.on("Change",({can_mark_nsfw:e})=>{e&&i.defineControl({name:"set_adult",use:"toggle",labels:[Object(v.c)("Mark 18+"),Object(v.c)("Unmark 18+")],action:function(e,t,n){const i=`/content/${Number(a.data(e,"set_adult-state"))?"unnsfw":"nsfw"}/${a.data(e,"content-id")}`;c.c({url:i,data:{mode:"raw"},success:function({success:t,is_nsfw:i}){if(t){const t=e.closest(".content-feed"),o=a.find(t,".content");i?p.success(Object(v.c)("Post marked as 18+")):(w(o),p.success(Object(v.c)("The post is unmarked 18+"))),n(!0)}else{const e=i?Object(v.c)("Failed to mark post as 18+"):Object(v.c)("Failed to unmark post");p.error(e),n(!1)}},error:function(e){p.error(`${Object(v.c)("Failed")}: (${e})`)}})}})}),te.on("send_web_push",(function(e){ee({type:"web",id:a.data(e.el,"id"),title:"Важная новость",text:a.data(e.el,"title"),url:a.data(e.el,"url")},(function(e){}))})),te.on("send_mobile_push",(function(e){ee({type:"mobile",id:a.data(e.el,"id"),title:"",text:a.data(e.el,"title")},(function(e){}))})),te.on("unblurEntry",_),te.on("unblurAllEntries",k),te.on("setUserAdult",C),te.on("showHiddenBlock",O),g.elements&&g.elements[0]){const e=g.elements[0].element,t=a.find(e,"[data-history-id][data-content-id]");t&&a.on(t,"click",P)}j()};let P=function(){const e=this.dataset.contentId,t=this.dataset.historyId;window.confirm(Object(v.c)("The current version of the article will be overwritten. Sure?"))&&c.c({url:"/writing/"+e+"/history/"+t+"/apply",success:function(e){p.success(Object(v.c)("The version has been successfully applied!")),window.setTimeout((function(){window.opener.location.reload(),window.close()}),1e3)},error:function(){p.error(Object(v.c)("Failed to apply version, something went wrong"))}})};g.refresh=function(){o.refresh(),s.refresh(),r.refresh(),e.refresh(),i.refresh(),m.update(),j()},g.destroy=function(){t.off(),te.off(),m.destroy(),b&&b.destroy()}}));n(139),n(116),n(117);var ne=function(e,t,n){void 0===n&&(n=t),void 0!==!t&&void 0!==n&&a.height(t,(e?a.height(n):0)+"px")};const ie=new r.a;Air.define("module.news_widget",(function(){var e,t,n,i,o=this,s=!1,r=function(e){var t="is_news_widget_closed";if(void 0!==e)D.c(t,e+"");else switch(D.a(t)){case"true":return!0;case"false":default:return!1}},l=function(n=!0){e=n,a.bem.toggle(t.widget,"closed",e),ne(!e,t.content,t.content_inner),r(e)},u=function(){!1===s&&(s=!0,T.sendDefaultEvent("New widget – "+(e?"Open":"Close")+" – Click"),l(!e),i=setTimeout((function(){s=!1}),500))},d=function(e){a.bem.toggle(t.widget,"loading",!1!==e)},h=function(){var e,i;d(!0),e=n,i=function(e){var i;d(!1),e&&(e.last_id&&(n=e.last_id),i=e.html,a.appendHTML(t.content_inner,i),ne(!0,t.content,t.content_inner))},c.b({url:"/news/more/"+e,data:{mode:"raw"},success:function(e){i(e)},error:function(e){i(!1)}})};function f(){l(r())}o.init=function(){e=!1,(t={}).widget=a.find(".news_widget"),t.content=a.bem.find(t.widget,"content"),t.content_inner=a.bem.find(t.content,"inner"),t.toggle=a.bem.find(t.widget,"toggle"),t.dateContainer=a.bem.find(t.widget,"header").querySelector("p"),ie.on("news_widget_toggle",u),ie.on("news_widget_load_more",h),n=a.data(t.widget,"last_id"),setTimeout(f,2e3),a.text(t.dateContainer,Object(V.h)())},o.refresh=function(){o.destroy(),o.init()},o.destroy=function(){ie.off(),clearTimeout(i),t=a.nullDom(t,{})}}));const oe=new r.a;Air.defineModule("module.page_adult_dummy","module.ajaxify",(function(e){const t=this,n=function(){c.c({url:"/subsite/is_adult",data:{is_adult:!0},success:function({success:t}){t?e.reload():p.error(Object(v.c)("Couldn't verify your age"))},error:function(e){p.error(`${Object(v.c)("Couldn't verify your age")}: (${e})`)}})};t.init=function(){oe.on("setUserAdultInDummy",n)},t.refresh=function(){t.init()}}));n(140),n(141);const se=new r.a;Air.define("module.repost","module.auth_data",(function(e){this.init=function(){se.on("make_repost",async({data:t,el:i,event:o})=>{if(o.target!==i)return;const{onClick:s}=await n.e(78).then(n.bind(null,1536));s(i,t.content_id,e.getId())}),se.on("show_reposters",async({data:e,el:t})=>{const{onMouseenter:i}=await n.e(78).then(n.bind(null,1536));i(t,e.content_id)}),se.on("hide_reposters",async({data:e})=>{const{onMouseleave:t}=await n.e(78).then(n.bind(null,1536));t(e.content_id)})},this.destroy=function(){se.off()}}));const re=new r.a;Air.define("module.splitButton",(function(){this.init=function(){this.elements.forEach(e=>{!function({element:e,settings:t}){Promise.all([n.e(0),n.e(82)]).then(n.bind(null,1537)).then(({default:n})=>{new n({container:e,props:t.props,events:{}})})}(e)})},this.refresh=function(){this.destroy(),this.init()},this.destroy=function(){re.off()}})),Air.defineModule("module.page_error","module.auth, module.location",(function(e,t){const n=this;n.init=function(){switch(parseInt(a.data(n.elements[0].element,"error-code"))){case 401:e.showAuth({callback:function(e){e&&t.reload()}})}},n.refresh=function(){n.init()}}));n(164);const ae=new r.a;function ce(e){return e.pushManager}function le(e){return e.active}function ue(){return"PushManager"in window&&"Promise"in window&&Promise.toString().indexOf("[native code]")>=0}function de(e){return e.getSubscription()}function he(e){return e.subscribe({userVisibleOnly:!0})}function fe(e){return e.unsubscribe()}function me(e){return e.endpoint}Air.define("module.messengerButton",(function(){function e({event:e,type:t,el:n,data:i}){Air.get("module.siteHeader").openMessengerWindow(i.channelId)}this.init=function(){ae.on("openChat",e)},this.destroy=function(){ae.off()}})),Air.define("module.misprint","module.popup",(function(e){var t=this,i=function(){var e="";return window.getSelection?e=window.getSelection().toString():document.selection&&"Control"!=document.selection.type&&(e=document.selection.createRange().text),e},o=function(e){var t=e.target.tagName.toLowerCase();e.ctrlKey&&13==e.keyCode&&""!==i()&&"textarea"!==t&&"input"!==t&&s()},s=function(){e.show({template:"misprint",data:{text:i(),url:Object(R.c)(),i18n:{submitTypoReport:Object(v.c)("Submit a typo report"),commentOptional:Object(v.c)("Comment (optional)"),send:Object(v.c)("Send")}},onReady:r.bind(t),onClose:function(){}})},r=async function(i){const{default:o}=await n.e(34).then(n.bind(null,1534));new o({form:Object(y.a)(i).misprint_form.get()[0],onBeforeSubmit:function(t){return e.hide(),t},onSuccess:function(e){p.show({type:"success",message:Object(v.c)("Thank you. A typo has been reported to our editors.")}),t.trigger("Success")},onError:function(){}}),t.trigger("Popup shown")};t.init=function(){a.on(document,"keydown.module_misprint",o),t.on("Popup shown",(function(){T.sendDefaultEvent("Misprints Popup — Shown")})),t.on("Success",(function(){T.sendDefaultEvent("Misprints Popup — Sent")}))},t.destroy=function(){t.off()}}));const pe=(window.__debug?window.__static_path:"")+"/pushWorker.js";let ge=null,be=null;function ve(){return ue()&&"serviceWorker"in navigator}function ye(e){return g.d("sPush:endpoint",e),N.log("push","storeEndpoint",e),e}function we(e){return e.json()}function _e(e){return function(){return e}}function ke(e,t){return window.__debug?Promise.resolve(t):fetch(e,function(e){return{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({endpoint:e})}}(t)).then(we).then(_e(t))}function Ce(e){return N.log("push","saveEndpointAtServer",e),ke(`https://push.${window.__domain}/api/endpoint/put/`,e)}function Se(e){return N.log("push","removeEndpointAtServer",e),ke(`https://push.${window.__domain}/api/endpoint/delete/`,e)}function xe(e){return ge=e,N.log("push","storeSWRegistration",e),ge}function Ae(){return ge}function Oe(e){return be=e,N.log("push","storePushSubscription",e),be}function Te(){return be}function je(){return null}function Ee(e){return null===e?(N.warn("push","processEndpointAfterSubscription: invalid endpoint, unsubscribing back",e),fe(Te()),Promise.reject(new Error(Object(v.c)("An error occurred while subscribing")))):(N.log("push","processEndpointAfterSubscription: endpoint is ok",e),ye(e))}function Pe(e){return null===e?(N.warn("push","processEndpointAfterUnsubscription: invalid endpoint, subscribing back",e),he(ce(Ae())),Promise.reject(new Error(Object(v.c)("An error occurred while unsubscribing")))):(N.log("push","processEndpointAfterUnsubscription: endpoint is ok",e),void g.c("sPush:endpoint"))}function Ie(e){return N.log("push","processPushSubscription",e),null!==e}function Me(){const e=Ae();return null===e?(N.warn("push","subscribe: registration is null"),Promise.reject(new Error(Object(v.c)("No registration")))):he(ce(e)).then(Oe).then(me).then(Ce).catch(je).then(Ee)}function $e(){const e=Te();return null===e?(N.warn("push","unsubscribe: subscription is null"),Promise.reject(new Error(Object(v.c)("No subscription")))):fe(t=e).then(_e(t)).then(me).then(Se).catch(je).then(Pe);var t}function Le(){return(e=pe,navigator.serviceWorker.register(e)).then(xe).then(ce).then(de).then(Oe).then(Ie);var e}function Re(){return(N.log("push","removeDuplicatedWorkers: start"),navigator.serviceWorker.getRegistrations().then((function(e){const t=g.b("sPush:endpoint"),n=e.reverse().filter(le);t?n.length>1&&(N.log("push","removeDuplicatedWorkers: there's saved endpoint and more then one active registrations"),n.forEach((function(e){le(e)&&function(e){const t=e.split("/").pop();return e.indexOf(t)>=0}(function(e){return le(e)?e.active.scriptURL:null}(e))&&(N.log("push","removeDuplicatedWorkers: unregister some"),function(e){e.unregister()}(e))}))):(N.log("push","removeDuplicatedWorkers: there's no saved endpoint"),n.forEach((function(e){de(ce(e)).then((function(e){e&&ye(me(e))}))}))),N.log("push","removeDuplicatedWorkers: done")}))).then(Le)}var De=n(14);const Be=window.__apple_web_push_id,Ue=`https://push.${window.__domain}/api/safari`;function Ne(){N.log("push","setCookie"),D.c("safari_push_off","1",3650)}function He(){N.log("push","removeCookie"),D.c("safari_push_off","1",-1)}function Fe(){return D.a("safari_push_off")}function Ve(){return"1"===Fe()}function qe(){return"safari"in window&&"pushNotification"in window.safari}function ze(){return window.safari.pushNotification.permission(Be)}function We(){const e=ze();return e?e.deviceToken:null}function Ye(){return null!==We()}function Xe(e){return ze().permission===e}function Je(){return!Ve()&&Xe("granted")}function Ke(e){N.log("push","requestPermission"),window.safari.pushNotification.requestPermission(Ue,Be,{},(function(t){"granted"===t.permission?e(!0):e(!1,Object(v.c)("The browser did not give the permission"))}))}function Ge(e){Ve()&&Ye()?tt(We(),e):Ke(e)}function Qe(e){return new Promise((function(t,n){e((function(e,i){e?t(!0):n(i)}))}))}function Ze(){return N.log("push","subscribe"),Qe(Ge)}function et(e){return`${Ue}/v1/devices/${e}/registrations/${Be}`}function tt(e,t){var n=this;N.log("push","resubscribe"),De.post({url:et(e),success(e){e.success?(n.removeCookie(),t(!0)):t(!1,Object(v.c)("Wrong server response"))},error(e){t(!1,e)},do_not_use_csrf_header:!0})}function nt(e){var t=this;Ve()||!Ye()?e(!1,"Вы не подписаны"):De.dlt({url:et(We()),success(n){n.success?(t.setCookie(),e(!0)):e(!1,Object(v.c)("Wrong server response"))},error(t){e(!1,t)},do_not_use_csrf_header:!0})}function it(){return N.log("push","unsubscribe"),Qe(nt)}function ot(){return Promise.resolve(Je())}Air.define("module.push2",(function(){const e=this;let t=!1;e.setState=function(n){return N.log("push","setState",n),e.triggerOnce("State changed",n),n?e.triggerOnce("Enabled"):e.triggerOnce("Disabled"),t=n,n},e.getState=function(){return t},e.isSupported=function(){return ve()||qe()},e.callMethod=function(e){return N.log("push",e),ve()?void 0===o[e]?Promise.reject(new Error(`"normalPush" has no method "${e}"`)):o[e]():qe()?void 0===s[e]?Promise.reject(new Error(`"safariPush" has no method "${e}"`)):s[e]():Promise.reject(new Error(Object(v.c)("The browser does not support push-notifications")))},e.subscribe=function(){return e.callMethod("subscribe").then(e.handleSubscriptionSuccess).catch(e.handleSubscriptionFail)},e.handleSubscriptionSuccess=function(){e.setState(!0),T.sendDefaultEvent("Push Notifications — Subscribe")},e.handleSubscriptionFail=function(t){e.trigger("Subscription failed"),p.error(Object(v.c)("Failed to subscribe to push notifications (%{ error })",{error:t.message||t}))},e.unsubscribe=function(){return e.callMethod("unsubscribe").then(e.handleUnsubscriptionSuccess).catch(e.handleUnsubscriptionFail)},e.handleUnsubscriptionSuccess=function(){e.setState(!1),T.sendDefaultEvent("Push Notifications — Unsubscribe")},e.handleUnsubscriptionFail=function(t){e.trigger("Unsubscription failed"),p.error(Object(v.c)("Failed to unsubscribe from push notifications (%{ error })",{error:t.message||t}))},e.toggle=function(t){return t?e.subscribe():e.unsubscribe()},e.handlePrepareError=function(e){N.warn("push",`error on preparing: "${e.message||e}"`)},e.init=function(t){return N.define("push","Push (-。-)","#ff5900"),e.callMethod("prepare").then(e.setState).catch(e.handlePrepareError).then(t)}}),{async:!0});var st=n(64);class rt{constructor(e){this.$dom={toggle:e.element},this.data={name:a.data(e.element,"name"),state:this.getState()},this.handlers=e.handlers,a.on(this.$dom.toggle,"click",this.onClick.bind(this))}getState(){return a.bem.hasMod(this.$dom.toggle,"on")}setState(e){return a.bem.toggle(this.$dom.toggle,"on",e)}getName(){return this.data.name}onClick(){this.handlers.click()}hide(){a.bem.add(this.$dom.toggle,"hidden")}destroy(){a.off(this.$dom.toggle),this.$dom=a.nullDom(this.$dom),this.data=a.nullDom(this.data),this.handlers=a.nullDom(this.handlers)}}class at{constructor(e){const t=this;this.push=Air.import("module.push2"),this.view=new rt({element:e.element,handlers:{click:function(){t.store.set({state:!t.store.get("state")})}}}),this.store=new st.a({props:{state:this.view.getState()},handlers:{viewChange:function(e,n){switch(e){case"state":t.view.setState(n)}},viewRequestModelChange:function(e,n){switch(e){case"state":t.push.toggle(n)}}},name:"push_button"}),this.push.on("State changed",(function(e){t.store.commit({state:e})})),this.push.on("Subscription failed",(function(){t.store.commit({state:!1})})),this.push.on("Unsubscription failed",(function(){t.store.commit({state:!0})})),this.push.isSupported()||this.view.hide()}destroy(){this.view.destroy(),this.store.destroy(),this.push.off()}}Air.define("module.push_buttons",(function(){let e;this.init=function(){e=new l.a({selector:'[data-toggle-name="push_button"]',Constructor:at})},this.refresh=function(){e.update()},this.destroy=function(){e.destroy()}})),Air.defineModule("module.promo_email",(function(){let e;this.init=async function(){const{default:t}=await n.e(35).then(n.bind(null,421));e=new t({element:a.find(".form2"),actions:{save:{url:"/private/digest/promo/store",getData:function(e){return e},success:function(e){p.success(Object(v.c)("Promo has been saved")),setTimeout((function(){window.location.href=e.redirect_url}),1e3)}}}})}}));var ct=n(42),lt=n(149);const ut=new r.a;Air.defineModule("module.writing","module.location, module.auth, module.auth_data, module.ajaxify",(function(e,t,i,o){this.writingInstance=null,this.isLoading=!1,this.checkAuth=()=>new Promise(e=>{i.isAuthorized()?e():t.showAuth({callback:t=>{t&&(o.reload(),o.on("Build finished",()=>{o.off(),e()}))}})}),this.open=async(t={})=>{await this.checkAuth();const i={id:0,to:"u",tool:"",isStaticPage:!1,entryPoint:"",...t};if(this.isLoading)return;this.isLoading=!0;const s=Object(R.e)().writing?Object(R.c)():Object(R.a)();let r="";try{const{default:t}=await Promise.all([n.e(0),n.e(1),n.e(2),n.e(7),n.e(52)]).then(n.bind(null,1564));this.writingInstance&&(await this.writingInstance.destroy(),this.writingInstance=null,e.replace(s),await new Promise(e=>setTimeout(e,0))),this.writingInstance=new t(i,{onReady:()=>{let t=Object(R.c)()+"?writing="+i.id;i.isStaticPage&&(t+="&static=true"),e.replace(t),console.log("[Editor in popup] Ready")},onClose:async()=>{if(this.writingInstance){await this.writingInstance.destroy(),this.writingInstance=null;const t=Object(R.c)();e.replace(s),r===t&&o.reload()}console.log("[Editor in popup] Closed")},onSave:({id:t,url:n,isNeedUpdate:i,isRedirectToEntry:s})=>{const a=Object(ct.a)(n);r=a.path,i&&e.replace(`/${r}?writing=${t}`),s&&o.goTo("/"+r),console.log("[Editor in popup] Entry saved")}})}catch(e){console.warn(e)}finally{this.isLoading=!1}},this.init=()=>{let{writing:e,static:t}=Object(R.e)();void 0!==e&&(e=parseInt(e,10)||0),t="true"===t,!Number.isNaN(e)&&e>=0&&this.open({id:e,isStaticPage:t,entryPoint:lt.a.Direct}),ut.on("openEntryEditor",async e=>{this.open(e.data)}),a.on(window,"beforeunload.writing",e=>{this.writingInstance&&(e.preventDefault(),e.returnValue="")})},this.refresh=()=>{this.destroy(),this.init()},this.destroy=()=>{ut.off(),a.off(window,"beforeunload.writing"),this.writingInstance&&(this.writingInstance.destroy(),this.writingInstance=null)}})),Air.define("module.hashtagsAdmin","module.etc_controls",(function(e){this.init=function(){e.defineControl({name:"edit_hashtag",use:"button",label:Object(v.c)("Edit"),action:(e,t)=>{let n=a.parent(e);if(n){let e=a.find(n,".island__header__link");e&&setTimeout(()=>{e.click(),n=null,e=null},0)}t(!0)}}),e.defineControl({name:"ignore_hashtag",use:"toggle",labels:[Object(v.c)("Ignore"),Object(v.c)("Do not ignore")],action:(e,t,n)=>{const i=a.data(e,"hashtag");c.c({url:"/hashtags/"+(t?"unmute":"mute"),data:{hashtags:[i],mode:"raw"},success:()=>{n(!0)},error:()=>{n(!1)}})},msg:{success:[Object(v.c)("Hashtag has been added to blocklist"),Object(v.c)("Hashtag has been removed from blocklist")],error:[Object(v.c)("Cannot add hashtag to blocklist"),Object(v.c)("Cannot remove hashtag from blocklist")]}})}})),Air.defineModule("module.liveAnswers",(function(){const e=this,t="flying-photo",n="flying-photo--moved-top",i="squeezed";var o,s=[],r=null;function c(e=10){return Math.floor(Math.random()*e)+1}function l(e){return Math.floor(Math.random()*e.length)}function u(e){return e[l(e)]}function d(e,o){(function(e){return new Promise(n=>{const i=a.make("div",t),o=a.make("img");m.isUrlBelongsToLeonardo(e.photo)&&(e.photo+="-/resize/48/"),o.src=e.photo,a.append(i,o),o.onload=function(){n(i)}})})(o).then(t=>{const o=a.find(e,".comments_counter__count__ico"),s=o.querySelector(".icon");a.prepend(o,t);const r=[n];setTimeout(()=>{t.classList.add(u(r)),s.classList.add(i)},50),setTimeout(()=>{t.remove(),s.classList.remove(i)},950)}).catch(console.log)}var h=function(e){const t=e.filter(e=>e.intersectionRatio>=1);if(!t.length)return;if(c()<8)return;const n=u(t);if("true"===n.target.dataset.queued)return;const i=function(e){const t=o[e].settings.lastComments||[],n=l(t),i=t[n];return t.splice(n,1),i}(s.indexOf(n.target));i&&(n.target.dataset.queued="true",setTimeout(()=>{d(n.target,i),n.target.dataset.queued="false"},200*c()))};e.init=function(){o=e.elements.filter(e=>(e.settings.lastComments||[]).length>0),s=o.map(e=>e.element);r=new IntersectionObserver(h,{rootMargin:"-25% 0px",threshold:1}),o.forEach(e=>{r.observe(e.element)})},e.refresh=function(){e.destroy(),e.init()},e.destroy=function(){r.disconnect(),o=[],s=[]}}));var dt=n(18);class ht{constructor({element:e,controlling_module:t}){this.dom={container:e,items:[...a.bem.find(e,"items").children]},this.controllingModule=t,this.init()}init(){const e=this.controllingModule.orderServicesByHistory(this.services);this.sortButtonsByHistory(e)}destroy(){this.dom.container=null,this.dom.items=[],this.controllingModule=null}sortButtonsByHistory(e){e.length&&this.dom.items.forEach(t=>{const n=t.dataset.name,i=-1*(e.length-e.indexOf(n));t.style.order=i})}get services(){return this.dom.items.map(e=>e.dataset.name)}}const ft=new r.a;Air.defineModule("module.shares",(function(){const e=this;let t=null;function n(t){const{service:n,url:i}=t.data;!function(e){const t=(Object(dt.f)()-600)/2,n=(Object(dt.e)()-450)/2;window.open(e,"_blank",`toolbar=yes,scrollbars=yes,resizable=yes,width=600,height=450,left=${t},top=${n}`)}(decodeURIComponent(i)),e.updateHistory(n)}function i(){return g.b("sharesHistory",!0)||[]}this.orderServicesByHistory=e=>{const t=i();return e.sort((e,n)=>{const i=t.indexOf(e),o=t.indexOf(n);return i<0?1:o<0?-1:i-o})},this.updateHistory=e=>{const t=i(),n=t.indexOf(e);n>-1&&t.splice(n,1),t.unshift(e),g.d("sharesHistory",t,!0)},this.init=()=>{t=new l.a({moduleName:"module.shares",Constructor:ht,controlling_module:this}),ft.on("share",n),A.e?a.addClass(document.body,"os--ios"):a.addClass(document.body,"os--non_ios")},this.refresh=()=>{t&&t.update()},this.destroy=()=>{ft.off(),t&&t.destroy()}})),Air.define("module.sharesUniversal","module.shares",(function(e){let t=null;this.openShareDialog=e=>{if(!t||!e)return;const n=t.getInstances();for(let t=0,i=n.length;t<i;t+=1){const i=n[t];i.params.id===e&&i.openShareDialog()}},this.init=async()=>{const{default:e}=await Promise.all([n.e(0),n.e(2),n.e(3),n.e(5),n.e(44)]).then(n.bind(null,1578));t=new l.a({moduleName:"module.sharesUniversal",Constructor:e})},this.refresh=()=>{t&&t.update()},this.destroy=()=>{t&&t.destroy()}}));const mt=new r.a;Air.define("module.authQr",(function(){this.init=function(){mt.on("Auth by qr",(function(e){a.bem.add(e.el,"loading"),c.b({url:"/u/qr/url",success:({url:t})=>{S({name:"qr",data:{qr_src:t,ios:a.data(e.el,"ios"),android:a.data(e.el,"android")}})},complete:function(){a.bem.remove(e.el,"loading")}})}))},this.destroy=function(){mt.off()}}));class pt{constructor({element:e}){this.element=e,this.dom={list:a.find(this.element,"[data-items]"),loadMore:a.find(this.element,"[data-load-more]")},this.modules={subsiteSubscribe:Air.import("module.subsite_subscribe"),andropov:Air.import("module.andropov"),etcControls:Air.import("module.etc_controls")},this.isLoading=!1,a.on(this.dom.loadMore,"click",this.loadMore.bind(this)),this.refreshModules()}destroy(){a.off(this.loadMore),a.nullDom(this.dom)}refresh(){this.refreshModules()}loadMore(){let e=a.lastChild(this.dom.list);if(!e)return;const t=a.data(this.dom.loadMore,"url"),n=a.data(e,"id");this.setLoading(!0),c.b({url:`${t}/${n}`,success:e=>{const{result:t}=e;t?(a.appendHTML(this.dom.list,e.result),this.refreshModules()):a.remove(this.dom.loadMore)},complete:()=>{this.setLoading(!1)}}),e=null}setLoading(e){this.isLoading=e,a.bem.toggle(this.element,"loading",e)}refreshModules(){Object.keys(this.modules).forEach(e=>{this.modules[e].refresh()})}}Air.defineModule("module.blogsWidget","module.etc_controls, module.subsite_subscribe, module.andropov",(function(e){let t=null;this.init=()=>{t=new l.a({module_name:"module.blogsWidget",Constructor:pt}),e.defineControl({name:"hide_blog_entry",use:"ajax_button",label:Object(v.c)("Hide"),getUrl:e=>a.data(e,"url"),msg:{success:Object(v.c)("Next time there will be another entry in this place"),error:Object(v.c)("Failed to hide the entry")}})},this.refresh=()=>{t&&t.update(),e.refresh()},this.destroy=()=>{t&&t.destroy()}}));const gt=new r.a;Air.define("module.osnovaApiToken",(function(){this.init=function(){gt.on("get_api_token",(function(e){a.bem.toggle(e.el,"loading",!0),c.b({url:"/magic/getapitoken",success:function(e){S({name:"get_api_token",data:{active:e.active?Object(v.c)("Yes"):Object(v.c)("No"),token:e.token,date_expires:e.date_expires}})},complete:function(){a.bem.toggle(e.el,"loading",!1)}})}))},this.destroy=function(){gt.off()}})),Air.define("module.subsiteCard","module.siteHeader",(function(e){let t=null;this.init=async()=>{const{default:e}=await Promise.all([n.e(0),n.e(48)]).then(n.bind(null,1586));t=new l.a({moduleName:"module.subsiteCard",Constructor:e})},this.refresh=()=>{t&&t.update()},this.destroy=()=>{t&&t.destroy()}}));var bt=n(70);Air.define("module.subsiteDescription","module.location",(function(e){let t=null,i=null;function o(e){if(null!==i)return void i.show(!0);Promise.all([n.e(0),n.e(1),n.e(4),n.e(60)]).then(n.bind(null,1556)).then(({default:t})=>{i=new t({position:{target:e.target,anchors:["bl","tl"],offset:[0,-10]},options:{closeOnOutsideClick:!0,bubble:{width:"220",arrowAlignment:"bottom center"},blocks:[{type:"title",text:Object(v.c)("Profile description")},{type:"text",text:Object(v.c)("Tell us briefly about yourself")},{type:"button",text:Object(v.b)("Detailed","More"),link:"/plus",gtm:"Plus — User description — Clicked"}]},events:{onClose(){}}})})}function s(e){let t=a.find(".subsite_settings--description-field");t&&(bt.a(t,{duration:400,shift:-75,easing:"easeInOutCubic"}),e.preventDefault(),e.stopPropagation()),t=null}this.init=function(){t={},t.showPlusPopupLink=a.find(".subsite_head__description--link"),t.editDescriptionLink=a.find(".subsite_head__description--edit-link"),t.showPlusPopupLink&&a.on(t.showPlusPopupLink,"click",o),t.editDescriptionLink&&a.on(t.editDescriptionLink,"click",s)},this.refresh=function(){this.destroy(),this.init()},this.destroy=function(){t.showPlusPopupLink&&a.off(t.showPlusPopupLink),t.editDescriptionLink&&a.off(t.editDescriptionLink),i&&(i.destroy(),i=null),t=a.nullDom(t)}})),Air.define("module.subsiteDetails",(function(){let e=null;this.init=async()=>{const{default:t}=await Promise.all([n.e(0),n.e(1),n.e(4),n.e(6),n.e(49)]).then(n.bind(null,1587));e=new l.a({moduleName:"module.subsiteDetails",Constructor:t})},this.refresh=()=>{e&&e.update()},this.destroy=()=>{e&&e.destroy()}})),Air.define("module.subsiteHashtagsAdmin",(function(){let e=null,t=null,i=null;function o(t){c.c({url:e,data:{hashtags:t},complete:function(e,t){}})}function s([{default:e},{default:n}]){let s=a.find(".input-suggestion-place-2"),r=a.find(".list-editable-place-2"),c=[];const l=a.find(".list-editable-json-2");try{c=JSON.parse(l.textContent)}catch(e){console.error("Error in parsing json for ignored subsite list-editable",e)}t=new e({container:s,options:{suggestionUrl:"/search-hashtag",listType:"hash+text",placeholder:Object(v.c)("for example")+", #fallout76"},events:{onSelect(e){t.clear(),i.addItem(e)}}}),i=new n({container:r,options:{listType:"text",list:c,getKey:"text"},events:{onAdd(){o(i.getValue())},onRemove(){o(i.getValue())}}}),s=null,r=null}this.init=function(){e=a.data(this.elements[0].element,"url"),Promise.all([Promise.all([n.e(0),n.e(1),n.e(64)]).then(n.bind(null,1570)),Promise.all([n.e(0),n.e(1),n.e(65)]).then(n.bind(null,1571))]).then(s)},this.refresh=function(){this.destroy(),this.init()},this.destroy=function(){t&&(t.$destroy(),t=null),i&&(i.$destroy(),i=null)}})),Air.define("module.subsiteHeader","module.siteHeader",(function(e){let t=null;this.init=async()=>{const{default:e}=await Promise.all([n.e(0),n.e(2),n.e(12),n.e(5),n.e(50)]).then(n.bind(null,1588));t=new l.a({moduleName:"module.subsiteHeader",Constructor:e})},this.refresh=()=>{t&&t.update()},this.destroy=()=>{t&&t.destroy()}})),Air.define("module.subsiteSettings","module.ajaxify, module.siteHeader",(function(e,t){let i=null;this.init=function(){!async function(){const{default:o}=await n.e(35).then(n.bind(null,421));var s=a.find(".subsite_settings__form .form2"),r=a.data(s,"id");i=new o({element:s,actions:{save:{url:"/subsite/save_settings/"+r,success:function(e,n){p.success(n),t.updateUser()},error:function(e){p.error(e)}},new:{url:"/magic/create",success:function(n){n.redirect_url&&(p.success(Object(v.c)("Subsite created")),e.goTo(n.redirect_url),t.updateUser())}}},events:{change:function(){},advancedListAddItem:function(e,t,n){t(!0),e?c.b({url:"/search/user",data:{url:e},success:function(e){e&&n({id:e.id,url:e.url,name:e.name})},complete:function(){t(!1)}}):(t(!1),p.error(Object(v.c)("Incorrect user link")))},advancedListRemoveItem:function(e,t,n){n(!0)},advancedListRenderItem:function(e){return`\n                        <div class="adv_list_item">\n                            <a href="${e.url}">${e.name}</a>\n                            <div class="adv_list_item__remove" data-remove></div>\n                        </div>`}}})}()},this.refresh=function(){this.destroy(),this.init()},this.destroy=function(){null!==i&&(i.destroy(),i=null)}})),Air.define("module.subsiteSidebar",(function(){let e=null;this.init=async()=>{const{default:t}=await Promise.all([n.e(0),n.e(1),n.e(4),n.e(6),n.e(51)]).then(n.bind(null,1589));e=new l.a({moduleName:"module.subsiteSidebar",Constructor:t})},this.refresh=()=>{e&&e.update()},this.destroy=()=>{e&&e.destroy()}})),Air.defineModule("module.subsite_admin","module.auth_data, module.etc_controls, module.subsite_model",(function(e,t,i){var o=this,s=null;const r=function(){const e=a.find(".ui_modal_window .ui-button");e.classList.contains("ui-button--disabled")&&e.classList.remove("ui-button--disabled")};o.changeRole=function(e,t){var n,i=[];for(n in t)i.push({id:n,name:t[n].name,active:t[n].active});S({name:"subsite_roles",data:{roles:i},onClose:function(t,n){t&&c.c({url:"/access/subsite/"+e,data:{level:n},success:function(e){p.success(Object(v.c)("User rights changed"))},error:function(e){p.error(Object(v.c)("Failed to change user rights: %{ error }",{error:e.toLowerCase()}))}})}})},o.init=function(){t.defineControl({name:"settings_subsite",use:"link",label:Object(v.c)("Settings"),getHref:function(e){return a.data(e,"subsite-url")+"/settings"}}),t.defineControl({name:"change_role",use:"button",label:Object(v.c)("User type"),action:function(e,t){o.changeRole(a.data(e,"user-id"),JSON.parse(a.data(e,"roles")||{})),t(!0)}}),x("subsite_roles",(function(e,t){this.init=function(){},this.getData=function(){return parseInt(t.subsite_role.val())}})),t.defineControl({name:"club_gift",use:"button",label:Object(v.c)("Gift an account"),action:function(e,t){S({name:"subsite_gift",onClose:function(t,n){t&&c.c({url:"/payments/account/gift",data:{subsite_id:a.data(e,"user-id"),period:n,mode:"raw"},success:function(e){p.success(Object(v.c)("Done"))},error:function(e){p.error(e)}})}}),t(!0)}}),t.defineControl({name:"complain_subsite",use:"button",label:Object(v.c)("Complain"),action:function(e,t){S({name:"complain",data:{title:Object(v.c)("Complain"),button_yes:Object(v.c)("Send")},onClose:function(t,n){t&&c.c({url:"/subsite/complain",data:{subsite_id:a.data(e,"subsite-id"),reason_id:n,mode:"raw"},success:function(){p.success(Object(v.c)("Your complaint has been sent to a moderator"))},error:function(e){p.error(Object(v.c)("Failed to send a complaint",{error:e}))}})}}),t(!0)}}),t.defineControl({name:"ignore_user_toggle",use:"toggle",labels:[Object(v.c)("Ignore"),Object(v.c)("Don't ignore")],action:function(e,t,n){i.ignore(a.data(e,"user-id"),!t,(function(e){n(e)}))},msg:{success:[Object(v.c)("User is blocklisted"),Object(v.c)("User removed from blocklist")],error:[Object(v.c)("Failed to add user to the blocklist"),Object(v.c)("Failed to remove user from the blocklist")]}}),t.defineControl({name:"ignore_user_toggle_2",use:"toggle",labels:[Object(v.c)("Add to blocklist"),Object(v.c)("Remove from blocklist")],action:function(e,t,n){i.ignore(a.data(e,"user-id"),!t,(function(e){n(e)}))},msg:{success:[Object(v.c)("User is blocklisted"),Object(v.c)("User removed from blocklist")],error:[Object(v.c)("Failed to add user to the blocklist"),Object(v.c)("Failed to remove a user from the blocklist")]}}),t.defineControl({name:"ignore_user_toggle_3",use:"toggle",labels:[Object(v.c)("Ignore"),Object(v.c)("Don't ignore")],action:function(e,t,n){i.ignore(a.data(e,"user-id"),!t,(function(e){n(e)}))},msg:{success:[Object(v.c)("User is blocklisted"),Object(v.c)("User removed from blocklist")],error:[Object(v.c)("Failed to add user to the blocklist"),Object(v.c)("Failed to remove a user from the blocklist")]}}),x("subsite_gift",(function(e,t){this.init=function(){},this.getData=function(){return parseInt(t.subsite_gift_period.val())}})),x("complain",(function(){this.init=function(){},Promise.all([n.e(0),n.e(58)]).then(n.bind(null,1585)).then(({default:e})=>{const t=a.find(".ui_modal_window #complain-select"),n=o.config.complain_reasons;s=new e({container:t,callback:r,complainReasons:n})}),this.getData=function(){return parseInt(s.getValue())}}))},o.refresh=function(){},o.destroy=function(){s&&s.destroy()}}));const vt=new r.a;Air.define("module.subsite_catalog",(function(){let e,t=null;function n(){e=!e,a.bem.toggle(t.catalog,"wrapper_open",e),ne(e,t.wrapper,t.inner)}this.init=function(){t={},t.catalog=a.find(".subsites_catalog"),t.wrapper=a.bem.find(t.catalog,"wrapper"),t.wrapper&&(t.inner=a.bem.find(t.wrapper,"inner")),e=!1,vt.on("catalog_toggle_wrapped",n)},this.destroy=function(){vt.off(),t=a.nullDom(t)},this.refresh=function(){this.destroy(),this.init()}}));class yt{constructor(e=[],t="Some-"+Object($.a)()){this.name=t,this.set(e)}length(){return this.elements.length}set(e){this.elements=e}get(){return this.elements}clear(){this.set([])}indexOf(e){return this.elements.indexOf(e)}has(e){for(let t=this.elements.length-1;t>=0;t--)if(this.elements[t]==e)return!0;return!1}remove(e){return function(e,t){for(let n=e.length-1;n>=0;n--)if(e[n]==t)return e.splice(n,1),!0;return!1}(this.elements,e)}add(e,t=!1){return!(this.has(e)&&!t)&&(this.elements.push(e),!0)}toggle(e,t){return t?this.add(e):this.remove(e)}isEmpty(){return 0===this.length()}}Air.define("module.subsite_model","module.auth_data",(function(e){const t=new yt([],"Ignored IDs");this.ignore=function(e,n,i){!function(e,t){const n=`/${e.state?"mute":"unmute"}/subsite/${e.subsite_id}`;c.c({url:n,success:function(){t({subsite_id:e.subsite_id,state:e.state},!1)},error:function(){t({subsite_id:e.subsite_id},!0)},reload_after_auth:!0})}({subsite_id:e,state:n},(o,s)=>{s?(this.trigger("Ignoring update failed "+e),i&&i(!1)):(t.toggle(e,n),this.trigger("Ignoring updated "+e,o),i&&i(!0))})},this.setIgnoredIds=function(e){t.set(e)},this.isIgnored=function(e){return t.has(e)};const n=new yt([],"Subscribed IDs");this.subscribe=function(e,t,o){!function(e,t){const n=`/${e.state?"subscribe":"unsubscribe"}/to/subsite/${e.subsite_id}`;c.c({url:n,success:function(){t({subsite_id:e.subsite_id,state:e.state},!1)},error:function(){t({subsite_id:e.subsite_id},!0)},reload_after_auth:!0})}({subsite_id:e,state:t},(s,r)=>{r?(this.trigger("Update failed "+e),o&&o(!1)):(n.toggle(e,t),t||i.toggle(e,t),this.trigger("Subscription updated "+e,s),o&&o(!0))})},this.setSubscribedIds=function(e=[]){n.set(e)},this.getSubscribedIds=function(){return n.get()},this.hasSubscribes=function(){return!n.isEmpty()},this.isSubscribedTo=function(e,t=!0){return!0===t&&!this.hasSubscribes()||n.has(e)};let i=new yt([],"Notified from IDs");this.enableNotifications=function(e,t,n){!function(e,t){const n=`/notifications/${e.state?"subscribe":"unsubscribe"}/subsite/${e.subsite_id}`;c.c({url:n,success:function(){t({subsite_id:e.subsite_id,state:e.state},!1)},error:function(){t({subsite_id:e.subsite_id},!0)},reload_after_auth:!0})}({subsite_id:e,state:t},(o,s)=>{s?(this.trigger("Update failed "+e),n&&n(!1)):(i.toggle(e,t),this.trigger("Subsite notifications updated "+e,o),n&&n(!0))})},this.isEnabledNotifications=function(e){return i.has(e)},this.init=function(){e.on("Change subscribed ids",this.setSubscribedIds.bind(this)),e.on("Change ignored ids",this.setIgnoredIds.bind(this))},this.destroy=function(){e.off()}}));class wt{constructor(e){this.$dom={input:e.input,items:e.items,dummy:e.dummy,container:e.container},this.data={items_search_content:this.$dom.items.map(this.getItemSearchContent)},a.on(this.$dom.input,"input",this.onInput.bind(this))}getItemSearchContent(e){return a.data(e,"search-content").toLowerCase()}onInput(){this.search(this.getSearchedValue())}getSearchedValue(){return a.val(this.$dom.input).toLowerCase()}foundItemByIndex(e,t){a.bem.toggle(this.$dom.items[e],"hidden",!t)}search(e){const t=this;let n=!1;this.data.items_search_content.forEach((function(i,o){const s=i.indexOf(e)>=0;n=n||s,t.foundItemByIndex(o,s)})),this.showDummy(!n),this.setSearchMode(e.length>0)}showDummy(e){a.bem.toggle(this.$dom.dummy,"shown",e)}setSearchMode(e){this.$dom.container&&a.bem.toggle(this.$dom.container,"in_search",e)}destroy(){a.off(this.$dom.input),this.$dom=a.nullDom(this.$dom),this.data=a.nullDom(this.data)}}Air.define("module.subsite_search",(function(){var e=this,t=null;e.init=function(){t=new wt({input:a.find(".subsites_catalog__search__bar"),items:a.findAll(".subsites_catalog_item"),dummy:a.find(".subsites_catalog__dummy"),container:a.find(".subsites_catalog")})},e.refresh=function(){e.destroy(),e.init()},e.destroy=function(){t.destroy(),t=null}}));var _t=n(143);Air.define("module.subsite_subscribe","module.subsite_model",(function(e){let t;this.init=function(){t=new l.a({module_name:"module.subsite_subscribe",Constructor:_t.a,controlling_module:e})},this.refresh=function(){t&&t.update()},this.destroy=function(){t&&t.destroy()}}));var kt=n(69),Ct=n(148);class St{constructor(e){this.$dom={main:e.element},this.data={subsite_id:a.data(e.element,"subsite-id"),labels:a.data(e.element,"labels").split("|")}}setCount(e){a.html(this.$dom.main,function(e,t,n="&nbsp;"){return Object(Ct.a)(e)+n+Object(kt.a)(e,t)}(e,this.data.labels))}subsiteIdIs(e){return this.data.subsite_id==e}destroy(){this.$dom=a.nullDom(this.$dom),this.data=a.nullDom(this.data)}}Air.define("module.subsite_subscribers_count","module.system_messages",(function(e){var t;function n(e){var n,i;n=e.subsite_id,i=e.count,t.each((function(e,t){t.subsiteIdIs(n)&&t.setCount(i)}))}this.init=function(){t=new l.a({module_name:"module.subsite_subscribers_count",Constructor:St}),e.on("Subsite subscribers count changed",n)},this.refresh=function(){t.update()},this.destroy=function(){t.destroy(),e.off()}}));const xt=new r.a;class At{constructor({element:e,controlling_module:t}){this.$dom={main:e,list:a.bem.find(e,"list"),submit:a.bem.find(e,"submit"),close:a.bem.find(e,"close"),selectAll:a.bem.find(e,"select-all"),checkboxes:a.findAll(e,".subsites_tune__item__check")},this.controlling_module=t,this.isSelectedAll=!1,this.selectedAllTexts=a.data(this.$dom.selectAll,"texts").split(",").map(e=>e.trim()),a.delegateEvent(this.$dom.list,".subsites_tune__item__check","click",this.onCheckboxClicked.bind(this)),a.click(this.$dom.submit,this.submit.bind(this)),a.click(this.$dom.close,this.close.bind(this)),a.click(this.$dom.selectAll,this.selectAll.bind(this)),this.defaultList=this.getList()}onCheckboxClicked(e,t){a.bem.toggle(t,"active")}getList(){return this.$dom.checkboxes.reduce((function(e,t){return e[a.data(t,"subsite-id")]=a.bem.hasMod(t,"active")?1:0,e}),{})}wait(e){a.bem.toggle(this.$dom.main,"waiting",e),a.toggleClass(this.$dom.submit,"ui--bg_loading",e)}submit(){this.save(this.getList(),Object(v.c)("The feed is set up, you can always change subscriptions in your profile"))}close(){Air.import("module.auth_data").isAnon()?this.controlling_module.trigger("Want to be closed"):this.save(this.defaultList,Object(v.c)("The feed is set up, you can always change subscriptions in your profile"))}save(e,t){this.wait(!0),this.tune(e,(e,n)=>{this.wait(!1),n||(p.success(t),this.controlling_module.trigger("Saved"))})}tune(e,t){c.c({url:"/subsites/tune",data:{settings:e},complete:t,ignore_error_notify:!0})}selectAll(){this.$dom.checkboxes.forEach(e=>{a.bem.toggle(e,"active",!this.isSelectedAll)}),this.$dom.selectAll.textContent=this.isSelectedAll?this.selectedAllTexts[0]:this.selectedAllTexts[1],this.isSelectedAll=!this.isSelectedAll}}Air.define("module.subsitesTunePopup","module.popup, module.andropov, module.auth_data",(function(e,t,n){let i=null,o=null;function s(){(null===i?new Promise((e,t)=>{De.get({url:"/subsites/tune-html",data:{mode:"raw"},dataType:"json",success:function({data:n}){n.html?(i=n.html,e(n.html)):t("empty")},error:function(){t("ajax error")}})}):Promise.resolve(i)).catch(e=>{console.warn("module.subsitesTunePopup -> getPopupHtml: "+e)}).then(n=>{e.show({html:n,style:!1,onReady:()=>{o.update(),t.refresh()},onClose:()=>{o.update(),t.refresh()}})})}this.init=function(){o=new l.a({selector:".subsites_tune",Constructor:At,controlling_module:this}),xt.on("subsitesTuneWidget",s),this.on("Saved",()=>{e.hide(),n.setSubsitesTuned(!0),Air.import("module.ajaxify").reload()}),this.on("Want to be closed",()=>{e.hide(),n.setSubsitesTuned(!0)})},this.refresh=function(){this.destroy(),this.init()},this.destroy=function(){this.off(),xt.off(),o.destroy(),e.hide()}})),Air.define("module.subsites_rating","module.auth_data, module.subsite_subscribe",(function(e,t){const i=this;let o=null,s=!0,r={},c=null;function d(){o=new l.a({module_name:"module.subsites_rating",Constructor:c,controlling_module:i}),t.refresh(),e.on("Change",f)}function h(){Object.keys(r).forEach(e=>{r[e].close()}),r=a.nullDom(r,{})}function f(e){var t,n;(o.callInstancesMethod("setLoginedSubsiteId",e?e.id:null),e)?(t=e.id,n=e.hash,s&&(r.autoUpdates=new u.a({name:"subsites-rating-updates",onMessage:e=>{o.callInstancesMethod("updateItems",e)}}),t&&n&&(r.karmaUpdates=new u.a({name:"top:"+n,onMessage:e=>{"karma changed"===e.type&&o.callInstancesMethod("updateCurrentSubsiteTrend",{change:e.change,id:t})}})),Object.keys(r).forEach(e=>{r[e].open()}))):h()}this.init=()=>{this.elements&&this.elements.length&&(s=!this.elements.some(e=>"false"===a.data(e.element,"sockets")),c?d():Promise.all([n.e(0),n.e(1),n.e(83)]).then(n.bind(null,1567)).then(({Rating:e})=>{c=e,d()}))},this.refresh=()=>{this.destroy(),this.init()},this.destroy=()=>{h(),e.off(),o&&o.destroy()}}));const Ot=new r.a;Air.define("module.userLinkSocial","module.auth, module.auth_data, module.ajaxify",(function(e,t,n){this.init=function(){Ot.on("link_social",t=>{const i=a.data(t.el,"social");!1===a.bem.hasMod(t.el,"active")&&e.signinBySocial(i,"?link=1").then(()=>{n.reload()})}),Ot.on("unlink_social",e=>{const i=a.data(e.el,"social-id"),o=a.data(e.el,"social-type");t.unlinkSocial(i,o,e=>{e&&n.reload()})})},this.destroy=function(){Ot.off()}}));const Tt=new r.a;Air.define("module.userSettings","module.checkboxes, module.ajaxify",(function(e,t){let i=null,o=null,s=null,r=null,l=null,u=null,d=null,h=null;function f([{default:e},{default:t}]){let n=a.find(".input-suggestion-place-1"),c=a.find(".list-editable-place-1"),l=a.find(".input-suggestion-place-2"),u=a.find(".list-editable-place-2"),d=[],h=[];const f=a.find(".list-editable-json-1"),m=a.find(".list-editable-json-2");if(f)try{d=JSON.parse(f.textContent)}catch(e){console.error("Error in parsing json for ignored subsite list-editable",e)}if(m)try{h=JSON.parse(m.textContent)}catch(e){console.error("Error in parsing json for ignored subsite list-editable",e)}n&&(i=new e({container:n,options:{suggestionUrl:"/search-subsite",listType:"image+text",placeholder:Object(v.c)("enter name or link to profile")},events:{onSelect(e){i.clear(),o.addItem(e)}}}),n=null),c&&(o=new t({container:c,options:{listType:"image+text",list:d},events:{onClick(e){window.open("/u/"+e.id)}}}),c=null),l&&(s=new e({container:l,options:{placeholder:`${Object(v.c)("for example")}, #fallout76 ${Object(v.c)("or")} ${Object(v.c)("bitcoin")}`},events:{onSelect(e){let t=!1;new RegExp(/^[*#]?[a-zа-яё0-9_]{2,30}\*?$/,"iu").test(e)&&(t=!0),t?(s.clear(),r.addItem({text:e,id:Math.round(9999999*Math.random())})):p.error(Object(v.c)("The word contains a forbidden character or is too short"))}}}),l=null),u&&(r=new t({container:u,options:{listType:"text",list:h,getKey:"text"},events:{}}),u=null)}function m(t){const n=t.target,i=n.name.split("|")[0],o=n.name.split("|")[1],s=n.checked,r="true"===a.attr(n,"master");h.notification_checkboxes.forEach(t=>{if(!t.disabled){const e=t.name.split("|")[0],n=t.name.split("|")[1],c="true"===a.attr(t,"master");o===n&&e!==i&&(r&&!s&&(t.checked=!1),!r&&s&&c&&(t.checked=!0))}e.refresh()})}this.init=async function(){const{default:e}=await n.e(34).then(n.bind(null,1534));h={},l=new e({form:a.find(".ui_form--main_info")});const i=a.find(".ui_form--advanced");i&&(u=new e({form:i})),Promise.all([Promise.all([n.e(0),n.e(1),n.e(64)]).then(n.bind(null,1570)),Promise.all([n.e(0),n.e(1),n.e(65)]).then(n.bind(null,1571))]).then(f),h.notification_checkboxes=a.findAll(".subsite__notifications__checkbox"),h.notification_checkboxes.length&&a.each(h.notification_checkboxes,e=>{a.on(e,"change",m)}),h.club_checkboxes=a.findAll(".club-checkboxes input"),async function(){const{default:e}=await n.e(35).then(n.bind(null,421));d=new e({element:a.find(".subsite_settings--description-field")})}(),Tt.on("subsite_settings_save",async e=>{let n=l.getValues();const i=function(){if(h.notification_checkboxes.length){const e={};return h.notification_checkboxes.forEach(t=>{if(!t.disabled){const n=t.name.split("|")[0],i=t.name.split("|")[1];e[n]||(e[n]={}),e[n][i]=t.checked}}),e}}(),s=function(){if(h.club_checkboxes.length){const e={};return h.club_checkboxes.forEach(t=>{t.disabled||(e[t.name]=t.checked)}),e}}();o&&(n.ignoredSubsiteIds=o.getValue()),r&&(n.ignoredHashtagIds=r.getValue()),i&&(n=Object.assign({},n,i)),s&&(n=Object.assign({},n,s)),u&&(n=Object.assign({},n,u.getValues())),d&&(n=Object.assign({},n,await d.getValues())),l.checkValidation((i,o)=>{i?(l.showMessage(!1),c.c({url:a.data(e.el,"url"),data:n,success:(e,n)=>{p.success(n),t.reload({saveScroll:!0})},error:e=>{p.error(e)}})):l.showMessage(o,"error")})})},this.refresh=function(){this.destroy(),this.init()},this.destroy=function(){Tt.off(),l.destroy(),l=null,u&&(u.destroy(),u=null),i&&(i.$destroy(),i=null),o&&(o.$destroy(),o=null),s&&(s.$destroy(),s=null),r&&(r.$destroy(),r=null),d&&(d.destroy(),d=null),h.notification_checkboxes.length&&a.each(h.notification_checkboxes,e=>{a.off(e)}),h=a.nullDom(h)}}));const jt=new r.a;Air.define("module.userSettingsName","module.ajaxify",(function(e){let t=null,i=null,o=null,s=null;const r=".ui_form--nickname";function l({data:{mode:e}}){a.data(t.controls,"mode",e),a.attr(t.input,"disabled","initial"===e||null),"edit"===e?o=a.val(t.input):o&&a.val(t.input,o)}function u(){const t=i.getValues();c.c({url:"/users/settings/name",data:t,success:()=>{p.success(Object(v.c)("Good news, you have a new nickname")),e.reload({saveScroll:!0})}})}function d(e){switch(e){case"desktop":a.after(t.input,t.controls),a.toggleClass(t.controls,"l-inline-block",!0);break;case"mobile":a.after(t.caption,t.controls),a.toggleClass(t.controls,"l-inline-block",!1)}}this.init=async function(){const{default:e}=await n.e(34).then(n.bind(null,1534));t={input:a.find(r+' input[name="name"]'),controls:a.find(r+" .nickname-controls"),caption:a.find(r+" .caption")},i=new e({form:a.find(".ui_form--nickname")}),jt.on("nickname-change-mode",l),jt.on("nickname-save",u),t.controls&&(s=K.e.on(d),a.toggleClass(t.controls,"l-hidden",!1))},this.refresh=function(){this.destroy(),this.init()},this.destroy=function(){jt.off(),s&&s(),i.destroy(),i=null,t=a.nullDom(t)}})),Air.define("module.ia_subscribers",(function(){const e=this;e.init=function(){e.foundElements={};const t=e.elements[0].element;e.foundElements.textArea=a.find(t,'[name="js-subscribe-form"]'),e.foundElements.subscribeButton=a.find(t,'[name="js-subscribe"]'),e.foundElements.unsubscribeButton=a.find(t,'[name="js-unsubscribe"]'),e.foundElements.failedEmailsBlock=a.find(t,".subscribe-form-failed"),e.foundElements.failedEmailsList=a.find(t,".subscribe-form-failed__list"),e.foundElements.failedEmailsText=a.find(t,".subscribe-form-failed__text"),a.on(e.foundElements.subscribeButton,"click",e.subscribe),a.on(e.foundElements.unsubscribeButton,"click",e.unsubscribe)},e.subscribe=function(){const t=e.foundElements.textArea.value;e.foundElements.subscribeButton.classList.add("ui-button--loading"),t.trim()?c.c({url:"/private/subscribe/iausers",data:{emails:t},success:function(t){if(e.foundElements.textArea.value="",e.foundElements.subscribeButton.classList.remove("ui-button--loading"),p.success(Object(v.c)("Email addresses have been subscribed to newsletters")),t.failed){a.bem.hasMod(e.foundElements.failedEmailsBlock,"hidden")&&a.bem.toggle(e.foundElements.failedEmailsBlock,"hidden"),e.foundElements.failedEmailsText.textContent=t.message;for(let n=0;n<t.failed.length;n++){const i=t.failed[n];a.append(e.foundElements.failedEmailsList,a.make("LI",[],{innerHTML:i}))}}else a.bem.hasMod(e.foundElements.failedEmailsBlock,"hidden")||a.bem.toggle(e.foundElements.failedEmailsBlock,"hidden")}}):(p.error(Object(v.c)("You are trying to send an empty field")),e.foundElements.subscribeButton.classList.remove("ui-button--loading"))},e.unsubscribe=function(){const t=e.foundElements.textArea.value;e.foundElements.unsubscribeButton.classList.add("ui-button--loading"),t.trim()?c.c({url:"/private/unsubscribe/iausers",data:{emails:t},success:function(t){if(e.foundElements.textArea.value="",e.foundElements.unsubscribeButton.classList.remove("ui-button--loading"),p.success(Object(v.c)("Email addresses have been unsubscribed from newsletters")),t.failed){a.bem.hasMod(e.foundElements.failedEmailsBlock,"hidden")&&a.bem.toggle(e.foundElements.failedEmailsBlock,"hidden"),e.foundElements.failedEmailsText.textContent=t.message;for(let n=0;n<t.failed.length;n++){const i=t.failed[n];a.append(e.foundElements.failedEmailsList,a.make("LI",[],{innerHTML:i}))}}else a.bem.hasMod(e.foundElements.failedEmailsBlock,"hidden")||a.bem.toggle(e.foundElements.failedEmailsBlock,"hidden")}}):(p.error(Object(v.c)("You are trying to send an empty field")),e.foundElements.unsubscribeButton.classList.remove("ui-button--loading"))}})),Air.define("module.last_seen_date","module.auth_data",(function(e){const t=this;function n(e){e>(parseInt(D.a("last-recent-seen"))||0)&&D.c("last-recent-seen",e,365)}function i(i){const o=function(){if(t.elements&&t.elements[0]){return(parseInt(a.data(t.elements[0].element,"last-date"))||0)+1}return null}();null!==o?e.isAnon()?(n(o),i()):function(e){c.c({url:"/recent/lastSeen",success:e=>{e.time>0&&n(e.time)},complete:()=>{e()}})}(i):i()}this.init=function(e){i(e)},this.refresh=function(e){i(e)}}),{async:!0}),Air.define("module.newEntriesHorizon","module.delegator",(function(e){const t=Object(v.c)("You have already seen the rest of the entries");let n=[],i=null,o=null,s=null,r=0;function c(e){e.forEach(e=>{if(e.target===o){e.addedNodes.forEach(e=>{const t=a.findAll(e,"[data-publish-date]");n.length<50?n.push(...t):n=t}),l()}})}function l(e=!0){if(0!==r)for(let t=0,o=n.length;t<o;t+=1){const o=n[t];if(parseInt(a.data(o,"publish-date"),10)<r){if(u(),0===t&&!e)break;a.before(o.parentNode,i),a.bem.add(i,"visible"),n=[];break}}}function u(){s&&(s.disconnect(),s=null)}this.init=()=>{if(!this.elements||!this.elements.length)return;const u=this.elements[0].element,d=a.find(u.parentNode,'[air-module="module.feed"]'),h=a.findAll(d,"[data-publish-date]");n=h,o=a.bem.find(d,"container"),function(){if(!i){i=a.make("div","new-entries-horizon",{textContent:t});const e=a.parseHTML('<svg xmlns="http://www.w3.org/2000/svg" width="49" height="40" fill="none" viewBox="0 0 49 40">\n        <path data-accent-color-fill fill="#F57" fill-rule="evenodd" d="M3.33337 10c0-2.76142 2.23858-5 5-5H31.6667c2.7614 0 5 2.23858 5 5v3.3333c0 2.7615-2.2386 5-5 5H8.33337c-2.76142 0-5-2.2385-5-5V10zm5-1.66667c-.92047 0-1.66666.7462-1.66666 1.66667v3.3333c0 .9205.74619 1.6667 1.66666 1.6667H31.6667c.9205 0 1.6667-.7462 1.6667-1.6667V10c0-.92047-.7462-1.66667-1.6667-1.66667H8.33337z" clip-rule="evenodd"/>\n        <path fill="#fff" fill-opacity=".1" fill-rule="evenodd" d="M3.33337 10c0-2.76142 2.23858-5 5-5H31.6667c2.7614 0 5 2.23858 5 5v3.3333c0 2.7615-2.2386 5-5 5H8.33337c-2.76142 0-5-2.2385-5-5V10zm5-1.66667c-.92047 0-1.66666.7462-1.66666 1.66667v3.3333c0 .9205.74619 1.6667 1.66666 1.6667H31.6667c.9205 0 1.6667-.7462 1.6667-1.6667V10c0-.92047-.7462-1.66667-1.6667-1.66667H8.33337z" clip-rule="evenodd"/>\n        <path fill="#000" fill-opacity=".1" fill-rule="evenodd" d="M3.33337 10c0-2.76142 2.23858-5 5-5H31.6667c2.7614 0 5 2.23858 5 5v3.3333c0 2.7615-2.2386 5-5 5H8.33337c-2.76142 0-5-2.2385-5-5V10zm5-1.66667c-.92047 0-1.66666.7462-1.66666 1.66667v3.3333c0 .9205.74619 1.6667 1.66666 1.6667H31.6667c.9205 0 1.6667-.7462 1.6667-1.6667V10c0-.92047-.7462-1.66667-1.6667-1.66667H8.33337z" clip-rule="evenodd"/>\n        <g fill-rule="evenodd" clip-rule="evenodd" opacity=".3">\n          <path data-accent-color-fill fill="#F57" d="M3.33337 26.6667c0-2.7614 2.23858-5 5-5H31.6667c2.7614 0 5 2.2386 5 5V30c0 2.7614-2.2386 5-5 5H8.33337c-2.76142 0-5-2.2386-5-5v-3.3333z"/>\n          <path fill="#fff" fill-opacity=".1" d="M3.33337 26.6667c0-2.7614 2.23858-5 5-5H31.6667c2.7614 0 5 2.2386 5 5V30c0 2.7614-2.2386 5-5 5H8.33337c-2.76142 0-5-2.2386-5-5v-3.3333z"/>\n          <path fill="#000" fill-opacity=".1" d="M3.33337 26.6667c0-2.7614 2.23858-5 5-5H31.6667c2.7614 0 5 2.2386 5 5V30c0 2.7614-2.2386 5-5 5H8.33337c-2.76142 0-5-2.2386-5-5v-3.3333z"/>\n        </g>\n        <path stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width="9" d="M25.5 29l4 4L44 18.5"/>\n        <path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-opacity=".05" stroke-width="9" d="M25.5 29l4 4L44 18.5"/>\n        <path data-accent-color-stroke stroke="#F57" stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M25.5 29l4 4L44 18.5"/>\n        <path stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-opacity=".1" stroke-width="3" d="M25.5 29l4 4L44 18.5"/>\n        <path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-opacity=".1" stroke-width="3" d="M25.5 29l4 4L44 18.5"/>\n      </svg>');a.prepend(i,e)}}(),o&&(s=new MutationObserver(c),s.observe(o,{childList:!0})),e.on("Initial data received new delegated data",()=>{r=this.delegated_data.lastSeenDate,l(!1)})},this.refresh=()=>{this.destroy(),this.init()},this.destroy=()=>{n=[],e.off(),u()}}));const Et="pigeon_event_"+Math.random(),Pt=new Y.b;function It({key:e,newValue:t}){if("pigeon_event"===e){const{name:e,data:n,source:i}=JSON.parse(t);i!==Et&&Pt.trigger(e,n)}}a.on(window,"storage.pigeon",It);const Mt={MyPopular:0,MyRecent:1,AllPopular:2,AllRecent:3},$t=new Y.a(Pt);Air.define("module.new_entries","module.subsite_model, module.delegator, module.system_messages",(function(e,t,n){let i=null,o=Mt.MyPopular;this.setUnreadCount=function(e){return e=parseInt(e)||0,i!==e&&(i=e,this.triggerOnce("Unread count changed",i),!0)},this.getUnreadCount=function(){return i},this.resetUnreadCount=function(){this.setUnreadCount(0),function(e,t=null){g.d("pigeon_event",JSON.stringify({name:e,data:t,uid:Math.random(),source:Et}))}("New entries reset")},this.incrementUnreadCount=function(){this.setUnreadCount(this.getUnreadCount()+1)},this.processSocketMessage=function(t){e.isSubscribedTo(t.subsite_id)&&this.incrementUnreadCount()},this.getDefaultFeedType=function(){return o},this.init=function(){t.on("Initial data received new delegated data",()=>{var e;this.setUnreadCount(this.delegated_data.unread_count),e=this.delegated_data.defaultFeedType,o=e}),n.on("New entry published",this.processSocketMessage.bind(this)),$t.on("New entries reset",()=>{this.setUnreadCount(0)})},this.destroy=function(){$t.off(),t.off(),n.off()}})),Air.define("module.new_entries_loader","module.new_entries",(function(e){const t=this;let n=null;function i(e){var t;t=e>0,a.bem.toggle(n.main,"hidden",!t),a.html(n.counter,e),a.html(n.text,Object(v.a)("new post","new posts",e))}t.init=function(){n={},n.main=t.elements[0].element,n.counter=a.bem.find(n.main,"counter"),n.text=a.bem.find(n.main,"text"),e.on("Unread count changed",i),e.resetUnreadCount()},t.refresh=function(){t.destroy(),t.init()},t.destroy=function(){e.off(),n=a.nullDom(n)}}));n(165);var Lt=n(35);Air.defineModule("module.cheats",(function(){const e=this;let t=null,n=null;const i=-1!==window.location.search.indexOf("?console");function o(){return new Promise((i,o)=>{n?i(n):new Promise((n,i)=>{const{settings:o}=e.elements[0],{jsPath:s,fontsPath:r,cssPath:a}=o;return Object(I.a)(s,e=>{e&&window.CheatsConsole?(t=window.CheatsConsole,t.loadStyles(r).then(()=>t.loadStyles(a)).then(()=>{n()})):i(new Error("Error occured while loading resources"))},!0)}).then(()=>{const{element:o}=e.elements[0];n=new t(o),n.init(),i(n)})})}function s(e){Lt.a(e,"TILDA","BACKSLASH")&&e.target===document.body&&(e.preventDefault(),r())}function r(){o().then(e=>{e.isConsoleOpened?e.closeConsole():e.openConsole()})}this.init=()=>{a.on(document,"keydown.cheats",s),i&&r()},this.refresh=()=>{},this.destroy=()=>{a.off(document,".cheats")}}));n(166);Air.defineModule("module.countdownTeaser","",(function(){const e=this,t=new Date("May 26 2021 11:00:00").getTime();let n,i,o,s;const r=()=>{o=requestAnimationFrame((function e(s){var r=new Date;r.setMinutes(r.getMinutes()+r.getTimezoneOffset()+180);const c=t-r.getTime();c>0?(n.classList.add("vc-openTelegram-countdown"),(e=>{const t=Math.floor(e/864e5),n=Math.floor(e%864e5/36e5),o=Math.floor(e%36e5/6e4),s=Math.floor(e%6e4/1e3),r=`<div class="vc-openTelegram__timer-cell"><div class="vc-openTelegram__number">${("0"+t).slice(-2)}</div></div><span class="vc-openTelegram__timer-divider">:</span>`,a=`<div class="vc-openTelegram__timer-cell"><div class="vc-openTelegram__number">${("0"+n).slice(-2)}</div></div><span class="vc-openTelegram__timer-divider">:</span>`,c=`<div class="vc-openTelegram__timer-cell"><div class="vc-openTelegram__number">${("0"+o).slice(-2)}</div></div><span class="vc-openTelegram__timer-divider">:</span>`,l=`<div class="vc-openTelegram__timer-cell"><div class="vc-openTelegram__number">${("0"+s).slice(-2)}</div></div>`;i&&(i.innerHTML=`${r}${a}${c}${l}`)})(c),o=requestAnimationFrame(e),a.css(n,"opacity",1)):(n.classList.add("vc-openTelegram-static"),a.css(n,"opacity",1))}))};e.init=()=>{n=e.elements[0].element,i=a.find(n,"[data-countdown-display]"),K.e.is(K.b)?e.destroy():(s=K.e.on(()=>{K.e.is(K.b)&&e.destroy()}),r())},e.refresh=()=>{e.destroy(),e.init()},e.destroy=()=>{cancelAnimationFrame(o),a.remove(n),s&&(s(),s=null)}}));var Rt=n(22);Air.define("module.distributionUnit",(function(){const e={},t="dstr-unit",n=[];let i,o=!1,s=!1,r=!1;const c=e=>{let t=Object(h.replaceSpacesAfterPrepositions)(e);return t=t.split(" "),t[t.length-1]=`<span>${t[t.length-1]}${a.svgHtml("v_expand",16,16)}</span>`,t.join(" ")};this.init=()=>{if(!!D.a("distribution-unit-hidden")&&K.e.is("mobile"))return;const{element:l,settings:u}=this.elements[0];var d,h,f,m,p;d=l,h=u.title,f=u.url,m=u.isPaidAndBannersEnabled,e.unit={},e.unit.main=a.make("div",t,{innerHTML:`\n      <div class="${t}__outer">\n        <div class="l-island-a">\n            <a href="${f}" target="_blank" class="${t}__link"></a>\n            <div class="${t}__inner">\n                <div class="${t}__text">\n                    <a href="${f}" target="_blank" class="${t}__text-link">${c(h)}</a>\n                </div>\n                <div class="${t}__close" data-gtm="Distribution unit — Close — Click"></div>\n            </div>\n        </div>\n      </div>\n      `}),e.unit.button=a.make("div",["ui-button","ui-button--5"],{innerText:"Купить"}),e.unit.link=a.find(e.unit.main,`.${t}__link`),e.unit.inner=a.find(e.unit.main,`.${t}__inner`),e.unit.text=a.find(e.unit.main,`.${t}__text`),e.unit.close=a.find(e.unit.main,`.${t}__close`),a.append(e.unit.close,a.svg("v_close",24,24)),a.one(e.unit.close,"click",()=>{if(K.e.is("desktop")){let t="Вы можете отключить рекламу, купив платную подписку",n="/plus";m&&(t="Вы можете отключить рекламу в настройках",n="/u/me/settings",e.unit.button.innerHTML="Перейти"),a.remove(e.unit.close),a.html(e.unit.text,t),a.append(e.unit.inner,e.unit.button),a.attr(e.unit.link,"href",n),a.attr(e.unit.link,"data-gtm","Distribution unit — Plus — Click")}else a.remove(e.unit.main),D.c("distribution-unit-hidden",!0,1)}),a.after(d,e.unit.main),p=u.id,e.page=a.find(".page.page--entry"),e.header=a.find(e.page,".l-entry__header"),e.content=a.find(e.page,".l-entry__content .content"),e.blocks=a.children(e.content,void 0).slice(0,4),i=new Rt.a((i,c)=>{i===e.header&&(o=c),e.blocks.forEach((e,t)=>{e===i&&(n[t]=c)}),i===e.content&&(s=c);const l=!o&&s&&!n.some(e=>e);a.toggleClass(e.unit.main,t+"--active",l),l&&!r&&De.post({url:`/specials/${p}/hits`,complete:()=>{r=!0}})},{offset:-60}),i.addElement(e.header),i.addElement(e.content),e.blocks.forEach(e=>i.addElement(e))},this.refresh=()=>{this.destroy(),this.init()},this.destroy=()=>{i&&i.destroy(),e.unit&&(a.off(e.unit.close),a.remove(e.unit.main),e.unit=null),o=!1,s=!1,r=!1}})),Air.defineModule("module.igrozhur","",(function(){let e=null;this.init=async()=>{const{default:t}=await Promise.all([n.e(0),n.e(1),n.e(7),n.e(93)]).then(n.bind(null,1572));e=new l.a({moduleName:"module.igrozhur",Constructor:t})},this.refresh=()=>{e.callInstancesMethod("refresh")},this.destroy=()=>{e.destroy()}}));var Dt=n(51);const Bt="with--dragging",Ut="dragged";class Nt{constructor({helper:e,screen:t,offset:n}){this.helper=e,this.screen=t,this.rect=null,this.transform={x:0,y:0},this.offset={},this.parseOffset(n),this.align={x:null!==this.offset.right?"right":"left",y:null!==this.offset.bottom?"bottom":"top"},this.scrollPosition={x:null,y:null},this.initDrag()}parseOffset(e){Object.keys(e).forEach(t=>{const n=parseInt(e[t]);this.offset[t]=isNaN(n)?null:n})}initDrag(){Dt.a(this.helper,{start:(e,t,n)=>{n.preventDefault(),n.stopPropagation(),a.addClass(document.body,Bt),a.bem.add(this.screen,Ut),this.rect=a.rect(this.screen),this.scrollPosition.x=a.windowLeft(),this.scrollPosition.y=a.windowTop(),this.disableScroll()},move:(e,t)=>{this.handleDrag(e,t)},end:(e,t)=>{this.handleDrag(e,t,!0),a.removeClass(document.body,Bt),this.enableScroll()}})}disableScroll(){a.on(window,"scroll.draggableScreen",this.preventScroll.bind(this)),a.on(window,"wheel.draggableScreen",this.preventScroll.bind(this)),a.on(window,"DOMMouseScroll.draggableScreen",this.preventScroll.bind(this))}enableScroll(){a.off(window,".draggableScreen")}preventScroll(e){return e.preventDefault(),e.stopPropagation(),window.scroll(this.scrollPosition.x,this.scrollPosition.y),!1}handleDrag(e=0,t=0,n=!1){const i={x:this.transform.x+e,y:this.transform.y+t},o=a.clientWidth(this.screen),s=a.clientHeight(this.screen),r=document.documentElement.clientWidth||document.body.clientWidth,c=document.documentElement.clientHeight||document.body.clientHeight;if(this.rect.top+t<0){const e=-1*(c-s)+this.offset.bottom,t=0-this.offset.top;i.y="bottom"===this.align.y?e:t}if(this.rect.left+e<0){const e=-1*(r-o)+this.offset.right,t=0-this.offset.left;i.x="right"===this.align.x?e:t}if(this.rect.bottom+t>c){const e=0+this.offset.bottom,t=c-s-this.offset.top;i.y="bottom"===this.align.y?e:t}if(this.rect.right+e>r){const e=this.offset.right,t=r-o-this.offset.left;i.x="right"===this.align.x?e:t}this.setTransform(i),n&&(this.transform.x=i.x,this.transform.y=i.y)}setTransform({x:e=0,y:t=0}){a.css(this.screen,{transform:`translate3d(${e}px, ${t}px, 0)`})}resetPosition(){this.transform.x=0,this.transform.y=0,a.bem.remove(this.screen,Ut),this.setTransform(this.transform)}restorePosition(){this.setTransform(this.transform)}nullPosition(){this.setTransform({x:0,y:0})}onWindowResize(){this.rect=a.rect(this.screen),this.handleDrag(0,0,!0)}destroy(){this.resetPosition(),Dt.b(this.helper),this.helper=null,this.screen=null,this.rect=null,this.offset={},this.align={},a.nullDom(this.scrollPosition)}}const Ht="with--resizing";class Ft{constructor({screen:e,videoContainer:t,resizerX:n,resizerY:i,header:o,maxWidth:s,minWidth:r,cookieName:a,onEnd:c}){this.cookieName=a,this.screen=e,this.videoContainer=t,this.resizerX=n,this.resizerY=i,this.header=o,this.rect=null,this.size={width:D.a(this.cookieName),height:null},this.maxWidth=s,this.minWidth=r,this.onEnd=c,this.initResize()}updateMinWidth(e){this.minWidth=e}initResize(){const e=(e="y")=>({start:(e,t,n)=>{const{target:i}=n,o=a.cssSingle(i,"cursor");a.addClass(document.body,Ht),a.cssSingle(document.body,"cursor",o),this.rect=a.rect(this.screen),this.size.width=a.clientWidth(this.screen),this.size.height=a.clientHeight(this.screen)},move:(t,n,i)=>{i.stopPropagation(),i.preventDefault(),this.handleResize(e,t,n)},end:(e,t)=>{a.removeClass(document.body,Ht),a.cssSingle(document.body,"cursor",""),this.size.width=a.clientWidth(this.screen),this.size.height=a.clientHeight(this.screen),this.onEnd&&this.onEnd(this.size),this.cookieName&&D.c(this.cookieName,this.size.width,365)}});Dt.a(this.resizerX,e("x")),Dt.a(this.resizerY,e("y"))}handleResize(e="y",t=0,n=0){const i=a.clientWidth(this.videoContainer)/a.clientHeight(this.videoContainer),o="y"===e?n*i:t,s="y"===e?n:t*(1/i);let r=Math.round(this.size.width-o);const c=a.clientHeight(this.header);this.rect.left+o<0&&(r=this.rect.right),this.rect.top+s<0&&(r=this.rect.bottom*i-c*i),r>this.maxWidth?r=this.maxWidth:r<this.minWidth&&(r=this.minWidth),a.css(this.screen,{width:r+"px"})}destroy(){Dt.b(this.resizerX),Dt.b(this.resizerY),this.cookieName=null,this.screen=null,this.videoContainer=null,this.resizerX=null,this.resizerY=null,this.header=null,this.rect=null,this.size={},this.maxWidth=null,this.minWidth=null,this.onEnd=null}}const Vt=new r.a;Air.define("module.liveStream",(function(){let e=null,t=!1;function i(){e&&e.onWindowResize()}function o(n=!0){e&&(n&&T.sendDefaultEvent("Sidebar — Video Stratum — "+(t?"Pause":"Play")),e[t?"deactivate":"activate"](!1))}async function s({data:s,el:r,event:c},l=!1){if(e)return void o();const{default:u}=await n.e(37).then(n.bind(null,1538));e=new u(s,{$:a,DraggableScreen:Nt,ResizableScreen:Ft,Analytics:T},{onActivate:()=>{t=!0,r&&(a.bem.toggle(r,"paused",!1),a.bem.toggle(r,"playing",!0))},onDeactivate:()=>{t=!1,r&&(a.bem.toggle(r,"playing",!1),a.bem.toggle(r,"paused",!0))},onClose:()=>{t=!1,r&&(a.bem.toggle(r,"playing",!1),a.bem.toggle(r,"paused",!1)),e=null}}),a.on(window,"resize.liveStream",i),T.sendDefaultEvent("Sidebar — SiteNavigation — Video Stratum"),l||o(!1)}this.init=()=>{const e=this.elements[0].settings;e&&e.params.isLegacy&&s({data:e.params,el:a.find(document,".live-stream-button")},!0),Vt.on("toggleLiveStream",s)},this.refresh=()=>{},this.destroy=()=>{Vt.off(),a.off(window,"resize.liveStream"),e&&(e.destroy(),e=null)}}));n(167);Air.defineModule("module.nativeAd",(function(){let e=null,t=!1,i=!1;this.init=async()=>{if(!Object(a.findAll)(document,"[data-kokoku]").length||t||i)return;i=!0;const{default:o}=await n.e(39).then(n.bind(null,1539));e=new l.a({selector:"[data-kokoku]",Constructor:o,scrollers:[{method:"onVisible",offset:100}]}),i=!1,t=!0},this.refresh=()=>{e?e.update():this.init()},this.destroy=()=>{e&&e.clear(),t=!1,i=!1}})),Air.define("module.nikeRun",(function(){const e=this;let t=null,i=null,o=null,s=null;const r=({Special:e})=>{t=new e({parent:i,sendAnalyticsEvent:a}),o=new Rt.a((e,t)=>{t&&(a("Widget","Show"),o.destroy(),o=null)},{offset:-100}),o.addElement(i)},a=(e,t="Click")=>{T.send(["Nike Run","Location: "+s,e,t])};e.init=()=>{i=e.elements[0].element,s=i.dataset.specialLocation||"index",Promise.all([n.e(0),n.e(91)]).then(n.bind(null,1553)).then(r).catch(e=>{console.error("An error occurred while loading the component:",e)})},e.refresh=()=>{e.destroy(),e.init()},e.destroy=()=>{o&&(o.destroy(),o=null),t&&(t.destroy(),t=null),i=null}}));n(168),n(169),n(170);Air.define("module.psbStories",(function(){const e=this;let t=null,i=null,o=null,s=null;function r({SpecialStories:n}){t=new n({widgetParent:i,controllingModule:e,location:s}),o=new Rt.a((t,n)=>{n&&(e.sendAnalyticsEvent("Widget","Show"),o.destroy(),o=null)},{offset:-100}),o.addElement(i)}e.sendAnalyticsEvent=(e,t)=>{T.send(["PSB Stories Special — Location: "+s,e,t])},e.init=()=>{i=e.elements[0].element,s=i.dataset.specialLocation||"index","page"===s&&A.d||Promise.all([n.e(0),n.e(1),n.e(81)]).then(n.bind(null,1565)).then(r).catch(e=>{console.error("An error occurred while loading the component:",e)})},e.refresh=()=>{e.destroy(),e.init()},e.destroy=()=>{o&&(o.destroy(),o=null),t&&(t.destroy(),t=null),i=null}}));n(171);Air.defineModule("module.yap","",(function(){let e=null;this.init=async()=>{const{default:t}=await Promise.all([n.e(0),n.e(1),n.e(90)]).then(n.bind(null,1549));e=new l.a({moduleName:"module.yap",Constructor:t})},this.refresh=()=>{e.update()},this.destroy=()=>{}}));const qt={},zt={};function Wt(e,t){qt[e]=t}function Yt(e,t){const n=[];let i,o;switch(e){case"article":o=function(){let e,t=a.find(".entry_data");return!!t&&(e=a.html(t),e=JSON.parse(e||{}),t=null,!!e&&e.tags)}();break;case"page":o=function(){let e,t=a.find(".ui-page-header__title--hashtag");return!!t&&(e=a.html(t),t=null,[e.toLowerCase()])}()}return!!o&&(o.forEach((function(o){for(i in t[e])t[e][i]===o&&n.push(i)})),n.length>0&&n.join(":"))}Air.define("module.targeting","module.page, module.auth_data",(function(e,t){var n;this.init=function(){n={article:{14:"интерфейсы",18:"кейсы",20:"рынок_игр",21:"вакансии",23:"маркетинг",37:"офлайн",41:"будущее",47:"авто",56:"блокчейн",7:"стартапы",3:"партнерский",68:"дизайн",69:"техника",70:"skillbox",71:"навсюголову",79:"нужноделать",80:"рунет2018",82:"итоги2018",83:"иннокластер"},page:{16:"интерфейсы",17:"кейсы",19:"рынок игр",22:"вакансии",24:"маркетинг",25:"офлайн",26:"будущее",27:"авто",18:"стартапы",2:"партнерский"}},Wt("3",(function(){var t,i=e.getNavigationName();return e.isContent()?(t=Yt("article",n),"blog"===i&&(!1===t?t="51":t+=":51"),"vacancies"===i&&(t="1")):!1===(t=Yt("page",n))&&("mainpage"===i&&(t="15"),"blog"===i&&(t="50")),t||(t=""),t})),Wt("4",(function(){return t.get()?"1":"0"})),Wt("5",(function(){return Object(dt.f)()>=1520?"1":"0"}))},this.update=function(){!function(){let e;for(e in qt)zt["puid"+e]=qt[e]()}()},this.get=function(){return zt}}));const Xt=new r.a;Air.defineModule("module.vacancy_admin","module.location, module.etc_controls, module.ajaxify",(function(e,t,n){var i=this;this.prolong=function(e){S({name:"confirm",data:{title:Object(v.c)("Well well"),text:Object(v.c)("You will be able to edit the vacancy and post it again"),button_yes:Object(v.c)("Got it"),button_no:Object(v.c)("Cancel")},onClose:function(t){t&&c.c({url:"/job/unarchive/"+e,data:{},success:function(e){n.goTo(e.redirect_uri)},error:function(){p.error(Object(v.c)("Something went wrong"))}})}})},i.init=function(){Xt.on("vacancy_prolong",e=>{this.prolong(e.data.id)}),t.defineControl({name:"archive_vacancy",use:"button",label:Object(v.c)("Archive"),action:function(t,n){S({name:"confirm",data:{title:Object(v.c)("Archive")+"?",text:Object(v.c)("The vacancy will be unpublished. This action is irreversible."),button_yes:Object(v.c)("Archive"),button_no:Object(v.c)("Cancel")},onClose:function(n){n&&c.c({url:"/job/archive/"+a.data(t,"content-id"),data:{},success:function(){e.reload()},error:function(){p.error(Object(v.c)("Something went wrong"))}})}}),n(!0)}}),t.defineControl({name:"unarchive_vacancy",use:"button",label:Object(v.c)("Prolong"),action:(e,t)=>{this.prolong(a.data(e,"content-id")),t(!0)}}),t.defineControl({name:"edit_vacancy",use:"link",label:Object(v.c)("Edit"),getHref:function(e){return"/job/edit/"+a.data(e,"content-id")}}),t.defineControl({name:"delete_vacancy",use:"button",label:Object(v.c)("Remove"),action:function(e,t){const o="true"===a.data(e,"redirect");S({name:"confirm",data:{title:Object(v.c)("Remove?"),text:Object(v.c)("The vacancy will be removed. This action is irreversible."),button_yes:Object(v.c)("Remove"),button_no:Object(v.c)("Cancel")},onClose:function(t){const s=a.data(e,"content-id");t&&c.c({url:"/job/delete/"+s,data:{},success:function(){p.success(Object(v.c)("The vacancy has been removed")),i.trigger("Vacancy removed",parseInt(s)),o&&n.goTo("/job")},error:function(){p.error(Object(v.c)("Something went wrong"))}})}}),t(!0)}})},i.refresh=function(){i.destroy(),i.init()},i.destroy=function(){Xt.off()}}));n(119);Air.defineModule("module.vacancy_edit","module.ajaxify",(function(e){var t,i=this,o=null,s=function(e,t,n){switch(e){case"area":o.show("city_id",2!=t[0]);break;case"company_id":if(0==t[0]&&void 0!==n){const e=n.handle.instance.getLastSearchValue();null!==e&&o.value("name",e)}o.value("company_toggler",0==t[0]?"new":"find");break;case"company_toggler":o.showBySelector(".vacancy_edit__form__company_data","new"===t),o.showBySelector(".vacancy_edit__form__company_id","find"===t),o.showBySelector(".vacancy_edit__form__company_card","find"===t);break;case"additional_toggler":o.show("desired_skills","none"!==t),o.show("office_image","none"!==t),o.show("additional","none"!==t),o.show("additional_toggler","none"===t)}};let r=[];var l=function(e,n){if("new"===t&&o){const t=n[0];switch(e){case"company_id":if(t&&t.last_benefits){const e=JSON.parse(o.value("benefits")||"[]"),n=e.filter(e=>!r.includes(e)).length>0?e:t.last_benefits;o.value("benefits",n),r=t.last_benefits}}}},u=async function(){const{default:t}=await n.e(35).then(n.bind(null,421));(o=new t({element:a.find(".vacancy_edit__form .form2"),actions:{publish_without_payment:{getUrl:function(){return"/job/publish_without_payment/"+o.value("vacancy_id")},success:function(t){console.log("publish_without_payment success",t),e.goTo(t.result.redirect_uri)},error:function(e){console.log("publish_without_payment error",e)}},publish:{getUrl:function(){return"/job/publish/"+o.value("vacancy_id")},success:function(e){console.log("publish success",e)},error:function(e){console.log("publish error",e)}},approve:{getUrl:function(){return"/job/approve/"+o.value("vacancy_id")},success:function(t){console.log("approve success",t),e.goTo(t.result.redirect_uri)},error:function(e){console.log("approve error",e)}},reject:{getUrl:function(){return S({name:"vacancy_reject",onClose:function(t,n){t&&c.c({url:"/job/reject/"+o.value("vacancy_id"),data:{rejection_reason_text:n.reason_text},success:function(t){p.success(Object(v.c)("The vacancy has been rejected")),e.goTo(t.result.redirect_uri)},error:function(){p.error(Object(v.c)("Something went wrong"))}})}}),null},success:function(e){console.log("reject success",e)},error:function(e){console.log("reject error",e)}},save:{getUrl:function(){return"/job/save"},success:function(t){console.log("save success",t),e.goTo(t.vacancy.redirect_uri)},error:function(e){console.log("save error",e)}},archive:{getUrl:function(){return"/job/archive/"+o.value("vacancy_id")},success:function(t){console.log("archive success",t),e.goTo(t.redirect_uri)},error:function(e){console.log("archive error",e)}},delete:{getUrl:function(){return S({name:"confirm",data:{title:Object(v.c)("Remove the vacancy?"),text:Object(v.c)("You will not be able to restore it."),button_yes:Object(v.c)("Yes"),button_no:Object(v.c)("No")},onClose:function(t){t&&c.c({url:"/job/delete/"+o.value("vacancy_id"),data:{},success:function(){p.success(Object(v.c)("The vacancy has been removed")),e.goTo("/job")},error:function(){p.error(Object(v.c)("Something went wrong"))}})}}),null},success:function(e){console.log("delete success",e)},error:function(e){console.log("delete error",e)}},pay:{getUrl:function(){return"/job/pay/"+o.value("vacancy_id")},success:function(e){console.log("pay success",e)},error:function(e){console.log("pay error",e)}}},events:{change:s,changeItems:l},focus:"title",valuesProcessor:e=>(e.office_image&&(e.additional.attaches=[{type:"image",data:JSON.parse(e.office_image)}]),e)})).getValues().then(e=>{for(const t in e)s(t,e[t])})};i.init=function(){t=a.data(a.find(".page--vacancy_edit"),"mode"),u()},i.refresh=function(){i.destroy(),i.init()},i.destroy=function(){null!==o&&(o.destroy(),o=null)}}));const Jt=new r.a;Air.defineModule("module.vacancy_receipt","module.payment_receipt, module.pay, module.popup, module.etc_controls, module.vacancy_admin, module.inputs, module.ajaxify, module.auth_data",(function(e,t,i,o,s,r,l,d){const m=this,g={};let b,y,w,_,k,C,S=null,x=null;const A={texts:{success_button:Object(v.c)("To my vacancies"),success_text:Object(v.c)("After moderation, vacancies will appear on the site")},cashier:{id:0,public_key:""},order:{card_url:"/job/order/create/cloudpayments",invoice_url:"/job/order/create/invoice"},redirect_url:"/u/me/vacancies",reload_after_success:!0,show_back_button:!1};function O(e){const t={vacancies_ids:[],announcement:!1,views_promo:!1},n=["announcement","daily_promo"];return e.forEach(e=>{n.includes(e.id)?"daily_promo"===e.id?t.views_promo=function(e){if(!e||!e.items)return!1;return{items:e.items.map(e=>e.id),company:e.items[0].company,viewsCount:e.viewsCount}}(k):t[e.id]=!0:t.vacancies_ids.push(e.id)}),t}function T(e){const t=[];return e.forEach(e=>{t.push({title:e.title,id:e.id,checkbox:!0,checked:e.is_checked,price:y.costs.one_vacancy_price/100})}),t}function j(e,n){A.order.data=O(n.list),A.user_email=y.user_email,A.sum=n.sum,A.cashier.id=y.cashier,A.cashier.public_key=y.cp_public;const i=a.svgHtml("ui_pci",48,30),o=`<p>\n          ${Object(v.c)("By paying for a vacancy publishment, you agree to all")}\n            <a class="t-link-classic" href="/job/rules" target="_blank" data-no-ajax>\n              ${Object(v.b)("To agree to","rules")}\n            </a>\n            ${Object(v.c)("and")}\n            <a class="t-link-classic" href="/job/agreement" target="_blank" data-no-ajax>\n              ${Object(v.b)("To agree to","conditions")}\n            </a>.\n          </p>`;A.texts.footer="invoice"===e?o:o+i,t.show(e,A)}function E(e){e&&e.length>0?c.b({url:"/job/unpaid/preview",data:{ids:e,mode:"raw"},success:function(e){P(e.html)}}):P("")}function P(e){const t=a.find('[air-module="module.entry"]'),n=a.prev(t);a.hasClass(n,"status_panel")&&a.remove(n),t&&(a.toggleClass(t,"l-pv-30",!1),a.toggleClass(t,"lm-pt-15",!1),a.toggleClass(t,"lm-pb-30",!1),a.toggleClass(t,"l-island-bg",!1),a.html(t,e),o.refresh())}function I(){i.show({template:"announcement_preview_vacancy",data:{company:y.list[0].company,strings:y.strings,price:h.numberFormat(y.costs.announcement_price/100),hasAnnouncement:_,i18n:{addAd:Object(v.c)("Add an ad"),lookingForSpecialists:Object(v.c)("is looking for specialists"),total:Object(v.c)("Total"),totalPrice:Object(v.c)("Total price"),addToOrder:Object(v.c)("Add to the order"),cancel:Object(v.b)("Что сделать? Отменить","Cancel"),remove:Object(v.c)("Remove")}}})}function M(){i.show({template:"dailyPromo_preview",data:{i18n:{addAd:Object(v.c)("Add an ad"),adWillBeDisplayed:Object(v.c)("The ad will be displayed on the home page and below the articles.")}},onReady:e=>{const t=JSON.parse(m.elements[0].element.querySelector("textarea").textContent);S=a.find(e,".vacancyDailyPromo"),Promise.all([n.e(0),n.e(1),n.e(8),n.e(9),n.e(85)]).then(n.bind(null,1579)).then(e=>{const n=e.VacancyBoosterForm;x=new n({air:{authData:d,Timer:f.a,notify:p,Socket:u.a},container:S,userHash:y.hash,params:{items:y.list.filter(e=>w.includes(e.id)),modeData:t.modeData,siteTitle:t.siteTitle,viewsCount:k?k.viewsCount:y.default_views_count,hasSavedData:!!k},onConfirm(e){C=!0,k=JSON.parse(JSON.stringify(e)),b.checkItem("daily_promo"),b.updateItem("daily_promo",{price:k.receipt.full_price}),i.hide()},onCancel(){C=!1,i.hide()},onRemove(){k=null,C=!1,i.hide()}})})},onClose:()=>{x.destroy(),S=null,x.inactivityWatcher.setFn(()=>function(){if(k=null,C=!1,b.uncheckItem("daily_promo"),b.updateItem("daily_promo",{price:y.costs.daily_promo_price,discount:0}),x.form)return void x.resetForm();t.hide(),p.error(Object(v.c)("It looks like selected dates for this ad are not available. Try again."))}()),C||k||(b.uncheckItem("daily_promo"),b.updateItem("daily_promo",{price:y.costs.daily_promo_price,discount:0}))}})}m.init=function(){var t;g.place=a.find(".payment_receipt_place"),g.place&&(t=t=>{const n=[];y=t,w=y.list.filter(e=>e.is_checked).map(e=>e.id),n.push({title:Object(v.c)("Announcement in social networks"),id:"announcement",price:y.costs.announcement_price/100,button:{title:a.svgHtml("ui_gear",15,15)+Object(v.c)("Preview"),event:"showAnnouncePreview"},checkbox:!0,checked:!1}),b=e.create({container:g.place,options:{items:T(t.list),additionalItems:n,hardcode_vacancy_button:!0,events:{onPay:j,onChange:e=>{const t=O(e).vacancies_ids;w=t,E(t),_=e.some(e=>"announcement"===e.id&&e.checked)},showAnnouncePreview:I,showDailyPromoPreview:M,discountCalculation({main:e,additional:t}){const n=e.length;return{main:{value:(n-(n-Math.floor(n/5)))*(y.costs.one_vacancy_price/100),title:Object(v.c)('"4+1" discount')},additional:{value:t.reduce((e,t)=>e+parseInt(t.discount||0,10),0),title:Object(v.c)('"Weekend" discount')}}}}}}),s.on("Vacancy removed",e=>{b.removeItem(e)}),Jt.on("vacancyAnnouncement_add",()=>{_=!0,b.checkItem("announcement"),i.hide()}),Jt.on("vacancyAnnouncement_cancel",()=>{i.hide()}),Jt.on("vacancyAnnouncement_remove",()=>{_=!1,b.uncheckItem("announcement"),i.hide()})},c.b({url:"/job/needtopay",data:{mode:"raw"},success:function(e){let n=a.find("[data-content-id]");n&&(n=a.data(n,"content-id"),n&&e.list.forEach((function(e){e.id===parseInt(n)&&(e.is_checked=!0)})));const i=e.list.reduce((e,t)=>(t.is_checked&&e.push(t.id),e),[]);i.length>1&&E(i),t&&t(e)}}))},m.refresh=function(){m.destroy(),m.init()},m.destroy=function(){Jt.off(),a.nullDom(g),b&&b.destroy(),x&&x.inactivityWatcher&&(x.inactivityWatcher.destroy(),x.inactivityWatcher=null),S=null,x&&(x.destroy(),x=null),y=null,k=null,w=null}}));var Kt=n(144);const Gt=new r.a;Air.defineModule("module.events_admin","module.location, module.etc_controls, module.ajaxify",(function(e,t,n){const i=this;i.init=function(){t.defineControl({name:"archive_event",use:"button",label:Object(v.b)("Verb","Archive"),action:function(t,n){S({name:"confirm",data:{title:Object(v.b)("Verb","Archive?"),text:Object(v.c)("The event will be unpublished. This action is irreversible."),button_yes:Object(v.b)("Verb","Archive"),button_no:Object(v.c)("Cancel")},onClose:function(n){n&&c.c({url:"/events/archive/"+a.data(t,"content-id"),data:{},success:function(){e.reload()},error:function(){p.error(Object(v.c)("Something went wrong"))}})}}),n(!0)}}),t.defineControl({name:"edit_event",use:"link",label:Object(v.c)("Edit"),getHref:function(e){return"/events/edit/"+a.data(e,"content-id")}}),t.defineControl({name:"delete_event",use:"button",label:Object(v.c)("Remove"),action:function(e,t){const o="true"===a.data(e,"redirect");S({name:"confirm",data:{title:Object(v.c)("Remove?"),text:Object(v.c)("The event will be removed. This action is irreversible."),button_yes:Object(v.c)("Remove"),button_no:Object(v.c)("Cancel")},onClose:function(t){const s=a.data(e,"content-id");t&&c.c({url:"/events/delete/"+s,data:{},success:function(){p.success(Object(v.c)("Event removed")),i.trigger("Event removed",parseInt(s)),o&&n.goTo("/events")},error:function(){p.error(Object(v.c)("Something went wrong"))}})}}),t(!0)}}),Gt.on("copy-promocode",({data:{code:e}})=>{Object(Kt.a)(e,(function(e){e?p.success(Object(v.c)("Promo code copied")):p.error(Object(v.c)("Promo code copy failed"))}))})},i.destroy=function(){Gt.off()}})),Air.defineModule("module.events_edit","module.ajaxify",(function(e){const t=this;let i,o=null;var s=function(e,t,n){let i=a.find("#js-time-label");switch(e){case"city_id":o.show("address","0"!==t[0]),a.text(i,"0"===t[0]?Object(v.c)("When it starts, time in Moscow"):Object(v.c)("When it starts, local time")),i=null;break;case"company_id":if(0==t[0]&&void 0!==n){const e=n.handle.instance.getLastSearchValue();null!==e&&o.value("name",e)}o.value("company_toggler",0==t[0]?"new":"find");break;case"company_toggler":o.showBySelector(".vacancy_edit__form__company_data","new"===t),o.showBySelector(".vacancy_edit__form__company_id","find"===t),o.showBySelector(".vacancy_edit__form__company_card","find"===t);break;case"additional_toggler":o.show("office_image","none"!==t),o.show("additional","none"!==t),o.show("additional_toggler","none"===t)}},r=function(e,t){if("new"===i&&o){const n=t[0];switch(e){case"company_id":n&&n.last_benefits&&o.value("benefits",n.last_benefits)}}},l=async function(){const{default:t}=await n.e(35).then(n.bind(null,421));o=new t({element:a.find(".event_edit__form .form2"),actions:{publish_without_payment:{getUrl:function(){return"/events/publish_without_payment/"+o.value("event_id")},success:function(t){console.log("publish_without_payment success",t),e.goTo(t.result.redirect_uri)},error:function(e){console.log("publish_without_payment error",e)}},publish:{getUrl:function(){return"/events/publish/"+o.value("event_id")},success:function(e){console.log("publish success",e)},error:function(e){console.log("publish error",e)}},approve:{getUrl:function(){return"/events/approve/"+o.value("event_id")},success:function(t){console.log("approve success",t),e.goTo(t.result.redirect_uri)},error:function(e){console.log("approve error",e)}},reject:{getUrl:function(){return S({name:"event_reject",onClose:function(t,n){t&&c.c({url:"/events/reject/"+o.value("event_id"),data:{rejection_reason_text:n.reason_text},success:function(t){p.success(Object(v.c)("Event rejected")),e.goTo(t.result.redirect_uri)},error:function(){p.error(Object(v.c)("Something went wrong"))}})}}),null},success:function(e){console.log("reject success",e)},error:function(e){console.log("reject error",e)}},save:{getUrl:function(){return"/events/save"},success:function(t){console.log("save success",t),e.goTo(t.event.redirect_uri)},error:function(e){console.log("save error",e)}},archive:{getUrl:function(){return"/events/archive/"+o.value("event_id")},success:function(t){console.log("archive success",t),e.goTo(t.redirect_uri)},error:function(e){console.log("archive error",e)}},delete:{getUrl:function(){return S({name:"confirm",data:{title:Object(v.c)("Remove the event?"),text:Object(v.c)("You will not be able to restore it."),button_yes:Object(v.c)("Yes"),button_no:Object(v.c)("No")},onClose:function(t){t&&c.c({url:"/events/delete/"+o.value("event_id"),data:{},success:function(){p.success(Object(v.c)("The event has been removed")),e.goTo("/events")},error:function(){p.error(Object(v.c)("Something went wrong"))}})}}),null},success:function(e){console.log("delete success",e)},error:function(e){console.log("delete error",e)}},pay:{getUrl:function(){return"/events/pay/"+o.value("event_id")},success:function(e){console.log("pay success",e)},error:function(e){console.log("pay error",e)}}},events:{change:s,changeItems:r,autocompleteSearch:function(e,t,n){"address"===e&&(t.length>0?window.ymaps.suggest(t).then((function(e){var t=[];e.forEach(e=>{t.push({text:"<p>"+e.displayName+"</p>",value:{address:e.displayName,fullAddress:e.value}})}),n(t)})):n(!1))},autocompleteSelected:function(e,t){"address"===e&&(o.value("address",t.value.address),window.ymaps.geocode(t.value.fullAddress).then((function(e){if(e.geoObjects){const t=e.geoObjects.get(0).geometry.getCoordinates();o.value("geo_point",`${t[1]},${t[0]}`)}})))}},focus:"title",valuesProcessor:e=>(e.office_image&&(e.additional.attaches=[{type:"image",data:JSON.parse(e.office_image)}]),e.timezone_offset=-1*(new Date).getTimezoneOffset(),e)}),o.getValues().then(e=>{for(const t in e)s(t,e[t])})};t.init=function(){i=a.data(a.find(".page--event_edit"),"mode"),l(),window.yamaps||Object(I.a)("//api-maps.yandex.ru/2.1/?lang=ru_RU&apikey=80a264e5-4d5b-4b9a-9dac-08fb6e322147",(function(){}))},t.refresh=function(){t.destroy(),t.init()},t.destroy=function(){null!==o&&(o.destroy(),o=null)}}));n(120);Air.defineModule("module.events_receipt","module.payment_receipt, module.pay, module.popup, module.etc_controls, module.events_admin, module.auth_data",(function(e,t,i,o,s,r){let l,u,d,h,f,g,b=this,y={},w=null,_=null;function k(){i.show({template:"dailyPromo_preview",data:{i18n:{addAd:Object(v.c)("Add an ad"),adWillBeDisplayed:Object(v.c)("The ad will be displayed on the home page and below the articles.")}},onReady:e=>{const t=JSON.parse(b.elements[0].element.querySelector("textarea").textContent);w=a.find(e,".vacancyDailyPromo"),Promise.all([n.e(0),n.e(1),n.e(8),n.e(9),n.e(85)]).then(n.bind(null,1579)).then(e=>{const n=e.VacancyBoosterForm;_=new n({type:"event",air:{authData:r},container:w,userHash:d.hash,params:{items:d.list.filter(e=>h.includes(e.id)).slice(0,1),modeData:t.modeData,siteTitle:t.siteTitle,viewsCount:f?f.viewsCount:d.default_views_count,hasSavedData:!!f},onConfirm(e){g=!0,f=JSON.parse(JSON.stringify(e)),l.checkItem("daily_promo"),l.updateItem("daily_promo",{price:f.receipt.full_price}),i.hide()},onCancel(){g=!1,i.hide()},onRemove(){f=null,g=!1,i.hide()}})})},onClose:()=>{_.destroy(),w=null,_.inactivityWatcher.setFn(()=>function(){if(f=null,g=!1,l.uncheckItem("daily_promo"),l.updateItem("daily_promo",{price:d.costs.daily_promo_price,discount:0}),_.form)return void _.resetForm();t.hide(),p.error("It seems that the dates selected for the ad are not available. Try again.")}()),g||f||(l.uncheckItem("daily_promo"),l.updateItem("daily_promo",{price:d.costs.daily_promo_price,discount:0}))}})}function C(e){const t={events_ids:[],announcement:!1},n=["announcement","daily_promo"];return e.forEach(e=>{n.includes(e.id)?"daily_promo"===e.id?t.views_promo=function(e){if(!e)return!1;return{items:[e.id],company:e.company,viewsCount:e.viewsCount}}(f):t[e.id]=!0:t.events_ids.push(e.id)}),t}function S(e){const t=[];return e.forEach(e=>{t.push({title:e.title,id:e.id,checkbox:!0,checked:e.is_checked,price:d.costs.one_event_price/100})}),t}function x(e,n){u.order.data=C(n.list),u.user_email=d.user_email,u.sum=n.sum,u.cashier.id=d.cashier,u.cashier.public_key=d.cp_public;const i=`<img style="width: 47px; float: right; margin: -16px -3px 0 0;" src="${m.getCdnUrl()}/aed54763-feba-df97-1587-e6a9e8779b3f/">`,o=Object(v.c)('Payment for the event posting means agreement <br class="lm-hidden"> to all <a class="t-link-classic" href="/job/rules" target="_blank" data-no-ajax>terms</a> and <a class="t-link-classic" href="/job/agreement" target="_blank" data-no-ajax>conditions</a>.');u.texts.footer="invoice"===e?o:o+i,t.show(e,u)}function A(e){e&&e.length>0?c.b({url:"/events/unpaid/preview",data:{ids:e,mode:"raw"},success:function(e){O(e.html)}}):O("")}function O(e){const t=a.find('[air-module="module.entry"]');t&&(a.html(t,e),o.refresh())}function T(){i.show({template:"announcement_preview",data:{company:d.list[0].company,strings:d.strings}})}u={texts:{success_button:Object(v.c)("To my events"),success_text:Object(v.c)("After moderation, events will appear on the site.")},cashier:{id:0,public_key:""},order:{card_url:"/events/order/create/cloudpayments",invoice_url:"/events/order/create/invoice"},redirect_url:"/u/me/events",reload_after_success:!0,show_back_button:!1},b.init=function(){var t;y.place=a.find(".payment_receipt_place"),y.place&&(t=t=>{const n=[];d=t,h=d.list.filter(e=>e.is_checked).map(e=>e.id),n.push({title:Object(v.c)("Announcement in social networks"),id:"announcement",tip:Object(v.c)("≈ 1 million subscribers"),price:d.costs.announcement_price/100,button:{title:Object(v.c)("What does it look like?"),event:"showAnnouncePreview"},checkbox:!0,checked:!1}),l=e.create({container:y.place,options:{items:S(t.list),additionalItems:n,discountText:Object(v.c)("4+1 discount"),hardcode_event_button:!0,events:{onPay:x,onChange:e=>{const t=C(e).events_ids;h=t,A(t)},showAnnouncePreview:T,showDailyPromoPreview:k,discountCalculation(e){let t,n;return t=e.length,n=t-Math.floor(t/5),(t-n)*(d.costs.one_event_price/100)}}}}),s.on("Event removed",e=>{l.removeItem(e)})},c.b({url:"/events/needtopay",data:{mode:"raw"},success:function(e){let n=a.find("[data-content-id]");n&&(n=a.data(n,"content-id"),n&&e.list.forEach((function(e){e.id===parseInt(n)&&(e.is_checked=!0)})));const i=e.list.reduce((e,t)=>(t.is_checked&&e.push(t.id),e),[]);i.length>1&&A(i),t&&t(e)}}))},b.refresh=function(){b.destroy(),b.init()},b.destroy=function(){a.nullDom(y),l&&l.destroy()}}));n(121);Air.define("module.denis_invader",(function(){let e=null,t=null;async function i(){if(t)return;const{default:e}=await n.e(29).then(n.bind(null,1540));t=new e({onDestroy:e=>{t=null,e>1&&window.location.reload()}}),p.success("Стрелять пробелом, управлять стрелочками. Удачи, пилот!")}this.init=()=>{A.g||(e=this.elements[0].element,a.on(e,"click",i))},this.refresh=()=>{this.destroy(),this.init()},this.destroy=()=>{t&&(t.destroy(),t=null),e&&(a.off(e),e=null)}})),Air.define("module.siteHeader","module.delegator, module.notifiesList, module.etc_controls, module.andropov, module.date, module.subsite_model, module.messenger",(function(e){let t=null;this.openMessengerWindow=e=>{t&&t.callInstancesMethod("openMessengerWindow",e)},this.updateUser=()=>{t&&t.callInstancesMethod("updateUser")},this.init=async()=>{const{default:i}=await Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(46)]).then(n.bind(null,1555));t=new l.a({moduleName:"module.siteHeader",Constructor:i}),e.on("Initial data received new delegated data",()=>{t.callInstancesMethod("setSubscriptions",this.delegated_data.subscriptions)})},this.refresh=()=>{t&&t.callInstancesMethod("onModuleRefresh")},this.destroy=()=>{e.off(),t&&t.destroy()}}));n(172);var Qt=n(74);Air.define("module.ajaxify","module.page, module.location",(function(e,t,n){var i,o,s,r=this,c=null,l={},u={},d={},h=null,f=null,m=null;function g(e,t){if("IE"===A.a);else if(1===e.which)return i||function(e){return a.belong(e,".ce-redactor")}(t)?(e.preventDefault(),!1):function(e,t){var n=t.getAttribute("href"),i=t.getAttribute("target"),o=null===i||"_self"===i,s=null!==t.getAttribute("data-no-ajax"),a=e.ctrlKey||e.metaKey,l=t.hostname===R.b(),u=null!==n&&0===n.indexOf("mailto:");if(c=t.getAttribute("data-ajax-container"),null===n||"#"===n[0]);else{if(!s&&!a&&l&&o&&!u)return e.preventDefault(),setTimeout((function(){r.goTo(n,{saveScroll:null!==t.getAttribute("data-save-scroll")})}),0),!1;if(!l&&!a&&"tg:"!==t.protocol)return r.open(n),e.preventDefault(),!1}}(e,t)}function b(e){var n=!0;if(N.log("ajaxify","onUrlChanged",e),e.only_get_changed&&r.checkQueryEvents(R.e()))N.log("ajaxify","intercepted by query handler");else if(o&&(confirm(s)?r.confirmLock(!1):(t.restorePrevious(),n=!1)),n){switch(e.action_source){case"user":history.scrollRestoration="auto";break;case"browser":history.scrollRestoration="manual"}y(e.url)}}function y(e,t){if(clearTimeout(h),N.log("ajaxify",`getWithAjax "${e}"...`),Qt.a())r.clickLock(!0),r.trigger("Before request",{url:e}),De.get({url:e,data:{mode:"ajax"},dataType:"JSON",complete:function(t,n){N.log("ajaxify",`...complete with code "${n}" for "${e}"`),r.clickLock(!1),r.trigger("After request"),r.useResponseCodeHandler(n,t,e)},async:!1});else{void 0===t&&(w(Object(v.c)("Something is wrong with the internet. Reconnecting")),t=1);const n=1e3*Math.pow(2,t);N.log("ajaxify",`...offline! Try #${t}. Next try in ${n/1e3} seconds`),h=setTimeout(y,n,e,t+1)}}function w(e){N.log("ajaxify",`errorHandler "${e}"`),p.error(e),t.restorePrevious()}r.addResponseCodeHandler=function(e,t){u[e]=t},r.getResponseCodeHandler=function(e){return u[e]||u.default},r.useResponseCodeHandler=function(i,o,s){N.log("ajaxify",`useResponseCodeHandler for code "${i}" for "${s}"...`),r.getResponseCodeHandler(i)((function(u,d){switch(N.log("ajaxify",`...callback status "${u}" for "${s}"`),u){case"success":m=(h=o)["module.ajaxify"],N.log("ajaxify","successHandler"),void 0===m.redirect?(r.trigger("Before page changed"),function(e,t){var n;e.is_special?void 0===(n=a.parseHTML(e.html).filter((function(e){return"special_json"===e.id})).map((function(e){return JSON.parse(a.html(e)).js}))[0])?t():Object(I.a)(n,t):t()}(m,(function(){var t,i,o;if(e.setTitle(m.title),t=m.meta,a.parseHTML(t).forEach(e=>{const t=`${e.tagName.toLowerCase()}${["property","name","rel"].reduce((t,n)=>(e.getAttribute(n)&&t.push(`[${n}="${e.getAttribute(n)}"]`),t),[]).join("")}`,n=a.find(t);n&&a.replace(n,e)}),i=m.html,null===c?e.setHtml(i):((o=a.find(c))&&a.parseHTML(i,!0).forEach((function(e){let t=a.find(e,c);t&&a.replace(o,t),t=null})),c=null),null===f)switch(history.scrollRestoration){case"auto":window.scrollTo(0,0);break;case"manual":window.scrollTo(0,l[R.a()])}else window.scrollTo(0,f),f=null;history.scrollRestoration="auto",n.build(R.c(),{beforeRefresh:function(){n.delegateData(h),r.delegated_data=null},finish:function(){r.trigger("Build finished")}})}))):!0===m.redirect.external?t.goToHard(m.redirect.url):t.goTo(m.redirect.url,!0);break;case"error":void 0===d&&(d=Object(v.c)("Failed to navigate to page (code %{ code })",{code:i})),w(""+d);break;case"repeat":y(s)}var h,m}),o)},r.init=function(){N.define("ajaxify","Ajaxify (ﾉ´ヮ´)ﾉ","#dc4e41"),i=!1,o=!1,a.delegateEvent(document,"a","click.module_ajaxify",g),t.on("Url changed",b),r.addResponseCodeHandler("default",(function(e){e("error")})),r.addResponseCodeHandler(200,(function(e,t){r.isDataInvalid(t)?e("error",Object(v.c)("Corrupted data")):e("success")}))},r.destroy=function(){a.off(document,"click.module_ajaxify"),t.off(),r.off()},r.isDataInvalid=function(e){for(const t in e)if(e.hasOwnProperty(t))return!1;return!0},r.clickLock=function(e){i=!1!==e},r.confirmLock=function(e,t){o=!1!==e,s=void 0===t?Object(v.c)("You've typed something and decided to leave, is this intentional?"):t},r.replaceUrlBeforeGoTo=function(e){m=e},r.goTo=function(e,n={}){"IE"===A.a?t.goToHard(e):(r.trigger("Before goto"),N.log("ajaxify",`goTo "${e}"`),l[R.a()]=window.scrollY,n.saveScroll&&(f=window.scrollY),null!==m&&(t.replace(m,!0),m=null),t.goTo(e))},r.reload=function(e={}){r.goTo(R.c(),e)},r.hardReload=function(){t.goToHard(R.c())},r.addQueryEvent=function(e,t){d[e]=t},r.removeQueryEvent=function(e){d[e]=null},r.checkQueryEvents=function(e){var t,n,i=!1;for(t in d)null!==d[t]&&void 0!==(n=d[t](e))&&(r.trigger(n,e),i=!0);return i},r.open=function(e){let t=window.open();t.opener=null,t.location=e,t=null},r.emitLinkClick=function(e,t,n="_self"){let i=a.create("a");i.href=t,i.target=n,g(e,i),i=null}}));n(173);Air.defineModule("module.chatra","module.auth_data",(function(e){var t=this,n=!1;const i=new r.a;t.use=function(i){var o;!1===n?(window.ChatraID="w5gE7FKwhd74dyM4k",o=e.get(),window.ChatraSetup={startHidden:!0},o&&(window.ChatraIntegration={name:o.name,clientId:o.hash}),Object(I.a)("//call.chatra.io/chatra.js",(function(e){n=e,t.use(i)}))):i(void 0!==window.Chatra?window.Chatra:null)},t.init=function(){"about"!==Object(R.d)()[0]?t.use((function(e){if(e){var t=a.find("[data-chatra-group-id]");t=t?a.data(t,"chatra-group-id"):null,e("setGroupId",t),e("show"),a.delegateEvent(document,"[data-chatra-show]","click.chatra_show",()=>{e("openChat",!0)}),i.on("showChatra",()=>e("openChat",!0))}})):t.destroy()},t.refresh=function(){"about"===Object(R.d)()[0]?t.destroy():t.init()},t.destroy=function(){i.off(),t.use((function(e){e&&(e("hide"),a.off(document,"click.chatra_show"))}))}})),Air.define("module.checkboxes",(function(){var e=this,t="ui-checkbox",n="ui-checkbox--checked",i="ui-checkbox--disabled";function o(e,t){const o=t.firstChild;if(!t.classList.contains(i))if(t.classList.contains(n)?(t.classList.remove(n),o.checked=!1):(t.classList.add(n),o.checked=!0),"createEvent"in document){var s=document.createEvent("HTMLEvents");s.initEvent("change",!1,!0),o.dispatchEvent(s)}else o.fireEvent("onchange")}function s(e){let o;if("true"!==e.dataset.processed)o=a.make("span",[t]),a.after(e,o),a.append(o,e);else if(o=a.parents(e,"."+t),!o)return;e.checked?o.classList.add(n):o.classList.remove(n),e.disabled&&o.classList.add(i),e.dataset.processed=!0}function r(e){const t=e.firstChild;a.before(e,t),e.remove(),t.dataset.processed=null}e.processVisibleIn=function(e){!function(e){e.forEach(s)}(a.findAll(e,'input[type="checkbox"]:not([hidden])'))},e.init=function(){e.processVisibleIn(document),window.setTimeout((function(){a.delegateEvent(document,"."+t,"click.checkboxes",o)}),10)},e.refresh=function(){e.destroy(),e.init()},e.destroyIn=function(e){a.findAll(e,"."+t).forEach(r)},e.destroy=function(){a.off(document,"click.checkboxes"),e.destroyIn(document)}}));n(122);Air.define("module.delegator","module.last_seen_date",(function(e,t){var n=this;n.getData=function(e){return n.delegated_data[e]},n.init=function(){c.c({url:"/initialData",data:{updateRecentLastSeen:["/new","/all/new"].includes(window.location.pathname)},success:function(e){t.delegateData(e,!0),n.triggerOnce("Initial data received new delegated data")}})}})),Air.define("module.etc_controls",(function(){const e={},t={};let i=null;this.defineAbstractControl=e=>{void 0!==t[e.name]&&console.warn(`module.etc_controls: abstract control "${e.name}" redefined`),t[e.name]=e.Constructor},this.defineControl=t=>{void 0!==e[t.name]&&console.warn(`module.etc_controls: control "${t.name}" redefined`),e[t.name]=t},this.getControl=(n,i)=>{const o=e[i];return void 0===o?(console.warn(`module.etc_controls: control "${i}" is not defined`),null):void 0===t[o.use]?(console.warn(`module.etc_controls: abstract control "${o.use}" is not defined`),null):new t[o.use](n,o)},this.close=()=>{i&&i.callInstancesMethod("close")},this.init=async()=>{const{Link:e,Toggle:t,Button:o,AjaxToggle:s,AjaxButton:r,default:a}=await Promise.all([n.e(0),n.e(2),n.e(3),n.e(32)]).then(n.bind(null,1573));this.defineAbstractControl({name:"link",Constructor:e}),this.defineAbstractControl({name:"toggle",Constructor:t}),this.defineAbstractControl({name:"button",Constructor:o}),this.defineAbstractControl({name:"ajax_toggle",Constructor:s}),this.defineAbstractControl({name:"ajax_button",Constructor:r}),i=new l.a({moduleName:"module.etc_controls",Constructor:a,controllingModule:this})},this.refresh=()=>{i&&i.update()},this.destroy=()=>{i&&i.destroy()}}));n(123),n(124),n(125);const Zt=new r.a;Air.define("module.island",(function(){var e=function(e){var t;K.e.is("mobile")&&(t=a.parents(e.el,".island"),a.bem.toggle(t,"expanded",!0),t=null)},t=function(e){a.parents(e.el,".island").classList.toggle("island--expanded")};this.init=function(){Zt.on("island_header:click",e),Zt.on("island_header_toggle:click",t)},this.destroy=function(){Zt.off()}})),Air.define("module.location",(function(){var e=this,t=!1,n="browser",i=[],o=!1;e.addToTimeline=function(e){i.push(e)},e.getFromTimeline=function(e){return e<0&&(e=i.length+e),i[e]},e.replaceLastInTimeline=function(e){i[i.length-1]=e},e.unajaxNext=function(){t=!0},e.goTo=function(i,o){var r=Object(ct.a)(i);n="user",!0===t?e.goToHard(r.path):r.full_path===R.a()?s():!0===o?window.History.replaceState(null,document.title,r.full_path):window.History.pushState(null,document.title,r.full_path)},e.restorePrevious=function(){var t=e.getFromTimeline(-2);void 0!==t&&e.replace(t)},e.forward=function(){window.History.forward()},e.back=function(){window.History.back()},e.replace=function(t,n){o=!0,e.replaceLastInTimeline(t),!0===n?window.History.replaceState({fuck_dat_shit:Object($.a)()},document.title,t):window.History.pushState(null,document.title,t)},e.goToHard=function(t){e.restorePrevious(),location.href=t},e.setHash=function(e){location.hash=e},e.reload=function(){e.goTo(R.c())};var s=function(){e.addToTimeline(R.a()),!1===o?e.trigger("Url changed",{url:R.a(),action_source:n,only_get_changed:R.f(e.getFromTimeline(-2),e.getFromTimeline(-1))}):o=!1,n="browser"};e.init=function(){window.History.Adapter&&window.History.Adapter.bind(window,"statechange",s),e.addToTimeline(R.a())}})),Air.defineModule("module.notify",(function(){this.init=function(){},this.destroy=function(){},this.refresh=function(){},this.call=function(e,...t){p[e](...t)}}));let en=null,tn=null,nn=null;function on(){return null===en&&(en=a.parseHTML('<div class="overlay-overlay"></div>')),a.append(document.body,en),en}function sn(){if(!tn)return null;nn?(a.append(nn,tn),nn=null):a.remove(tn),a.remove(on());const e=tn;return tn=null,e}Air.define("module.one",(function(){const e=Object($.a)("module_one");function t(e){return e.split(":")}function n(e){e.forEach(e=>i.apply(this,e))}function i(e,t,n){switch(e){case"add_mod":case"remove_mod":case"toggle":case"mod_with_outclick":case"mod_with_overlay":(function(e){return a.findAll(`[data-one-name="${e}"]`)})(t).forEach(t=>function(e,t,n){switch(e){case"add_mod":a.bem.add(t,n);break;case"remove_mod":a.bem.remove(t,n);break;case"toggle":a.bem.toggle(t,n);break;case"mod_with_outclick":if(a.bem.hasMod(t,n))return void a.bem.remove(t,n);a.bem.add(t,n),setTimeout(()=>{a.one(document,"click.outclick_"+Math.random(),e=>{a.bem.remove(t,n)})},0);break;case"mod_with_overlay":if(a.bem.hasMod(t,n))return;a.bem.add(t,n),function(e){sn();const{left:t,top:n}=a.offset(e),i=a.width(e),o=a.height(e);a.css(on(),{width:i+"px",height:o+"px",left:t+"px",top:n+"px"}),tn=e,nn=e.parentElement,a.append(on(),e)}(t),setTimeout(()=>{a.one(document,"click.outclick_"+Math.random(),e=>{a.belongToElement(e.target,t)||(sn(),a.bem.remove(t,n))})},0);break;default:console.warn(`Unknown DOM-command "${e}"`)}}(e,t,n));break;case"set_cookie":case"remove_cookie":!function(e,t,n){switch(e){case"set_cookie":D.c(t,n,7);break;case"remove_cookie":D.b(t);break;default:console.warn(`Unknown cookie-command "${e}"`)}}(e,t,n);break;default:console.warn(`Unknown command "${e}"`)}}function o(i){const o="data-one-"+i;a.delegateEvent(document,`[${o}]`,`${i}.${e}`,(e,i)=>{const s=a.attr(i,o);n(s.split(",").map(e=>e.trim()).map(t))})}this.init=function(){o("click")},this.refresh=function(){sn()},this.destroy=function(){var e;sn(),e="click",a.off(document,"data-one-"+e)}}));const rn={Content:{Feed:"content-feed",Entry:"content-entry",Full:"content-full",TwoColsFixed:"content-2cols-fixed",TwoColsEntry:"content-2cols-entry",TwoColsAdaptive:"content-2cols-adaptive"},LeftColumn:{On:"left-column-on",Off:"left-column-off"},RightColumn:{On:"right-column-on",Off:"right-column-off"},Propaganda:{On:"propaganda-on",Off:"propaganda-off",OffAll:"propaganda-off-all"},ContentSidebarAlign:{Right:"content-sidebar-align-right",Left:"content-sidebar-align-left"},RightColumnReserve:{On:"right-column-reserve-on",Off:"right-column-reserve-off"}};const an={content:[rn.Content.Feed,rn.Content.Entry,rn.Content.Full,rn.Content.TwoColsFixed,rn.Content.TwoColsEntry,rn.Content.TwoColsAdaptive],leftColumn:[rn.LeftColumn.On,rn.LeftColumn.Off],rightColumn:[rn.RightColumn.On,rn.RightColumn.Off],propaganda:[rn.Propaganda.On,rn.Propaganda.Off,rn.Propaganda.OffAll],contentSidebarAlign:[rn.ContentSidebarAlign.Right,rn.ContentSidebarAlign.Left],rightColumnReserve:[rn.RightColumnReserve.On,rn.RightColumnReserve.Off]};function cn(e){for(const t in an){an[t].forEach(n=>{var i,o;i=n,o=n===e[t],a.bem.toggle(document.body,i,o)})}}Air.define("module.page","module.auth_data",(function(e){let t,n,i;async function o(){if(e.isAnon())return;const t=await new Promise(e=>{setTimeout(()=>{const t=a.findAll(".head-notifies__badge").reduce((e,t)=>{if(t){const n=parseInt(t.textContent,10);n&&(e+=n)}return e},0);e(t)},150)});let n=document.title;"("===n[0]&&(n=n.replace(/^(\(\d+\))\s/,"")),t>0&&(n=`(${t}) ${n}`),document.title=n}this.init=function(){i=a.find("#page_wrapper"),this.refresh()},this.refresh=function(){var e;e=this.delegated_data,n=e,t=n.layout_options,function(){if(t.leftColumn===rn.LeftColumn.Off)return;const e=D.a("sidebar-collapsing");e&&(t.leftColumn="1"===e?rn.LeftColumn.Off:rn.LeftColumn.On)}(),cn(t)},this.setLayoutOptions=function(e){t=e,cn(t)},this.setHtml=function(e){i.innerHTML=e},this.setTitle=async function(e){document.title=e,o()},this.setTitleBadge=o,this.isBanner=function(){return"propaganda-on"===t.propaganda},this.isSidebar=function(){return"left-column-on"===t.leftColumn},this.isLive=function(){return"right-column-on"===t.rightColumn},this.getNavigationName=function(){return n.navigation_name},this.getSortingName=function(){return n.sorting_name},this.isContent=function(){return n.is_content},this.getSubsite=function(){return n.subsite||!1},this.PageMod=rn,this.COOKIE_SIDEBAR_COLLAPSED="sidebar-collapsing"})),Air.define("module.plumbus",(function(){var e,t,i,o;function s(n,i){e=i,t=(t=(t=a.data(i,"plumbus"))?t.split(" "):[0,10]).map(e=>parseInt(e))}function r(){c()}function c(){e=null,t=null}function l(){i&&i.destroy()}function u(e){i&&i.show(e)}this.dinglebop=function(){return!1},this.hide=function(){u(!1)},this.showAuthPopup=function(){return new Promise((s,r)=>{o&&o(),o=r,u(!1),Promise.all([n.e(0),n.e(1),n.e(4),n.e(60)]).then(n.bind(null,1556)).then(({default:n})=>{i=new n({position:{target:e,offset:t},options:{bubble:{width:"220",arrowAlignment:"top right"},blocks:[{type:"title",text:"%site_name%"},{type:"text",text:Object(v.c)("Please authorize")},{type:"login"}]},events:{onLogin:e=>{e?(s(),u(!1)):r()},onClose:()=>{setTimeout(l,500),c(),r()}}})})})},this.showBuyPopup=function(){return new Promise((o,s)=>{l();let r={type:"title",text:"%site_name%"};const u=a.parents(e,"[data-subsite-name]");u&&(r={type:"title",text:a.data(u,"subsite-name")||"",image:a.data(u,"subsite-avatar")||"",link:a.data(u,"subsite-url")||""}),Promise.all([n.e(0),n.e(1),n.e(4),n.e(60)]).then(n.bind(null,1556)).then(({default:n})=>{i=new n({position:{target:e,offset:t},options:{bubble:{width:"220"},blocks:[r,{type:"text",text:Object(v.c)("You need a Plus-account to vote in private subsites")},{type:"button",text:Object(v.c)("Buy for 75 ₽"),name:"buy"}]},events:{onButtonClick:()=>{o()},onClose:()=>{setTimeout(l,500),c(),s()}}})})})},this.init=function(){a.on(document,"click.plumbus",r),a.delegateEvent(document,"[data-plumbus]","click.plumbus",s)},this.refresh=function(){l()},this.destroy=function(){}}));var ln=n(67);const un=new r.a;Air.defineModule("module.popup",(function(){var e=this,t=!1,i=!1,o={},s=[],r=null;function c(n){t=!1,o.rendered_elements=n,a.bem.toggle(e.window,"styled",!1!==o.style),a.bem.toggle(e.window,"close-inside",!0===o.closeBtnInside),o.onReady&&o.onReady(o.rendered_elements),e.showLayout(!0),e.showPopup(!0,(function(){ln.lock(!0),i=!0,function(e){const t=e.nodeType===Node.ELEMENT_NODE?a.find(e,"[autofocus]"):null;t&&t.focus()}(n)}))}e.show=function(n){if(e.appendLayout(),!1===i&&(o=n,!1===t)){if(t=!0,n.template&&H.a({el:".popup__container__window__tpl",template:n.template,data:n.data,onReady:c.bind(e)}),n.html){const t=a.parseHTML(n.html);a.html(e.popup,""),a.append(e.popup,t),c(t)}n.history||a.on(window,"keydown.popup",t=>{Lt.a(t,"ESC")&&e.hide()})}},e.showVuePopup=async({componentName:e,props:t})=>{if(!r){const{default:e}=await Promise.all([n.e(0),n.e(5),n.e(41)]).then(n.bind(null,1541));r=new e}r.show({componentName:e,props:t})},e.replace=function(t){i=!1,t.history?s.push(o):o.onClose&&o.onClose(o.rendered_elements),o=null,e.show(t)},e.historyBack=function(){s.length>0&&(o.onClose&&o.onClose(o.rendered_elements),o=s.pop(),a.html(e.popup,""),a.append(e.popup,o.rendered_elements))},e.isHistoryAvailable=function(){return s.length>0},e.hide=function(){!0===i&&(e.showLayout(!1,(function(){a.html(e.popup,"")})),e.showPopup(!1,(function(){o.onClose&&o.onClose(o.rendered_elements),ln.lock(!1),i=!1,o=null,s.forEach((function(e){e&&e.onClose&&e.onClose(e.rendered_elements),e=null})),s=[]})),a.off(window,"keydown.popup"))},e.appendLayout=function(){e.element=a.find(".popup"),e.element||(e.element=a.parseHTML(`\n                <div class="popup" data-ignore-outside-click>\n                    <div class="popup__layout"></div>\n                    <div class="popup__container">\n                        <div class="popup__container__window">\n                            <div class="popup__container__window__close">${a.svgHtml("ui_close",12,12)}</div>\n                            <div class="popup__container__window__tpl"></div>\n                        </div>\n                    </div>\n                </div>\n            `),a.append(document.body,e.element),e.layout=a.find(e.element,".popup__layout"),e.window=a.find(e.element,".popup__container__window"),e.popup=a.find(e.element,".popup__container__window__tpl"),e.container=a.find(e.element,".popup__container"),e.close=a.find(e.element,".popup__container__window__close"),a.on(e.close,"click",e.hide.bind(e)),a.on(e.element,"click",(function(t){!a.belong(t.target,".popup__container__window")&&a.isExists(t.target)&&e.hide()})))},e.showLayout=function(t,n){a.toggleClass(e.layout,"popup__layout--shown",t),a.off(e.element,"transitionend.popup"),a.one(e.element,"transitionend.popup",(function(){i=t,n&&n()}))},e.showPopup=function(t,n){t?(a.toggleClass(e.container,"popup__container--shown",!0),e.container.scrollTo(0,0)):a.toggleClass(e.container,"popup__container--shown",!1),n&&n()},e.isShown=function(){return i},e.init=function(){un.on("popup_show",(function(t){var n=a.data(t.el,"popup-name");n&&e.show({template:n})})),un.on("popup_hide",(function(t){e.hide()})),un.on("popup_go_back",(function(t){e.historyBack()}))},e.destroy=function(){un.off()}}));n(126);var dn=!1;if("undefined"!=typeof window){var hn={get passive(){dn=!0}};window.addEventListener("testPassive",null,hn),window.removeEventListener("testPassive",null,hn)}var fn="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1),mn=[],pn=!1,gn=-1,bn=void 0,vn=void 0,yn=function(e){return mn.some((function(t){return!(!t.options.allowTouchMove||!t.options.allowTouchMove(e))}))},wn=function(e){var t=e||window.event;return!!yn(t.target)||(t.touches.length>1||(t.preventDefault&&t.preventDefault(),!1))},_n=function(){void 0!==vn&&(document.body.style.paddingRight=vn,vn=void 0),void 0!==bn&&(document.body.style.overflow=bn,bn=void 0)},kn=function(e,t){if(e){if(!mn.some((function(t){return t.targetElement===e}))){var n={targetElement:e,options:t||{}};mn=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(mn),[n]),fn?(e.ontouchstart=function(e){1===e.targetTouches.length&&(gn=e.targetTouches[0].clientY)},e.ontouchmove=function(t){1===t.targetTouches.length&&function(e,t){var n=e.targetTouches[0].clientY-gn;!yn(e.target)&&(t&&0===t.scrollTop&&n>0||function(e){return!!e&&e.scrollHeight-e.scrollTop<=e.clientHeight}(t)&&n<0?wn(e):e.stopPropagation())}(t,e)},pn||(document.addEventListener("touchmove",wn,dn?{passive:!1}:void 0),pn=!0)):function(e){if(void 0===vn){var t=!!e&&!0===e.reserveScrollBarGap,n=window.innerWidth-document.documentElement.clientWidth;t&&n>0&&(vn=document.body.style.paddingRight,document.body.style.paddingRight=n+"px")}void 0===bn&&(bn=document.body.style.overflow,document.body.style.overflow="hidden")}(t)}}else console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.")},Cn=n(20);Air.define("module.scrollLocker",(function(){const e=["ce-toolbar__tools"],t=[];let n=null;const i=t=>{for(;t&&t!==document.body;){const n=t.classList.contains("vb-content")&&t.parentElement.classList.contains("vb-visible"),i="string"==typeof t.getAttribute("data-ignore-scroll-lock"),o=Object(Cn.d)([...t.classList],e);if(n||i||o)return!0;t=t.parentElement}};this.lock=e=>{A.e&&!t.length&&(()=>{if(null!==n)return;const{scrollY:e}=window;Object(a.css)(document.body,{position:"fixed",top:-1*e+"px"}),n=e})(),kn(e,{allowTouchMove:i,reserveScrollBarGap:!0}),e&&!t.includes(e)&&t.push(e)},this.unlock=e=>{var i;e&&t.includes(e)&&t.splice(t.indexOf(e),1),A.e&&!t.length&&null!==n&&(Object(a.css)(document.body,{position:"",top:""}),window.scrollTo(0,n),n=null),(i=e)?(mn=mn.filter((function(e){return e.targetElement!==i})),fn?(i.ontouchstart=null,i.ontouchmove=null,pn&&0===mn.length&&(document.removeEventListener("touchmove",wn,dn?{passive:!1}:void 0),pn=!1)):mn.length||_n()):console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.")},this.refresh=()=>{this.destroy()},this.destroy=()=>{fn?(mn.forEach((function(e){e.targetElement.ontouchstart=null,e.targetElement.ontouchmove=null})),pn&&(document.removeEventListener("touchmove",wn,dn?{passive:!1}:void 0),pn=!1),gn=-1):_n(),mn=[],t.splice(0,t.length)}})),Air.defineModule("module.static_version_watcher","module.system_messages, module.location",(function(e,t){var n=Math.round(Date.now()/1e3),i=function(e){if(void 0===e)return D.a("static_version_timestamp");D.c("static_version_timestamp",e+"",365)},o=function(e){var o=i();void 0===o?void 0!==e&&(e=parseInt(e)||0,i(e),e>n&&t.unajaxNext()):(o=parseInt(o)||0,void 0!==e&&(e=parseInt(e)||0)>o&&(i(e),e>n&&t.unajaxNext()))};this.init=function(){e.on("Static version changed",o)},this.destroy=function(){e.off()}})),Air.defineModule("module.system_messages",(function(){var e=this,t=null;function n(t){switch(t.type){case"static_version_changed":e.trigger("Static version changed",t.time);break;case"new_entry_published":e.trigger("New entry published",t);break;case"subsite_subscribers_count_changed":e.trigger("Subsite subscribers count changed",t);break;default:console.warn("module.system_messages: unknown message",t)}}e.init=function(){(t=new u.a({name:"system",onMessage:n})).open()},e.destroy=function(){t&&(t.close(),t=null)}})),Air.define("module.universal_action","module.ajaxify, module.auth, module.delegator",(function(e,t,n){var i=this;i.init=function(){n.on("Initial data received new delegated data",(function(){var n,o,s,r;n=i.delegated_data,o={},s={},void 0!==(r=n&&n.action)&&(r.notify&&(o.message=r.notify.text,o.type=r.notify.type,r.notify.button&&(o.button_text=r.notify.button.text,o.onButtonClick=function(){e.goTo(r.notify.button.url)}),setTimeout((function(){p.show(o)}),1e3)),r.auth&&(r.auth.data&&(s[r.auth.name]=r.auth.data),t.showAuth({screen:r.auth.name,formData:s})))}))}}));const Sn=new r.a;Air.define("module.updown",(function(){var e,t,n=this,i=!1,o=function(){Object(dt.c)()>=400&&!i?(t.updown.toggleClass("updown--shown",!0),i=!0):Object(dt.c)()<400&&i&&!e&&(t.updown.toggleClass("updown--shown",!1),i=!1),Object(dt.c)()>=400&&e&&(t.updown.toggleClass("updown--go_down",!1),e=0)};n.init=function(){A.d&&(t=Object(y.a)(".updown"),Sn.on("updown:click",(function(){e?(bt.b(e),e=0,t.updown.toggleClass("updown--go_down",!1),n.trigger("Down")):(e=Object(dt.c)(),bt.b(0),t.updown.toggleClass("updown--go_down",!0),n.trigger("Up"))})),a.on(window,"scroll.updown",o),o())},n.refresh=function(){},n.destroy=function(){a.off(window,"scroll.updown"),Sn.off(),n.off()}}));n(127),n(128);const xn="ui-splash",An="ui-splash__particle",On=.5,Tn=1,jn=1,En=60,Pn=.1,In=.3;class Mn{constructor({element:e,types:t=["type-1","type-2","type-3"],specialType:n=null,intensity:i=10,minBurstRadius:o=0,maxBurstRadius:s=5,animationName:r="uiSplashDefault",animationDuration:c=700,colors:l=[]}){this.element=e,this.types=t,this.specialType=n,this.initialIntensity=i,this.intensity=i,this.minBurstRadius=o,this.maxBurstRadius=s,this.animationName=r,this.animationDuration=c,this.colors=l,this.particles=[],this.initialParticle=a.make("div",An),this.init()}init(){a.addClass(this.element,xn)}destroy(){a.removeClass(this.element,xn)}fire(){this.makeParticles(),this.fireParticles()}makeParticles(){const e=document.createDocumentFragment();for(let t=0;t<this.intensity;t+=1){const t=this.makeSingleParticle();a.append(e,t.element)}if(this.specialType){const t=this.makeSingleParticle(this.specialType);a.append(e,t.element)}this.element.style.setProperty("--animationName",this.animationName),this.element.style.setProperty("--animationDuration",this.animationDuration+"ms"),a.append(this.element,e)}makeSingleParticle(e=""){const t={element:a.clone(this.initialParticle),type:e||Mn.getRandomItemFromArray(this.types),isSpecial:!!e,timeout:null};return a.bem.add(t.element,t.type),this.colors&&this.colors.length&&t.element.style.setProperty("--color",Mn.getRandomItemFromArray(this.colors)),this.particles.push(t),t}destroySingleParticle(e){const t=this.particles.indexOf(e);a.remove(e.element),e.timeout&&(clearTimeout(e.timeout),e.timeout=null),t>=0&&this.particles.splice(t,1),0===this.particles.length&&(this.intensity=this.initialIntensity)}fireParticles(){for(let e=0,t=this.particles.length;e<t;e+=1){const t=this.particles[e];if(t.timeout)continue;const n=e,i={x:Math.cos(n)>0?"right":"left",y:Math.sin(n)>0?"bottom":"top"},o=Mn.getRandomBefore(this.maxBurstRadius)+this.minBurstRadius,s="bottom"===i.y?jn:Tn,r=Math.cos(n)*o*s,c=Math.sin(n)*o*s;if(t.isSpecial){const e=Math.cos(n),i=(this.maxBurstRadius+this.minBurstRadius)*On*-1,o=Mn.getRandomBefore(En)*(Mn.random?-1:1);this.fireSingleParticle(t,{toX:e,toXPost:e,toY:i,toYPost:i,toDeg:o,toDegPost:o,animationDuration:this.animationDuration})}else{const e=r+r*Math.cosh(Math.cos(n))*Pn,i=r+r*Math.cosh(Math.cos(n))*In,o=c,s=c,a=Mn.getRandomBefore(En)*(Mn.random?-1:1);this.fireSingleParticle(t,{toX:e,toXPost:i,toY:o,toYPost:s,toDeg:a,toDegPost:a,animationDuration:Mn.getRandomBefore(this.animationDuration)})}a.bem.add(t.element,"animated"),a.bem.add(t.element,i.x),a.bem.add(t.element,i.y)}}fireSingleParticle(e,{toX:t,toXPost:n,toY:i,toYPost:o,toDeg:s,toDegPost:r,animationDuration:a}){e.element.style.setProperty("--toX",t+"em"),e.element.style.setProperty("--toXPost",n+"em"),e.element.style.setProperty("--toY",i+"em"),e.element.style.setProperty("--toYPost",o+"em"),e.element.style.setProperty("--toDeg",s+"deg"),e.element.style.setProperty("--toDegPost",r+"deg"),e.element.style.setProperty("--animationDuration",a+"ms"),e.timeout=setTimeout(()=>{this.destroySingleParticle(e)},a)}static get random(){return Math.round(Math.random())}static getRandomBefore(e){return Math.floor(Math.random()*e)}static getRandomItemFromArray(e){return e[Math.floor(Math.random()*e.length)]}}class $n{constructor({element:e}){this.element=e,this.splashContainer=null,this.init()}init(){this.splashContainer||(this.splashContainer=a.make("div"),a.append(this.element,this.splashContainer)),this.splash||(this.splash=new Mn({element:this.splashContainer,intensity:150,types:["confetti"],minBurstRadius:3,maxBurstRadius:8,animationName:"uiSplashDonate",animationDuration:1300,colors:["#444477","#FFB2E6","#8447FF","#8CFFDA"]}),a.on(this.element,"click",this.onClick.bind(this)))}refresh(){this.init()}destroy(){a.off(this.element),this.splash.destroy()}onClick(){this.splash.fire()}}Air.define("module.donateDisplay","module.comments",(function(e){let t=null;this.init=()=>{this.elements&&this.elements.length&&(t=new l.a({moduleName:"module.donateDisplay",Constructor:$n}),e.on("Comment assimilated",()=>{setTimeout(()=>{this.refresh()},100)}))},this.refresh=()=>{t&&t.update()},this.destroy=()=>{e.off(),t&&t.destroy()}})),Air.define("module.donatesCabinet",(function(){let e=null;this.init=async()=>{if(!this.elements||!this.elements.length)return;const{default:t}=await Promise.all([n.e(0),n.e(1),n.e(2),n.e(5),n.e(31)]).then(n.bind(null,1558));e=new l.a({moduleName:"module.donatesCabinet",Constructor:t})},this.refresh=()=>{e&&e.update()},this.destroy=()=>{e&&e.destroy()}}));var Ln=n(151);const Rn=new r.a;Air.define("module.floatingScreen","module.andropov, module.audio_controller, module.propaganda",(function(e,t,n){const i={top:"auto",left:"auto",bottom:"0",right:"10px"},o={width:D.a("floating_screen_width"),height:null},s={};let r=null,c=null,l=null,u=null,d=null;function h(e){var t;(t=e.element,a.belong(t,".floating_screen_parent"))&&(y(e.video_id)&&(l=e.video_id,s.currentContent=e.element,_(),v(),function(){const e=a.data(s.currentParent,"entry-title"),t=a.data(s.currentParent,"entry-url"),n=a.data(s.currentParent,"source-url");s.screenTitle.href=t,s.screenTitle.textContent=e,s.screenSourceLink.href=n}(),r.resetPosition()))}function f(e){e&&s.currentContent!==e.element||(l=null,v(),s.currentContent=null,_(),u=null)}function m(){const e=function(){let e=o.width?o.width:400,t=s.currentParent?s.currentParent:s.currentContent;if(t){const n=a.rect(t);e=Math.max(e,400),e=Math.min(e,n.width),t=null}return e}();a.css(s.screen,{top:i.top,right:i.right,bottom:i.bottom,left:i.left,width:e+"px",height:"auto"}),r.restorePosition(),c.updateMinWidth(Math.min(e,400))}function p(t=!1){null!==s.currentParent&&a.isExists(s.currentParent)&&Object(Ln.a)(s.currentParent)?(!0!==u||t)&&(u=!0,a.bem.remove(s.screen,"fixed"),function(){const e=a.rect(s.currentParent);a.css(s.screen,{width:e.width+"px",height:e.height+"px"})}(),function(){const e=a.offset(s.currentParent);a.css(s.screen,{top:e.top+"px",left:e.left+"px"})}(),r.nullPosition()):(!1!==u||t)&&(u=!1,null!==l&&e.isVideoPlaying(l)?(a.bem.add(s.screen,"fixed"),m()):e.stopVideo(l)),a.bem.toggle(s.screen,"above-audio",d)}function g(){l&&p()}function b(){l&&(p(!0),r.onWindowResize())}function v(){!function(e,t,n){null===s.screen&&function(){const e=`<div class="floating_screen_film">\n                              <div class="floating_screen_film__resizerX"></div>\n                              <div class="floating_screen_film__resizerY"></div>\n                              <div class="floating_screen_film__header">\n                                <a class="floating_screen_film__title" href="#"></a>\n                                <a class="floating_screen_film__control floating_screen_film__sourceLink" href="#" target="_blank" air-click="floating_screen_close">${a.svgHtml("external_link",10,10)}</a>\n                                <div class="floating_screen_film__control" air-click="floating_screen_close">${a.svgHtml("ui_close",10,10)}</div>\n                              </div>\n                              <div class="floating_screen_film__container"></div>\n                           </div>`;s.screen=a.parseHTML(e),s.screenHeader=a.bem.find(s.screen,"header"),s.screenTitle=a.bem.find(s.screen,"title"),s.screenSourceLink=a.bem.find(s.screen,"sourceLink"),s.screenContainer=a.bem.find(s.screen,"container"),s.screenResizerX=a.bem.find(s.screen,"resizerX"),s.screenResizerY=a.bem.find(s.screen,"resizerY"),a.append(document.body,s.screen),r=new Nt({helper:s.screenHeader,screen:s.screen,offset:i}),c=new Ft({screen:s.screen,videoContainer:s.screenContainer,header:s.screenHeader,resizerX:s.screenResizerX,resizerY:s.screenResizerY,maxWidth:600,minWidth:400,cookieName:"floating_screen_width",onEnd:e=>{o.width=e.width,o.height=e.height}})}();e?(n&&a.css(n,{width:a.width(n)+"px",height:a.height(n)+"px"}),t&&a.append(s.screenContainer,t),a.bem.add(s.screen,"shown"),p()):(t&&(n&&!a.hasChildElement(n)?a.append(n,t):a.remove(t)),a.bem.remove(s.screen,"shown"))}(null!==l,s.currentContent,s.currentParent)}function y(e){return a.find(`.floating_screen_parent[data-video-id="${e}"]`)||null}function w(){return A.d}function _(){s.currentParent=null!==l?y(l):null}function k(){null!==l&&e.stopVideo(l),l&&f()}function C({state:e}){d=e,a.bem.toggle(s.screen,"above-audio",e)}this.init=function(){s.screen?this.refresh():w()&&(s.screen=null,s.screenHeader=null,s.screenContainer=null,s.currentContent=null,s.currentParent=null,e.on("Gonna play video",h),e.on("Gonna stop video",f),a.on(window,"scroll.floatingScreen",g),a.on(window,"resize.floatingScreen",b),Rn.on("floating_screen_close",k),t.on("floating_player_visibility_change",C),n.on("Propaganda shown",b))},this.checkScreenPositionAndSize=function(){p(!0)},this.refresh=function(){u=null,w()&&(_(),v(),setTimeout(()=>{p(!0)},0))},this.destroy=function(){this.refresh()}}));var Dn=n(76);Air.define("module.captcha",(function(){const e=[Object(v.c)("It seems to us that you're a robot. You're not a robot, are you?"),Object(v.c)("If you're not a robot, you can easily pass a small humanity test"),Object(v.c)("Our robots believe that you are a robot. You're not a robot, are you?")];function t(e){N.log("captcha","Getting API..."),Dn.a((function(){window.grecaptcha&&window.grecaptcha.render?(N.log("captcha","API is ready"),e(window.grecaptcha)):(N.log("captcha","API delayed..."),setTimeout(t,200,e))}))}function n(n){N.log("captcha","Show captcha wall"),function(n){const i="universal_recaptcha_"+Object($.a)();N.log("captcha","Rendering: getting template..."),H.a({template:"captcha_wall",data:{id:i,text:e[Math.round(Math.random()*(e.length-1))]},onReady:function(e){N.log("captcha","Rendering: creating captcha..."),a.append(document.body,e),t((function(t){t.render(i,{sitekey:"6LeORG8UAAAAABnuR9TYdmoHmBjAS4GhEAqDHoTr",callback:function(t){a.remove(e),n(t)}}),a.one(a.bem.find(e,"close"),"click",(function(){a.remove(e),n(null)})),N.log("captcha","Rendering: ready")}))}})}(n)}this.init=function(){N.define("captcha","Captcha ◼","#000000"),c.a(418,(function(e,t){n((function(n){N.log("captcha","Got token",n),n?(t.data.captcha=n,e("repeat")):e("error")}))}))}}));class Bn{constructor(e){this.$dom={feed:e.element,container:a.bem.find(e.element,"container"),horizon:a.bem.find(e.element,"horizon")},this.data={id:a.data(this.$dom.feed,"feed-id"),more_url:a.data(this.$dom.feed,"feed-more-url"),last_id:a.data(this.$dom.feed,"feed-last-id"),last_sv:a.data(this.$dom.feed,"feed-last-sorting-value"),last_loaded_id:null,page:1},this.ajaxify=Air.import("module.ajaxify"),this.location=Air.import("module.location"),this.refreshContentModules=Air.import("fn.refreshContentModules"),this.isLoadingAvailable()?(this.scroll_manager=new Rt.a((e,t)=>{t&&this.onHorizonVisible()},{offset:2*a.windowHeight()}),this.scroll_manager.addElement(this.$dom.horizon),a.delegateEvent(this.$dom.container,"[data-content-id] a","click.feed-links",this.feedLinksHandler.bind(this)),this.checkForCachedChunk()):this.hideHorizon(!0)}getLastId(){return this.data.last_id}setLastId(e){this.data.last_id=e}getLastSv(){return this.data.last_sv}setLastSv(e){this.data.last_sv=e}setPage(e){e&&(this.data.page=e)}incrementPage(){this.data.page++}getLastLoadedId(){return this.data.last_loaded_id}setLastLoadedId(e){this.data.last_loaded_id=e}isLastIdsSame(){return this.getLastId()===this.getLastLoadedId()}isLoadingAvailable(){return!isNaN(parseFloat(this.getLastSv()))}destroy(){this.scroll_manager&&(this.scroll_manager.destroy(),this.scroll_manager=null),a.off(this.$dom.container,"click.feed-links"),this.$dom=a.nullDom(this.$dom),this.data=a.nullDom(this.data),this.clearCache()}hideHorizon(e){a.bem.toggle(this.$dom.horizon,"hidden",e)}checkHorizon(){this.isLoadingAvailable()||(this.hideHorizon(!0),this.scroll_manager.destroy(),this.scroll_manager=null)}requestContent(e,t){c.b({url:e,dataType:"json",data:{mode:"raw"},complete:t})}loadContent(e){this.isLoadingAvailable()&&!this.isLastIdsSame()?(this.setLastLoadedId(this.getLastId()),this.requestContent(this.getMoreUrl(),(t,n)=>{n?(this.setLastId(0),this.setLastSv(null),e(null,n)):(this.setLastId(t.last_id),this.setLastSv(t.last_sorting_value),this.incrementPage(),this.saveRequestCache(Date.now(),t),e(t.items_html))})):e(null)}onHorizonVisible(){this.loadContent(e=>{e&&this.appendHtml(e),this.checkHorizon()})}appendHtml(e){let t=a.parseHTML(`<div class="feed__chunk" data-id="${this.lastCacheKey}"></div>`);a.html(t,e),a.append(this.$dom.container,t),this.refreshContentModules(),t=null}makeUrl(e,t,n,i){const o=`last_id=${t}&last_sorting_value=${n}&page=${i}`;return(e=e.replace(/&amp;/g,"&")).indexOf("?")>0?e+="&"+o:e+="?"+o,e}getMoreUrl(){return this.makeUrl(this.data.more_url,this.data.last_id,this.data.last_sv,this.data.page+1)}feedLinksHandler(e){const t=a.parents(e.target,"[data-content-id]");if(t){const e=a.parents(t,".feed__chunk");if(e){const n=a.data(t,"content-id"),i=a.data(e,"id");i&&this.requestsCache[i]&&(this.saveCacheToStorage(Object(R.c)(),this.requestsCache[i]),this.ajaxify.one("Before goto",()=>{this.ajaxify.replaceUrlBeforeGoTo(h.urlGlue(Object(R.c)(),"?to="+n))}))}}}saveRequestCache(e,t){let n={...t};n.page=this.data.page,this.requestsCache||(this.requestsCache={}),this.lastCacheKey=e,this.requestsCache[e]=n,n=null}restoreRequestFromCache(){let e=this.cachedRequest;this.setLastId(e.last_id),this.setLastSv(e.last_sorting_value),this.setPage(e.page),this.saveRequestCache(Date.now(),e),this.appendHtml(e.items_html),this.removeFeedCacheSubKey(Object(R.c)()),this.cachedRequest=null,e=null}clearCache(){this.requestsCache=a.nullDom(this.requestsCache)}checkForCachedChunk(){const e=Object(R.e)().to;if(e&&(this.location.replace(Object(R.c)(),!0),this.cachedRequest=this.loadCacheBySubKey(Object(R.c)()),this.cachedRequest)){this.restoreRequestFromCache();const t=a.find(`[data-feed-item-id][data-content-id="${e}"]`);t&&setTimeout(()=>{bt.a(t,{shift:-100})},500)}}saveCacheToStorage(e,t){let n=g.b("feedCachedRequest",!0);n||(n={}),n[e]=t,g.d("feedCachedRequest",n,!0)}loadCacheBySubKey(e){const t=g.b("feedCachedRequest",!0);return!(!t||!t[e])&&t[e]}removeFeedCacheSubKey(e){const t=g.b("feedCachedRequest",!0);t&&t[e]&&(delete t[e],g.d("feedCachedRequest",t,!0))}}Air.defineModule("module.feed","fn.refreshContentModules",(function(){let e;function t(e){A.h&&a.toggleClass(document.body,"show_entry_link",e)}this.init=function(){e=new l.a({module_name:"module.feed",Constructor:Bn}),t(!0)},this.refresh=function(){e.update()},this.destroy=function(){e.clear(),t(!1)}}));n(174);(new r.a).on("setMainFeedSorting",({data:e})=>{var t;t=e.type,Air.import("module.auth_data").isAuthorized()&&c.c({url:"/subsite/save_default_sorting_for_feed/"+t,success:e=>{}})});const Un=new r.a;Air.defineModule("module.live","module.live_model, module.live_view, module.page",(function(e,t,n){const i=this;var o=function(){i.show(n.isLive())};i.show=function(e){i.triggerOnce("Shown",e)},i.init=function(){o(),K.e.on(t=>{e.enable("desktop"===t)}),e.on("New items",t.processItems),Un.on("mark_comment_notification_as_read",({data:t})=>{e.markCommentNotificationAsRead(t.id)})},i.refresh=function(){o()},i.destroy=function(){e.off(),Un.off()}}));const Nn=new r.a;Air.define("module.liveCollapser","module.floatingScreen",(function(e){const t={small:{auto:"shown",shown:"auto",collapsed:"shown"},big:{auto:"collapsed",shown:"collapsed",collapsed:"auto"}},n={auto:"live-auto",shown:"live-forcibly-shown",collapsed:"live-forcibly-collapsed"};function i(){return a.bem.hasMod(document.body,"live-forcibly-shown")?"shown":a.bem.hasMod(document.body,"live-forcibly-collapsed")?"collapsed":"auto"}function o(o){const s=function(e,n){const i=t[e];if(void 0===i)return N.warn("liveCollapser",`getNextState: invalid button "${e}"`),null;{const e=i[n];return void 0===e?(N.warn("liveCollapser",`getNextState: invalid state "${n}"`),null):e}}(o,i());N.log("liveCollapser",`makeTransition: ${o}, ${i()} -> ${s}`),null!==s&&function(e){a.bem.remove(document.body,"live-auto"),a.bem.remove(document.body,"live-forcibly-shown"),a.bem.remove(document.body,"live-forcibly-collapsed");const t=n[e];D.c("live-collapsing",t,365),a.bem.add(document.body,t)}(s),e.checkScreenPositionAndSize()}this.isLiveVisible=function(){return a.find(".live").offsetHeight>0},this.init=function(){Nn.on("toggle_live_collapsing_small",()=>o("small")),Nn.on("toggle_live_collapsing_big",()=>o("big")),N.define("liveCollapser","liveCollapser (/◕ヮ◕)/","#232ED1")},this.destroy=function(){Nn.off()}}));class Hn extends u.a{constructor(e){const t=e.onMessage;e.onMessage=e=>{t(e),this.heartbeat()},super(e),this.name=e.name,this.isSpying=!1,this.socketSilenceDebouncer=null,this.delay=18e4}open(){super.open(),this.isPrimeTime()&&this.setDebouncer()}close(){super.close(),this.clear()}isPrimeTime(){const e=new Date((new Date).getTime()+108e5).getUTCHours();return e>10&&e<23}setDebouncer(){this.socketSilenceDebouncer=new f.a(()=>{this.catch()}),this.socketSilenceDebouncer.debounce(this.delay),this.isSpying=!0}heartbeat(){this.isSpying&&(this.isPrimeTime()?(console.log("♪~ ᕕ(ᐛ)ᕗ Live is alive"),this.socketSilenceDebouncer.debounce(this.delay)):this.clear())}catch(){console.warn("(▀̿Ĺ̯▀̿ ̿) Dead socket detected");const e=window.Air&&window.Air.get("module.hawk");e&&e.catch("Dead socket detected",{"Socket name":this.name,"Local time":(new Date).toLocaleString(),"Subscriptions count":Air.get("module.subsite_model").getSubscribedIds().length}),this.clear()}clear(){this.isSpying=!1,this.socketSilenceDebouncer&&(this.socketSilenceDebouncer.destroy(),this.socketSilenceDebouncer=null)}}class Fn{constructor(e={}){this.states={},this.handlers=[],this.handlersLength=0;for(const t in e)this.set(t,e[t])}destroy(){this.states=null,this.handlers=null}on(e,t){this.handlers[this.handlersLength++]={fn:t,states:h.listToArray(e)},this.useHandler(this.handlers[this.handlersLength-1])}useHandler(e){let t=!0;const n=e.states.map(e=>{const n=this.get(e);return void 0===n&&(t=!1),n});!0===t&&e.fn.apply(null,n)}handleStateChange(e){for(let t=0;t<this.handlersLength;t++)this.handlers[t].states.indexOf(e)>=0&&this.useHandler(this.handlers[t])}set(e,t){this.get(e)!==t&&(this.states[e]=t,this.handleStateChange(e))}get(e){return this.states[e]}}var Vn=n(33);Air.defineModule("module.live_model","module.subsite_model, module.auth_data",(function(e,t){const n=this;let i,o,s=null;var r=function(t){const n=!t.subsite_id||e.isSubscribedTo(t.subsite_id,!1),i=!t.user_id||!e.isIgnored(t.user_id);n&&i&&o.add(t)},a=function(e){n.trigger("New items",e)},l=function(){s&&(s.close(),s=null)};n.enable=function(e){i.set("is_enabled",!1!==e)},n.init=function(){i=new Fn,o=new Vn.a({delay:1e3,onFlush:a}),t.on("Change live token",(function(e){i.set("token",e)})),t.on("Notification received",r),i.on("is_enabled, token",(function(e,t){l(),o.open(e),e&&function(e){s=new Hn({name:"live"+(e?":"+e:""),onMessage:r}),s.open()}(t)}))},n.refresh=function(){},n.destroy=function(){l(),t.off(),i.destroy(),o.destroy()},n.markCommentNotificationAsRead=function(e){c.c({url:"/notifications/mark-as-read",data:{commentId:e}})}})),Air.defineModule("module.live_view","module.date, module.andropov, module.liveCollapser",(function(e,t,i){let o=null;const s="comment_add",r="comment_voted",c="comment_edited",l="comment_removed",u="comment_replied",d="entry_published",h="entry_commented",f=(e,t)=>e.hash===t.hash,m=e=>{if(!e.hash)return;const t=(e=>o.items.filter(t=>f(e,t)))(e);t.length>0&&t.forEach(p),(e=>{switch(e.type){case u:case h:o.items.forEach(t=>{f(e,t)||t.comment_id!==e.comment_id||t.pin||p(t)})}})(e),o.items.push(e),o.items.splice(0,o.items.length-20)},p=e=>{const t=o.items.indexOf(e);t>-1&&o.items.splice(t,1)},g=(e,t)=>o.items.filter(n=>n[e]===t),b=e=>{switch(e.type){case s:case r:case u:case d:case h:m(e);break;case l:g("comment_id",e.comment_id).forEach(p);break;case c:g("comment_id",e.comment_id).forEach(t=>{t.text=e.text});break;default:console.warn('module.live_view: unknown item type "%s"',e.type)}};this.processItems=n=>{if(!o)return;const i=[...n].sort((e,t)=>t.live_html?-1:1);i.forEach(b),i.some(e=>e.live_html)&&setTimeout(()=>{e.refresh(),t.refresh()},0)},this.init=async()=>{const e=a.find(document,'[air-module="module.live"]');if(!e)return;const{default:t}=await Promise.all([n.e(0),n.e(4),n.e(36)]).then(n.bind(null,1592)),i=JSON.parse(a.find(e,"textarea").textContent);o=new t({element:e,settings:i})},this.refresh=()=>{o&&o.refresh()},this.destroy=()=>{o&&(o.destroy(),o=null)}}));function qn(){return g.b("vote-quota",!0)||{}}function zn(e){const t=function(e){return qn()[e]||null}(e);return null===t?0:t.state}Air.define("module.vote_model","module.auth_data, module.content_events",(function(e,t){var n=this;n.init=function(){t.on("Event",(function(t){switch(t.type){case"comment voted":n.trigger("State updated "+t.id,{count:t.count,state:e.isMe(t.subsite_id)?t.state:void 0});break;case"content voted":n.trigger("State updated "+t.id,{count:t.count})}})),e.on("Login",()=>{g.c("vote-quota")}),e.on("Personal content voted",e=>{n.trigger("State updated "+e.id,{count:e.count,state:e.state})})},n.destroy=function(){t.off(),e.off()},n.listenContent=function(e){t.listen(e)},n.unlistenContent=function(e){t.unlisten(e)},n.updateState=function(e){n.changeState(e,(function(t,i){i?n.trigger("State update failed "+e.id):(n.trigger("State updated "+t.id,t),t.suggestion&&n.trigger("Subscription suggested "+t.id,{html:t.suggestion,owner_id:t.owner_id}),n.trigger("yap item click",t),void 0!==t.remaining_quota&&n.trigger("Remaining quota",{id:t.id,remaining_quota:t.remaining_quota,is_significant:t.is_significant}))}))},n.changeState=function({id:t,state:n,type:i,count:o},s){e.isAnon(),c.c({url:"/vote/like",data:{id:t,sign:n,type:i},success:function(e){s(e,!1)},error:function(){s({id:t},!0)}})},n.updateVotedUsers=function(e){n.getVotedUsers(e,(function(e,t){t?n.trigger("Voted users update failed "+e.id,e):n.trigger("Voted users updated "+e.id,e)}))},n.getVotedUsers=function(e,t){c.b({url:"/vote/get_likers",data:{id:e.id,type:e.type},success:function(e){t(e,!1)},error:function(){t({id:e.id},!0)}})}}));class Wn{constructor(e){this.$dom={main:e.element,count_real:a.bem.find(e.element,"value__v--real"),count_current:null,count_next:null,count_container:a.bem.find(e.element,"value"),button_minus:a.bem.find(e.element,"button--minus"),button_plus:a.bem.find(e.element,"button--plus"),users:null,users_content:null},this.data={id:a.data(e.element,"id"),content_id:a.data(e.element,"content-id"),type:parseInt(a.data(e.element,"type")),type_str:a.data(e.element,"type-str"),symbols:a.data(this.$dom.main,"symbols").split("|"),last_count:this.getCount(),animation_duration:200,animation_in_progress:!1,with_users:"1"===a.data(this.$dom.main,"with-users"),set_count_last_date:0,update_users_last_date:-1,floating_popup:a.data(this.$dom.main,"floating-popup")||null,subsite:{id:a.data(e.element,"subsite-id")||"",name:a.data(e.element,"subsite-name")||"",avatar:a.data(e.element,"subsite-avatar")||"",url:a.data(e.element,"subsite-url")||""},subsiteType:"1"===a.data(e.element,"subsite-type")?"user":"",place:a.data(e.element,"place")},this.handlers=e.handlers,this.touchTarget=null,A.h?(a.on(this.$dom.button_minus,"touchstart",this.onButtonTouchStart.bind(this)),a.on(this.$dom.button_plus,"touchstart",this.onButtonTouchStart.bind(this)),a.on(this.$dom.button_minus,"touchmove",this.onButtonTouchMove.bind(this)),a.on(this.$dom.button_plus,"touchmove",this.onButtonTouchMove.bind(this)),a.on(this.$dom.button_minus,"touchend",this.onButtonClick.bind(this,-1)),a.on(this.$dom.button_plus,"touchend",this.onButtonClick.bind(this,1))):(a.on(this.$dom.button_minus,"click",this.onButtonClick.bind(this,-1)),a.on(this.$dom.button_plus,"click",this.onButtonClick.bind(this,1))),this.data.with_users&&!A.h&&(a.on(this.$dom.count_container,"mouseenter",this.onValueHover.bind(this,!0)),a.on(this.$dom.count_container,"mouseleave",this.onValueHover.bind(this,!1))),this.data.floating_popup&&!A.h&&(a.on(this.$dom.count_container,"mouseenter",this.mouseEnterForPlusVoters.bind(this)),a.on(this.$dom.count_container,"mouseleave",this.mouseLeaveForPlusVoters.bind(this))),this.appended_suggestion=null,this.votersPopupTimeout=null,this.popover=null}getId(){return this.data.id}getContentId(){return this.data.content_id}getPlace(){return this.data.place}isInFeed(){return"feed"===this.getPlace()}isInContent(){return"content"===this.getPlace()}getType(){return this.data.type}getTypeStr(){return this.data.type_str}destroy(){a.off(this.$dom.button_minus),a.off(this.$dom.button_plus),a.off(this.$dom.count_container),this.$dom=a.nullDom(this.$dom),this.data=a.nullDom(this.data),this.handlers=a.nullDom(this.handlers),clearTimeout(this.animationTimer),this.floatingLoginPopup&&this.floatingLoginPopup.destroy(),this.floatingSubsiteSubscriptionPopup&&this.floatingSubsiteSubscriptionPopup.destroy(),this.floatingPlusVotersPopup&&this.floatingPlusVotersPopup.destroy(),this.removePopover()}handle(e,t){void 0!==this.handlers[e]&&this.handlers[e].apply(this,t)}onValueHover(e){e&&this.data.set_count_last_date>this.data.update_users_last_date&&this.handle("onRequireVotedUsers"),a.bem.toggle(this.$dom.count_container,"hovered",e)}onButtonTouchStart(e){this.touchTarget=e.target}onButtonTouchMove(e){this.touchTarget=null}onButtonClick(e,t){"touchend"===t.type&&t.target!==this.touchTarget||this.handle("onClickVote",[e])}toggleMod(e,t){a.bem.toggle(this.$dom.main,e,t)}toTextValue(e){return null===e?this.data.symbols[0]:e>=0?e:this.data.symbols[1]+-e}isHidden(e){return null===e}isUp(e,t){return!(!this.isHidden(e)&&!this.isHidden(t))||e>t}positiveOrNegative(e){return this.isHidden(e)||0===e?0:e>0?1:-1}createVirtualValue(e){return a.parseHTML(`<span class="vote__value__v vote__value__v--virtual">${e}</span>`)}getCount(){if(this.data&&void 0!==this.data.last_count)return this.data.last_count;{const e=a.data(this.$dom.main,"count");return void 0===e?null:parseInt(e)}}animate(e,t,n){var i=this,o=this.positiveOrNegative(e),s=this.toTextValue(e),r=s.length>a.text(this.$dom.count_real).length;null!==t&&(0===o?(this.toggleMod("sum-positive",!1),this.toggleMod("sum-negative",!1)):(this.toggleMod("sum-positive",1===o),this.toggleMod("sum-negative",-1===o)),r&&a.text(this.$dom.count_real,s),this.runAnimation(this.toTextValue(e),this.toTextValue(t),this.isUp(e,t),this.data.animation_duration,(function(){r||a.text(i.$dom.count_real,s),void 0!==n&&n()})))}setCount(e){var t=this;!1===this.data.animation_in_progress?e!==this.data.last_count&&(this.data.animation_in_progress=!0,this.animate(e,this.data.last_count,(function(){t.data.animation_in_progress=!1})),this.data.last_count=e):this.animationTimer=setTimeout(this.setCount.bind(this,e),this.data.animation_duration),this.data.set_count_last_date=Date.now()}runAnimation(e,t,n,i,o){var s=this;null!==this.$dom?(this.toggleMod("animation_in_progress",!0),null===this.$dom.count_current?(this.$dom.count_current=this.createVirtualValue(t),a.bem.add(this.$dom.count_current,"current")):a.text(this.$dom.count_current,t),null===this.$dom.count_next?this.$dom.count_next=this.createVirtualValue(e):a.text(this.$dom.count_next,e),n?a.bem.add(this.$dom.count_next,"next"):a.bem.add(this.$dom.count_next,"prev"),a.append(this.$dom.count_container,this.$dom.count_current),a.append(this.$dom.count_container,this.$dom.count_next),n?(a.bem.add(this.$dom.count_current,"current_prev"),a.bem.add(this.$dom.count_next,"next_current")):(a.bem.add(this.$dom.count_current,"current_next"),a.bem.add(this.$dom.count_next,"prev_current")),setTimeout((function(){a.remove(s.$dom.count_current),a.remove(s.$dom.count_next),a.bem.remove(s.$dom.count_current,"current_prev"),a.bem.remove(s.$dom.count_current,"current_next"),a.bem.remove(s.$dom.count_next,"next"),a.bem.remove(s.$dom.count_next,"prev"),a.bem.remove(s.$dom.count_next,"next_current"),a.bem.remove(s.$dom.count_next,"prev_current"),s.toggleMod("animation_in_progress",!1),void 0!==o&&o()}),i)):void 0!==o&&o()}setState(e){this.toggleMod("voted-positive",1===e),this.toggleMod("voted-negative",-1===e)}getState(){return parseInt(a.data(this.$dom.main,"state"))}removePopover(){this.popover&&(this.popover.$destroy(),a.remove(this.popover.$el),this.popover=null)}setVotedUsers(e){this.removePopover();const t=a.parseHTML("<div></div>");a.append(this.$dom.count_container,t);const i=Object.values(e);if(0===i.length)return;const o=i.reduce((e,{avatar_url:t,user_name:n,user_url:i,sign:o,country_code:s="unknown"})=>(e[s]||(e[s]={title:s,items:[]}),e[s].items.push({image:t,label:n,url:i,color:1===o?"#2EA83A":"#E52E3A"}),e),{});let s=Object.values(o);1===s.length?s=s[0].items:(s.forEach(e=>{e.title=`${e.title.toUpperCase()} (${e.items.length})`}),s.sort((e,t)=>t.items.length-e.items.length)),Promise.all([n.e(0),n.e(2),n.e(3),n.e(86)]).then(n.bind(null,1542)).then(({default:e})=>{this.popover=e(t,s)}),this.data.update_users_last_date=Date.now()}makeItRelative(e){a.bem.toggle(this.$dom.main,"relative",e)}showAnonLoginPopup(e,t){const i=e+" "+Object(v.a)("vote","votes",e);this.floatingLoginPopup&&this.floatingLoginPopup.destroy(),Promise.all([n.e(0),n.e(1),n.e(4),n.e(60)]).then(n.bind(null,1556)).then(({default:e})=>{this.floatingLoginPopup=new e({position:{target:this.$dom.button_plus,offset:[-10,10]},options:{bubble:{width:"220"},blocks:[{type:"title",text:"%site_name%"},{type:"text",text:Object(v.c)("You have %{ votesRemain } remained, authorize",{votesRemain:i})},{type:"login"}]},events:{onLogin:e=>{t&&t(e)},onClose:()=>{t&&t(!1),setTimeout(()=>{this.floatingLoginPopup.destroy()},500)}}})})}hideAnonLoginPopup(){this.floatingLoginPopup&&this.floatingLoginPopup.show(!1)}showSubsiteSubscriptionPopup(){this.floatingSubsiteSubscriptionPopup&&this.floatingSubsiteSubscriptionPopup.destroy(),Promise.all([n.e(0),n.e(1),n.e(4),n.e(60)]).then(n.bind(null,1556)).then(({default:e})=>{this.floatingSubsiteSubscriptionPopup=new e({position:{target:this.$dom.button_plus,anchors:["br","tr"],offset:[10,-10]},options:{bubble:{width:"220",arrowAlignment:"bottom right"},blocks:[{type:"title",text:this.data.subsite.name,image:this.data.subsite.avatar,link:this.data.subsite.url},{type:"text",text:"user"===this.data.subsiteType?Object(v.c)("Don't miss new posts from the user"):Object(v.c)("Don't miss new posts from the subsite")},{type:"subscription",id:this.data.subsite.id}]},events:{onSubscribe:()=>{setTimeout(()=>{this.floatingSubsiteSubscriptionPopup.show(!1)},250)},onClose:()=>{setTimeout(()=>{this.floatingSubsiteSubscriptionPopup.destroy()},500)}}})})}hideSubsiteSubscriptionPopup(){this.floatingSubsiteSubscriptionPopup&&this.floatingSubsiteSubscriptionPopup.show(!1)}showPlusVotersPopup(){if(this.floatingPlusVotersPopup)return void this.floatingPlusVotersPopup.show(!0);let e=[];switch(this.data.floating_popup){case"default":e=[{type:"title",text:`${Math.abs(this.getCount())} ${Object(v.a)("vote","votes",this.getCount())}`},{type:"text",text:Object(v.c)("See who voted for posts")}],e.push({type:"button",text:Object(v.c)("More"),link:"/plus",gtm:"Plus — Vote users — Clicked"});break;case"old":e=[{type:"title",text:Object(v.c)("Old data")},{type:"text",text:Object(v.c)("Voted lists can only be seen for new posts")}]}Promise.all([n.e(0),n.e(1),n.e(4),n.e(60)]).then(n.bind(null,1556)).then(({default:t})=>{this.floatingPlusVotersPopup=new t({position:{target:this.$dom.count_container,anchors:["tc","bc"],offset:[-90,10]},options:{bubble:{width:"220",arrowAlignment:"top right",close:!1,hoverZone:!0},blocks:e},events:{onClose:()=>{setTimeout(()=>{this.floatingPlusVotersPopup.destroy()},500)},onMouseLeave:()=>{this.votersPopupTimeout||(this.votersPopupTimeout=setTimeout(()=>{this.hidePlusVotersPopup(),this.votersPopupTimeout=null},500))},onMouseEnter:()=>{this.votersPopupTimeout=clearTimeout(this.votersPopupTimeout)}}})})}hidePlusVotersPopup(){this.floatingPlusVotersPopup&&this.floatingPlusVotersPopup.show(!1)}mouseEnterForPlusVoters(){this.votersPopupTimeout||(this.votersPopupTimeout=setTimeout(()=>{this.showPlusVotersPopup(),this.votersPopupTimeout=null},250))}mouseLeaveForPlusVoters(){this.votersPopupTimeout=clearTimeout(this.votersPopupTimeout)}}class Yn{constructor(e){const t=this;this.vote_model=Air.import("module.vote_model"),this.subsite_model=Air.import("module.subsite_model"),this.VoteView_instance=new Wn({element:e.element,handlers:{onClickVote:e=>{const n=t.store.get("state");let i=0;i=0===n?e:n===e?-e:2*e,e===n&&(e=0),t.store.set({count:t.store.get("count")+i,state:e}),t.sendAnalytics(t.VoteView_instance.getTypeStr(),e)},onRequireVotedUsers:function(){t.vote_model.updateVotedUsers({id:t.VoteView_instance.getId(),type:t.VoteView_instance.getType()})}}}),this.store=new st.a({props:{count:this.VoteView_instance.getCount(),state:this.VoteView_instance.getState()},handlers:{viewChange:function(e,n,i){switch(e){case"count":t.VoteView_instance.setCount(n);break;case"state":t.VoteView_instance.setState(n)}},viewRequestModelChange:function(e,n){switch(e){case"state":t.vote_model.updateState({id:t.VoteView_instance.getId(),type:t.VoteView_instance.getType(),state:n,count:t.VoteView_instance.getCount()})}}},name:"vote #"+this.VoteView_instance.getId()}),this.vote_model.on("State updated "+this.VoteView_instance.getId(),(function(e){t.store.commit({state:e.state,count:e.count})})),this.vote_model.on("State update failed "+this.VoteView_instance.getId(),(function(){t.store.revert()})),this.vote_model.on("Voted users updated "+this.VoteView_instance.getId(),(function(e){t.VoteView_instance.setVotedUsers(e.likers);let n=0;for(const t in e.likers){const{sign:i}=e.likers[t];n+=i}t.store.commit({count:n})})),this.vote_model.on("Subscription suggested "+this.VoteView_instance.getId(),(function(e){t.VoteView_instance.showSubsiteSubscriptionPopup(),t.subsite_model.one("Subscription updated "+e.owner_id,(function(e){e.state&&t.VoteView_instance.hideSubsiteSubscriptionPopup()}))})),this.vote_model.on("Remaining quota",({id:e,remaining_quota:t,is_significant:n})=>{e===this.VoteView_instance.getId()&&n?this.VoteView_instance.showAnonLoginPopup(t,e=>{}):this.VoteView_instance.hideAnonLoginPopup()}),this.wasListened=!1}setStoredState(){const e=zn(this.VoteView_instance.getId());0!==e&&this.store.commit({state:e})}destroy(){this.wasListened&&this.vote_model.unlistenContent(this.VoteView_instance.getContentId()),this.vote_model.off(),this.subsite_model.off(),this.VoteView_instance.destroy(),this.store.destroy()}onVisible(e){e?(this.vote_model.listenContent(this.VoteView_instance.getContentId()),this.wasListened=!0):this.wasListened&&(this.vote_model.unlistenContent(this.VoteView_instance.getContentId()),this.wasListened=!1)}sendAnalytics(e,t){let n;switch(t){case 1:n="Up";break;case-1:n="Down";break;case 0:n="Cancel"}"comment"===e.toLowerCase()&&0===t||T.send([h.capFirstLetter(e),"Vote "+n])}}Air.define("module.votes","module.subsite_model, module.vote_model",(function(){let e;this.init=function(){e=new l.a({module_name:"module.votes",Constructor:Yn,scrollers:[{method:"onVisible",debounce:1e3}]})},this.refresh=function(){e.update()},this.destroy=function(){e.destroy()}}));class Xn{constructor(e){this.$dom={main:e.element,count:a.bem.find(e.element,"count"),title:a.bem.find(e.element,"title"),icon:a.find(e.element,".icon"),ghost:null},this.data={titles:a.data(e.element,"titles").split("|"),icons:a.data(e.element,"icons").split("|"),id:a.data(e.element,"id")},this.handlers=e.handlers,this.controlling_module=e.controlling_module,this.animate_timer=null,a.on(this.$dom.main,"click",this.onClick.bind(this)),a.on(this.$dom.main,"mouseleave",this.onMouseLeave.bind(this))}getId(){return this.data.id}getType(){return parseInt(a.data(this.$dom.main,"type"))}getTypeStr(){return a.data(this.$dom.main,"type-str")}setIcon(e){a.find(this.$dom.icon,"use").setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","#"+this.data.icons[e?1:0])}setState(e){e=!1!==e,a.bem.toggle(this.$dom.main,"active",e),this.$dom.title&&a.html(this.$dom.title,this.data.titles[e?1:0]),this.setIcon(e),this.animate(e)}getState(){return a.bem.hasMod(this.$dom.main,"active")}setCount(e){a.bem.toggle(this.$dom.main,"non_zero",e>0),a.bem.toggle(this.$dom.main,"zero",0===e),this.$dom.count&&a.text(this.$dom.count,e)}getCount(){return parseInt(a.data(this.$dom.main,"count"))}onClick(){a.bem.add(this.$dom.main,"just_clicked"),void 0!==this.handlers.click&&this.handlers.click()}onMouseLeave(){a.bem.remove(this.$dom.main,"just_clicked"),void 0!==this.handlers.mouseLeave&&this.handlers.mouseLeave()}animate(e){clearTimeout(this.animate_timer),a.bem.remove(this.$dom.main,"animated"),e&&(null===this.$dom.ghost&&(this.$dom.ghost=a.clone(this.$dom.icon,!0),a.addClass(this.$dom.ghost,a.bem.getMainClass(this.$dom.main)+"__ghost"),a.prepend(this.$dom.main,this.$dom.ghost)),a.bem.add(this.$dom.main,"animated"),this.animate_timer=setTimeout(a.bem.remove.bind(a.bem,this.$dom.main,"animated"),700))}destroy(){clearTimeout(this.animate_timer),a.off(this.$dom.main),this.$dom=a.nullDom(this.$dom),this.data=a.nullDom(this.data),this.handlers=a.nullDom(this.handlers),this.controlling_module=null,this.animate_timer=null}}class Jn{constructor(e){this.controlling_module=e.controlling_module,this.favorite_model=Air.import("module.favorite_model"),this.FavoriteView_instance=new Xn({element:e.element,handlers:{click:()=>{this.sendAnalytics(this.FavoriteView_instance.getTypeStr(),!this.store.get("state")),this.store.set({state:!this.store.get("state"),count:this.store.get("count")+(this.store.get("state")?-1:1)})}}}),this.favorite_model.on("Updated "+this.FavoriteView_instance.getId(),e=>{this.store.commit({state:e.state,count:e.count})}),this.favorite_model.on("Update failed "+this.FavoriteView_instance.getId(),e=>{this.store.revert()}),this.store=new st.a({props:{state:this.FavoriteView_instance.getState(),count:this.FavoriteView_instance.getCount()},handlers:{viewChange:(e,t)=>{switch(e){case"state":this.FavoriteView_instance.setState(t);break;case"count":this.FavoriteView_instance.setCount(t)}},viewRequestModelChange:(e,t)=>{switch(e){case"state":this.favorite_model.setState({id:this.FavoriteView_instance.getId(),type:this.FavoriteView_instance.getType(),state:t})}}},name:"favorite #"+a.data(e.element,"id")})}sendAnalytics(e,t){("content"!==e.toLowerCase()||t)&&T.send([h.capFirstLetter(e),"Favorite "+(t?"Add":"Remove")])}destroy(){this.FavoriteView_instance.destroy(),this.favorite_model.off(),this.store.destroy()}}Air.define("module.favorite_model",(function(){const e=this;e.setState=function(t){e.changeState(t,(function(t,n){n?e.trigger("Update failed "+t.id,t):e.trigger("Updated "+t.id,t)}))},e.changeState=function(t,n){c.c({url:"/favorite/change",data:{id:t.id,type:t.type,state:!1!==t.state},success:function(t){n({id:t.id,state:t.state,count:t.count},!1),e.trigger("yap item click",t)},error:function(){n({id:t.id},!0)}})}})),Air.defineModule("module.favorite","module.favorite_model",(function(){const e=this;let t;e.init=function(){t=new l.a({module_name:"module.favorite",Constructor:Jn,controlling_module:e})},e.refresh=function(){t.update()},e.destroy=function(){e.off(),t.destroy()}}));var Kn=n(108);Air.define("module.notifiesList","module.auth_data",(function(e){const t=this,n="u-notification--unread",i="u-notification--read",o="l-hidden",s="notify-new-items-label",r="notify-new-items-label--loading",c="u-notification__link";let l=[],u=!1,d=null;let h=null;const f={switchState(e,t){const n="true"===e.dataset.expanded;let i="",o="",s=e.dataset.texts;s=s.split("|"),i=s[0],o=s[1],t?(e.textContent=i,e.dataset.expanded=!1):(e.textContent=n?i:o,e.dataset.expanded=!n)},clicked(){const e=a.parents(this,'[name="js-notify"]');console.assert(e,"Notify-toggler's holder was not found");const t=e.querySelector('[name="js-notify-subject"]');t&&(t.classList.toggle(o),f.switchState(this))},hideAllInList(e){const t=e.querySelectorAll('[name="js-notify-subject-toggler"]'),n=e.querySelectorAll('[name="js-notify-subject"]');for(var i=t.length-1;i>=0;i--)f.switchState(t[i],!0);for(var s=n.length-1;s>=0;s--)n[s].classList.add(o)}},m={button:{show(e){e.classList.remove(o)},hide(e){e.classList.add(o)},findIn:e=>a.find(e,'[name="js-notify-mark-all-as-read"]'),clicked(){Kn.c(),m.doAll(),m.button.hide(this)}},doAll(){for(var e=0;e<l.length;e++){a.findAll(l[e],"."+n).forEach(p)}},showButtonIfNeed(e,t){a.findAll(e,"."+n).length&&m.button.show(t)}};function p(e){e.classList.remove(n),e.classList.add(i)}function g(){const e=a.parents(this,'[name="js-notify"]'),t=e.dataset.ids;Kn.b(t,null,(function(){var t;(t=e).classList.add(n),t.classList.remove(i)})),p(e)}function b(e,n){const i=a.findAll(e,`[name="js-notify"][data-target="${n}"]`);for(var o=i.length-1;o>=0;o--)i[o].remove();t.trigger("Notifies removed")}function y(e){console.assert(e&&void 0!==e.items_html,"module.notifiesList: wrong server response format"),l.forEach(t=>{t.innerHTML="",t.insertAdjacentHTML("beforeend",e.items_html)})}function w(){_log("Updating notifies list..."),h.classList.add(r),Kn.a(null,e=>{y(e),h.classList.remove(r)},()=>_log("Error while loading notifications"))}function _(e){if("comment_removed"!=e.type)A.d&&(d||(d=new Audio(window.__static_path+"/audio/notify.mp3")),d.play()),l.forEach(e=>{h=e.querySelector("."+s),h||(h=a.make("div",[s],{textContent:Object(v.c)("Show new notifications")}),h.appendChild(a.preloader()),e.insertAdjacentElement("afterbegin",h),a.on(h,"click",w))});else for(var t=0;t<l.length;t++)b(l[t],e.comment_id)}function k(e){return this.matches(e)}function C(e){var i=e.target,o=this.dataset.ids,s="true"===this.dataset.newTab,r=e.ctrlKey||e.metaKey;if(['[name="js-notify-subject-toggler"]','[name="js-notify-mark-as-read"]','[name="js-etc-controls"]',"a"].some(k,i)&&!i.classList.contains(c))return;this.classList.contains(n)&&(Kn.b(o),p(this));const l=a.attr(i,"href");if(l&&(s||r)){let t=window.open(l,"_blank");t.focus(),t=null,e.preventDefault()}t.trigger("Notify clicked",{notify:this,type:this.dataset.type,sign:this.dataset.sign,hide:!r})}function S(e){let t=null,n=null;t=a.find(e,'[name="js-notifications-items"]'),n=m.button.findIn(e),t&&(a.delegateEvent(t,'[name="js-notify-subject-toggler"]',"click",f.clicked),a.delegateEvent(t,'[name="js-notify-mark-as-read"]',"click",g),a.delegateEvent(document,'.u-notification[name="js-notify"]',"click.notifiesList",C),m.showButtonIfNeed(t,n),a.on(n,"click",m.button.clicked),l.push(t))}function x(e){const t=a.findAll('[name="js-notify-mark-all-as-read"]');if(t.length)for(var n=t.length-1;n>=0;n--)a.off(t[n]);a.off(e),a.off(document,"click.notifiesList")}t.markReadAll=m,t.subjectToggler=f,t.appendItems=y,t.markReadById=function(e){const t=a.find(`.head-notifies .u-notification[data-id="${e}"]`);t&&g.call(t)},t.init=function(){const n=a.findAll(document,'[air-module="module.notifiesList"]');n&&(t.on("Notify clicked",(function(e){switch(e.type){case"2":1==e.sign?T.sendDefaultEvent("Notifications — Comment-Liked notification clicked"):T.sendDefaultEvent("Notifications — Comment-Disliked notification clicked")}})),n.forEach(S),u||(e.on("Notification received",_),u=!0))},t.refresh=function(){t.destroy(!1),t.init()},t.destroy=function(n=!0){l.forEach(x),l=[],n&&e.off(),h&&a.off(h),t.off(),d=null}})),Air.define("module.notifiesLoader",(function(){let e=null;this.init=async()=>{const{default:t}=await n.e(40).then(n.bind(null,1543));e=new l.a({moduleName:"module.notifiesLoader",Constructor:t})},this.refresh=()=>{e&&e.update()},this.destroy=()=>{e&&e.destroy()}})),Air.define("module.page_search","fn.refreshContentModules",(function(e){let t={},n=null,i=1,o=null,s=null,r=null,l=!1;function u({feed_html:o,is_finished:s}){o&&(i+=1,function(n){let i=a.parseHTML('<div class="search_results__chunk"></div>');a.html(i,n),a.append(t.content,i),e(),i=null}(o),s&&(n.destroy(),n=null,a.remove(t.horizon)))}function d(){(function(e,t,n,i){if(!l)return l=!0,new Promise((o,s)=>{l=!0,c.b({url:`/search_ajax/v2/${t}/${n}/${i}?query=${encodeURIComponent(e)}`,success:o,error:s,complete:()=>{l=!1}})})})(o,r,s,i+1).then(u)}this.init=function(){i=1,l=!1,t.main=this.elements[0].element,t.content=a.find(t.main,"[data-search-content]"),t.horizon=a.find(t.main,"[data-search-horizon]"),o=a.data(t.main,"search-query"),s=a.data(t.main,"search-order"),r=a.data(t.main,"search-entity"),n=new Rt.a((e,t)=>{t&&d()},{offset:2*a.windowHeight()}),t.horizon&&n.addElement(t.horizon),T.sendDefaultEvent("Search — "+o)},this.refresh=function(){this.destroy(),this.init()},this.destroy=function(){t=a.nullDom(t,{}),n&&(n.destroy(),n=null)}}));n(136);class Gn{constructor({element:e}){this.moduleAndropov=Air.import("module.andropov"),this.$dom={main:e};const t=a.find(e,"xmp");this.data=t?JSON.parse(a.html(t)):{},a.html(e,a.svgHtml("ui_photo",22,21)),a.on(e,"click",this.uploadFiles.bind(this))}destroy(){a.off(this.$dom.main)}uploadFiles(){m.callFileUploader({accept:"image/*"}).then(e=>this.save(e[0]))}save(e){this.setLoadingState(!0),m.uploadFiles([e],e=>{const t=JSON.stringify(e[0]);let n;void 0!==this.data.dataField?(n={},n[this.data.dataField]=t):n=t,c.c({url:this.data.url,data:n,success:({src:e})=>{this.moduleAndropov.setImageSrc(this.data.imageName,e)},error:e=>{(this.data.msg||this.data.msg.error)&&p.error(`${this.data.msg.error}: ${e.toLowerCase()}`)},complete:()=>{this.setLoadingState(!1)},ignore_error_notify:!0})})}setLoadingState(e=!0){a.bem.toggle(this.$dom.main,"loading",e)}}Air.define("module.imageUploader",(function(){let e;this.init=function(){e=new l.a({module_name:"module.imageUploader",Constructor:Gn})},this.refresh=function(){e.update()},this.destroy=function(){e.destroy()}}));n(129),n(130);function Qn(e,t){h.isEmail(e)?function(e,t){c.c({url:"/email/subscribe/opt_in",data:{email:e},success:function(){t({email:e})},error:function(e){t(null,e)},ignore_error_notify:!0})}(e,t):t(null,Object(v.c)("Please enter a valid email"))}class Zn{constructor({element:e}){this.$dom={main:e,form_input:a.find(e,".email_subscribe_form__input"),form_submit:a.find(e,".email_subscribe_form__submit"),wrap:a.find(e,".email_subscribe__wrap"),done:a.find(e,".email_subscribe__done")},this.data={id:a.data(this.$dom.main,"email-subscribe-id"),is_shown:!1,name:a.data(this.$dom.main,"email-subscribe-name")},a.click(this.$dom.form_submit,this.submit.bind(this)),a.enter(this.$dom.form_input,this.submit.bind(this))}submit(){Qn(a.val(this.$dom.form_input),this.handleSubmitResponse.bind(this))}clearForm(){a.val(this.$dom.form_input,"")}handleSubmitResponse(e,t){if(null===e)p.error(t);else{this.clearForm(),this.showDone();const e=h.capFirstLetter(this.data.name);T.sendDefaultEvent("Email — WeekNewsletter — Subscribed"),T.sendDefaultEvent(`Email — WeekNewsletter — ${e} — Subscribed`)}}showDone(e=!0){a.bem.toggle(this.$dom.wrap,"shown",!e),a.bem.toggle(this.$dom.done,"shown",e)}destroy(){a.off(this.$dom.main),this.$dom.form_submit&&(a.off(this.$dom.form_submit),a.off(this.$dom.form_input)),this.$dom=a.nullDom(this.$dom),this.data=a.nullDom(this.data)}}Air.define("module.email_model",(function(){this.subscribe=function(e,t){h.isEmail(e)?this.sendEmail(e,t):t(null,Object(v.c)("Please enter a valid email"))},this.sendEmail=function(e,t){c.c({url:"/email/subscribe/opt_in",data:{email:e},success:function(){t({email:e})},error:function(e){t(null,e)},ignore_error_notify:!0})}})),Air.define("module.email_subscribe",(function(){let e;this.init=function(){N.define("email","EmailSubscribe ᕦ(ò_óˇ)ᕤ","#99ccff"),e=new l.a({module_name:"module.email_subscribe",Constructor:Zn})},this.refresh=function(){e.update()},this.destroy=function(){e.destroy()}}));const ei=new r.a;Air.define("module.commercialSidebar",(function(){let e=null;this.init=function(){!function({element:t}){Promise.all([n.e(0),n.e(56)]).then(n.bind(null,1580)).then(({default:n})=>{e=new n({container:t})})}(this.elements[0])},this.refresh=function(){this.destroy(),this.init()},this.destroy=function(){ei.off(),e.destroy()}}));const ti=new r.a;Air.define("module.commercialTabs",(function(){let e=null;this.init=function(){!function({element:t}){Promise.all([n.e(0),n.e(57)]).then(n.bind(null,1590)).then(({default:n})=>{e=new n({container:t})})}(this.elements[0])},this.refresh=function(){this.destroy(),this.init()},this.destroy=function(){ti.off(),e.destroy()}})),Air.define("module.feedSorting",(function(){let e=null;this.init=async()=>{const{default:t}=await Promise.all([n.e(0),n.e(2),n.e(3),n.e(33)]).then(n.bind(null,1544));e=new l.a({moduleName:"module.feedSorting",Constructor:t})},this.refresh=()=>{e&&e.update()},this.destroy=()=>{e&&e.destroy()}}));var ni=n(147);Air.define("module.inputs",(function(){var e=this;let t=[];function n(e){t.find(t=>t.input===e)||t.push(new ni.a({input:e}))}e.processVisibleIn=function(e){!function(e){e.forEach(n)}(a.findAll(e,'input[maxlength], textarea[maxlength], [contenteditable="true"][maxlength]'))},e.destroyVisibleIn=e=>{!function(e){e.forEach(e=>{const n=t.find(t=>t.input===e);n&&(n.destroy(),t.splice(t.indexOf(n),1))})}(a.findAll(e,'input[maxlength], textarea[maxlength], [contenteditable="true"][maxlength]'))},e.init=function(){e.processVisibleIn(document)},e.refresh=function(){e.destroy(),e.init()},e.destroy=function(){t.forEach(e=>e.destroy()),t=[]}})),Air.define("module.servicesHeader",(function(){let e=null;this.init=async()=>{const{default:t}=await Promise.all([n.e(0),n.e(2),n.e(12),n.e(42)]).then(n.bind(null,1591));e=new l.a({moduleName:"module.servicesHeader",Constructor:t})},this.refresh=()=>{e&&e.update()},this.destroy=()=>{e&&e.destroy()}})),Air.define("module.servicesSidebar",(function(){let e=null,t="";this.setPrevRootUrl=e=>{t=e},this.getPrevRootUrl=()=>t,this.init=async()=>{const{default:t}=await Promise.all([n.e(0),n.e(2),n.e(4),n.e(3),n.e(43)]).then(n.bind(null,1560));e=new l.a({moduleName:"module.servicesSidebar",Constructor:t,controlling_module:this})},this.refresh=()=>{e&&(e.callInstancesMethod("updatePrevRootUrl"),e.update())},this.destroy=()=>{e&&e.destroy()}})),Air.define("module.showcase",(function(){let e=null;this.init=async()=>{const{default:t}=await Promise.all([n.e(0),n.e(2),n.e(6),n.e(7),n.e(45)]).then(n.bind(null,1554));e=new l.a({moduleName:"module.showcase",Constructor:t})},this.refresh=()=>{e&&e.update()},this.destroy=()=>{e&&e.destroy()}}));var ii=n(45),oi=n.n(ii),si=n(68);Air.define("module.sidebar","module.page, module.new_entries, module.scrollLocker, module.push_buttons",(function(e,t,i){const o=this,s={};let r,c,l=K.a;function u(){return[Mt.AllRecent,Mt.MyRecent].includes(t.getDefaultFeedType())}function d(n=K.a){let i=!1;if(c){let e=o.delegated_data[l].filter(e=>"subscriptions"===e.name)[0],t=!1;g(o.delegated_data[l],e=>{e.id===c.id&&(r.commit("SET_GEO",{item:e,value:!0}),t=!0)}),!1===t&&e.options.items.unshift(c),e.options.items.sort((e,t)=>e.geo?-1:t.geo?1:0),e=null}if(g(o.delegated_data[l],e=>{e.active=b(e),e.childItem&&(e.childItem.active=b(e.childItem)),!i&&e.active&&(i=!0)}),!i){const t=e.getSubsite();if(t){let e=o.delegated_data[l].filter(e=>"subscriptions"===e.name)[0];if(e){const n={id:t.id,text:t.name,image:t.avatar,url:t.url,active:!0,favourite:!1};e.options.items.unshift(n),e=null}}}const s=t.getUnreadCount();u()&&h("/",s),f(["/new","/all/new"],s),m(s),p()}function h(e,t){g(o.delegated_data[l],n=>{n.url===e&&(n.badge=t)})}function f(e,t){g(o.delegated_data[l],n=>{const i=n.childItem;i&&e.includes(i.url)&&(n.childItem.badge=t)})}function m(e){const t=o.delegated_data[l].find(e=>"siteNavigation"===e.name);if(!t)return;void 0===t.options.items.find(e=>void 0!==e.childItems)&&h("/new",e)}function p(){r.commit("SET_WIDGETS",o.delegated_data[l]),r.commit("UPDATE_CURRENT_SUBSITE_NAME")}function g(e,t){e.forEach(e=>{"tree-list"===e.type?e.options.items.forEach(e=>{e.items?(t(e),g(e.items,t)):t(e)}):e.type||(e.items?(t(e),g(e.items,t)):t(e))})}function b(t){const n=e.getSortingName(),i=e.getNavigationName();let o=!1;const s=t.url.split("?").shift();switch(i){case"mainpage":switch(n){case"":case"/":case"/all":case"/all/top/day":case"/all/top/week":case"/all/top/month":case"/all/top/all":case"/top/day":case"/top/week":case"/top/month":case"/top/year":case"/top/all":o=["/","/all"].includes(s);break;case"/new":case"/all/new":o=["/new","/all/new"].includes(s)}break;case"vacancies":o="/job"===s.substring(0,4);break;case"stats":o="/stats"===s;break;case"companies":o="/companies/new"===s;break;case"contacts":case"about":case"ad":case"rating":case"messenger":o=s===Object(R.c)();break;case"user_blog":o=t.id===e.getSubsite().id;break;default:a="/"+(a=i),o=(r=s).substring(r.length-a.length)===a}var r,a;return o}o.toggleSidebar=function(t,n=!0){const{body:o}=document,{PageMod:c}=e,l="boolean"==typeof t?!t:!!s.sidebar.offsetParent;if(1===parseInt(a.cssSingle(s.tint,"--mobile-behavior")))return a.toggleClass(o,"sidebar--shown",!l),l?i.unlock(s.scrollContainer):i.lock(s.scrollContainer),void r.commit("SET_SCROLL_LOCK",!l);a.bem.toggle(o,c.LeftColumn.Off,l),a.bem.toggle(o,c.LeftColumn.On,!l),n&&D.c(e.COOKIE_SIDEBAR_COLLAPSED,l?"1":"0",365)},o.restoreSidebarToLastSavedState=()=>{const t=D.a(e.COOKIE_SIDEBAR_COLLAPSED);"1"===t&&o.toggleSidebar(!1,!1),"0"===t&&o.toggleSidebar(!0,!1)},o.init=async function(){await async function(){const{default:e}=await Promise.all([n.e(0),n.e(1),n.e(4),n.e(7),n.e(79)]).then(n.t.bind(null,438,7)),{default:t}=await Promise.all([n.e(0),n.e(1),n.e(4),n.e(7),n.e(79)]).then(n.bind(null,623)),{default:i}=await Promise.all([n.e(0),n.e(1),n.e(4),n.e(7),n.e(79)]).then(n.bind(null,1545)),{default:o}=await Promise.all([n.e(0),n.e(1),n.e(4),n.e(7),n.e(79)]).then(n.bind(null,1552));await Promise.all([n.e(0),n.e(1),n.e(4),n.e(7),n.e(79)]).then(n.bind(null,445));const{default:s}=await Promise.all([n.e(0),n.e(1),n.e(4),n.e(7),n.e(79)]).then(n.t.bind(null,799,7));e.use(s),e.use(t,{observer:!0}),r=i();const c=window.Air&&window.Air.get("module.hawk");c&&c.connectVue(e),e.use(oi.a,{translations:si,defaultLanguage:window.__i18nLocale}),new e({el:a.find(".sidebar_place"),store:r,methods:{},render:e=>e(o)})}(),K.e.on(e=>{l=e,d()}),t.on("Unread count changed",e=>{u()&&h("/",e),f(["/new","/all/new"],e),m(e),p()}),s.sidebar=a.find(".sidebar"),s.tint=a.find(".sidebar__tint"),s.scrollContainer=a.find(s.sidebar,".vb-content"),a.click(s.tint,()=>{o.toggleSidebar()}),o.on("Delegated data update",e=>{c=e&&e.regional_subsite,c&&d()})},o.refresh=function(){const e=a.hasClass(document.body,"sidebar--shown");l===K.b&&e&&o.toggleSidebar(),d()}}));var ri=n(146);Air.define("module.stickySidebar",(function(){let e=null,t=null;this.init=()=>{e=this.elements[0].element,e&&(t=new ri.a({element:e,offsetTop:72,offsetBottom:20,disabledBeforeWidth:K.d.TwoColumnsAdaptive}))},this.refresh=()=>{this.destroy(),this.init()},this.destroy=()=>{e=null,t&&(t.destroy(),t=null)}}));const ai=new r.a;Air.define("module.styleguide",(function(){this.init=function(){ai.on("show-floating-popup:click",({data:e})=>{const t=a.find("#sfp-"+e.id),i=`${Object(v.c)("To vote in private subsites, you need")} <a class="t-link-classic" href="#">${Object(v.c)("paid account")}</a>`;Promise.all([n.e(0),n.e(1),n.e(4),n.e(60)]).then(n.bind(null,1556)).then(({default:n})=>{switch(e.id){case"1":new n({position:{target:t,anchors:["tl","bl"],offset:[0,15]},options:{bubble:{width:"220",arrowAlignment:"top left"},blocks:[{type:"title",image:"https://new.leonardo.osnova.io/2ebc946a-3a4e-3b31-2ee2-f85dbf343952/",text:"Сабсайт",link:"https://ya.ru"},{type:"text",text:i},{type:"button",text:"Купить за 75р",name:"buy"}]},events:{onLogin:e=>{_log("login--\x3ecallback",e)},onSubscribe:e=>{_log("subscribtion--\x3ecallback",e)},onButtonClick:e=>{_log("button--\x3ecallback",e)},onClose:e=>{_log("onClose--\x3ecallback")}}});break;case"2":new n({position:{target:t,anchors:["tl","bl"],offset:[0,15]},options:{bubble:{width:"220",arrowAlignment:"top left"},blocks:[{type:"title",text:"%site_name%"},{type:"text",text:i},{type:"subscription",id:64955}]},events:{onLogin:e=>{_log("login--\x3ecallback",e)},onSubscribe:e=>{_log("subscription--\x3ecallback",e)},onButtonClick:e=>{_log("button--\x3ecallback",e)},onClose:e=>{_log("onClose--\x3ecallback")}}})}})}),Promise.all([n.e(0),n.e(16)]).then(n.bind(null,1526)).then(({default:e})=>{new e({container:a.find("#vue-calendar"),options:{},events:{onSelect(e){_log("selected unixtime:",e)}}})})},this.refresh=function(){},this.destroy=function(){ai.off()}}));var ci=n(142);Air.defineModule("module.ui_tabs",(function(){let e=null;function t(){e.update()}this.init=()=>{e=new l.a({module_name:"module.ui_tabs",Constructor:ci.a}),a.on(window,"resize.ui_tabs",t)},this.refresh=()=>{e.update()},this.destroy=()=>{a.off(window,".ui_tabs"),e.destroy()}}));const li=new r.a;Air.defineModule("module.events_widget","module.andropov, module.events_today_label",(function(e,t){const n=this,i={};let o,s,r;function l(e){let t=a.findAll(i.items_container,".events_widget__item"),n=a.lastChild(i.items_container),o=0;a.each(t,e=>{a.hasClass(e,"events_widget__item--hidden")&&o<5&&(a.bem.toggle(e,"hidden",!1),o++)}),a.hasClass(n,"events_widget__item--hidden")||a.toggleClass(i.load_more,"l-hidden",!0),a.toggleClass(i.show_all,"l-hidden",!1),t=null,n=null}n.init=function(){i.widget=a.find(".events_widget"),o="1"===a.data(i.widget,"external"),s=a.data(i.widget,"location"),i.widget&&(i.items_container=a.bem.find(i.widget,"items"),i.show_all=a.bem.find(i.widget,"all"),i.load_more=a.bem.find(i.widget,"load_more"),li.on("events_widget_load_more:click",l),r=new Rt.a((n,l)=>{l&&(a.bem.add(a.find(i.widget,".placeholder"),"animated"),function(){let e="/widget/events";return o&&(e+="/external"),s&&(e+="?location="+s),new Promise(t=>{a.bem.toggle(i.widget,"loading",!0),c.b({url:e,success:e=>{t(e.result)},complete:()=>{a.bem.toggle(i.widget,"loading",!1)}})})}().then(n=>{!function(n,o=!1){n&&(o&&a.html(i.items_container,""),a.appendHTML(i.items_container,n),e.refresh(),t.refresh())}(n,!0)}),r.destroy(),r=null)},{offset:500}),r.addElement(i.widget))},n.refresh=function(){n.destroy(),n.init()},n.destroy=function(){li.off(),a.nullDom(i),r&&r.destroy(),r=null}}));var ui=n(71);Air.defineModule("module.geolocation","module.ajaxify",(function(e){const t=this;let n,i,o;t.init=function(){t.elements&&1===t.elements.length&&(i=a.bem.find(t.elements[0].element,"dropdown_place"),o=a.bem.find(t.elements[0].element,"city"),n=new ui.a({container:i,options:{bubble:{arrowAlignment:"top left"},search:{ajax:{url:"/job/towns/find"}},list:{type:"text",items:[]}}}),a.on(o,"click",()=>{n.show(!0)}),n.on("select",e=>{a.text(a.find(o,"span"),e.text),c.c({url:"/users/store-location",data:{city_id:e.id},success:()=>{t.trigger("City changed",e)}})}))},t.refresh=function(){t.destroy(),t.init()},t.destroy=function(){n&&(n.off(),n.destroy()),o&&a.off(o),i=o=n=null}}));const di=new r.a;Air.defineModule("module.vacancy_widget","module.andropov, module.geolocation",(function(e,t){const n=this,i={};let o,s,r;function l(){let e="/widget/job";return o&&(e+="/external"),s&&(e+="?location="+s),new Promise(t=>{a.bem.toggle(i.widget,"loading",!0),c.b({url:e,success:e=>{t(e.result)},complete:()=>{a.bem.toggle(i.widget,"loading",!1)}})})}function u(t,n=!1){t&&(n&&a.html(i.items_container,""),a.appendHTML(i.items_container,t),e.refresh())}function d(e){let t=a.findAll(i.items_container,".vacancies_widget__item"),n=a.lastChild(i.items_container),o=0;a.each(t,e=>{a.hasClass(e,"vacancies_widget__item--hidden")&&o<5&&(a.bem.toggle(e,"hidden",!1),o++)}),a.hasClass(n,"vacancies_widget__item--hidden")||a.toggleClass(i.load_more,"l-hidden",!0),a.toggleClass(i.show_all,"l-hidden",!1),t=null,n=null}function h(e){l().then(e=>{u(e,!0),a.toggleClass(i.load_more,"l-hidden",!1)})}n.init=function(){i.widget=a.find(".vacancies_widget"),o="1"===a.data(i.widget,"external"),s=a.data(i.widget,"location"),i.widget&&(i.items_container=a.bem.find(i.widget,"items"),i.show_all=a.bem.find(i.widget,"all"),i.load_more=a.bem.find(i.widget,"load_more"),di.on("vacancies_widget_load_more:click",d),t.on("City changed",h),r=new Rt.a((e,t)=>{t&&(a.bem.add(a.find(i.widget,".placeholder"),"animated"),l().then(e=>{u(e,!0)}),r.destroy(),r=null)},{offset:500}),r.addElement(i.widget))},n.refresh=function(){n.destroy(),n.init()},n.destroy=function(){di.off(),t.off(),a.nullDom(i),r&&r.destroy(),r=null}}));n(131)}]);